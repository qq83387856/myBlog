/*
* ---------------------------------------------------------
* Copyright(C) Microsoft Corporation. All rights reserved.
* ---------------------------------------------------------
*/

/*
    @license Angular Treeview version 0.1.6
    ⓒ 2013 AHN JAE-HA http://github.com/eu81273/angular.treeview
    License: MIT


    [TREE attribute]
    angular-treeview: the treeview directive
    tree-id : each tree's unique id.
    tree-model : the tree model on $scope.
    node-id : each node's id
    node-label : each node's label
    node-children: each node's children

    <div
        data-angular-treeview="true"
        data-tree-id="tree"
        data-tree-model="roleList"
        data-node-id="roleId"
        data-node-label="roleName"
        data-node-children="children" >
    </div>
*/

// if license alert is not dismissed even once, keep showing same message again and again 

/*
    @license angular-star-rating
    ⓒ 2013 AHN JAE-HA https://github.com/northwalker/angular-star-rating
    License: MIT
*/

define("Common/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("Common/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("Common/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("Common/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Common/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Common/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("Common/../../Service/WorkItemHelper",["require","exports","../Common/ExtensionStorage","../Common/Constants","../Model/Model"],function(e,t,o,n,r){var i=function(){function e(){}return e.populateWorkItemMetaDataCache=function(e,t){var r=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);r||(r={}),r[e]={category:t,color:n.WorkItemConstants.defaultWorkItemColor},o.LocalStorageService.store(o.workItemTypeMetaDataCache,r);var i=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);i||(i={}),i[t]={defaultWorkItemType:e},o.LocalStorageService.store(o.workItemCategoryMetaDataCache,i)},e.getWorkItemColor=function(e){if(this.isOffline()||!e)return n.WorkItemConstants.defaultWorkItemColor;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);
return t[e].color},e.getDefaultWorkItemType=function(e){if(this.isOffline())return r.WorkItemType.bug;var t=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);return t[e].defaultWorkItemType},e.getCategory=function(e){if(this.isOffline())return r.WorkItemCategories.BugCategory;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].category},e.isOffline=function(){var e=o.LocalStorageService.retrieve(o.activeSettingsKey);return!e||e.offlineMode?!0:!1},e._removeDirtyWorkItemFromLocalStorage=function(e){this.getCategory(e.type)===r.WorkItemCategories.BugCategory?this._removeDirtyBugFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TaskCategory?this._removeDirtyTaskFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TestCaseCategory?this._removeDirtyTestCaseFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.FeedbackResponseCategory&&this._removeDirtyFeedbackResponseFromLocalStorage()},e._removeDirtyBugFromLocalStorage=function(){o.LocalStorageService.remove(o.bugFormDirtyKey),o.LocalStorageService.remove(o.bugTitleDirtyKey),o.LocalStorageService.remove(o.unsavedBugTitleKey),o.LocalStorageService.remove(o.searchResultsForSimilarBugsKey),o.LocalStorageService.remove(o.selectedBugForUpdateKey),o.LocalStorageService.remove(o.includeImageActionLogsInBugKey)},e._removeDirtyTaskFromLocalStorage=function(){o.LocalStorageService.remove(o.taskFormDirtyKey),o.LocalStorageService.remove(o.taskTitleDirtyKey),o.LocalStorageService.remove(o.unsavedTaskDescriptionKey),o.LocalStorageService.remove(o.unsavedTaskTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInTaskKey)},e._removeDirtyFeedbackResponseFromLocalStorage=function(){o.LocalStorageService.remove(o.feedbackResponseFormDirtyKey),o.LocalStorageService.remove(o.feedbackResponseTitleDirtyKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseDescriptionKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInFeedbackResponseKey)},e._removeDirtyTestCaseFromLocalStorage=function(){o.LocalStorageService.remove(o.testCaseFormDirtyKey),o.LocalStorageService.remove(o.unsavedTestCaseStepsKey),o.LocalStorageService.remove(o.unsavedTestCaseTitleKey)},e}();t.WorkItemHelper=i}),define("Common/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("Common/WorkItem.Service",["require","exports","../../Model/Model","../../Messaging/Messaging","../../Service/WorkItemHelper","../../Common/Types"],function(e,t,o,n,r,i){var a=r.WorkItemHelper,s=function(){function e(e,t,o,n){this.$sce=e,this.$localStorage=t,this.backgroundMessaging=o,this.$q=n,this.maxAttachmentSourceUrlLength=45,this.maxColorCodeLength=6,this.colorStyleValueFormat="6px solid #{0}",this.perfReportLinkClass="PerfReportLink"}return e.prototype.beginCreateTestCase=function(e,t){this.backgroundMessaging.sendMessage(n.NotificationType.CreateTestCase,e,t)},e.prototype.beginCreateFeedbackResponse=function(e,t){this.beginCreateOrUpdateWorkItem(e),this.backgroundMessaging.sendMessage(n.NotificationType.CreateFeedbackResponse,e,t)},e.prototype.beginCreateWorkItem=function(e,t){this.beginCreateOrUpdateWorkItem(e),this.backgroundMessaging.sendMessage(n.NotificationType.CreateWorkItem,e,t)},e.prototype.beginUpdateWorkItem=function(e,t){this.beginCreateOrUpdateWorkItem(e),this.backgroundMessaging.sendMessage(n.NotificationType.UpdateWorkItem,e,t)},e.prototype.getWorkItemsByTitle=function(e,t,r){var i=this.$q.defer();return!r||a.getCategory(r)!==o.WorkItemCategories.BugCategory&&a.getDefaultWorkItemType(o.WorkItemCategories.BugCategory)!==r?this.backgroundMessaging.sendMessage(n.NotificationType.QueryTraceableWorkItems,{queryPattern:t,columns:e},function(e){e?i.resolve():i.reject()}):this.backgroundMessaging.sendMessage(n.NotificationType.QuerySimilarBugs,{queryPattern:t,columns:e},function(e){e?i.resolve():i.reject()}),i.promise},e.prototype.getFeedbackRequests=function(e){var t=this.$q.defer();return this.backgroundMessaging.sendMessage(n.NotificationType.QueryFeedbackRequests,{columns:e},function(e){e?t.resolve():t.reject()}),t.promise},e.prototype.getWorkItemById=function(e,t,r,i){var s=this.$q.defer();return r&&a.getCategory(r)===o.WorkItemCategories.BugCategory?this.backgroundMessaging.sendMessage(n.NotificationType.QueryBug,{workItemId:t,columns:e},function(e){e?s.resolve():s.reject()}):i&&i===o.WorkItemCategories.FeedbackRequestCategory?this.backgroundMessaging.sendMessage(n.NotificationType.QueryFeedbackRequestDetail,{workItemId:t,columns:e},function(e){e?s.resolve():s.reject()}):this.backgroundMessaging.sendMessage(n.NotificationType.QueryWorkItem,{workItemId:t,columns:e},function(e){e?s.resolve():s.reject()}),s.promise},e.prototype.createTraceabilityLink=function(e){if(this.$localStorage.traceabilityEnabled){var t=this.$localStorage.linkedWorkItem;e.linkedTo={id:t.fields[o.WorkItemField.id],type:t.fields[o.WorkItemField.workItemType],url:t[o.WorkItemField.url],title:t[o.WorkItemField.title]}}},e.prototype.updateWorkItemDurationInTelemetry=function(e,t){var o=new Date;e&&new Date(e.toString()).getTime()>0?this.workItemTelemetryData&&(this.workItemTelemetryData.duration=o-new Date(e)):this.workItemTelemetryData&&(this.workItemTelemetryData.duration=o-new Date(t.createdTime))},e.prototype.initializeWorkItemTelemetryData=function(e){this.workItemTelemetryData={actionLogFullImageSizeInKB:0,descriptionLength:0,isActionLogIncluded:!0,perfObservationsCount:0,actionLogCount:0,imagesCount:0,notesCount:0,duration:0,hasUpdated:!1,isCustomized:!1,errorCode:0,type:e,category:a.getCategory(e)}},e.prototype.beginCreateOrUpdateWorkItem=function(e){e.description=this.resolveImageAndVideoSrc(e.description);var t=e;t.telemetryInfo=this.workItemTelemetryData},e.prototype.resolveImageAndVideoSrc=function(e){var t=angular.element("<div>"+e+"</div>");return this.resolveImageSrc(t),this.resolveVideoSrc(t),angular.element("<div></div>").append(t).html()},e.prototype.resolveImageSrc=function(e){for(var t=e.find("img"),o=t.length,n=0;o>n;n++){var r=t[n];this.isXtImage(r)&&(r.setAttribute("src",r.getAttribute("data")),r.removeAttribute("data"),r.removeAttribute("class"))}},e.prototype.resolveVideoSrc=function(e){var t,o=e.find("video"),n=o.length;for(t=0;n>t;t++){var r=angular.element(o[t]),i=o[t].getAttribute("data-url"),a=o[t].getAttribute("data-id"),s=o[t].getAttribute("class");r.replaceWith("<p class='"+s+"' data-id='"+a+"' ><a href='"+i+"' style='margin-left:30px;'>Screen recording - "+(t+1)+"</a></p>")}var c=e.find("a");for(t=0;t<c.length;t++){var l=angular.element(c[t]),d=c[t].getAttribute("link-id");"video-link"===d&&l.remove()}},e.prototype.isXtImage=function(e){var t=e.getAttribute("class");return t?(t=t.trim().toLowerCase(),"xt-image-attachment"===t||t.indexOf("xt-image-attachment ")>=0||t.indexOf(" xt-image-attachment")>=0):void 0},e.prototype.isNewPerfDiv=function(e){var t=e.getAttribute("class");if(t&&"PerfDataContainer"===t){var o=e.getElementsByClassName(this.perfReportLinkClass);return o.length<1}return!1},e.prototype.getWorkItemColorBandStyle=function(e){var t=a.getWorkItemColor(e),o=t.length>this.maxColorCodeLength?t.substring(t.length-this.maxColorCodeLength):t,n=i.stringFormat(this.colorStyleValueFormat,o);return{"border-left":n}},e.$inject=["$sce","$localStorage","BackgroundMessaging","$q"],e}();t.WorkItemService=s}),define("Common/Session.Service",["require","exports","../../Messaging/Messaging","../../Messaging/ChromeMessaging","../../Model/Model"],function(e,t,o,n,r){var i=function(){function e(e){this.$localStorage=e}return e.prototype.startSession=function(e,t){this.startSessionWithPayload(t,e)},e.prototype.pauseSession=function(e,t){this.updateSessionState(r.SessionState.Paused,e,t)},e.prototype.declineSession=function(e,t){this.updateSessionState(r.SessionState.Declined,e,t)},e.prototype.stopSession=function(e,t){this.updateSessionState(r.SessionState.Completed,e,t)},e.prototype.createOrUpdateFeedbackSessionWithGivenState=function(e,t,r){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.CreateOrUpdateFeedbackSessionWithGivenState,e,function(e){e.isSuccess?t(e.data):r()})},e.prototype.getSession=function(){return this.$localStorage.$sync(),this.$localStorage.activeSession},e.prototype.registerLinkedWorkItem=function(e){var t=this.getSession();t.linkedWorkitems||(t.linkedWorkitems=new Array),t.linkedWorkitems.push(e),this.$localStorage.$apply()},e.prototype.startSessionWithPayload=function(e,t){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.SessionStart,e,t)},e.prototype.provideFeedback=function(e,t,r){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.ProvideFeedback,e,function(e){e&&e.isSuccess?t(e.data):r()})},e.prototype.updateSessionState=function(e,t,r){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.UpdateSessionState,e,function(e){e&&e.isSuccess?t(e.data):r()})},e.$inject=["$localStorage"],e}();t.SessionService=i}),define("Common/../../Common/StopWords",["require","exports"],function(e,t){t.StopWordList=["the","of","and","a","to","in","is","you","that","it","he","was","for","on","are","as","with","his","they","i","at","be","this","have","from","or","one","had","by","word","but","not","what","all","were","we","when","your","can","said","there","use","an","each","which","she","do","how","their","if","will","up","there","about","out","many","then","them","these","so","some","her","would","make","like","him","into","time","has","look","two","more","write","go","see","number","no","way","could","people","my","than","first","water","been","call","who","oil","its","now","find","long","down","day","did","get","come","made","may","part","b","c","d","e","f","g","h","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]}),define("Common/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("Common/../../Model/WindowHelper",["require","exports"],function(e,t){var o=function(){function e(){}return e.removeWindow=function(e){e&&(chrome.windows.remove?chrome.windows.remove(e):chrome.tabs.query({windowId:e},function(e){e.forEach(function(e){chrome.tabs.remove(e.id)})}))},e.openWindowInNewTab=function(e){chrome.tabs.create({url:e})},e}();t.WindowHelper=o}),define("Common/../../Model/Browserhelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n}),define("Common/Utility.Service",["require","exports","../../Common/StopWords","../../Common/FeatureAvailabiliy","../../Model/WindowHelper","../../Model/Browserhelper","../../Common/Constants"],function(e,t,o,n,r,i,a){var s=n.FeatureFlag,c=n.FeatureAvailibilityService,l=r.WindowHelper,d=function(){function e(e,t,o,n){this.$sce=e,this.$localStorage=t,this.$timeout=o,this.$location=n}return e.prototype.highlightText=function(e,t){var n,r=!1;if(t){var i=t.split(" ");i=i.filter(function(e){return e&&e.length>=1&&!o.StopWordList.some(function(t){return t===e.toLowerCase()})}),i.forEach(function(t){if(t){t=t.toLowerCase(),n=new RegExp(t,"gi");var o=e.match(n);if(o){r=!0;var i=o.filter(function(e,t,o){return t===o.indexOf(e)});i.forEach(function(t){n=new RegExp(t,"g"),e=e.replace(n,"@"+t+"%")})}}})}return r&&(e=e.replace(/@/g,"<span class= 'highlight' >"),e=e.replace(/%/g,"</span>")),this.$sce.trustAsHtml(e)},e.prototype.handleArrowKey=function(e,t,o){var n,r=e.keyCode,i=$(e.currentTarget),s=!1;switch(r){case a.KeyCodeConstants.leftArrow:case a.KeyCodeConstants.rightArrow:n=i.find("a");break;case a.KeyCodeConstants.upArrow:n=i.prev(),s=!0;break;case a.KeyCodeConstants.downArrow:if(o===t.id)return;n=i.next(),s=!0}n&&(n.focus(),s&&(i.attr("tabindex","-1"),n.attr("tabindex","0")))},e.prototype.isOfflineMode=function(){return!this.isOfflineModeEnabled()||this.$localStorage.activeSettings&&!this.$localStorage.activeSettings.offlineMode?!1:!0},e.prototype.isStakeholderMode=function(){return this.isStakeholderModeEnabled()&&this.$localStorage.connectionOption===a.ConnectionOptionConstants.connectedMode&&this.$localStorage.connectedMode===a.ConnectionOptionConstants.stakeholderMode?!0:!1},e.prototype.getCurrentChromeVersion=function(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):-1},e.prototype.isOfflineModeEnabled=function(){return c.isFeatureEnabled(s.OfflineMode)?!0:!1},e.prototype.isStakeholderModeEnabled=function(){return c.isFeatureEnabled(s.StakeholderMode)?!0:!1},e.prototype.launchOptionsPage=function(){chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():l.openWindowInNewTab(i.BrowserHelper.getOptionsPage())},e.prototype.isImageActionDisabledInOnlineMode=function(){return this.isOfflineMode()?!1:c.isFeatureEnabled(s.ActionLog)?!1:!0},e.prototype.isDescriptionSame=function(e,t){return angular.element("<div>"+e.trim()+"</div>").html()===angular.element("<div>"+t.trim()+"</div>").html()},e.prototype.isTimelineViewEnable=function(){var e=this.$localStorage.activeSettings;return!this.isOfflineMode()&&e.collectionDetails&&e.projectDetails&&e.teamDetails?!0:!1},e.prototype.isFeedbackRequestsViewEnabled=function(){var e=this.$localStorage.activeSettings;return this.$localStorage.connectionOption===a.ConnectionOptionConstants.connectedMode&&this.$localStorage.connectedMode===a.ConnectionOptionConstants.stakeholderMode&&e.collectionDetails&&e.projectDetails&&e.teamDetails?!0:!1},e.prototype.openLink=function(e){r.WindowHelper.openWindowInNewTab(e)},e.prototype.openLinkOnEnterPress=function(e,t){e&&e.keyCode===a.KeyCodeConstants.enterKeyCode&&this.openLink(t)},e.prototype.executeMethodOnEnterPress=function(e,t,o,n){e&&e.keyCode===a.KeyCodeConstants.enterKeyCode&&t[o].apply(t,n)},e.prototype.setTabindexOnToolbarItems=function(e){this.$timeout(function(){$(".toolbar-item a").attr("tabindex","-1"),$(".work-items a").attr("tabindex","-1"),$(".toolbar-item."+e+" a").attr("tabindex","0"),$(".close-form-button").attr("tabindex","0")},0)},e.prototype.minimizeForm=function(){var e=this;this.$timeout(function(){$(".toolbar-item.selected a").focus(),e.$location.url("/"),$(".close-form-button").attr("tabindex","-1")},0)},e.$inject=["$sce","$localStorage","$timeout","$location"],e}();t.UtilityService=d});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Common/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("Common/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("Common/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("Common/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("Common/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("Common/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("Common/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',
t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("Common/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("Common/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,
r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("Common/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("Common/../../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Common/../../TfsClient/TfsCommandExecutionModel",["require","exports"],function(e,t){!function(e){e[e.GetProjectCollections=0]="GetProjectCollections",e[e.GetTeamProjects=1]="GetTeamProjects",e[e.GetTeams=2]="GetTeams",e[e.GetDefaultAreaPath=3]="GetDefaultAreaPath",e[e.GetIteration=4]="GetIteration",e[e.GetProjectCollectionData=5]="GetProjectCollectionData",e[e.CheckLicense=6]="CheckLicense"}(t.TfsCommands||(t.TfsCommands={}));var o=(t.TfsCommands,function(){function e(){}return e}());t.TfsCommandResponse=o;var n=function(){function e(){}return e}();t.TfsCommandPayLoad=n;var r=function(){function e(){}return e}();t.TfsGetTeamsProjectsCommandData=r;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(r);t.TfsGetTeamsCommandData=i;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(i);t.TfsGetStructurePathCommandData=a}),define("Common/ConnectionInfo.Service",["require","exports","../../Tracing/Tracing","../../Messaging/Messaging","../../Messaging/ChromeMessaging","../../TfsClient/TfsCommandExecutionModel","../../Common/FeatureAvailabiliy"],function(e,t,o,n,r,i,a){var s=r.MessagingFactory,c=o.TracingService,l=a.FeatureAvailibilityService,d=a.FeatureFlag,u=function(){function e(e,t){this.$rootScope=e,this.$localStorage=t,this.millisecondsInHr=36e5,this.moduleName="ConnectionInfoService",this.checkLicense(!1)}return e.prototype.initialize=function(e){this.tfsUrl=e},e.prototype.checkLicense=function(e){if(l.isFeatureEnabled(d.XTTrialMode)){var t=this.$localStorage.licenseUpdatedDateTime,o=this.$localStorage.licenseUpdateIntervalInHrs,a=new Date,s=Math.abs(a.getTime()-t)/this.millisecondsInHr;if(e||s>o){var c=this.$localStorage.activeSettings;if(c&&!c.offlineMode&&c.serverbaseUrl){this.tfsUrl=c.serverbaseUrl;var u=new i.TfsCommandPayLoad;u.command=i.TfsCommands.CheckLicense,u.tfsUrl=this.tfsUrl,r.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.ExecuteTfsCommand,u,function(){}),this.$localStorage.licenseUpdatedDateTime=(new Date).getTime()}}}},e.prototype.getProjectCollectionData=function(e,t,o){var n=new i.TfsCommandPayLoad;n.command=i.TfsCommands.GetProjectCollectionData,n.data=new i.TfsGetTeamsProjectsCommandData,n.data.collectionId=e,this.executeCommand(n,t,o)},e.prototype.getProjectCollections=function(e,t,o){var n=new i.TfsCommandPayLoad;n.command=i.TfsCommands.GetProjectCollections,n.requiresReconnect=o,this.executeCommand(n,e,t)},e.prototype.getTeamProjects=function(e,t,o){var n=new i.TfsCommandPayLoad;n.command=i.TfsCommands.GetTeamProjects,n.data=new i.TfsGetTeamsProjectsCommandData,n.data.collectionName=e,this.executeCommand(n,t,o)},e.prototype.getTeamIterationPath=function(e,t,o,n,r){var a=new i.TfsCommandPayLoad;a.command=i.TfsCommands.GetIteration,a.data=new i.TfsGetTeamsProjectsCommandData,a.data.collectionName=e,a.data.projectName=t,a.data.teamName=o,this.executeCommand(a,n,r)},e.prototype.getTeams=function(e,t,o,n){var r=new i.TfsCommandPayLoad;r.command=i.TfsCommands.GetTeams,r.data=new i.TfsGetTeamsProjectsCommandData,r.data.collectionName=e,r.data.projectName=t,this.executeCommand(r,o,n)},e.prototype.getTeamDefaultAreaPath=function(e,t,o,n,r){var a=new i.TfsCommandPayLoad;a.command=i.TfsCommands.GetDefaultAreaPath,a.data=new i.TfsGetTeamsProjectsCommandData,a.data.collectionName=e,a.data.projectName=t,a.data.teamName=o,this.executeCommand(a,n,r)},e.prototype.executeCommand=function(e,t,o){c.traceVerbose(this.moduleName,1," Broadcasting execute tfs command message "),e.tfsUrl=this.tfsUrl,t||o?(e.sendResponse=!0,s.getBroadcastingService().broadcast(n.NotificationType.ExecuteTfsCommand,e,function(e){e.isSuccess?t(e.data):o(e)})):(e.sendResponse=!1,s.getBroadcastingService().broadcast(n.NotificationType.ExecuteTfsCommand,e))},e.$inject=["$rootScope","$localStorage"],e}();t.ConnectionInfoService=u}),define("Common/Screenshot.Service",["require","exports","../../Messaging/Messaging","../../Messaging/ChromeMessaging"],function(e,t,o,n){var r=function(){function e(){}return e.prototype.broadcastCaptureScreenshotMessage=function(){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.CaptureScreenshot,{})},e.prototype.broadcastDesktopCaptureScreenshotMessage=function(e){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.CaptureDesktopScreenshot,{screenshotType:e})},e.$inject=[],e}();t.ScreenshotService=r}),define("Common/Timeline.Model",["require","exports"],function(e,t){var o=function(){function e(){this.timelineEvents=new Array}return e.prototype.addEvent=function(e){e&&this.timelineEvents.push(e)},e.prototype.create=function(){this.timelineEvents=this.timelineEvents.sort(function(e,t){return e.createdTime<t.createdTime?1:-1})},e}();t.Timeline=o;var n=function(){function e(e,t,o,n,r,i,a){this.noteContentLimit=150,this.screenshotNameLimit=30,e.length>this.screenshotNameLimit?this.title=e.substring(0,this.screenshotNameLimit-4).concat("...png"):this.title=e,this.type=t,this.unicode=r,this.createdTime=new Date(o.toString()),this.css=i,this.colorcss=a,n&&n.length>this.noteContentLimit?this.content=n.substring(0,this.noteContentLimit).concat("..."):this.content=n}return e.prototype.getTime=function(){var e=this.createdTime.getMinutes().toString();return 1===e.length&&(e="0".concat(e)),this.createdTime.getHours()+":"+e},e}();t.TimelineEvent=n,function(e){e[e.Screenshot=0]="Screenshot",e[e.Note=1]="Note",e[e.WorkItem=2]="WorkItem",e[e.Notification=3]="Notification",e[e.LinkWorkitem=4]="LinkWorkitem",e[e.Video=5]="Video"}(t.TimelineEventType||(t.TimelineEventType={}));t.TimelineEventType}),define("Common/Timeline.Service",["require","exports","../../Model/Model","../Common/Timeline.Model","../../Tracing/Tracing","../../Common/ExtensionStorage","../../Service/WorkItemHelper","../../Model/WindowHelper","../../Model/ModelHelper"],function(e,t,o,n,r,i,a,s,c){var l=a.WorkItemHelper,d=o.AttachmentType,u=r.TracingService,g=s.WindowHelper,p="TimelineService",m=function(){function e(e,t,o,r){this.$sce=e,this.$localStorage=t,this.sessionService=o,this.$q=r,this.unicodeLookup={},this.timeline=new n.Timeline,this.createLookup()}return e.prototype.getTimeline=function(){var e=this;this.timeline=new n.Timeline;var t=this.$q.defer();return this.activeSession=this.sessionService.getSession(),this.getNowEvent(),this.getSessionStartEvent(),this.getTimelineAttachments(),this.getTimelineWorkItems(),this.getLinkWorkitemEvents(),this.getNoteAttachments(function(){e.timeline.create(),t.resolve(e.timeline)}),t.promise},e.prototype.getNowEvent=function(){var e=new Date;e.setSeconds(e.getSeconds()+10),this.timeline.addEvent(new n.TimelineEvent("Now",n.TimelineEventType.Notification,e," ",this.getUnicodeHtml("pause")))},e.prototype.getSessionStartEvent=function(){this.timeline.addEvent(new n.TimelineEvent("Session Started (Id: "+this.activeSession.id+")",n.TimelineEventType.Notification,this.activeSession.createdTime,"",this.getUnicodeHtml("start"),"start-icon"))},e.prototype.getTimelineAttachments=function(){var e=this;this.activeSession.attachments.forEach(function(t){var o;t.type===d.Screenshot&&t.timeStamp?(o=new n.TimelineEvent(t.name,n.TimelineEventType.Screenshot,t.timeStamp,t.localUrl,e.getUnicodeHtml("capture")),o.tooltip=t.name,o.description=t.source,o.execute=function(){g.openWindowInNewTab(t.source)},e.timeline.addEvent(o),u.traceVerbose(p,1,"Added screenshot "+t.name+" to timeline")):t.type===d.Video&&t.timeStamp&&(o=new n.TimelineEvent(t.name,n.TimelineEventType.Video,t.timeStamp,t.localUrl,e.getUnicodeHtml("video")),o.tooltip=t.name,o.execute=function(){g.openWindowInNewTab(t.localUrl)},e.timeline.addEvent(o),u.traceVerbose(p,5,"Added Video "+t.name+" to timeline"))})},e.prototype.getTimelineWorkItems=function(){var e=this;this.activeSession.workItems.forEach(function(t){if(t.timeStamp){var o=new n.TimelineEvent(t.type+" "+t.id,n.TimelineEventType.WorkItem,t.timeStamp,t.url,e.getUnicodeHtml(l.getCategory(t.type)),e.getWorkItemCss(t),t.type);o.description=t.title,t.linkedTo&&(o.linkedTo=t.linkedTo.type+" "+t.linkedTo.id),o.execute=function(){t.url&&g.openWindowInNewTab(t.url)},e.timeline.addEvent(o),u.traceVerbose(p,2,"Added workitem "+t.id+" to timeline")}})},e.prototype.getWorkItemCss=function(e){var t=l.getCategory(e.type);return t===o.WorkItemCategories.BugCategory?"bowtie-icon bowtie-file-bug":t===o.WorkItemCategories.FeedbackResponseCategory?"bowtie-icon bowtie-work-item":""},e.prototype.getLinkWorkitemEvents=function(){var e=this,t=this.sessionService.getSession();t.linkedWorkitems&&t.linkedWorkitems.length>0&&t.linkedWorkitems.forEach(function(t){var o=new n.TimelineEvent(t.type+" "+t.id,n.TimelineEventType.LinkWorkitem,t.timeStamp,t.url,e.getUnicodeHtml("trace"),null,t.type);o.description=t.title,o.execute=function(){g.openWindowInNewTab(t.url)},e.timeline.addEvent(o)})},e.prototype.getNoteAttachments=function(e){var t=this,o=this.activeSession.attachments.filter(function(e){return e.type===d.Note}),r=this;o&&o.length>0?o.forEach(function(a,s){i.PersistentStorageFactory.getStorageService().getBlob(a.url,function(i){var c=new FileReader;c.onloadend=function(){var i=new n.TimelineEvent(a.name,n.TimelineEventType.Note,a.timeStamp,c.result,t.getUnicodeHtml("note"),"note-icon");i.tooltip=c.result,r.timeline.addEvent(i),u.traceVerbose(p,3,"Added note "+a.name+" to timeline"),s===o.length-1&&e()},c.readAsText(i)},function(e){u.traceError(p,4,"Reading note "+a.name+" failed due to "+c.ErrorHelper.getErrorMessage(e,!1))})}):e()},e.prototype.createLookup=function(){this.unicodeLookup.start="&#57602",this.unicodeLookup.pause="&#59241",this.unicodeLookup.capture="&#57620",this.unicodeLookup.note="&#59676",this.unicodeLookup.trace="&#57802",this.unicodeLookup[o.WorkItemCategories.TaskCategory]="&#59263;",this.unicodeLookup[o.WorkItemCategories.TestCaseCategory]="&#59165;",this.unicodeLookup.video="&#57622"},e.prototype.getUnicodeHtml=function(e){var t=this.unicodeLookup[e];return t||(t=""),this.$sce.trustAsHtml(t)},e.$inject=["$sce","$localStorage","SessionService","$q"],e}();t.TimelineService=m}),define("Common/../../Perfecto/PerfectoCommandExecutionModel",["require","exports"],function(e,t){!function(e){e[e.GetDeviceList=0]="GetDeviceList",e[e.LaunchDevice=1]="LaunchDevice"}(t.PerfectoCommands||(t.PerfectoCommands={}));var o=(t.PerfectoCommands,function(){function e(){}return e}());t.PerfectoCommandResponse=o;var n=function(){function e(){}return e}();t.PerfectoCommandPayLoad=n}),define("Common/MobileXt.Service",["require","exports","../../Messaging/Messaging","../../Messaging/ChromeMessaging","../../Perfecto/PerfectoCommandExecutionModel"],function(e,t,o,n,r){var i=n.MessagingFactory,a=function(){function e(e,t){this.username=e,this.password=t}return e}();t.PerfectoMobileConnection=a;var s=function(){function e(e){this.$q=e}return e.prototype.getDevices=function(e,t){var n=new r.PerfectoCommandPayLoad;n.url=e,n.userName=t.username,n.password=t.password,n.command=r.PerfectoCommands.GetDeviceList;var a=this.$q.defer();return i.getBroadcastingService().broadcast(o.NotificationType.ExecutePerfectoCommand,n,function(e){e.isSuccess?a.resolve():a.reject(e)}),a.promise},e.prototype.launchDevice=function(e){var t=new r.PerfectoCommandPayLoad;t.command=r.PerfectoCommands.LaunchDevice,t.deviceId=e;var n=this.$q.defer();return i.getBroadcastingService().broadcast(o.NotificationType.ExecutePerfectoCommand,t,function(e){e.isSuccess?n.resolve():n.reject(e)}),n.promise},e.$inject=["$q"],e}();t.PerectoMobileCloudXtService=s}),define("Common/Traceability.Service",["require","exports","../../Messaging/Messaging"],function(e,t,o){var n=function(){function e(e,t,o,n,r){this.$localStorage=e,this.backgroundMessaging=t,this.$q=o,this.$sessionService=n}return e.prototype.startWorkItemTracing=function(e){this.$localStorage.notifyTimelineForTraceability&&(this.$localStorage.notifyTimelineForTraceability=!1,this.$localStorage.$apply(),this.$sessionService.registerLinkedWorkItem(e))},e.prototype.stopWorkItemTracing=function(e){var t=this.$q.defer();return this.backgroundMessaging.sendMessage(o.NotificationType.StopTraceability,e,function(e){e?t.resolve():t.reject()}),t.promise},e.$inject=["$localStorage","BackgroundMessaging","$q","SessionService"],e}();t.TraceabilityService=n}),define("Common/BackgroundMessaging.Service",["require","exports","../../Messaging/ChromeMessaging"],function(e,t,o){var n=function(){function e(e){this.$rootScope=e}return e.prototype.sendMessage=function(e,t,n,r){var i=this;n&&(this.$rootScope.actionInProgress=!0),o.MessagingFactory.getBroadcastingService().broadcast(e,t,function(e){i.$rootScope.actionInProgress=!1,i.$rootScope.$apply(),n&&!e?n():n&&!e.error?n(e):r&&e&&r(e.error)})},e.$inject=["$rootScope"],e}();t.BackgroundMessaging=n}),define("Common/Common.Module",["require","exports","../Common/Utility.Service","../Common/Session.Service","../Common/WorkItem.Service","../Common/Screenshot.Service","../Common/ConnectionInfo.Service","../Common/Timeline.Service","../Common/BackgroundMessaging.Service","../Common/MobileXt.Service","../Common/Traceability.Service"],function(e,t,o,n,r,i,a,s,c,l,d){angular.module("XT.Popup.Common",["ngStorage"]).service("UtilityService",o.UtilityService).service("SessionService",n.SessionService).service("WorkItemService",r.WorkItemService).service("ScreenshotService",i.ScreenshotService).service("ConnectionInfoService",a.ConnectionInfoService).service("TimelineService",s.TimelineService).service("BackgroundMessaging",c.BackgroundMessaging).service("PerectoMobileCloudXtService",l.PerectoMobileCloudXtService).service("TraceabilityService",d.TraceabilityService)}),define("CommonControls/HtmlEditor.Directive",["require","exports"],function(e,t){function o(){return{restrict:"EA",template:'<div><div class="editable-html-container" aria-label="Description" role="textbox" contenteditable strip-br="true" ng-model="htmlContent"></div></div>',scope:{htmlContent:"=content",scrollWorkItemForm:"=scroll"},link:function(e,t,o){e.$watch("htmlContent",function(o){var n=!1;if(o&&(e.scrollWorkItemForm&&(n=e.scrollWorkItemForm()),n)){var r=t.find("div");setTimeout(function(){"scroll-to-bottom"===r[r.length-1].className&&r[r.length-1].scrollIntoView()},50)}})}}}t.htmlEditor=o}),define("CommonControls/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",
e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("CommonControls/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("CommonControls/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("CommonControls/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m}),define("CommonControls/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("CommonControls/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("CommonControls/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("CommonControls/ContentEditable.Directive",["require","exports","../../Messaging/ChromeMessaging","../../Messaging/Messaging","../../Common/Types","../../Common/SessionData"],function(e,t,o,n,r,i){function a(){return{restrict:"A",require:"?ngModel",link:function(e,t,o,n){function r(){var e=t.html();o.stripBr&&"<br>"===e&&(e=""),n.$setViewValue(e)}function i(){var o=e.htmlContent;t.html(o)}n&&(n.$render=function(){t.html(n.$viewValue||"")},t.on("mousedown",function(){s()}),t.on("blur keyup change",function(){e.$evalAsync(r)}),l(t,function(){e.$evalAsync(r)}),i())}}}function s(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++){var o=e[t];o.ondragstart=function(){return!1}}}function c(e,t){return'<img class="xt-image-attachment" data="'+t+'" src="'+e+'" style="max-width:70%;border: solid 1px grey;padding: 2px;"><br>'}function l(e,t){e.on("paste",function(e){for(var o=e.clipboardData.items,n=0;n<o.length;n++)if(o[n].type.match(/image.*/)){e.preventDefault();var r=o[n].getAsFile();u(r).then(d).then(function(e){document.execCommand("inserthtml",!1,c(e.localUrl,e.webUrl)),t&&t()});break}})}function d(e){var t=new i.Screenshot(r.newGuid(),e,null,null,!0);return g.broadcastAsync(n.NotificationType.UploadInlineImage,t)}function u(e){var t=Q.defer(),o=new FileReader;return o.onload=function(e){t.resolve(e.target.result)},o.readAsDataURL(e),t.promise}var g=o.MessagingFactory.getBroadcastingService();t.contentEditable=a}),define("CommonControls/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",
e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("CommonControls/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("CommonControls/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("CommonControls/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("CommonControls/InputDropdown.Directive",["require","exports","../../Common/ExtensionStorage","../../Common/Utility"],function(e,t,o,n){var r=function(e){return function(t,o){var n,r;n=[],i.isDropDownClicked?(o(e),i.isDropDownClicked=!1):(t&&t.length>0&&(r=new RegExp(t,"i"),$.each(e,function(e,t){r.test(t)&&n.push(t)})),o(n))}},i=function(){function e(t){var o=this;this.$localStorage=t,e.prototype.scope={url:"=tfsurl"},e.prototype.restrict="EA",e.prototype.replace=!0,e.prototype.template=n.BrandingChangesHelper.getInputDropDownTemplate(),e.prototype.link=function(t,n,i){var a=o.getMruServerList();o.showSuggestion(r(a),t);var s=o;t.onDropDownClick=function(){var o=$(".typeahead");e.isDropDownClicked=!0,o.typeahead("destroy"),s.showSuggestion(r(a),t),o.focus(),o.typeahead("open"),this.isDropOpen=!0},t.isDropOpen=!1,t.isDropButtonVisible=function(){return a&&a.length>0?!0:!1},t.onMouseDown=function(e){e.preventDefault()},t.onKeyDown=function(e){13===e.keyCode&&(t.onDropDownClick(),e.stopPropagation())}}}return e.prototype.getMruServerList=function(){var e=[],t=o.LocalStorageService.retrieve(o.mostRecentlyUsedUrlsKey);return t&&$.each(t,function(t,o){e.push(o.serverUrl)}),e.reverse()},e.prototype.showSuggestion=function(e,t){var o=$(".typeahead");o.typeahead({hint:!0,highlight:!0,minLength:0},{name:"mruUrlsList",source:e}),o.bind("typeahead:cursorchange",function(e,o){t.url=o}),o.bind("typeahead:select",function(e,o){t.url=o}),o.bind("typeahead:autocomplete",function(e,o){t.url=o})},e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$compile"],t},e.isDropDownClicked=!1,e}();t.InputDropdown=i}),define("CommonControls/ngEnter.Directive",["require","exports","../../Common/Constants"],function(e,t,o){function n(){return function(e,t,n){t.bind("keydown",function(t){t.which===o.KeyCodeConstants.enterKeyCode&&(e.$apply(function(){e.$eval(n.ngEnter,{event:t})}),t.preventDefault(),t.stopImmediatePropagation())})}}t.ngEnter=n}),define("CommonControls/ngSave.Directive",["require","exports","../../Common/Constants"],function(e,t,o){function n(){return function(e,t,n){t.bind("keydown keypress",function(t){t.which===o.KeyCodeConstants.sKeyCode&&t.ctrlKey&&(e.$apply(function(){e.$eval(n.ngSave,{event:t})}),t.preventDefault())})}}t.ngSave=n}),define("CommonControls/ToLocaleDate.Filter",["require","exports"],function(e,t){function o(){return function(e){function t(e){if(e){var t=new Date(e);return t.toLocaleDateString()}return""}return t(e)}}t.toLocalDateFilter=o}),define("CommonControls/CloseForm.Directive",["require","exports"],function(e,t){function o(){return{restrict:"EA",template:'<a class="close-form-button" tabindex="0" ng-click="changeFocus()" ng-enter="changeFocus()" title="Discard unsaved changes and close" aria-label="Close" role="button">&#57610;</a>',controller:n}}var n=function(){function e(e,t,o,n){var r=this;this.$location=e,this.$scope=t,this.$rootScope=o,this.$timeout=n,this.$localScope=t,this.$localScope.changeFocus=function(){r.changeFocus()}}return e.prototype.changeFocus=function(){var e=this;this.$timeout(function(){$(".toolbar-item.selected a").focus(),e.$location.url("/"),$(".close-form-button").attr("tabindex","-1")},50)},e.$inject=["$location","$scope","$rootScope","$timeout"],e}();t.ChangeToolbarFocusController=n,t.closeFormDirective=o}),define("CommonControls/MinimizePage.Directive",["require","exports","../CommonControls/CloseForm.Directive"],function(e,t,o){function n(){return{restrict:"EA",template:'<a id="minimize-page" aria-label="Minimize" tabindex="0" class="minimize-form-button" ng-click="changeFocus()" ng-enter="changeFocus()" title="Minimize" role="button">&#57608;</a>',controller:o.ChangeToolbarFocusController}}t.minimizePageDirective=n}),define("CommonControls/DisableAnchor.Directive",["require","exports"],function(e,t){function o(){return{compile:function(e,t,o){return t.ngClick="!("+t.aDisabled+") && ("+t.ngClick+")",function(e,t,o){e.$watch(o.aDisabled,function(e){void 0!==e&&t.toggleClass("disabled",e)}),t.on("click",function(t){e.$eval(o.aDisabled)&&t.preventDefault()})}}}}t.anchorDisable=o}),define("CommonControls/DisableDrag.Directive",["require","exports"],function(e,t){function o(){return{link:function(e,t,o){t[0].ondragstart=function(){return!1}}}}t.disableDrag=o}),define("CommonControls/Scroll.Directive",["require","exports"],function(e,t){var o=function(){function e(t){e.prototype.restrict="A",e.prototype.link=function(e,o,n){e.$watch(n.scrollIntoView,function(e){e&&t(function(){var e=angular.element(document.getElementById(n.scrollContainerId)),t=o[0].getBoundingClientRect().top-e[0].getBoundingClientRect().top-o.parent()[0].scrollHeight;e[0].scrollTop=t},0)})}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$timeout"],t},e}();t.ScrollIntoView=o}),define("CommonControls/Progressbar.Directive",["require","exports"],function(e,t){function o(){return{restrict:"EA",template:'<div ng-show="$parent.$root.actionInProgress" class="progress-bar"></div>'}}t.progressBar=o}),define("CommonControls/AutoHideOnFocusLoose.Directive",["require","exports"],function(e,t){var o=function(){function e(t){e.prototype.restrict="A",e.prototype.link=function(e,o,n){e.isContentVisible=!1,t.bind("click",function(t){var n=o.find(t.target).length>0;n||e.$apply(function(){e.isContentVisible=!1})})}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$document"],t},e}();t.AutoHideOnFocusLoose=o}),define("CommonControls/../../Model/Model",["require","exports"],function(e,t){
!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("CommonControls/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("CommonControls/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("CommonControls/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("CommonControls/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("CommonControls/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,
e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("CommonControls/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("CommonControls/ErrorControl.Template",["require","exports"],function(e,t){t.errorControlTemplate='<div ng-class="cssClass" class="error-indicator-control" ng-if="errorMessage">    <div class="error-message" title="{{originalErrorMessage}}">        {{errorMessage}}    </div>    <div tabindex="0" class="clear-button" title="Dismiss error" ng-click="clear()" ng-enter="clear()">&#59153;</div></div>'}),define("CommonControls/ErrorControl.Directive",["require","exports","../../Model/Model","../../Model/ModelHelper","../../Messaging/ChromeMessaging","../../Messaging/Messaging","../../Common/ExtensionStorage","../CommonControls/ErrorControl.Template"],function(e,t,o,n,r,i,a,s){function c(){return{restrict:"EA",template:s.errorControlTemplate,controller:l}}var l=function(){function e(e,t,o,r){var i=this;this.$location=e,this.$localStorage=t,this.$scope=o,this.$rootScope=r,this.maxLength=130,this.initializeToolBarType(),this.$errorScope=o;var a=n.ErrorHelper.getError(this.toolBarType);a&&(this.setErrorMessage(a.errorMessage),this.setCssClass(a.errorLevel)),this.$errorScope.clear=function(){i.clear()},this.subscribeForErrorChangeEvent(),this.uninitializeMessaging()}return e.prototype.clear=function(){n.ErrorHelper.clearLastError(this.toolBarType,this.$rootScope);var e=a.LocalStorageService.retrieve(a.toolbarErrorMap);this.$localStorage.toolbarErrorMap=e;var t=a.LocalStorageService.retrieve(a.currentIconKey);this.$localStorage.currentIcon=t;var o=a.LocalStorageService.retrieve(a.iconBeforeErrorKey);this.$localStorage.iconBeforeError=o},e.prototype.subscribeForErrorChangeEvent=function(){var e=this;r.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onErrorChanged(t)},i.NotificationType.ActivityErrorChanged),this.unsubscribeErrorEvent=this.$rootScope.$on(i.NotificationType.ActivityErrorChanged.toString(),function(t,o){e.onErrorChanged(o,!1)})},e.prototype.setCssClass=function(e){0===e?this.$errorScope.cssClass="error":this.$errorScope.cssClass="warning"},e.prototype.onErrorChanged=function(e,t){if(void 0===t&&(t=!0),e&&e.toolbarType===this.toolBarType){this.setErrorMessage(e.errorMessage),e.errorMessage&&this.setCssClass(e.errorLevel);var o=a.LocalStorageService.retrieve(a.toolbarErrorMap);this.$localStorage.toolbarErrorMap=o,t&&this.$errorScope.$apply()}},e.prototype.setErrorMessage=function(e){this.$errorScope.originalErrorMessage=e,e&&e.length>this.maxLength?this.$errorScope.errorMessage=e.substring(0,this.maxLength-1)+"...":this.$errorScope.errorMessage=e},e.prototype.initializeToolBarType=function(){var e="#"+this.$location.path().toLowerCase();switch(e.toLowerCase()){case"#/signin":this.toolBarType=o.ToolbarType.Settings;break;case"#/bugform":this.toolBarType=o.ToolbarType.Bug;break;case"#/bugform2":this.toolBarType=o.ToolbarType.Bug2;break;case"#/taskform":this.toolBarType=o.ToolbarType.Task;break;case"#/testcase":this.toolBarType=o.ToolbarType.TestCase;break;case"#/feedbackresponseform":this.toolBarType=o.ToolbarType.FeedbackResponse;break;case"#/screenshot":this.toolBarType=o.ToolbarType.ScreenShot;break;case"#/timeline":this.toolBarType=o.ToolbarType.TimeLine;break;case"#/note":this.toolBarType=o.ToolbarType.Note;break;case"#/session":this.toolBarType=o.ToolbarType.Session;break;case"#/videocapture":this.toolBarType=o.ToolbarType.Video;break;case"#/mobilext":this.toolBarType=o.ToolbarType.MobileXt;break;case"#/traceability":this.toolBarType=o.ToolbarType.Traceability}},e.prototype.uninitializeMessaging=function(){var e=this;this.$scope.$on("$destroy",function(){e.unsubscribeErrorEvent&&e.unsubscribeErrorEvent()})},e.$inject=["$location","$localStorage","$scope","$rootScope"],e}();t.ErrorController=l,t.errorControl=c}),define("CommonControls/Url.Filter",["require","exports","../../Model/BrowserHelper"],function(e,t,o){function n(){return function(e,t){function o(e,t){return-1!==e.indexOf(t,e.length-t.length)}function n(e){return o(e,t)?!0:!1}function i(e,o){var r=document.createElement("a");r.href=o+e;var i="";return r.hostname?(n(r.hostname)||(i=t),r.href=s+r.hostname+i+"/",r):null}function a(e){if(!e)return"";var t=e.trim();if(null===t.match(c))return"";var o=null,n=document.createElement("a");return n.href=t,n.protocol&&n.protocol!==r.chromeExtensionHost&&n.protocol!==r.firefoxExtensionHost&&n.protocol!==r.edgeExtensionHost&&"file:"!==n.protocol?"https:"===n.protocol&&(o=i(t,"")):o=i(t,s),o?o.toString():""}var s="https://",c=/^[a-zA-Z0-9_.\/:-]+$/;return a(e)}}var r=o.BrowserHelper;t.urlFilter=n}),define("CommonControls/ngEscape.Directive",["require","exports","../../Common/Constants"],function(e,t,o){function n(){return function(e,t,n){t.bind("keydown",function(t){t.which===o.KeyCodeConstants.escKeyCode&&(e.$apply(function(){e.$eval(n.ngEscape,{event:t})}),t.preventDefault(),t.stopImmediatePropagation())})}}t.ngEscape=n}),define("CommonControls/CommonControls.Module",["require","exports","../CommonControls/HtmlEditor.Directive","../CommonControls/ContentEditable.Directive","../CommonControls/CloseForm.Directive","../CommonControls/MinimizePage.Directive","../CommonControls/DisableAnchor.Directive","../CommonControls/DisableDrag.Directive","../CommonControls/Scroll.Directive","../CommonControls/Progressbar.Directive","../CommonControls/AutoHideOnFocusLoose.Directive","../CommonControls/ErrorControl.Directive","../CommonControls/Url.Filter","../CommonControls/InputDropdown.Directive","../CommonControls/ngEnter.Directive","../CommonControls/ngEscape.Directive","../CommonControls/ngSave.Directive","../CommonControls/ToLocaleDate.Filter"],function(e,t,o,n,r,i,a,s,c,l,d,u,g,p,m,f,h,v){angular.module("XT.Popup.CommonControls",[]).directive("contenteditable",n.contentEditable).directive("xtCloseform",r.closeFormDirective).directive("xtMinimizepage",i.minimizePageDirective).directive("aDisabled",a.anchorDisable).directive("dragDisabled",s.disableDrag).directive("xtEditor",o.htmlEditor).directive("scrollIntoView",c.ScrollIntoView.factory()).directive("progressBar",l.progressBar).directive("autoHideOnFocusLoose",d.AutoHideOnFocusLoose.factory()).directive("errorControl",u.errorControl).directive("inputDropdown",p.InputDropdown.factory()).directive("ngSave",h.ngSave).directive("ngEnter",m.ngEnter).directive("ngEscape",f.ngEscape).filter("urlFilter",g.urlFilter).filter("toLocaleDateFilter",v.toLocalDateFilter)}),define("Toolbar/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("Toolbar/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("Toolbar/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("Toolbar/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost;
},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Toolbar/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Toolbar/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Toolbar/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("Toolbar/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("Toolbar/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("Toolbar/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("Toolbar/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("Toolbar/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("Toolbar/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("Toolbar/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("Toolbar/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',
t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("Toolbar/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("Toolbar/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,
r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("Toolbar/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("Toolbar/Toolbar.Controller",["require","exports","../../Model/Model","../../Messaging/Messaging","../../Model/ModelHelper","../../Messaging/ChromeMessaging","../../Common/FeatureAvailabiliy","../../Common/Utility","../../Common/Constants","../../Model/BrowserHelper"],function(e,t,o,n,r,i,a,s,c,l){var d=a.FeatureFlag,u=a.FeatureAvailibilityService,g=o.ToolbarType,p=l.BrowserHelper,m=function(){function e(e,t,o,r,a,s,c,l,d){var u=this;this.toolbarItemService=e,this.$localStorage=t,this.sessionService=o,this.utilityService=r,this.$scope=s,this.$rootScope=c,this.connectionInfoService=l,this.$timeout=d,this.toolbarItems=[],this.BugSearchResultPageUrl="#/bugsearchresult",this.navigationLookup={},this.uninitializeMessaging(),this.toolbarItems=e.getToolbarItems(),this.screenshotItem=this.toolbarItems[0],this.notesItem=this.toolbarItems[1],this.bugFormItem=this.toolbarItems[2],this.timelineItem=this.toolbarItems[3],this.traceabilityItem=this.toolbarItems[4],this.perfectoItem=this.toolbarItems[5],this.settingsItem=this.toolbarItems[6],this.aboutItem=this.toolbarItems[7],this.taskFormItem=this.toolbarItems[8],this.testCaseFormItem=this.toolbarItems[9],this.videoCaptureItem=this.toolbarItems[10],this.feedbackResponseFormItem=this.toolbarItems[11],this.feedbackRequestsItem=this.toolbarItems[12],this.screenshotScreenItem=this.toolbarItems[13],this.screenshotApplicationItem=this.toolbarItems[14],this.selectedScreenshotItem=this.getSelectedScreenshotItem(),this.$storage=t,this.$location=a,this.initializeErrorData(),this.subscribeErrorChangedEvent(),i.MessagingFactory.getSubscriptionService().subscribe(function(){u.clearTraceabilityStorageData()},n.NotificationType.ClearTraceabilityData),this.subscribeEnableDefaultWorkItemInToolbarNotification(),this.offlineModeWatch(),this.initializeMessagingForShowNotification(),this.initializeTabindex(),this.createLookupForKeyboardNavigation()}return e.prototype.toggleSessionState=function(e){var t=this;if(this.utilityService.setTabindexOnToolbarItems("item-session"),e||!s.ignoreEvent(this.lastSessionToggleTime)){this.lastSessionToggleTime=new Date,r.ErrorHelper.clearAllErrors(o.ToolbarType.Session,this.$rootScope);var a=this.$localStorage.activeSession;if(a&&a.state===o.SessionState.InProgress){if(this.sessionService.isLoading)return;this.sessionService.isLoading=!0,a.propertyBag&&a.propertyBag.bag[o.TestSessionConstants.feedbackRequestIdString]?this.sessionService.pauseSession(function(){t.$localStorage.$sync(),t.$localStorage.stakeholderTraceabilityPageUrl=c.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl,t.$localStorage.feedbackStateOption=c.FeedbackStateOptionConstants.pendingState,t.$localStorage.$apply(),t.toolbarItemService.cleanUpCache(),t.sessionService.isLoading=!1,t.$location.path("/"),t.$scope.$apply()},function(){t.sessionService.isLoading=!1,t.$scope.$apply()}):this.sessionService.stopSession(function(){t.$localStorage.$sync(),t.toolbarItemService.cleanUpCache(),t.sessionService.isLoading=!1,t.$location.path("/"),t.$scope.$apply()},function(){t.sessionService.isLoading=!1,t.$localStorage.$sync(),"/ForceStopSessionPage"===t.$localStorage.lastUrl&&t.$location.url("/ForceStopSessionPage"),t.$scope.$apply()})}else{if(this.sessionService.isLoading)return;this.sessionService.isLoading=!0,this.enableDefaultWorkitemToolbarItem(),this.selectedScreenshotItem=this.screenshotItem,this.$location.path("/Session"),this.sessionService.startSession(function(){t.$localStorage.$sync(),t.sessionService.isLoading=!1,t.$scope.$apply(),t.utilityService.isStakeholderMode()||t.utilityService.isOfflineMode()||t.$localStorage.traceabilityRequest&&i.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.StartTraceability,t.$localStorage.traceabilityRequest,function(){t.$localStorage.$sync(),t.$location.path("/Traceability")})})}}},e.prototype.onKeyDownEvent=function(e,t,o,n,r){var i=this;if(e)switch(e.keyCode){case c.KeyCodeConstants.rightArrow:$(this.getToolbarItemClassName(this.navigationLookup[t].rightItemClassName)).focus(),$(this.getToolbarItemClassName(this.navigationLookup[t].rightItemClassName)).attr("tabindex","0"),$(e.currentTarget).attr("tabindex","-1");break;case c.KeyCodeConstants.leftArrow:$(this.getToolbarItemClassName(this.navigationLookup[t].leftItemClassName)).focus(),$(this.getToolbarItemClassName(this.navigationLookup[t].leftItemClassName)).attr("tabindex","0"),$(e.currentTarget).attr("tabindex","-1");break;case c.KeyCodeConstants.downArrow:"workitem"===t&&this.isWorkItemSelectionEnabled()?this.showWorkItemExtendedToolbar(e):"screenshot"===t&&this.isScreenShotSelectionEnabled()&&this.showScreenShotExtendedToolbar(e);break;case c.KeyCodeConstants.upArrow:this.isWorkitemExtended(t)?($(this.getToolbarItemClassName("item-workitem.showing")).focus(),$(e.currentTarget).attr("tabindex","-1"),this.notShowWorkItemExtendedToolbar(e)):this.isScreenshotExtended(t)&&($(this.getToolbarItemClassName("base-screenshot")).focus(),$(e.currentTarget).attr("tabindex","-1"),this.notShowScreenShotExtendedToolbar(e));break;case c.KeyCodeConstants.enterKeyCode:this.isWorkitemExtended(t)&&($(e.currentTarget).attr("tabindex","-1"),$(".item-workitem a").attr("tabindex","-1"),this.$timeout(function(){$(i.getToolbarItemClassName("item-workitem.showing")).attr("tabindex","0")},50)),this.isScreenshotExtended(t)&&($(e.currentTarget).attr("tabindex","-1"),$(".item-screenshot a").attr("tabindex","-1"),this.$timeout(function(){$(i.getToolbarItemClassName("base-screenshot")).attr("tabindex","0")},50)),o&&n&&o[n].apply(o,r)}},e.prototype.enableDefaultWorkitemToolbarItem=function(){this.utilityService.isStakeholderMode()?this.workItemExtendedToolBarOptionSelected({},this.feedbackResponseFormItem):this.workItemExtendedToolBarOptionSelected({},this.bugFormItem)},e.prototype.isFunctionalityEnabled=function(e){return e.type!==o.ToolbarType.Video&&e.type!==o.ToolbarType.MobileXt||p.isChrome()?e.canDisable===!1?!0:!e.availableOffline&&this.utilityService.isOfflineMode()?!1:!e.availableToStakeholder&&this.utilityService.isStakeholderMode()?!1:e.url&&"#/timeline"===e.url.toLowerCase()&&this.utilityService.isTimelineViewEnable()?!0:e.url&&e.url.toLowerCase()===c.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl.toLowerCase()&&this.utilityService.isFeedbackRequestsViewEnabled()?!0:e.url&&e.url.toLowerCase()===c.StakeHolderTraceabiltyPageUrls.feedbackDetailsPageUrl.toLowerCase()&&this.utilityService.isFeedbackRequestsViewEnabled()?!0:this.$localStorage.activeSession&&this.$localStorage.activeSession.state?1===this.$localStorage.activeSession.state:!1:!1},e.prototype.isSessionCreationEnabled=function(){return this.utilityService.isOfflineMode()?!0:this.$localStorage.activeSettings&&this.$localStorage.activeSettings.url&&this.$localStorage.activeSettings.projectDetails},e.prototype.offlineModeWatch=function(){var e=this;this.$scope.$watch(function(){return e.$localStorage.activeSettings},function(t){e.$localStorage.$apply()})},e.prototype.isActionLogEnabled=function(){return u.isFeatureEnabled(d.ActionLog)?!0:!1},e.prototype.isWorkItemSelectionEnabled=function(){if(this.isWorkItemExtendedToolbarExpanded&&this.$scope.isContentVisible)return!1;var e="#"+this.$location.path().toLowerCase();if(e===this.bugFormItem.url.toLowerCase()||e===this.taskFormItem.url.toLowerCase()||e===this.testCaseFormItem.url.toLowerCase()||e===this.feedbackResponseFormItem.url.toLowerCase()||e===this.BugSearchResultPageUrl)return!1;var t=this.$localStorage.activeSession;return t&&t.state===o.SessionState.InProgress?!0:!1},e.prototype.isScreenShotSelectionEnabled=function(){if(!p.isChrome())return!1;if(this.isScreenShotExtendedToolbarExpanded&&this.$scope.isContentVisible)return!1;var e=this.$localStorage.activeSession;return e&&e.state===o.SessionState.InProgress?!0:!1},e.prototype.getSelectedScreenshotItem=function(){var e={};return e=this.$localStorage.groupingDetails,e&&e[this.screenshotItem.groupingIdentifier]?e[this.screenshotItem.groupingIdentifier]===this.screenshotItem.type?this.screenshotItem:e[this.screenshotItem.groupingIdentifier]===this.screenshotScreenItem.type?this.screenshotScreenItem:e[this.screenshotItem.groupingIdentifier]===this.screenshotApplicationItem.type?this.screenshotApplicationItem:this.screenshotItem:this.screenshotItem},e.prototype.initializeFocus=function(e){var t=$("."+e).toArray().filter(function(e){return!$(e).hasClass("ng-hide")&&!$(e).parent().hasClass("ng-hide")});t.length>1&&$(t[1]).focus()},e.prototype.showWorkItemExtendedToolbar=function(e){var t=this;e.stopPropagation(),this.$location.url("/"),this.isWorkItemExtendedToolbarExpanded=!0,this.isScreenShotExtendedToolbarExpanded=!1,this.$scope.isContentVisible=!0,this.$timeout(function(){t.initializeFocus("create-wi-or-response")},0)},e.prototype.showScreenShotExtendedToolbar=function(e){var t=this;e.stopPropagation(),this.$location.url("/"),this.isWorkItemExtendedToolbarExpanded=!1,this.isScreenShotExtendedToolbarExpanded=!0,this.$scope.isContentVisible=!0,this.$timeout(function(){t.initializeFocus("create-screenshot")},0)},e.prototype.notShowScreenShotExtendedToolbar=function(e){e.stopPropagation(),this.$location.url("/"),this.isScreenShotExtendedToolbarExpanded=!1,this.$scope.isContentVisible=!1},e.prototype.notShowWorkItemExtendedToolbar=function(e){e.stopPropagation(),this.$location.url("/"),this.isWorkItemExtendedToolbarExpanded=!1,this.$scope.isContentVisible=!1},e.prototype.workItemExtendedToolBarOptionSelected=function(e,t){if((t.type===o.ToolbarType.Task||t.type===o.ToolbarType.TestCase)&&this.utilityService.isOfflineMode())return void e.stopPropagation();if(t.type===o.ToolbarType.TestCase&&this.isActionLogEnabled()===!1)return void e.stopPropagation();if(t.groupingIdentifier){for(var n in this.toolbarItems){var r=this.toolbarItems[n];r.groupingIdentifier===t.groupingIdentifier&&(r.isHighLighted=!1)}t.isHighLighted=!0;var i={};this.$localStorage.groupingDetails?i=this.$localStorage.groupingDetails:this.$localStorage.groupingDetails=i,i[t.groupingIdentifier]=t.type,this.isWorkItemExtendedToolbarExpanded=!1}},e.prototype.screenShotExtendedToolBarOptionSelected=function(e,t){if(t.groupingIdentifier){for(var o in this.toolbarItems){var n=this.toolbarItems[o];n.groupingIdentifier===t.groupingIdentifier&&(n.isHighLighted=!1)}t.isHighLighted=!0;var r={};this.$localStorage.groupingDetails?r=this.$localStorage.groupingDetails:this.$localStorage.groupingDetails=r,r[t.groupingIdentifier]=t.type,this.selectedScreenshotItem=t,this.isScreenShotExtendedToolbarExpanded=!1,this.selectedScreenshotItem.execute()}},e.prototype.isToolBarItemVisible=function(e){return e.groupingIdentifier&&!e.isHighLighted?!1:!0},e.prototype.itemSelected=function(e){var t=e.url;if(!t)return!1;var o="#"+this.$location.path().toLowerCase();return o===t.toLowerCase()||o===this.BugSearchResultPageUrl&&"#/bugform2"===t.toLocaleLowerCase()?!0:t.toLowerCase()!==c.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl.toLowerCase()||o!==c.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl.toLowerCase()&&o!==c.StakeHolderTraceabiltyPageUrls.feedbackDetailsPageUrl.toLowerCase()?!1:!0},e.prototype.isWorkitemExtended=function(e){return"feedbackResponse"===e||"bug"===e||"task"===e||"testcase"===e},e.prototype.isScreenshotExtended=function(e){return"tab"===e||"screen"===e||"window"===e},e.prototype.getToolbarItemClassName=function(e){return"."+e+" a"},e.prototype.initializeTabindex=function(){("/"===this.$localStorage.lastUrl||"//"===this.$localStorage.lastUrl||"/Session"===this.$localStorage.lastUrl)&&this.utilityService.setTabindexOnToolbarItems("item-about")},e.prototype.createLookupForKeyboardNavigation=function(){var e=this;this.navigationLookup.session={rightItemClassName:"item-screenshot",leftItemClassName:"item-about"},this.navigationLookup.screenshot={rightItemClassName:"item-notes",leftItemClassName:"item-session"},this.navigationLookup.notes={rightItemClassName:"item-video",leftItemClassName:"item-screenshot"},this.navigationLookup.video={rightItemClassName:"item-workitem.showing",leftItemClassName:"item-notes"},this.navigationLookup.workitem={rightItemClassName:"item-timeline",leftItemClassName:"item-video"},this.navigationLookup.timeline={rightItemClassName:"item-traceability.showing",leftItemClassName:"item-workitem.showing"},this.navigationLookup.traceability={rightItemClassName:"item-mobilext",leftItemClassName:"item-timeline"},this.navigationLookup.mobilext={rightItemClassName:"item-settings",leftItemClassName:"item-traceability.showing"},this.navigationLookup.signin={rightItemClassName:"item-about",leftItemClassName:"item-mobilext"},this.navigationLookup.about={rightItemClassName:"item-session",leftItemClassName:"item-settings"},this.navigationLookup.bug={rightItemClassName:"item-task",leftItemClassName:"item-testcase"},this.navigationLookup.task={rightItemClassName:"item-testcase",leftItemClassName:"item-bug"},this.navigationLookup.testcase={rightItemClassName:"item-bug",leftItemClassName:"item-task"},this.navigationLookup.tab={rightItemClassName:"screenshot-screen",leftItemClassName:"screenshot-window"},this.navigationLookup.screen={rightItemClassName:"screenshot-window",leftItemClassName:"screenshot-tab"},this.navigationLookup.window={rightItemClassName:"screenshot-tab",leftItemClassName:"screenshot-screen"},this.utilityService.isStakeholderMode()&&(this.navigationLookup.feedbackResponse={rightItemClassName:"item-bug",leftItemClassName:"item-task"},this.navigationLookup.bug={rightItemClassName:"item-task",leftItemClassName:"item-feedback-response"},this.navigationLookup.task={rightItemClassName:"item-feedback-response",leftItemClassName:"item-bug"}),this.$scope.$watch(function(){return e.utilityService.isStakeholderMode()},function(t,o){t!=o&&e.createLookupForKeyboardNavigation()})},e.prototype.initializeMessagingForShowNotification=function(){var e=this;u.isFeatureEnabled(d.XTTrialMode)&&i.MessagingFactory.getSubscriptionService().subscribe(function(){r.ErrorHelper.clearAllErrors(g.Session,e.$rootScope),e.$location.url("/License")},n.NotificationType.ShowNotification)},e.prototype.initializeErrorData=function(){var e=0;for(e=0;e<this.toolbarItems.length;e++){var t=r.ErrorHelper.getError(this.toolbarItems[e].type);t&&t.errorMessage&&t.showNotification?this.toolbarItems[e].showError=!0:this.toolbarItems[e].showError=!1}var n=r.ErrorHelper.getError(o.ToolbarType.Session);n&&n.errorMessage&&(this.showSessionError=!0,this.setSessionErrorCss(n))},e.prototype.setSessionErrorCss=function(e){if(e)switch(e.errorLevel){case 0:this.sessionErrorCss="error";break;case 1:this.sessionErrorCss="warning";break;default:this.sessionErrorCss="error"}},e.prototype.onErrorChanged=function(e,t){if(void 0===t&&(t=!0),e.toolbarType===o.ToolbarType.Session)return e.errorMessage?this.showSessionError=!0:this.showSessionError=!1,this.setSessionErrorCss(e),this.sessionService.isLoading=!1,void(t&&this.$scope.$apply());var n=0;for(n=0;n<this.toolbarItems.length;n++)if(this.toolbarItems[n].type===e.toolbarType)return e.errorMessage&&e.showNotification?this.toolbarItems[n].showError=!0:this.toolbarItems[n].showError=!1,void(t&&this.$scope.$apply())},e.prototype.clearTraceabilityStorageData=function(){this.$localStorage.$sync(),this.$localStorage.linkedWorkItem="",this.$localStorage.searchResultsForTraceability="",this.$localStorage.traceabilityEnabled=!1,this.$localStorage.notifyTimelineForTraceability=!1,this.$localStorage.workItemQueryPatternForTraceability="",this.$localStorage.workItemSearchInProgress=!1,this.$localStorage.lastSearchedQueryPattern="",this.$localStorage.$apply()},e.prototype.subscribeEnableDefaultWorkItemInToolbarNotification=function(){var e=this;i.MessagingFactory.getSubscriptionService().subscribe(function(){e.enableDefaultWorkitemToolbarItem()},n.NotificationType.EnableDefaultWorkItemInToolbar),this.unsubscribeEnableDefaultWorkItemInToolbarEvent=this.$rootScope.$on(n.NotificationType.EnableDefaultWorkItemInToolbar.toString(),function(t,o){e.enableDefaultWorkitemToolbarItem()})},e.prototype.subscribeErrorChangedEvent=function(){var e=this;i.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onErrorChanged(t)},n.NotificationType.ActivityErrorChanged),this.unsubscribeErrorEvent=this.$rootScope.$on(n.NotificationType.ActivityErrorChanged.toString(),function(t,o){e.onErrorChanged(o,!1)})},e.prototype.uninitializeMessaging=function(){var e=this;this.$scope.$on("$destroy",function(){i.MessagingFactory.getSubscriptionService().clearAll(),e.unsubscribeErrorEvent&&e.unsubscribeErrorEvent(),e.unsubscribeEnableDefaultWorkItemInToolbarEvent&&e.unsubscribeEnableDefaultWorkItemInToolbarEvent()})},e.$inject=["ToolbarItemService","$localStorage","SessionService","UtilityService","$location","$scope","$rootScope","ConnectionInfoService","$timeout"],e}();t.ToolbarController=m}),define("Toolbar/Toolbar.Filter",["require","exports","../../Model/Model"],function(e,t,o){function n(){return function(e){return e&&e.state===o.SessionState.InProgress?"icon-stop":"icon-play"}}function r(e){return function(t){var n="&#57602",r="&#57691";return t&&t.state===o.SessionState.InProgress?e.trustAsHtml(r):e.trustAsHtml(n)}}function i(){return function(e){var t="Start Session",n="Stop Session";return e&&e.state===o.SessionState.InProgress?n:t}}function a(){return function(e,t,o){if(!o)return"";if(!e)return"";var n;if(t){var r=new Date(t.toString());n=0;var i,a=e.workItems?e.workItems.length:0;for(i=0;a>i;i++)if(e.workItems&&e.workItems[i]&&e.workItems[i].timeStamp){var c=new Date(e.workItems[i].timeStamp.toString());c>r&&n++}for(a=e.attachments?e.attachments.length:0,i=0;a>i;i++)if(e.attachments&&e.attachments[i]&&e.attachments[i].timeStamp){var l=new Date(e.attachments[i].timeStamp.toString());s(e.attachments[i].type)&&l>r&&l.toString()!==r.toString()&&n++}for(a=e.linkedWorkitems?e.linkedWorkitems.length:0,i=0;a>i;i++)if(e.linkedWorkitems&&e.linkedWorkitems[i]&&e.linkedWorkitems[i].timeStamp){var d=new Date(e.linkedWorkitems[i].timeStamp.toString());d>r&&n++}}else{var u;if(n=e.workItems?e.workItems.length:0,e.attachments)for(u=0;u<e.attachments.length;u++)s(e.attachments[u].type)&&n++;e.linkedWorkitems&&(n+=e.linkedWorkitems.length)}return n?n:""}}function s(e){for(var o in t.attachmentsNotToCount)if(e===t.attachmentsNotToCount[o])return!1;return!0}t.attachmentsNotToCount=[o.AttachmentType.SystemInformation,o.AttachmentType.PerfData],t.playbackIconFilter=n,t.playbackUnicodeFilter=r,t.playbackTextFilter=i,t.timelineCounter=a,t.shouldCountAttachment=s}),define("Toolbar/ToolbarItem.Service",["require","exports","../../Common/FeatureAvailabiliy","../../Model/Model","../../Model/ModelHelper","../../Common/Utility","../../Model/ModelHelper","../../Common/Constants","../../Model/BrowserHelper"],function(e,t,o,n,r,i,a,s,c){var l=n.WorkItemType,d=o.FeatureFlag,u=o.FeatureAvailibilityService,g=c.BrowserHelper,p=function(){function e(e,t,o,n,r){this.$sce=e,this.$localStorage=t,this.screenshotService=o,this.utilityService=n,this.$rootScope=r,this.unicodeLookup={},this.workItemGroupingIdentifier="workItem",
this.requestDeviceAccessPageUrl="Popup2/MediaDeviceAccessRequest.html",this.screenshotGroupingIdentifier="screenshot",this.createLookup()}return e.prototype.getToolbarItems=function(){var e=this,t=[];return t.push({css:"icon-capture bowtie-icon",unicode:this.getUnicodeHtml("capture"),execute:function(){e.screenShotExecutionHandler(n.ScreenshotType.BrowserTab)},canDisable:!0,type:n.ToolbarType.ScreenShot,groupingIdentifier:this.screenshotGroupingIdentifier,isHighLighted:this.isHighlighted(n.ToolbarType.ScreenShot,this.screenshotGroupingIdentifier),showError:!1,availableOffline:!0,availableToStakeholder:!0}),t.push({css:"icon-note",unicode:this.getUnicodeHtml("note"),url:"#/Note",canDisable:!0,type:n.ToolbarType.Note,showError:!1,availableOffline:!0,availableToStakeholder:!0}),t.push({css:"bowtie-icon bowtie-file-bug xt-bug",unicode:this.getUnicodeHtml("bug"),url:u.isFeatureEnabled(d.SearchSimilarBugs)?"#/BugForm2":"#/BugForm",canDisable:!0,type:u.isFeatureEnabled(d.SearchSimilarBugs)?n.ToolbarType.Bug2:n.ToolbarType.Bug,showError:!1,groupingIdentifier:this.workItemGroupingIdentifier,isHighLighted:this.isHighlighted(u.isFeatureEnabled(d.SearchSimilarBugs)?n.ToolbarType.Bug2:n.ToolbarType.Bug,this.workItemGroupingIdentifier),availableOffline:!0,availableToStakeholder:!0}),t.push({css:"icon-clock",unicode:this.getUnicodeHtml("timeline"),showCounter:!0,url:"#/Timeline",canDisable:!0,type:n.ToolbarType.TimeLine,showError:!1,availableOffline:!0,availableToStakeholder:!0}),t.push({css:"icon-traceability",unicode:this.getUnicodeHtml("traceability"),url:"#/Traceability",canDisable:!0,type:n.ToolbarType.Traceability,showError:!1,showSeperator:!0,availableOffline:!1,availableToStakeholder:!0}),t.push({css:"icon-mobilext",unicode:this.getUnicodeHtml("mobilext"),url:"#/MobileXt",canDisable:!0,type:n.ToolbarType.MobileXt,showError:!1,availableOffline:!1,availableToStakeholder:!1}),t.push({css:"bowtie-icon bowtie-settings-gear-outline xt-settings",unicode:this.getUnicodeHtml("settings"),url:"#/SignIn",canDisable:!1,type:n.ToolbarType.Settings,showError:!1,showSeperator:!0,availableOffline:!0,availableToStakeholder:!0}),t.push({css:"icon-about",unicode:this.getUnicodeHtml("about"),url:"#/About",canDisable:!1,type:n.ToolbarType.About,showError:!1,availableOffline:!0,availableToStakeholder:!0}),t.push({css:"icon-task",unicode:this.getUnicodeHtml(l.task.toLowerCase()),url:"#/TaskForm",canDisable:!0,type:n.ToolbarType.Task,showError:!1,groupingIdentifier:this.workItemGroupingIdentifier,isHighLighted:this.isHighlighted(n.ToolbarType.Task,this.workItemGroupingIdentifier),availableOffline:!1,availableToStakeholder:!0}),t.push({css:"icon-testcase",unicode:this.getUnicodeHtml("testcase"),url:"#/TestCase",canDisable:!0,type:n.ToolbarType.TestCase,showError:!1,groupingIdentifier:this.workItemGroupingIdentifier,isHighLighted:this.isHighlighted(n.ToolbarType.TestCase,this.workItemGroupingIdentifier),availableOffline:!1,availableToStakeholder:!0}),t.push({css:"icon-video",unicode:this.getUnicodeHtml("video"),url:"#/VideoCapture",canDisable:!0,type:n.ToolbarType.Video,showSeperator:!0,showError:!1,availableOffline:!1,availableToStakeholder:!0}),t.push({css:"bowtie-icon bowtie-work-item xt-feedback-response-icon",unicode:this.getUnicodeHtml("feedbackResponse"),url:"#/FeedbackResponseForm",canDisable:!0,type:n.ToolbarType.FeedbackResponse,showError:!1,groupingIdentifier:this.workItemGroupingIdentifier,isHighLighted:this.isHighlighted(n.ToolbarType.FeedbackResponse,this.workItemGroupingIdentifier),availableOffline:!1,availableToStakeholder:!0}),t.push({css:"icon-traceability",unicode:this.getUnicodeHtml("traceability"),url:s.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl,canDisable:!0,type:n.ToolbarType.FeedbackRequests,showError:!1,showSeperator:!0,availableOffline:!1,availableToStakeholder:!0}),t.push({css:"icon-capture bowtie-icon",unicode:this.getUnicodeHtml("captureScreen"),execute:function(){e.screenShotExecutionHandler(n.ScreenshotType.Screen)},canDisable:!0,type:n.ToolbarType.ScreenShotScreen,groupingIdentifier:this.screenshotGroupingIdentifier,isHighLighted:this.isHighlighted(n.ToolbarType.ScreenShotScreen,this.screenshotGroupingIdentifier),showError:!1,availableOffline:!0,availableToStakeholder:!0}),t.push({css:"icon-capture bowtie-icon",unicode:this.getUnicodeHtml("captureApplication"),execute:function(){e.screenShotExecutionHandler(n.ScreenshotType.Application)},canDisable:!0,type:n.ToolbarType.ScreenShotApplication,groupingIdentifier:this.screenshotGroupingIdentifier,isHighLighted:this.isHighlighted(n.ToolbarType.ScreenShotApplication,this.screenshotGroupingIdentifier),showError:!1,availableOffline:!0,availableToStakeholder:!0}),t},e.prototype.getTooltip=function(e){var t="",o=!1,r=!1,i=!1,a=!1;this.$localStorage.activeSession&&this.$localStorage.activeSession.state===n.SessionState.InProgress&&(a=!0,this.utilityService.isOfflineMode()?o=!0:this.$localStorage.ActionLog&&(i=!0),this.utilityService.isStakeholderMode()&&(r=!0));var c=!1;switch(!o&&this.$localStorage.currentVideoCaptureId&&-1!==this.$localStorage.currentVideoCaptureId&&(c=!0),e){case n.ToolbarType.Session:if(a){t="Stop session";break}t="Start session";break;case n.ToolbarType.ScreenShot:t="Capture browser tab";break;case n.ToolbarType.ScreenShotScreen:t="Capture screen";break;case n.ToolbarType.ScreenShotApplication:t="Capture application";break;case n.ToolbarType.Note:t="Add note";break;case n.ToolbarType.FeedbackResponse:t="Provide feedback";break;case n.ToolbarType.Bug:t="Create bug";break;case n.ToolbarType.Bug2:t="Create bug";break;case n.ToolbarType.Task:if(o){t="Create task (available in Connected mode only)";break}t="Create task";break;case n.ToolbarType.TestCase:if(o){t="Create test case (available in Connected mode only)";break}if(i){t="Create test case";break}t="To create test case, enable image action log";break;case n.ToolbarType.TimeLine:t="View session timeline";break;case n.ToolbarType.Traceability:t=this.getToolTipForTraceability(o);break;case n.ToolbarType.MobileXt:if(g.isFirefox()){t="Device support is currently not supported in "+s.BrowserConstants.firefoxBrowserName;break}if(g.isEdge()){t="Device support is currently not supported in "+s.BrowserConstants.edgeBrowserName;break}if(o||r){t="Connect to device available to users with basic access (in Connected mode only)";break}t="Connect to device";break;case n.ToolbarType.Settings:t="Configure connection settings";break;case n.ToolbarType.About:t="About";break;case n.ToolbarType.Video:if(g.isFirefox()){t="Screen recording is currently not supported in "+s.BrowserConstants.firefoxBrowserName;break}if(g.isEdge()){t="Screen recording is currently not supported in "+s.BrowserConstants.edgeBrowserName;break}if(o){t="Record screen (available in Connected mode only)";break}if(c){t=this.$localStorage.elapsedVideoTime;break}t="Record screen";break;case n.ToolbarType.FeedbackRequests:t="Explore feedback requests";break;default:t=""}return t},e.prototype.getStakeHolderTraceabilityPageUrl=function(){var e=s.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl,t=this.$localStorage.stakeholderTraceabilityPageUrl;return t&&""!==t&&(e=t),e},e.prototype.cleanUpCache=function(){delete this.$localStorage.lastUrl,delete this.$localStorage.unsavedNote,delete this.$localStorage.unsavedBugDescription,delete this.$localStorage.unsavedBugTitle,delete this.$localStorage.unsavedTaskDescription,delete this.$localStorage.unsavedTaskTitle,delete this.$localStorage.unsavedTestCaseTitle,delete this.$localStorage.taskTitleDirty,delete this.$localStorage.bugFormDirty,delete this.$localStorage.bugTitleDirty,delete this.$localStorage.testCaseFormDirty,delete this.$localStorage.unsavedTestCaseSteps,delete this.$localStorage.unsavedFeedbackResponseDescription,delete this.$localStorage.unsavedFeedbackResponseTitle,delete this.$localStorage.feedbackResponseTitleDirty,delete this.$localStorage.feedbackResponseFormDirty,delete this.$localStorage.lastViewed,delete this.$localStorage.activeSession,delete this.$localStorage.activeAnnotationSettings,delete this.$localStorage.activeScreenShotAndWindowIdMap,delete this.$localStorage.numberOfNotesInSession,delete this.$localStorage.groupingDetails,delete this.$localStorage.useSoapApiForUpgrade,delete this.$localStorage.actionLogUrl,this.cleanUpTraceabilityCache(),this.cleanUpSimilarBugData(),this.cleanUpVideoData(),this.$localStorage.$apply(),this.cleanUpErrorData(),this.$localStorage.$sync()},e.prototype.isHighlighted=function(e,t){this.$localStorage.$sync();var o=this.$localStorage.groupingDetails;return o?o[t]?e===o[t]?!0:!1:t==this.workItemGroupingIdentifier&&e===n.ToolbarType.Bug2?!0:t==this.screenshotGroupingIdentifier&&e===n.ToolbarType.ScreenShot?!0:!1:e===n.ToolbarType.Bug||e===n.ToolbarType.Bug2||e===n.ToolbarType.ScreenShot?!0:!1},e.prototype.screenShotExecutionHandler=function(e){if(this.utilityService.setTabindexOnToolbarItems("item-screenshot"),!i.ignoreEvent(this.captureScreenShotLastDate)){this.captureScreenShotLastDate=new Date;var t=r.ErrorHelper.getError(n.ToolbarType.ScreenShot),o=this.$localStorage.activeSession;!o||o.state!==n.SessionState.InProgress||t&&t.errorMessage||(e!==n.ScreenshotType.BrowserTab?this.screenshotService.broadcastDesktopCaptureScreenshotMessage(e):this.screenshotService.broadcastCaptureScreenshotMessage())}},e.prototype.getUnicodeHtml=function(e){var t=this.unicodeLookup[e];return t||(t=""),this.$sce.trustAsHtml(t)},e.prototype.createLookup=function(){this.unicodeLookup.start="&#57602",this.unicodeLookup.stop="&#57691",this.unicodeLookup.pause="&#59241",this.unicodeLookup.capture="&#xEB19;",this.unicodeLookup.captureScreen="&#xEB1A;",this.unicodeLookup.captureApplication="&#xEB18;",this.unicodeLookup.note="&#59676",this.unicodeLookup.video="&#57622",this.unicodeLookup.audio="&#57814",this.unicodeLookup.timeline="&#57633",this.unicodeLookup.mobilext="&#59139",this.unicodeLookup.about="&#59718",this.unicodeLookup.traceability="&#57802",this.unicodeLookup.task="&#59263;",this.unicodeLookup.testcase="&#59165;"},e.prototype.getToolTipForTraceability=function(e){return e?"Explore work items to link (available in Connected mode only)":this.$localStorage.traceabilityEnabled&&this.$localStorage.linkedWorkItem?"Your session is linked to "+this.$localStorage.linkedWorkItem.fields["System.WorkItemType"]+" "+this.$localStorage.linkedWorkItem.id:"Explore work items to link"},e.prototype.cleanUpTraceabilityCache=function(){delete this.$localStorage.traceabilityRequest,delete this.$localStorage.linkedWorkItem,delete this.$localStorage.traceabilityEnabled,delete this.$localStorage.notifyTimelineForTraceabilityKey,delete this.$localStorage.searchResultsForTraceability,delete this.$localStorage.workItemQueryPatternForTraceability,this.$localStorage.currentIcon=0,this.$localStorage.iconBeforeError=0},e.prototype.cleanUpSimilarBugData=function(){delete this.$localStorage.searchResultsForSimilarBugs,delete this.$localStorage.selectedBugForUpdate},e.prototype.cleanUpVideoData=function(){this.$localStorage.videoCaptureRequestPresent=null,this.$localStorage.currentVideoCaptureId=null,this.$localStorage.elapsedVideoTime=null},e.prototype.cleanUpErrorData=function(){a.ErrorHelper.clearAllErrors(n.ToolbarType.Session,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.ScreenShot,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.Note,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.Bug,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.Bug2,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.Task,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.TestCase,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.FeedbackResponse,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.TimeLine,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.MobileXt,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.Traceability,this.$rootScope),a.ErrorHelper.clearAllErrors(n.ToolbarType.Video,this.$rootScope)},e.$inject=["$sce","$localStorage","ScreenshotService","UtilityService","$rootScope"],e}();t.ToolbarItemService=p}),define("Toolbar/Toolbar.Module",["require","exports","../Toolbar/ToolbarItem.Service","../Toolbar/Toolbar.Controller","../Toolbar/Toolbar.Filter"],function(e,t,o,n,r){angular.module("XT.Popup.Toolbar",["ngStorage","XT.Popup.Common","XT.Popup.CommonControls"]).controller("ToolbarController",n.ToolbarController).service("ToolbarItemService",o.ToolbarItemService).filter("PlaybackIconFilter",r.playbackIconFilter).filter("PlaybackTextFilter",r.playbackTextFilter).filter("TimelineCounter",r.timelineCounter).filter("PlaybackUnicodeFilter",["$sce",r.playbackUnicodeFilter])}),define("BugForm/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("BugForm/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("BugForm/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("BugForm/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){
return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("BugForm/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("BugForm/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("BugForm/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("BugForm/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("BugForm/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("BugForm/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("BugForm/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("BugForm/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',
t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("BugForm/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("BugForm/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,
r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("BugForm/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("BugForm/../../Service/WorkItemHelper",["require","exports","../Common/ExtensionStorage","../Common/Constants","../Model/Model"],function(e,t,o,n,r){var i=function(){function e(){}return e.populateWorkItemMetaDataCache=function(e,t){var r=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);r||(r={}),r[e]={category:t,color:n.WorkItemConstants.defaultWorkItemColor},o.LocalStorageService.store(o.workItemTypeMetaDataCache,r);var i=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);i||(i={}),i[t]={defaultWorkItemType:e},o.LocalStorageService.store(o.workItemCategoryMetaDataCache,i)},e.getWorkItemColor=function(e){if(this.isOffline()||!e)return n.WorkItemConstants.defaultWorkItemColor;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].color},e.getDefaultWorkItemType=function(e){if(this.isOffline())return r.WorkItemType.bug;var t=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);return t[e].defaultWorkItemType},e.getCategory=function(e){if(this.isOffline())return r.WorkItemCategories.BugCategory;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].category},e.isOffline=function(){var e=o.LocalStorageService.retrieve(o.activeSettingsKey);return!e||e.offlineMode?!0:!1},e._removeDirtyWorkItemFromLocalStorage=function(e){this.getCategory(e.type)===r.WorkItemCategories.BugCategory?this._removeDirtyBugFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TaskCategory?this._removeDirtyTaskFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TestCaseCategory?this._removeDirtyTestCaseFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.FeedbackResponseCategory&&this._removeDirtyFeedbackResponseFromLocalStorage()},e._removeDirtyBugFromLocalStorage=function(){o.LocalStorageService.remove(o.bugFormDirtyKey),o.LocalStorageService.remove(o.bugTitleDirtyKey),o.LocalStorageService.remove(o.unsavedBugTitleKey),o.LocalStorageService.remove(o.searchResultsForSimilarBugsKey),o.LocalStorageService.remove(o.selectedBugForUpdateKey),o.LocalStorageService.remove(o.includeImageActionLogsInBugKey)},e._removeDirtyTaskFromLocalStorage=function(){o.LocalStorageService.remove(o.taskFormDirtyKey),o.LocalStorageService.remove(o.taskTitleDirtyKey),o.LocalStorageService.remove(o.unsavedTaskDescriptionKey),o.LocalStorageService.remove(o.unsavedTaskTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInTaskKey)},e._removeDirtyFeedbackResponseFromLocalStorage=function(){o.LocalStorageService.remove(o.feedbackResponseFormDirtyKey),o.LocalStorageService.remove(o.feedbackResponseTitleDirtyKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseDescriptionKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInFeedbackResponseKey)},e._removeDirtyTestCaseFromLocalStorage=function(){o.LocalStorageService.remove(o.testCaseFormDirtyKey),o.LocalStorageService.remove(o.unsavedTestCaseStepsKey),o.LocalStorageService.remove(o.unsavedTestCaseTitleKey)},e}();t.WorkItemHelper=i}),define("BugForm/BugForm.Controller",["require","exports","../../Model/Model","../../Messaging/ChromeMessaging","../../Messaging/Messaging","../../Model/ModelHelper","../../Common/FeatureAvailabiliy","../../Service/WorkItemHelper"],function(e,t,o,n,r,i,a,s){var c=s.WorkItemHelper,l=a.FeatureFlag,d=a.FeatureAvailibilityService,u=13,g=function(){function e(e,t,n,r,i,a,s,l){this.witService=e,this.reproSteps=t,this.$localStorage=n,this.$scope=r,this.$location=i,this.$timeout=a,this.$rootScope=s,this.utilityService=l,e.initializeWorkItemTelemetryData(c.getDefaultWorkItemType(o.WorkItemCategories.BugCategory)),this.initializeLocalStorage(),this.initializeScope(),this.uninitializeMessaging(),this.initializeMessagingForCustomizedBug(),this.initializeMessagingForErrorChange(),this.initializeMessagingForAutoRefresh()}return e.prototype.createBug=function(){var e=this;i.ErrorHelper.clearAllErrors(o.ToolbarType.Bug);var t=this.$scope.title,n=this.$scope.description,r={title:t,description:n,type:c.getDefaultWorkItemType(o.WorkItemCategories.BugCategory)};this.witService.createTraceabilityLink(r),this.clearLocalStorage(),this.witService.beginCreateWorkItem(r,function(t){e.closeForm()})},e.prototype.clearLocalStorage=function(){this.$localStorage.bugFormDirty=!1,this.$localStorage.unsavedBugDescription="",this.$localStorage.unsavedBugTitle=""},e.prototype.keyDownOnInput=function(e){e.keyCode===u&&""!==this.$scope.title&&this.createBug()},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$location.url("/")},50)},e.prototype.initializeMessagingForErrorChange=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onErrorChanged(t)},r.NotificationType.ActivityErrorChanged)},e.prototype.initializeMessagingForAutoRefresh=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(){e.itemSelected()&&(e.initializeLocalStorage(),e.initializeScope())},r.NotificationType.StartAutoRefresh)},e.prototype.onErrorChanged=function(e){e&&e.toolbarType===o.ToolbarType.Bug&&e.errorMessage&&(this.$rootScope.actionInProgress=!1)},e.prototype.initializeMessagingForCustomizedBug=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(t,o){e.closeForm()},r.NotificationType.CloseWorkItemDialog)},e.prototype.initializeLocalStorage=function(){this.$localStorage.$default({unsavedBugTitle:"",unsavedBugDescription:"",bugFormDirty:!1})},e.prototype.initializeScope=function(){d.isFeatureEnabled(l.ActionLog)?this.loadDefaults():this.loadDefaultsWithoutActionLog()},e.prototype.loadDefaults=function(){var e=this;this.$scope.isDirty=this.$localStorage.bugFormDirty,this.$scope.isDirty?(this.$scope.title=this.$localStorage.unsavedBugTitle,this.$scope.description=this.$localStorage.unsavedBugDescription||"",this.addWatchers()):(this.reproSteps.getReproSteps(!0).then(function(t){e.$localStorage.unsavedBugDescription=t,e.$scope.description=t||"",e.$scope.$digest(),e.$localStorage.$apply(),e.addWatchers()})["catch"](function(){e.addWatchers()}),this.$localStorage.unsavedBugTitle="",this.$scope.title="")},e.prototype.loadDefaultsWithoutActionLog=function(){if(this.$scope.isDirty=this.$localStorage.bugFormDirty,this.$scope.isDirty)this.$scope.title=this.$localStorage.unsavedBugTitle,this.$scope.description=this.$localStorage.unsavedBugDescription||"",this.addWatchers();else{var e={title:"",description:""};this.$localStorage.unsavedBugDescription=e.description,this.$scope.description=e.description||"",this.addWatchers(),this.$localStorage.unsavedBugTitle=e.title,this.$scope.title=e.title}},e.prototype.addWatchers=function(){var e=this;this.$scope.$watch("title",function(){e.$scope.title!==e.$localStorage.unsavedBugTitle&&(e.$scope.isDirty=!0,e.$localStorage.bugFormDirty=!0,e.$localStorage.unsavedBugTitle=e.$scope.title)}),this.$scope.$watch("description",function(){e.$scope.description.trim()!==e.$localStorage.unsavedBugDescription.trim()&&(e.$scope.isDirty=!0,e.witService.workItemTelemetryData.hasUpdated=!0,e.$localStorage.bugFormDirty=!0,e.$localStorage.unsavedBugDescription=e.$scope.description)})},e.prototype.itemSelected=function(){var e="#"+this.$location.path().toLowerCase();return"#/bugform"===e?!0:!1},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll()})},e.$inject=["WorkItemService","ReproSteps","$localStorage","$scope","$location","$timeout","$rootScope","UtilityService"],e}();t.BugFormController=g}),define("CommonControls/AutoFocus.Directive",["require","exports"],function(e,t){function o(){return{link:function(e,t,o){e.$watch(o.enable,function(e){e&&setTimeout(function(){t[0].focus()},50)})}}}t.autoFocus=o}),define("BugForm/ReproSteps/IWorkItemObservation",["require","exports"],function(e,t){!function(e){e[e.Screenshot=0]="Screenshot",e[e.Note=1]="Note",e[e.ImageActionLog=2]="ImageActionLog",e[e.Video=3]="Video",e[e.PerfData=4]="PerfData"}(t.ObservationType||(t.ObservationType={}));t.ObservationType}),define("BugForm/ReproSteps/ReproSteps.Service",["require","exports","../ReproSteps/IWorkItemObservation"],function(e,t,o){var n=function(){function e(e){this.WorkItemObservationsService=e}return e.prototype.getReproSteps=function(e,t){var n=function(n){if(0===n.length)return"";for(var i='<div style="margin-top: 10px;margin-right: 10px; margin-bottom: 10px; padding: 0;">',a=!1;n.length;){var s=n.pop();(t||s.observationType!==o.ObservationType.PerfData)&&(s.observationType!==o.ObservationType.ImageActionLog?!a&&e&&(a=!0,i+=r):a=!1,i+=s.getHtml())}return i+="</div>&nbsp;"};return this.WorkItemObservationsService.getLatestObservations(e).then(n)},e.prototype.getLastObservation=function(e){var t=function(e){if(0===e.length)return"";var t='<div style="margin-top: 10px;margin-right: 10px; margin-bottom: 10px; padding: 0;">',o=e[0];return t+=o.getHtml(),t+="</div>"};return this.WorkItemObservationsService.getLatestObservations(e).then(t)},e.$inject=["WorkItemObservationsService"],e}();t.ReproSteps=n;var r='<div style="margin-left:24px; margin-bottom:5px; margin-top:3px;"><ins><b>Observations</b></ins></div>'}),define("BugForm/ReproSteps/ActionLog.Service",["require","exports"],function(e,t){var o=function(){function e(e,t){this.$localStorage=e,this.$http=t}return e.prototype.beginReadActionLog=function(){var e=Q.defer(),t=this.$localStorage.actionLogUrl,o=[];return t?this.$http.get(t).then(function(t){return e.resolve(t.data)},function(t){e.resolve(o)}):e.resolve(o),e.promise},e.$inject=["$localStorage","$http"],e}();t.ActionLogService=o}),define("BugForm/ReproSteps/ReproStepsObservation",["require","exports"],function(e,t){var o=function(){function e(e,t,o){this.timeStamp=e,this.observationType=t,this.indentObervation=o||!1,this.margin=this.indentObervation?24:0}return e.prototype.getHtml=function(){return""},e}();t.ReproStepsObservation=o});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/ReproSteps/NoteObservation",["require","exports","../ReproSteps/IWorkItemObservation","../../../Common/Types","../ReproSteps/ReproStepsObservation"],function(e,t,o,n,r){var i=function(e){function t(t,n){e.call(this,t.timeStamp,o.ObservationType.Note,n),this.attachment=t,this._noteHtml='<p style="white-space: pre;margin-left:{0}px;color:#0079CC">{1}</p><div class="scroll-to-bottom"></div>'}return __extends(t,e),t.prototype.getHtml=function(){return n.stringFormat(this._noteHtml,this.margin,this.getAttachmentTextValue(this.attachment))},t.prototype.getAttachmentTextValue=function(e){if(!e.textValue)return"";var t=document.createElement("textarea");return t.textContent=e.textValue,t.innerHTML},t}(r.ReproStepsObservation);t.NoteObservation=i});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/ReproSteps/ScreenshotObservation",["require","exports","../ReproSteps/IWorkItemObservation","../../../Common/Types","../ReproSteps/ReproStepsObservation"],function(e,t,o,n,r){var i=function(e){function t(t,n){e.call(this,t.timeStamp,o.ObservationType.Screenshot,n),this.attachment=t,this._maxSourceUrlTextLength=45,this._screenshotHtml='<img class="xt-image-attachment" data="{0}" src="{1}" style="max-width:70%;border: solid 1px grey;padding: 2px;margin-left:{2}px;margin-top: 5px;"><br>',this._screenshotSourceHtml='<i style="margin-left:{0}px;">Source: <a href="{1}" style="font-style:italic;">{2}</a></i><br><br>'}return __extends(t,e),t.prototype.getHtml=function(){var e=n.stringFormat(this._screenshotHtml,this.attachment.webUrl,this.attachment.localUrl,this.margin);return this.attachment.source&&(e=e.concat(this.getScreenshotSourceHtml(this.attachment.source)).concat('<div class="scroll-to-bottom"></div>')),e},t.prototype.getScreenshotSourceHtml=function(e){var t=e.length>this._maxSourceUrlTextLength?e.substr(0,this._maxSourceUrlTextLength).concat("..."):e;return n.stringFormat(this._screenshotSourceHtml,this.margin,e,t)},t}(r.ReproStepsObservation);t.ScreenshotObservation=i});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/ReproSteps/VideoObservation",["require","exports","../ReproSteps/IWorkItemObservation","../../../Common/Types","../../../Common/Constants","../ReproSteps/ReproStepsObservation"],function(e,t,o,n,r,i){var a=function(e){function t(t,n){e.call(this,t.timeStamp,o.ObservationType.Video,n),this.attachment=t,this._videoThumbnailHtml='<video class="{0}" style="max-width: 70%; border: solid 1px grey; padding: 2px; margin-left: {1}px; margin-top: 5px; " data-id="{2}" data-url="{3}" controls><source  src="{4}"></video><span> </span><br>',this._videoLinkHtml='<i style="margin-left:{0}px;"><a href="{1}" style="font-style:italic;" link-id="video-link">Screen recording link</a></i><br>'}return __extends(t,e),t.prototype.getHtml=function(){var e=n.stringFormat(this._videoThumbnailHtml,r.ActionLogConstants.videoThumbnailClassName,this.margin,this.attachment.id,this.attachment.webUrl,this.attachment.localUrl);return e.concat(this.getVideoLinkHtml(this.attachment.localUrl)).concat('<div class="scroll-to-bottom"></div>')},t.prototype.getVideoLinkHtml=function(e){return n.stringFormat(this._videoLinkHtml,this.margin,e)},t}(i.ReproStepsObservation);t.VideoObservation=a});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/ReproSteps/PerfDataObservation",["require","exports","../ReproSteps/ReproStepsObservation","../ReproSteps/IWorkItemObservation","../../../Common/Types"],function(e,t,o,n,r){var i=function(e){function t(t,o){e.call(this,t.timeStamp,n.ObservationType.PerfData),this.attachment=t,this.summaryHtml='<div class="PerfDataContainer" style="padding-bottom:10px;margin-bottom:11px; margin-left:{18}px; width:380px" tmpId={27} id={17} data={16}><div style="border:solid 1px grey"><p style="margin:10px;margin-bottom:10px;font-size:11px;"><a style="color:Blue;" href={14} data-toggle="tooltip" title={14}>{7}</a><br><span style="margin-top:0px;color:#707070">@{19}</span></p><div style="margin-left:10px; text-align: left; position:relative; width:350px"><div style=""><span style="height:20px; width:{0}; background-color: {20}; display:inline-block;opacity:{26}" data-toggle="tooltip" title= "RequestDelay - {8} ms."></span><span style="height:20px; width: {1}; background-color: {21}; display:inline-block;opacity:{26}" data-toggle="tooltip" title= "Latency - {9} ms."></span><span style= "height:20px; width:{2}; background-color: {22}; display:inline-block;opacity:{26}" data-toggle="tooltip" title= "Response - {10} ms."></span><span style="height:20px; width: {3}; background-color: {23}; display:inline-block;opacity:{26}" data-toggle="tooltip" title= "DomLoading - {11} ms."></span><span style= "height:20px; width: {4}; background-color: {24}; display:inline-block;opacity:{26}" data-toggle="tooltip" title= "DomComplete - {12} ms."></span><span style="height:20px; width: {5}; background-color: {25}; display:inline-block;opacity:{26}" data-toggle="tooltip" title= "Load- {13} ms."></span></div><span style="position:absolute;top:7%;left:1%;horizontal-align:center;color:black">  {6} ms.</span><div style="font-size:9px;margin-left:0px;margin-right:0px;margin-top:5px;margin-bottom:3px"><span style= "height: {15}; width: {15}; background-color: {20}; display:inline-block; margin-right:2px;opacity:{26}"></span>PreRequest<span style= "height: {15}; width: {15}; background-color: {21}; display:inline-block; margin-right:2px; margin-left:5px;opacity:{26}"></span>Latency<span style= "height: {15}; width: {15}; background-color: {22}; display:inline-block; margin-right:2px; margin-left:5px;opacity:{26}"></span>Response<span style= "height: {15}; width: {15}; background-color: {23}; display:inline-block; margin-right:2px; margin-left:5px;opacity:{26}"></span>DomLoading<span style= "height: {15}; width: {15}; background-color: {24}; display:inline-block; margin-right:2px; margin-left:5px;opacity:{26}"></span>DomComplete<span style= "height: {15}; width: {15}; background-color: {25}; display:inline-block; margin-right:2px; margin-left:5px;opacity:{26}"></span>Load</div></div></div></div><div class="scroll-to-bottom"></div>',this.perfData=JSON.parse(t.textValue),this.timingData=this.perfData.summaryView,this.url=this.perfData.url,this.webUrl=t.webUrl||"",this.id=t.id,this.localId=t.localId,this.timestamp=this.perfData.timestamp,this.indentObservation=o,t.summaryView=this.getHtml()}return __extends(t,e),t.prototype.getHtml=function(){var e=0;for(var t in this.timingData)this.timingData[t]>=0&&(e+=this.timingData[t]);var o=this.indentObservation?24:0,n=300,i=this.timingData.requestDelay*n/e+"px",a=this.timingData.latency*n/e+"px",s=this.timingData.responseDuration*n/e+"px",c=this.timingData.domLoading*n/e+"px",l=this.timingData.domComplete*n/e+"px",d=Math.round(this.timingData.load*n/e)+"px",u="10px",g=this.url.length>45?this.url.substring(0,42).concat("..."):this.url.concat(" "),p="#946250",m="#4D9371",f="#06436B",h="#F2A74C",v="#3D85B3",S="#3B7559",b=1;return r.stringFormat(this.summaryHtml,i,a,s,c,l,d,e,g,this.timingData.requestDelay,this.timingData.latency,this.timingData.responseDuration,this.timingData.domLoading,this.timingData.domComplete,this.timingData.load,this.url.concat(" "),u,this.webUrl,this.id,o,this.timestamp,p,m,f,h,v,S,b,this.localId)},t}(o.ReproStepsObservation);t.PerfDataObservation=i}),define("BugForm/../../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),
n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l}),define("BugForm/../../Model/ActionLogHelper",["require","exports","../Tracing/Tracing"],function(e,t,o){var n=(o.TracingService,function(){function e(){}return e.getDataUrl=function(e,t){var o=Q.defer(),n=new Image;return n.onload=function(){var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var i=r.getContext("2d");i.clearRect(0,0,r.width,r.height),i.drawImage(n,e.left,e.top,r.width,r.height,0,0,r.width,r.height);var a={descriptionUrl:e.src,webUrl:e.webUrl,dataUrl:r.toDataURL("image/jpeg")};o.resolve(a)},n.src=e.src,o.promise},e.getFocusAreaPosition=function(e,t){var o=e.width-t.width,n=e.height-t.height,r=e.location.x-t.width/2,i=e.location.y-t.height/2;return r>o&&(r=o),0>r&&(r=0),0>i&&(i=0),i>o&&(i=n),{x:r,y:i}},e}());t.ActionLogHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("BugForm/ReproSteps/ActionLogObservation",["require","exports","../ReproSteps/IWorkItemObservation","../../../Common/Types","../../../Common/Constants","../ReproSteps/ReproStepsObservation","../../../Model/ActionLogHelper"],function(e,t,o,n,r,i,a){var s=function(e){function t(t){e.call(this,t.timeStamp,o.ObservationType.ImageActionLog),this.action=t,this._actionLogListItemHtml='<div style="margin-top: 15px;"><div style="display:inline-block;margin-right: 5px;">&#x25CF;</div>{0}{1}{2}</div>',this._focusAreaWidth=r.ActionLogConstants.focusAreaWidth,this._focusAreaHeight=r.ActionLogConstants.focusAreaHeight}return __extends(t,e),t.prototype.getText=function(){return this.action.text},t.prototype.getHtml=function(){return this.generateHtml(this.action)},t.prototype.getThumbnail=function(){var e=this.scaleActionLog(JSON.parse(JSON.stringify(this.action)));return this.getActionLogImageHtml(e,{width:r.ActionLogConstants.thumbnailFocusAreaWidth,height:r.ActionLogConstants.thumbnailFocusAreaHeight})},t.prototype.scaleActionLog=function(e){return e.height=e.height*r.ActionLogConstants.thumbnailScaleFactor,e.width=e.width*r.ActionLogConstants.thumbnailScaleFactor,e.location.x=e.location.x*r.ActionLogConstants.thumbnailScaleFactor,e.location.y=e.location.y*r.ActionLogConstants.thumbnailScaleFactor,e},t.prototype.generateHtml=function(e){var t=this.getActionLogImageHtml(e),o=n.stringFormat('<a class="{0} ng-hide" ng-if="false" style="margin-top: 5px;margin-left: 5px;" href="{1}">View full image</a>',r.ActionLogConstants.linkTageClassName,e.imgUrl);return n.stringFormat(this._actionLogListItemHtml,e.text,t,o)},t.prototype.getActionLogImageHtml=function(e,t){t||(t={width:this._focusAreaWidth,height:this._focusAreaHeight});var o=a.ActionLogHelper.getFocusAreaPosition(e,t),n=this.getFocusedImage(e,o,t);return n.outerHTML},t.prototype.getFocusedImage=function(e,t,o){var i=t.x,a=t.y,s=angular.element('<div contenteditable="false" class="action-log-image" style="overflow: hidden; position: relative; width: '+o.width+"px; height: "+o.height+'px; border: solid 1px grey; margin: 5px;"></div>'),c=i?"-"+i+"px":"0",l=a?"-"+a+"px":"0",d=e.height+"px",u=e.width+"px",g=n.stringFormat('<img class="{0}" src="{1}" alt="" style= "position: absolute;top: {2};left: {3}; height: {4}; width:{5};" name="{6}">',r.ActionLogConstants.imageTageClassName,e.imgUrl,l,c,d,u,e.imgFileName),p=angular.element(g);return s.append(p),s.append(angular.element('<div class="scroll-to-bottom"></div>')),s[0]},t}(i.ReproStepsObservation);t.ActionLogObservation=s}),define("BugForm/ReproSteps/WorkItemObservations.Service",["require","exports","../../../Model/Model","../ReproSteps/NoteObservation","../ReproSteps/ScreenshotObservation","../ReproSteps/VideoObservation","../ReproSteps/PerfDataObservation","../ReproSteps/ActionLogObservation","../../../Common/ExtensionStorage","../../../Common/Constants"],function(e,t,o,n,r,i,a,s,c,l){var d=function(){function e(e,t,o,n){this.$localStorage=e,this.actionLogService=t,this.$q=o,this.workItemService=n}return e.prototype.getLatestObservations=function(e){var t=this,o=function(o){var n=t.getSortedActionLogObservationsWithTimeStamp(o),r=n.actionLogObservations,i=n.timeStamp,a=t.getAttachmentObservations(e,i)||[];return e&&(a=a.concat(r)),a.sort(function(e,t){var o=new Date(e.timeStamp.toString()),n=new Date(t.timeStamp.toString());return n-o})};return this.workItemService.workItemTelemetryData.isActionLogIncluded=e,this.getActionLogObservations().then(o)},e.prototype.getLatestActionLogObservations=function(){var e=this;return this.workItemService.workItemTelemetryData.isActionLogIncluded=!0,this.getActionLogObservations().then(function(t){return e.getSortedActionLogObservationsWithTimeStamp(t).actionLogObservations})},e.prototype.getSortedActionLogObservationsWithTimeStamp=function(e){var t=this,o=this.$localStorage.activeSession,n=this.getLastAttachmentTimeStamp(o),r=e.sort(function(e,t){var o=new Date(e.timeStamp.toString()),n=new Date(t.timeStamp.toString());return n-o}),i=r.length>0?r[0].timeStamp:new Date(0);n=this.isDateBigger(n,i)?n:i;var a=this.getLastWorkItemTimeStamp(n,o);return this.workItemService.updateWorkItemDurationInTelemetry(a,o),r=r.filter(function(e){return t.isDateBigger(e.timeStamp,a)}),this.workItemService.workItemTelemetryData.actionLogCount=r.length,this.workItemService.workItemTelemetryData.actionLogFullImageSizeInKB=c.LocalStorageService.retrieve(c.actionLogFullImageSizeInBytes),{actionLogObservations:r,timeStamp:a}},e.prototype.getLastAttachmentTimeStamp=function(e){var t=new Date(0);if(e.workItems&&e.attachments.length>0)for(var n=e.attachments.length-1;n>=0;n--){var r=e.attachments[n];if(r.type!==o.AttachmentType.SystemInformation){t=r.timeStamp;break}}return t},e.prototype.getLastWorkItemTimeStamp=function(e,t){for(var o=new Date(0),n=t.workItems.length-1;n>=0;n--){var r=t.workItems[n];if(this.isDateBigger(e,r.timeStamp)){o=r.timeStamp;break}}return o},e.prototype.getActionLogObservations=function(){var e=this.$localStorage.sessionActionLogMaxCount;return e=e?e:l.ActionLogConstants.defaultActionLogCount,this.actionLogService.beginReadActionLog().then(function(t){for(var o=[],n=0;t.length&&e>n;){var r=t.pop();n++,o.push(new s.ActionLogObservation(r))}return o})},e.prototype.getAttachmentObservations=function(e,t){for(var o=this.$localStorage.activeSession.attachments||[],n=this.$localStorage.activeSession.perfAttachments||[],r=[],i=0,a=0;a<o.length;a++)this.shouldIncludeAttachment(o[a],t)&&r.push(this.createAttachmentObservation(o[a],e));for(var s=0;s<n.length;s++)this.shouldIncludeAttachment(n[s],t)&&(r.push(this.createAttachmentObservation(n[s],e)),i++);return this.workItemService.workItemTelemetryData.perfObservationsCount=i,r},e.prototype.createAttachmentObservation=function(e,t){switch(e.type){case o.AttachmentType.Note:return this.workItemService.workItemTelemetryData.notesCount++,new n.NoteObservation(e,t);case o.AttachmentType.Screenshot:return this.workItemService.workItemTelemetryData.imagesCount++,new r.ScreenshotObservation(e,t);case o.AttachmentType.Video:return new i.VideoObservation(e,t);case o.AttachmentType.PerfData:return new a.PerfDataObservation(e,t);default:return void 0}},e.prototype.shouldIncludeAttachment=function(e,t){return e.type===o.AttachmentType.Note||e.type===o.AttachmentType.Screenshot||e.type===o.AttachmentType.Video||e.type===o.AttachmentType.PerfData?this.isDateBigger(e.timeStamp,t):!1},e.prototype.isDateBigger=function(e,t){return new Date(e.toString()).getTime()>new Date(t.toString()).getTime()},e.prototype.getLastBugTime=function(){var e=this.$localStorage.activeSession,t=e.workItems&&e.workItems.length>0?e.workItems[e.workItems.length-1].timeStamp:new Date(0);return t},e.$inject=["$localStorage","ActionLogService","$q","WorkItemService"],e}();t.WorkItemObservations=d}),define("BugForm/BugForm.Module",["require","exports","../BugForm/BugForm.Controller","../CommonControls/AutoFocus.Directive","../BugForm/ReproSteps/ReproSteps.Service","../BugForm/ReproSteps/ActionLog.Service","../BugForm/ReproSteps/WorkItemObservations.Service"],function(e,t,o,n,r,i,a){angular.module("XT.Popup.BugForm",["XT.Popup.CommonControls","XT.Popup.Common"]).controller("BugFormController",o.BugFormController).directive("ngautofocus",["$document",n.autoFocus]).service("ReproSteps",r.ReproSteps).service("ActionLogService",i.ActionLogService).service("WorkItemObservationsService",a.WorkItemObservations)}),define("BugForm/BugForm2.Controller",["require","exports","../../Tracing/Tracing","../../Model/Model","../../Messaging/ChromeMessaging","../../Messaging/Messaging","../../Model/ModelHelper","../../Common/FeatureAvailabiliy","../../Service/WorkItemHelper","../../Common/ExtensionStorage","../../Common/Constants"],function(e,t,o,n,r,i,a,s,c,l,d){var u=c.WorkItemHelper,g=s.FeatureFlag,p=s.FeatureAvailibilityService,m="BugForm2Controller",f=9,h=function(){function e(e,t,o,r,i,a,s,c,l){this.$sce=e,this.witService=t,this.utilityService=o,this.reproSteps=r,this.$localStorage=i,this.$scope=a,this.$location=s,this.$timeout=c,this.$rootScope=l,this.searchKeyStrokeTimeoutInMilliseconds=300,this.minimumSearchPatternLengthInWords=2,this.checkboxTooltipText="You can disable it from Options page.",this.screenRecordingWarning="Ongoing screen recording is not included in this bug. Stop the recording to include it. You can override this from Options page.",this.descriptionFileName="unsavedBugDescription",this.lastDescription="",this.unicodeLookup={},this.descriptionSeparator="<hr style='border-top:dotted 1px; margin-top: 20px; margin-bottom: 20px;' />",t.initializeWorkItemTelemetryData(u.getDefaultWorkItemType(n.WorkItemCategories.BugCategory)),this.initializeLocalStorage(),this.setImageActionLogInclusionFlag(),this.setActiveVideoInclusionFlag(),this.setPerfDataInclusionFlag(),this.doRefresh=!0,this.initializeScope(),this.uninitializeMessaging(),this.initializeMessagingForCustomizedBug(),this.initializeMessagingForErrorChange(),this.initializeMessagingForAutoRefresh(),this.initializeWatermarkText(p.isFeatureEnabled(g.ActionLog),p.isFeatureEnabled(g.PerfData)),this.createLookup(),this.utilityService.setTabindexOnToolbarItems("item-workitem.showing")}return e.prototype.keydown=function(e){e&&e.ctrlKey&&e.keyCode===d.KeyCodeConstants.sKeyCode&&this.saveBug()},e.prototype.saveBug=function(){var e=this;this.includeActiveVideoInBug&&this.showActiveVideoFilter()?this.stopRecordingAndSaveBug(function(){e.saveDirtyBug()}):this.saveDirtyBug()},e.prototype.setImageActionLogInclusionFlag=function(){if(this.utilityService.isOfflineMode()||!p.isFeatureEnabled(g.ActionLog))this.includeImageActionLogsInBug=!1;else{var e=this.$localStorage.includeImageActionLogsInBug;this.includeImageActionLogsInBug="boolean"==typeof e?this.$localStorage.includeImageActionLogsInBug:!0}},e.prototype.setActiveVideoInclusionFlag=function(){this.utilityService.isOfflineMode()||!p.isFeatureEnabled(g.OngoingRecording)?(this.includeActiveVideoInBug=!1,this.showActiveVideoFilter()?(a.ErrorHelper.clearLastError(n.ToolbarType.Bug2,this.$rootScope),a.ErrorHelper.saveError(this.screenRecordingWarning,n.ToolbarType.Bug2,2,!0,!1,this.$rootScope)):a.ErrorHelper.clearLastError(n.ToolbarType.Bug2,this.$rootScope)):this.includeActiveVideoInBug=!0},e.prototype.setPerfDataInclusionFlag=function(){this.utilityService.isOfflineMode()||!p.isFeatureEnabled(g.PerfData)?this.includePerfDataInBug=!1:this.includePerfDataInBug=void 0!==this.$localStorage.includePerfDataInBug?this.$localStorage.includePerfDataInBug:!0},e.prototype.stopRecordingAndSaveBug=function(e){var t=this;r.MessagingFactory.getBroadcastingService().broadcast(i.NotificationType.StopVideoCapture,{},function(){t.$localStorage.currentVideoCaptureId=-1,t.$localStorage.elapsedVideoTime=null,t.$localStorage.$apply(),t.includeActiveVideoInForm(function(){e()})})},e.prototype.saveDirtyBug=function(){if(a.ErrorHelper.clearAllErrors(n.ToolbarType.Bug2,this.$rootScope),this.doRefresh){var e={title:this.$scope.title,description:this.$scope.description,type:u.getDefaultWorkItemType(n.WorkItemCategories.BugCategory)};this.$localStorage.selectedBugForUpdate?this.updateBug(e):this.createBug(e)}else{var e={title:this.$scope.title,description:this.$scope.requiredDescription,type:u.getDefaultWorkItemType(n.WorkItemCategories.BugCategory)};this.$localStorage.selectedBugForUpdate?this.updateBug(e):this.createBug(e),this.doRefresh=!0}},e.prototype.clearLocalStorage=function(){this.$localStorage.bugFormDirty=!1,this.$localStorage.bugTitleDirty=!1,this.$localStorage.unsavedBugTitle="",this.$localStorage.searchResultsForSimilarBugs=[],delete this.$localStorage.selectedBugForUpdate,delete this.$localStorage.includeImageActionLogsInBug,this.$localStorage.$apply(),this.$rootScope.actionInProgress=!1},e.prototype.initializeWatermarkText=function(e,t){this.$scope.actionLogFlag=e,this.$scope.perfDataFlag=t,this.$scope.actionLogFlag||this.$scope.perfDataFlag?this.$scope.actionLogFlag?this.$scope.perfDataFlag||(this.waterMarkText="Page load data is currently disabled. Enable it from "):this.waterMarkText="Image action log is currently disabled. Enable it from ":this.waterMarkText="Image action log and page load data are currently disabled. Enable them from ",document.getElementById("watermark")&&(this.$scope.actionLogFlag&&this.$scope.perfDataFlag?this.$scope.waterMarkStyle="hidden":this.$scope.waterMarkStyle="visible",this.utilityService.isOfflineMode()&&(this.$scope.waterMarkStyle="visible",this.waterMarkText="Image action log and page load data collection options are available in Connected mode only"))},e.prototype.keyDownOnInput=function(e){var t=this;e.keyCode!==f&&this.isSearchEnabled()&&(this.searchTimer&&this.$timeout.cancel(this.searchTimer),this.searchTimer=this.$timeout(function(){t.isSearchBugInProgress=!0,t.handleSearchOfBugs()},this.searchKeyStrokeTimeoutInMilliseconds))},e.prototype.showSimilarBugs=function(){this.$location.url("/BugSearchResult")},e.prototype.isSearchEnabled=function(){return this.utilityService.isOfflineMode()?!1:this.$scope.title&&this.$scope.title.split(" ").length>=this.minimumSearchPatternLengthInWords&&!this.$localStorage.selectedBugForUpdate?!0:!1},e.prototype.isScrollDownForm=function(){return this.$localStorage.bugFormDirty?!1:!0},e.prototype.createBug=function(e){var t=this;o.TracingService.traceVerbose(m,1,"Creating bug with title: "+e.title),this.witService.createTraceabilityLink(e),this.witService.beginCreateWorkItem(e,function(){o.TracingService.traceVerbose(m,2,"Created bug"),t.$localStorage.$sync(),t.closeForm()})},e.prototype.updateBug=function(e){var t=this;o.TracingService.traceVerbose(m,3,"Updating bug with id: "+e.id);var r=this.$localStorage.selectedBugForUpdate;e.id=r.fields[n.WorkItemField.id].toString(),e.areaPath=r.fields[n.WorkItemField.areaPath],e.iterationPath=r.fields[n.WorkItemField.iterationPath],e.systemInfo=r.fields[n.WorkItemField.systemInfo],this.witService.createTraceabilityLink(e),this.witService.beginUpdateWorkItem(e,function(){o.TracingService.traceVerbose(m,4,"Updated bug"),t.$localStorage.$sync(),t.closeForm()})},e.prototype.searchSimilarBugs=function(){var e=this;a.ErrorHelper.clearAllErrors(n.ToolbarType.Bug2,this.$rootScope);var t=this.$scope.title;o.TracingService.traceVerbose(m,5,"Searching bugs with title pattern: "+t);var r=[];r.push(n.WorkItemField.title),r.push(n.WorkItemField.id),r.push(n.WorkItemField.workItemType),r.push(n.WorkItemField.workItemState),r.push(n.WorkItemField.iterationPath);var i=this.witService.getWorkItemsByTitle(r,t,u.getDefaultWorkItemType(n.WorkItemCategories.BugCategory));i["finally"](function(){o.TracingService.traceVerbose(m,6,"Search bug operation completed"),e.$localStorage.$sync(),e.isSearchBugInProgress=!1,e.$rootScope.actionInProgress=!1})},e.prototype.handleSearchOfBugs=function(){return this.$scope.title&&this.isSearchEnabled()?(this.initializeLocalStorageForSearch(),void this.searchSimilarBugs()):(this.isSearchBugInProgress=!1,this.$localStorage.searchResultsForSimilarBugs=[],this.$rootScope.actionInProgress=!1,void this.$localStorage.$apply())},e.prototype.initializeLocalStorageForSearch=function(){this.$localStorage.searchResultsForSimilarBugs=[],this.$rootScope.actionInProgress=!0,delete this.$localStorage.selectedBug,this.$localStorage.$apply()},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$rootScope.actionInProgress=!1,$(".toolbar-item.selected a").focus(),e.$location.url("/")},50)},e.prototype.initializeMessagingForErrorChange=function(){var e=this;r.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onErrorChanged(t)},i.NotificationType.ActivityErrorChanged),this.unsubscribeErrorEvent=this.$rootScope.$on(i.NotificationType.ActivityErrorChanged.toString(),function(t,o){e.onErrorChanged(o)})},e.prototype.initializeMessagingForAutoRefresh=function(){var e=this;r.MessagingFactory.getSubscriptionService().subscribe(function(){e.itemSelected()&&(e.initializeLocalStorage(),e.initializeScope())},i.NotificationType.StartAutoRefresh)},e.prototype.onErrorChanged=function(e){e&&e.toolbarType===n.ToolbarType.Bug2&&e.errorMessage&&(this.$rootScope.actionInProgress=!1)},e.prototype.initializeMessagingForCustomizedBug=function(){var e=this;r.MessagingFactory.getSubscriptionService().subscribe(function(t,o){e.$localStorage.$sync(),e.closeForm()},i.NotificationType.CloseWorkItemDialog)},e.prototype.initializeLocalStorage=function(){this.$localStorage.$default({unsavedBugTitle:"",bugFormDirty:!1,bugTitleDirty:!1})},e.prototype.showImageActionLogFilter=function(){return this.utilityService.isOfflineMode()?!1:p.isFeatureEnabled(g.ActionLog)?!0:!1},e.prototype.showPerfDataFilter=function(){return this.utilityService.isOfflineMode()?!1:p.isFeatureEnabled(g.PerfData)?!0:!1},e.prototype.showActiveVideoFilter=function(){return-1!==this.$localStorage.currentVideoCaptureId&&this.$localStorage.currentVideoCaptureId?!0:!1},e.prototype.initializeScope=function(){var e=this;this.includeImageActionLogsInBug?this.loadDefaults(!0,this.includePerfDataInBug):this.loadDefaults(!1,this.includePerfDataInBug),this.$scope.delegateForScrollDownForm=function(){return e.isScrollDownForm()},this.isSearchBugInProgress=!1},e.prototype.filterActionLogs=function(){this.includeImageActionLogsInBug?this.$localStorage.includeImageActionLogsInBug=!0:this.$localStorage.includeImageActionLogsInBug=!1,this.loadDefaults(this.includeImageActionLogsInBug,this.includePerfDataInBug)},e.prototype.filterPerfData=function(){this.includePerfDataInBug?this.$localStorage.includePerfDataInBug=!0:this.$localStorage.includePerfDataInBug=!1,this.loadDefaults(this.includeImageActionLogsInBug,this.includePerfDataInBug)},e.prototype.loadDefaults=function(e,t){var o=this;this.$scope.isDirty=this.$localStorage.bugFormDirty,this.$scope.isTitleDirty=this.$localStorage.bugTitleDirty;var n=function(e){o.getSelectedBugDataInWorkItem(function(t){var n=t.description+e;return o.$scope.description=n||"",o.lastDescription=o.$scope.description,o.$scope.title=t.title,o.$localStorage.unsavedBugTitle=t.title,o.$localStorage.$apply(),o.addWatchers(),o.$scope.$apply(),n})};this.$scope.isDirty?(this.$scope.title=this.$localStorage.unsavedBugTitle,this.readDescription(this.descriptionFileName).then(function(e){o.$scope.description=e,o.lastDescription=o.$scope.description,o.addWatchers(),o.$scope.$apply()})):this.reproSteps.getReproSteps(e,t).then(n)["catch"](function(){o.addWatchers()}),this.utilityService.isOfflineMode()?(this.inputBoxPlaceholder=" Create a new bug",this.labelledby="Defect title to add"):(this.inputBoxPlaceholder=" Create a new bug or search by title",this.labelledby="Defect title to add or search")},e.prototype.includeActiveVideoInForm=function(e){var t=this;this.$scope.title=this.$localStorage.unsavedBugTitle,this.reproSteps.getLastObservation(this.includeImageActionLogsInBug).then(function(o){t.$scope.requiredDescription=t.$scope.description+o,t.addWatchers(),t.$scope.$apply(),null!=e&&(t.doRefresh=!1,e())})["catch"](function(){t.addWatchers()})},e.prototype.addWatchers=function(){var e=this;this.$scope.$watch("title",function(){void 0!==e.$scope.title&&e.$scope.title!==e.$localStorage.unsavedBugTitle&&(e.$scope.isTitleDirty=!0,e.$localStorage.bugTitleDirty=!0,e.$localStorage.unsavedBugTitle=e.$scope.title)}),this.$scope.$watch("description",function(){void 0!==e.$scope.description&&(e.utilityService.isDescriptionSame(e.$scope.description,e.lastDescription)||(e.$scope.isDirty=!0,e.witService.workItemTelemetryData.hasUpdated=!0,e.$localStorage.bugFormDirty=!0,e.lastDescription=e.$scope.description,e.updateDescriptionInPersistentStorage(e.$scope.description)))})},e.prototype.itemSelected=function(){var e="#"+this.$location.path().toLowerCase();return"#/bugform2"===e?!0:!1},e.prototype.uninitializeMessaging=function(){var e=this;this.$scope.$on("$destroy",function(){r.MessagingFactory.getSubscriptionService().clearAll(),e.unsubscribeErrorEvent&&e.unsubscribeErrorEvent()})},e.prototype.createLookup=function(){this.unicodeLookup.expand="&#59758",this.unicodeLookup.collapse="&#59757",this.unicodeLookup.seacrhIcon="&#57492"},e.prototype.getUnicodeHtml=function(e){var t=this.unicodeLookup[e];return t||(t=""),this.$sce.trustAsHtml(t)},e.prototype.getSelectedBugDataInWorkItem=function(e){var t=this,o={title:this.$localStorage.unsavedBugTitle,description:""};if(this.$localStorage.selectedBugForUpdate){var r=this.$localStorage.selectedBugForUpdate;o.title=r.fields[n.WorkItemField.title],r.descriptionUrl?this.readDescription(l.selectedBugDescriptionKey).then(function(n){o.description+=t.$sce.trustAsHtml(n+t.descriptionSeparator),e(o)}):e(o)}else e(o)},e.prototype.updateDescriptionInPersistentStorage=function(e){var t=Q.defer(),o=new Blob([e],{type:"text/plain"});return l.PersistentStorageFactory.getStorageService().writeBlob(this.descriptionFileName,o,t.resolve,t.reject),t.promise},e.prototype.readDescription=function(e){return l.PersistentStorageFactory.getStorageService().getBlobContentAsync(e)},e.$inject=["$sce","WorkItemService","UtilityService","ReproSteps","$localStorage","$scope","$location","$timeout","$rootScope"],e}();t.BugForm2Controller=h}),define("BugForm/../../Model/WindowHelper",["require","exports"],function(e,t){var o=function(){function e(){}return e.removeWindow=function(e){e&&(chrome.windows.remove?chrome.windows.remove(e):chrome.tabs.query({windowId:e},function(e){e.forEach(function(e){chrome.tabs.remove(e.id)})}))},e.openWindowInNewTab=function(e){chrome.tabs.create({url:e})},e}();t.WindowHelper=o}),define("BugForm/BugSearchResult.Controller",["require","exports","../../Tracing/Tracing","../../Common/Constants","../../Messaging/ChromeMessaging","../../Model/Model","../../Service/WorkItemHelper","../../Model/WindowHelper"],function(e,t,o,n,r,i,a,s){var c=a.WorkItemHelper,l=s.WindowHelper,d="BugSearchResultController",u=function(){function e(e,t,o,n,r,i){this.$location=e,this.$localStorage=t,this.$timeout=o,this.$scope=n,this.witService=r,this.utilityService=i,this.enterKeyCode=13,this.uninitializeMessaging(),this.initializeSimilarBugs(),this.$timeout(function(){$(".workitem-container").first().focus()},50)}return e.prototype.generateCssForSelectedWorkItem=function(e){return this.selectedBug&&e.id===this.selectedBug.id?"selected":""},e.prototype.openBug=function(e){l.openWindowInNewTab(e)},e.prototype.getTabIndex=function(e){return this.similarBugs[0].id===e.id?0:-1},e.prototype.handleKeyPressForLink=function(e,t){var o=e.keyCode;return n.KeyCodeConstants.enterKeyCode===o?void this.openBug(t.url):void 0},e.prototype.setBugToUpdateOnKeyDown=function(e,t){var o=e.keyCode;return n.KeyCodeConstants.enterKeyCode===o?void this.setBugToUpdate(t):void this.utilityService.handleArrowKey(e,t,this.similarBugs[this.similarBugs.length-1].id)},e.prototype.setBugToUpdate=function(e){this.selectedBug=e},e.prototype.getSelectedBug=function(){var e=this;if(this.selectedBug){o.TracingService.traceVerbose(d,1,"Fetching bug with id: "+this.selectedBug.id);var t=[];t.push(i.WorkItemField.title),t.push(i.WorkItemField.id),t.push(i.WorkItemField.workItemType),t.push(i.WorkItemField.assignedTo),t.push(i.WorkItemField.iterationPath),t.push(i.WorkItemField.areaPath),t.push(i.WorkItemField.reproSteps),t.push(i.WorkItemField.systemInfo);var n=this.witService.getWorkItemById(t,this.selectedBug.id,c.getDefaultWorkItemType(i.WorkItemCategories.BugCategory));n.then(function(){o.TracingService.traceVerbose(d,2,"Fetched bug with id"+e.selectedBug.id),e.$localStorage.bugFormDirty=!1,e.$localStorage.$apply(),e.$location.url("/BugForm2")})}},e.prototype.highlightText=function(e){return this.utilityService.highlightText(e,this.$localStorage.unsavedBugTitle)},e.prototype.isSelected=function(e){return this.selectedBug&&this.selectedBug.id===e.id},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$location.url("/")},50)},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){r.MessagingFactory.getSubscriptionService().clearAll()})},e.prototype.initializeSimilarBugs=function(){this.$localStorage.$sync(),this.searchTitle=this.$localStorage.unsavedBugTitle,this.similarBugs=this.$localStorage.searchResultsForSimilarBugs},e.$inject=["$location","$localStorage","$timeout","$scope","WorkItemService","UtilityService"],e}();t.BugSearchResultController=u}),define("BugForm/BugForm2.Module",["require","exports","../BugForm/BugForm2.Controller","../BugForm/BugSearchResult.Controller","../CommonControls/AutoFocus.Directive","../BugForm/ReproSteps/ReproSteps.Service","../BugForm/ReproSteps/ActionLog.Service","../BugForm/ReproSteps/WorkItemObservations.Service"],function(e,t,o,n,r,i,a,s){angular.module("XT.Popup.BugForm2",["XT.Popup.CommonControls","XT.Popup.Common"]).controller("BugForm2Controller",o.BugForm2Controller).controller("BugSearchResultController",n.BugSearchResultController).directive("ngautofocus",["$document",r.autoFocus]).service("ReproSteps",i.ReproSteps).service("ActionLogService",a.ActionLogService).service("WorkItemObservationsService",s.WorkItemObservations)});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("SignIn/SignIn.Common",["require","exports"],function(e,t){!function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded",e[e.Expanding=2]="Expanding"}(t.NodeState||(t.NodeState={}));t.NodeState;!function(e){e[e.Collection=0]="Collection",e[e.Project=1]="Project",e[e.Team=2]="Team"}(t.ArtifactType||(t.ArtifactType={}));var o=(t.ArtifactType,function(){function e(e,t,o){this.name=e,this.id=t,this.parentId=o}return e}());t.NodeData=o;var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(o);t.TreeData=n;var r=function(){function e(e,t,o){this.nodeData=e,this.mapOfNodeIdAndNode=t,this.selectedNodeId=o}return e}();t.NodeCache=r;var i=function(){function e(){}return e.rightArrowKeyStroke=39,e.leftArrowKeyStroke=37,e.spaceStroke=32,e.enterKeyStroke=13,e}();t.KeyStrokes=i,t.hostedSupportedErrorMessage="Supports only Visual Studio Online accounts",t.validErrorCode=["200","203"]}),define("SignIn/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,
function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("SignIn/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("SignIn/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("SignIn/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("SignIn/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("SignIn/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("SignIn/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);
var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("SignIn/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("SignIn/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("SignIn/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("SignIn/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("SignIn/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("SignIn/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("SignIn/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("SignIn/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>';
}),define("SignIn/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("SignIn/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("SignIn/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);
var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("SignIn/../../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l}),define("SignIn/../../Model/WindowHelper",["require","exports"],function(e,t){var o=function(){function e(){}return e.removeWindow=function(e){e&&(chrome.windows.remove?chrome.windows.remove(e):chrome.tabs.query({windowId:e},function(e){e.forEach(function(e){chrome.tabs.remove(e.id)})}))},e.openWindowInNewTab=function(e){chrome.tabs.create({url:e})},e}();t.WindowHelper=o}),define("SignIn/SignIn.Controller",["require","exports","../SignIn/SignIn.Common","../../Model/Model","../../Tracing/Tracing","../../Messaging/Messaging","../../Messaging/ChromeMessaging","../../Model/ModelHelper","../../Common/ExtensionStorage","../../Common/Utility","../../Common/Constants","../../Model/WindowHelper","../../Common/Utility"],function(e,t,o,n,r,i,a,s,c,l,d,u,g){var p=o.TreeData,m=o.NodeCache,f=o.NodeData,h=o.ArtifactType,v=o.NodeState,S=n.SessionState,b=u.WindowHelper,y="SignInController",T=13,C=r.TracingService,F="connected-radio-button",k="standalone-radio-button",x=function(){function e(e,t,o,n,r,i,a,s,c,l,d,u){this.$filter=e,this.$scope=t,this.$rootScope=o,this.$location=n,this.connectionInfoService=r,this.$sce=i,this.$localStorage=a,this.$window=s,this.$timeout=c,this.backgroundMessaging=l,this.$route=d,this.utilityService=u,this.signUpUrl="https://www.azure.com/services/devops",this.marketPlaceUrl="https://marketplace.visualstudio.com/items?itemName=ms.vss-exploratorytesting-web",this.searchKeyStrokeTimeoutInMilliseconds=50,this.hideSearchTimerInMilliseconds=500,this.delayForLoadingTreeControl=500,this.initialize(),this.utilityService.setTabindexOnToolbarItems("item-settings")}return e.prototype.initialize=function(){this.toolType=n.ToolbarType.Settings,this.$storage=this.$localStorage,this.isloggedIn=!1,this.baseUrl="",this.teamPath="",this.previewUrl="",this.projectAndTeam="",this.data=[],this.previousSelectedNode=null,this.connectionStatusPassed=!1,this.showConnectionStatusIcon=!1,this.isInputEditable=!0,this.tfsConnectionErrorMessage="",this.statusPassedItem={css:"icon-passed",unicode:this.getUnicodeHtml("&#59696")},this.statusFailedItem={css:"icon-failed",unicode:this.getUnicodeHtml("&#59153")},this.currentSelectedNodeId=null,this.previousSelectedNodeId=null,this.mapOfNodeIdAndNode={},this.isRefreshing=!1,this.requireAutoScroll=!0,this.isTeamSelected=!1,s.ErrorHelper.clearNonStickyErrors(n.ToolbarType.Settings,this.$rootScope),this.searchEnabled=!0,this.setConnectionOption(),this.uninitializeMessaging(),this.initializeMessaging(),this.addWatchers(),this.loadCachedData(),this.stopIconBlink()},e.prototype.syncCollection=function(e){this.syncProjects(e);var t=e.children;for(var o in t)this.syncTeams(e,t[o])},e.prototype.moveFocusTo=function(e){$("#"+e).focus()},e.prototype.initializeFocus=function(){this.$localStorage.activeSession&&this.$localStorage.activeSession.state==S.InProgress?this.$timeout(this.moveFocusTo,0,!0,d.ElementIds.xtMinimizeId):this.moveFocusTo(this.connectionOption===d.ConnectionOptionConstants.connectedMode?F:k)},e.prototype.setConnectionOption=function(){var e=this.$localStorage.connectionOption;e?this.connectionOption=e:(this.connectionOption=d.ConnectionOptionConstants.connectedMode,this.$localStorage.$sync(),this.$localStorage.connectionOption=this.connectionOption,this.$localStorage.connectedMode=d.ConnectionOptionConstants.teamMode,this.$localStorage.$apply()),this.initializeFocus()},e.prototype.syncProjects=function(e){var t=this.findNode(e.id,this.data);if(!t.childFetched){var o=e.children;for(var n in o){var r=o[n],i=this.getNewNode(h.Project,t.id,r);t.children.push(i),this.mapOfNodeIdAndNode[i.id]=i}t.childFetched=!0}},e.prototype.syncTeams=function(e,t){var o=this.findNode(e.id,this.data),n=this.findNode(t.id,o.children);if(!n.childFetched){var r=t.children;for(var i in r){var a=r[i],s=this.getNewNode(h.Team,t.id,a);n.children.push(s),this.mapOfNodeIdAndNode[s.id]=s}n.childFetched=!0}},e.prototype.shouldSyncSelectedCollection=function(){if(!this.teamFilter)return!1;if(!this.collectionFilter.childFetched)return!0;var e=this.collectionFilter.children;for(var t in e){var o=e[t];if(!o.childFetched)return!0}return!1},e.prototype.onCollectionChanged=function(){this.changeVisiblityOfTree(!1),this.changeVisibilityOfCollection(this.collectionFilter,!0),this.teamFilter=null},e.prototype.keyDownOnSearch=function(e){e.keyCode===o.KeyStrokes.enterKeyStroke&&this.toggleSearch()},e.prototype.toggleSearch=function(){this.searchEnabled?this.hideSearch():this.search()},e.prototype.search=function(){var e=this;this.searchEnabled||(this.$localStorage.searchEnabled=!0,this.searchEnabled=!0,this.$timeout(function(){e.removeFocusFromTree(),e.onCollectionChanged()},0))},e.prototype.hideSearch=function(){var e=this;s.ErrorHelper.clearNonStickyErrors(n.ToolbarType.Settings,this.$rootScope),this.$timeout(function(){e.searchEnabled=!1,e.$localStorage.searchEnabled=!1,e.isRefreshing=!0,e.$timeout(function(){e.changeVisiblityOfTree(!0),e.restoreFocus(),e.isRefreshing=!1},e.hideSearchTimerInMilliseconds)},0)},e.prototype.isChangeButtonDisabled=function(){return 1==this.$localStorage.activeSession.state},e.prototype.restoreFocus=function(){if(this.data&&0!==this.data.length)if(this.currentSelectedNodeId){var e=this.findNode(this.currentSelectedNodeId,this.data);e?e.hasFocus=!0:this.data[0].hasFocus=!0}else this.data[0].hasFocus=!0},e.prototype.teamFilterChanged=function(){var e=this;this.searchTimer&&this.$timeout.cancel(this.searchTimer),this.searchTimer=this.$timeout(function(){e.handleSearchFilterChanged()},this.searchKeyStrokeTimeoutInMilliseconds)},e.prototype.handleSearchFilterChanged=function(){var e=this;this.searchEnabled&&(this.onSearchStart(),this.shouldSyncSelectedCollection()?this.connectionInfoService.getProjectCollectionData(this.collectionFilter.id,function(t){e.syncCollection(t[0]),e.applySearchFilter()},function(t){e.onSearchError(t)}):this.$timeout(function(){e.applySearchFilter()},0))},e.prototype.removeFocusFromTree=function(){if(this.data){var e=this.data;for(var t in e){var o=e[t];o.hasFocus=!1;var n=o.children;if(n)for(var r in n)if(n[r].hasFocus=!1,n[r].children){var i=n[r].children;for(var a in i)i[a].hasFocus=!1}}}},e.prototype.applySearchFilter=function(){var e=this.filterTeams(this.teamFilter);s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,this.$rootScope),e||this.showWarningOnTeamFilterNotMatching(),this.syncError(),this.onSearchComplete()},e.prototype.onSearchStart=function(){this.$rootScope.actionInProgress=!0,this.isRefreshing=!0},e.prototype.onSearchComplete=function(){this.$rootScope.actionInProgress=!1,this.isRefreshing=!1,this.$scope.$apply()},e.prototype.onSearchError=function(e){C.traceError(y,20,e),s.ErrorHelper.saveError(e,n.ToolbarType.Settings,0,!0,!0,this.$rootScope),this.syncError(),this.onSearchComplete()},e.prototype.showWarningOnTeamFilterNotMatching=function(){var e={};e.errorMessage="No projects/teams found.",s.ErrorHelper.saveError(e,n.ToolbarType.Settings,1,!1,!0,this.$rootScope)},e.prototype.syncError=function(){var e=c.LocalStorageService.retrieve(c.toolbarErrorMap);this.$localStorage.toolbarErrorMap=e},e.prototype.addWatchers=function(){var e=this;this.$scope.$watch(function(){return e.collectionFilter},function(t){e.searchEnabled&&e.onCollectionChanged()})},e.prototype.filterTeams=function(e){if(!this.collectionFilter)return!0;if(!e)return this.changeVisibilityOfCollection(this.collectionFilter,!0),!0;var t=this.collectionFilter,o=t.children;if(!o)return!1;var n=!1;for(var r in o){var i=o[r],a=this.doesNameMatchesSearchFilter(i.name,e);a?(n=!0,t.show=!0,this.updateTabIndex(t,null),t.state=v.Expanded,i.show=!0,i.state=v.Expanded,this.updateTabIndex(i,t)):i.show=!1;var s=i.children;if(s)for(var c in s){var l=s[c];a||this.doesNameMatchesSearchFilter(l.name,e)?(n=!0,t.show=!0,t.state=v.Expanded,this.updateTabIndex(t,null),i.show=!0,i.state=v.Expanded,this.updateTabIndex(i,t),l.show=!0,this.updateTabIndex(l,i)):l.show=!1}}return n},e.prototype.changeVisiblityOfTree=function(e){if(this.data){var t=this.data;for(var o in t)this.changeVisibilityOfCollection(t[o],e)}},e.prototype.changeVisibilityOfCollection=function(e,t){e&&(e.show=t,this.updateTabIndex(e,null),this.changeVisiblityOfCollectionChildren(e,t))},e.prototype.updateTabIndex=function(e,t){t&&t.state!==v.Expanded?e.tabIndex=-1:e.show?e.tabIndex=0:e.tabIndex=-1},e.prototype.changeVisiblityOfCollectionChildren=function(e,t){if(e){var o=e.children;if(o)for(var n in o){var r=o[n];if(r.show=t,this.updateTabIndex(r,e),r.children){var i=r.children;for(var a in i){var s=i[a];s.show=t,this.updateTabIndex(s,r)}}}}},e.prototype.doesNameMatchesSearchFilter=function(e,t){return t?e&&e.toLowerCase().indexOf(t.toLowerCase())>-1?!0:!1:!0},e.prototype.validateTfsUrl=function(){s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,this.$rootScope),this.isInputEditable=!1,this.$rootScope.actionInProgress=!0,this.previewUrl=this.$filter("tfsurlFilter")(this.baseUrl),this.connectionInfoService.initialize(this.previewUrl),this.$localStorage.loginInProgress=!0,this.connectionInfoService.getProjectCollections()},e.prototype.keyDownOnNewUser=function(e){e.keyCode===T&&this.loadSignUpPage()},e.prototype.loadSignUpPage=function(){b.openWindowInNewTab(this.signUpUrl)},e.prototype.loadMarketPlacePage=function(){b.openWindowInNewTab(this.marketPlaceUrl)},e.prototype.disconnect=function(){this.cleanUpCache(),this.data=[],this.mapOfNodeIdAndNode={},this.currentSelectedNodeId=null,this.previousSelectedNodeId=null,this.connectionStatusPassed=!1,this.tfsConnectionErrorMessage="",this.showConnectionStatusIcon=!1,this.isloggedIn=!1,this.baseUrl=this.previewUrl,this.teamPath="",this.projectAndTeam="",this.previousSelectedNode=null,this.previewUrl="",this.isInputEditable=!0,this.isTeamSelected=!1,this.utilityService.setTabindexOnToolbarItems("item-settings")},e.prototype.cleanUpCache=function(){this.$localStorage.$sync(),this.cleanUpActiveSettings(),delete this.$localStorage.connectionSettings,delete this.$localStorage.basicConnectionSettings,delete this.$localStorage.connectionStatus,delete this.$localStorage.loggedIn,delete this.$localStorage.reconnected,delete this.$localStorage.refreshing,delete this.$localStorage.loginInProgress,delete this.$localStorage.searchEnabled,delete this.$localStorage.changeTeamDetails,delete this.$localStorage.connectedMode,this.$localStorage.$apply()},e.prototype.cleanUpActiveSettings=function(){delete this.$localStorage.activeSettings;var e={offlineMode:!1};this.$localStorage.activeSettings=e},e.prototype.loadCachedData=function(){var e=this;if("offline"!==this.connectionOption&&!this.utilityService.isOfflineMode()){if(this.requireAutoScroll=!0,this.$localStorage.$sync(),this.$localStorage.initialBaseUrl&&!this.$localStorage.loggedIn)return this.baseUrl=this.$localStorage.initialBaseUrl,void(this.$localStorage.loginInProgress&&(this.isInputEditable=!1,this.$rootScope.actionInProgress=!0));var t=this.$localStorage.activeSettings,o=this.$localStorage.basicConnectionSettings;if(o)return this.baseUrl=o,this.previewUrl=o,this.connectionStatusPassed=!0,this.showConnectionStatusIcon=!0,this.isInputEditable=!1,this.isloggedIn=!0,this.isRefreshing=!0,this.connectionInfoService.initialize(this.previewUrl),this.$rootScope.actionInProgress=!0,this.loadData(function(){e.isRefreshing=!1,e.$rootScope.actionInProgress=!1,e.searchEnabled&&e.removeFocusFromTree(),e.$scope.$apply()}),void(t&&!t.offlineMode&&t.serverbaseUrl&&this.updateProjectAndTeam(t.collection,t.project,t.team));if(t&&!t.offlineMode&&t.serverbaseUrl){var n=JSON.parse(JSON.stringify(this.$localStorage.connectionSettings));if(!n)return this.$localStorage.activeSettings="",void this.$localStorage.$apply();var r=[];for(var i in n.nodeData){var a=this.cloneTreeData(n.nodeData[i]);a.childFetched=!1,a.children=null,r.push(a)}this.data=r,this.collectionFilter=null,this.baseUrl=t.serverbaseUrl,this.previewUrl=this.$filter("tfsurlFilter")(this.baseUrl),this.updateProjectAndTeam(t.collection,t.project,t.team),this.connectionStatusPassed=!0,this.showConnectionStatusIcon=!0,this.isInputEditable=!1,this.connectionInfoService.initialize(this.previewUrl),this.isloggedIn=!0,this.isTeamSelected=!0,this.$rootScope.actionInProgress=!0,this.isRefreshing=!0,this.$timeout(function(){e.loadTreeData(n),e.$rootScope.actionInProgress=!1,e.isRefreshing=!1},this.delayForLoadingTreeControl)}}},e.prototype.cloneTreeData=function(e){var t=new p(e.name,e.id,e.parentId);return t.childFetched=e.childFetched,t.children=e.children,t.state=e.state,t.tabIndex=e.tabIndex,t.hasFocus=e.hasFocus,t.show=e.show,t.artifactType=e.artifactType,t},e.prototype.loadTreeData=function(e){this.data=e.nodeData,this.mapOfNodeIdAndNode=e.mapOfNodeIdAndNode,this.searchEnabled&&this.removeFocusFromTree();var t=this.mapOfNodeIdAndNode[e.selectedNodeId];this.currentSelectedNodeId=t.id,this.previousSelectedNodeId=t.id;var o=this.getParentData(t),n=this.getParentData(o);this.collectionFilter=this.findNode(n.id,this.data)},e.prototype.repair=function(){this.$rootScope.actionInProgress=!1,s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,this.$rootScope),this.$localStorage.$sync();var e=this.$localStorage.activeSettings;e&&e.serverbaseUrl?this.refresh():this.isInputEditable=!0},e.prototype.refresh=function(){return this.$rootScope.actionInProgress=!0,this.$localStorage.refreshing=!0,this.$localStorage.reconnected=!1,this.$localStorage.teamSettings=void 0,this.isRefreshing?void C.traceInfo(y,5,"Already refreshing"):(s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,this.$rootScope),this.isRefreshing=!0,this.connectionInfoService.initialize(this.previewUrl),void this.connectionInfoService.getProjectCollections(null,null,!0))},e.prototype.changeConnectionSettings=function(){this.$localStorage.changeTeamDetails=!0;var e=this.$localStorage.activeSettings;e.collectionDetails=null,e.projectDetails=null,e.teamDetails=null,this.isTeamSelected=!1},e.prototype.onReconnectSuccessfulDuringRefresh=function(){var e=this;if(this.currentSelectedNodeId){var t=this.getSelectedArtifact(this.currentSelectedNodeId,h.Team),o=this.getSelectedArtifact(this.currentSelectedNodeId,h.Project),r=this.getSelectedArtifact(this.currentSelectedNodeId,h.Collection);this.loadData(function(){var i=e.findNode(r.id,e.data);if(!i)return e.onRefreshCompleted(),e.$rootScope.actionInProgress=!1,void C.traceWarning(y,1,"Collection:"+r+" is not present");i.state=v.Expanded,i.hasFocus=!1;var a=e.findNode(o.id,i.children);return a?(a.state=v.Expanded,void e.populateArtifacts(a,function(){var o=e.findNode(t.id,a.children);if(!o)return e.onRefreshCompleted(),e.$rootScope.actionInProgress=!1,void C.traceWarning(y,3,"Team:"+t+" is not present");var r=e.$localStorage.activeSettings;r&&r.collectionDetails&&r.projectDetails&&r.teamDetails?e.connectionInfoService.getTeamDefaultAreaPath(r.collectionDetails.name,r.projectDetails.name,r.teamDetails.name,function(t){r.areaPath=t.defaultAreaPath,r.areaPaths=t.areaPathList,e.updatedCachedIterationPathAndSetFocus(o,r)},function(t){r.areaPath=null,C.traceWarning(y,17," Default AreaPath for Team:"+r.teamDetails.name+" failed with error "+s.ErrorHelper.getErrorMessage(t,!1)),s.ErrorHelper.saveError(t,n.ToolbarType.Settings,0,!0,!0,e.$rootScope),e.updatedCachedIterationPathAndSetFocus(o,r)}):e.setFocusToTeamAndUpdateSettings(o,r)})):(e.onRefreshCompleted(),e.$rootScope.actionInProgress=!1,void C.traceWarning(y,2,"Project:"+o+" is not present"))})}else this.loadData(function(){e.onRefreshCompleted(),e.$rootScope.actionInProgress=!1,e.$scope.$apply()})},e.prototype.setFocusToTeamAndUpdateSettings=function(e,t){e.hasFocus=!1,this.currentSelectedNodeId=e.id,this.$localStorage.$sync(),this.$localStorage.activeSettings=t;var o=JSON.parse(JSON.stringify(this.data)),n=JSON.parse(JSON.stringify(this.mapOfNodeIdAndNode)),r=new m(o,n,this.currentSelectedNodeId);this.$localStorage.connectionSettings=r,this.$localStorage.$apply(),this.onRefreshCompleted(),this.$rootScope.actionInProgress=!1,this.$scope.$apply()},e.prototype.updatedCachedIterationPathAndSetFocus=function(e,t){var o=this;this.connectionInfoService.getTeamIterationPath(t.collectionDetails.name,t.projectDetails.name,t.teamDetails.name,function(n){t.iterationPath=n,o.setFocusToTeamAndUpdateSettings(e,t)},function(n){t.iterationPath=null,C.traceWarning(y,16," Current Iteration for Team:"+t.teamDetails.name+" failed with error "+s.ErrorHelper.getErrorMessage(n,!1)),o.setFocusToTeamAndUpdateSettings(e,t)})},e.prototype.onRefreshCompleted=function(){this.isRefreshing=!1,this.$localStorage.refreshing=!1,this.requireAutoScroll=!0,this.$scope.$apply()},e.prototype.getSelectedArtifact=function(e,t){switch(t){case h.Team:return this.mapOfNodeIdAndNode[e];case h.Project:return this.getParentData(this.mapOfNodeIdAndNode[e]);case h.Collection:return this.getParentData(this.getParentData(this.mapOfNodeIdAndNode[e]));default:return C.traceWarning(y,6,"ArtifactType:"+t+" is not present"),null}},e.prototype.clear=function(){this.data=[],this.mapOfNodeIdAndNode={},this.currentSelectedNodeId=null},e.prototype.findNode=function(e,t){if(!t||!e)return C.traceWarning(y,4,"NodeID:"+e+" is not present"),null;for(var o in t)if(t[o].id===e)return t[o];return C.traceWarning(y,4,"NodeID:"+e+" is not present"),null},e.prototype.save=function(){var e=this;if(this.$rootScope.actionInProgress=!0,this.removeFocusFromTree(),null!=this.currentSelectedNodeId){var t={name:this.getParentData(this.mapOfNodeIdAndNode[this.currentSelectedNodeId]).name,id:this.getParentData(this.mapOfNodeIdAndNode[this.currentSelectedNodeId]).id},o={name:this.getParentData(this.getParentData(this.mapOfNodeIdAndNode[this.currentSelectedNodeId])).name,id:this.getParentData(this.getParentData(this.mapOfNodeIdAndNode[this.currentSelectedNodeId])).id},r={name:this.mapOfNodeIdAndNode[this.currentSelectedNodeId].name,id:this.mapOfNodeIdAndNode[this.currentSelectedNodeId].id},i=l.getCollectionUrl(this.previewUrl,o.name);this.connectionInfoService.getTeamDefaultAreaPath(o.name,t.name,r.name,function(n){var a={serverbaseUrl:e.previewUrl,url:i,collection:o.name,project:t.name,team:r.name,areaPath:n.defaultAreaPath,areaPaths:n.areaPathList,teamDetails:r,collectionDetails:o,projectDetails:t,offlineMode:!1};e.connectionInfoService.getTeamIterationPath(o.name,t.name,r.name,function(t){t&&(a.iterationPath=t),e.saveSettingsAndUpdateFocus(a)},function(t){e.saveSettingsAndUpdateFocus(a)})},function(t){C.traceError(y,10,t),s.ErrorHelper.saveError(t,n.ToolbarType.Settings,0,!0,!0,e.$rootScope),e.$rootScope.actionInProgress=!1})}},e.prototype.updateFocus=function(e,t,o){if(null!==e){var n=this.getSelectedArtifact(e,h.Team),r=this.getSelectedArtifact(e,h.Project),i=this.getSelectedArtifact(e,h.Collection);if(void 0!==n){var a=this.findNode(i.id,this.data);if(!a)return void C.traceWarning(y,7,"Collection:"+i+" is not present");a.hasFocus=!1;var s=this.findNode(r.id,a.children);if(!s)return void C.traceWarning(y,8,"Project:"+r+" is not present");var c=this.findNode(n.id,s.children);if(!c)return void C.traceWarning(y,9,"Team:"+n+" is not present");c.hasFocus=t}o()}else o()},e.prototype.show=function(e){return e.show},e.prototype.showCollpased=function(e){return e.artifactType!==h.Team&&e.state===v.Collapsed},e.prototype.nodeNeedsScroll=function(e){return this.requireAutoScroll&&e.id===this.currentSelectedNodeId},e.prototype.showExpanded=function(e){return e.artifactType!==h.Team&&e.state===v.Expanded},e.prototype.showExpanding=function(e){return e.state===v.Expanding},e.prototype.onNodeSelection=function(e,t){var o=this;this.requireAutoScroll=!1,e.state!==v.Collapsed||e.childFetched?e.state===v.Collapsed?(e.state=v.Expanded,this.updateTabIndexOnChildren(e,0)):(e.state=v.Collapsed,this.updateTabIndexOnChildren(e,-1)):(e.state=v.Expanding,this.populateArtifacts(e,function(){e.childFetched=!0,e.state=v.Expanded,o.updateTabIndexOnChildren(e,0),t()}))},e.prototype.generateCssForSelectedNode=function(e){return e.id===this.currentSelectedNodeId?"selected":""},e.prototype.onNodeLabelSelection=function(e){var t=this;return this.requireAutoScroll=!1,e.artifactType!==h.Team?void this.onNodeSelection(e,function(){t.$scope.$apply()}):(this.currentSelectedNodeId=e.id,void this.updateProjectAndTeam(this.getParentData(this.getParentData(e)).name,this.getParentData(e).name,e.name))},e.prototype.isSaveDisable=function(){return this.isRefreshing||!this.currentSelectedNodeId},e.prototype.keyDownOnNext=function(e){e.keyCode===o.KeyStrokes.enterKeyStroke&&(this.isInputEditable=!1,this.validateTfsUrl())},e.prototype.keyDownOnRefresh=function(e){e.keyCode===o.KeyStrokes.enterKeyStroke&&this.refresh()},e.prototype.keyDownOnNode=function(e,t){var n=this;t.keyCode===o.KeyStrokes.rightArrowKeyStroke?(t.preventDefault(),e.artifactType!==h.Team&&e.state===v.Collapsed&&this.onNodeSelection(e,function(){n.$scope.$apply()})):t.keyCode===o.KeyStrokes.leftArrowKeyStroke?(t.preventDefault(),e.state===v.Expanded&&this.onNodeSelection(e,function(){n.$scope.$apply()})):t.keyCode===o.KeyStrokes.spaceStroke?e.artifactType===h.Team&&(this.onNodeLabelSelection(e),t.preventDefault()):t.keyCode===o.KeyStrokes.enterKeyStroke&&e.artifactType===h.Team&&(this.$localStorage.activeSession&&1===this.$localStorage.activeSession.state||(this.currentSelectedNodeId=e.id,this.save()))},e.prototype.updateTabIndexOnChildren=function(e,t){for(var o in e.children)e.children[o].tabIndex=t},e.prototype.enableTabIndex=function(e){return e?0:-1},e.prototype.saveSettingsAndUpdateFocus=function(e){var t=this;this.updateFocus(this.previousSelectedNodeId,!1,function(){t.updateFocus(t.currentSelectedNodeId,!1,function(){t.changeVisiblityOfTree(!0),t.collapseTree();var o=JSON.parse(JSON.stringify(t.data)),n=JSON.parse(JSON.stringify(t.mapOfNodeIdAndNode)),r=new m(o,n,t.currentSelectedNodeId);t.$localStorage.$sync(),t.$localStorage.connectionSettings=r,t.$localStorage.$apply(),t.setValuesInLocalStorageForStakeHolderMode(),t.backgroundMessaging.sendMessage(i.NotificationType.SaveSettings,e,function(){t.$localStorage.$sync(),t.$localStorage.basicConnectionSettings="",t.connectionInfoService.checkLicense(!0),t.$location.url("/"),t.$rootScope.actionInProgress=!1,t.$localStorage.changeTeamDetails=!1,t.$localStorage.teamSettings=void 0,t.$localStorage.$apply(),t.$scope.$apply()}),t.utilityService.setTabindexOnToolbarItems("item-settings")})}),s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,this.$rootScope)},e.prototype.setValuesInLocalStorageForStakeHolderMode=function(){this.$localStorage.$sync(),this.$localStorage.stakeholderTraceabilityPageUrl=d.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl,this.$localStorage.feedbackStateOption=d.FeedbackStateOptionConstants.pendingState,this.$localStorage.$apply()},e.prototype.collapseTree=function(){var e=this.mapOfNodeIdAndNode[this.currentSelectedNodeId],t=this.getParentData(e),o=this.collectionFilter.children;for(var n in o){var r=o[n];r.id!==t.id&&(r.state=v.Collapsed,r.children=[],r.childFetched=!1)}},e.prototype.updateProjectAndTeam=function(e,t,o){this.teamPath=e+"/"+t+"/"+o},e.prototype.populateArtifacts=function(e,t){e.artifactType===h.Collection?this.populateProjects(e,t):e.artifactType===h.Project&&this.populateTeams(e,t)},e.prototype.loadData=function(e){var t=this,o=this.getSelectedCollectionId();this.clear();var r=this;this.connectionInfoService.getProjectCollections(function(i){i=t.sortList(i);var a=null;for(var c in i){var l=t.getNewNode(h.Collection,null,i[c]);r.data.push(l),o&&o===l.id&&(a=l),r.mapOfNodeIdAndNode[l.id]=new f(l.name,l.id,l.parentId)}!a&&r.data.length>0&&(r.data[0].hasFocus=!1);var d=a?a:r.data[0];d.childFetched=!0,d.state=v.Expanded,d.tabIndex=0,t.collectionFilter=d,t.connectionInfoService.getTeamProjects(d.name,function(o){o=t.sortList(o);for(var n in o){var i=t.getNewNode(h.Project,d.id,o[n]);d.children.push(i),r.mapOfNodeIdAndNode[i.id]=new f(i.name,i.id,i.parentId)}e&&e()},function(e){r.onRefreshCompleted(),t.$rootScope.actionInProgress=!1,C.traceError(y,11,e),s.ErrorHelper.saveError(e,n.ToolbarType.Settings,0,!0,!0,t.$rootScope)})},function(e){r.onRefreshCompleted(),t.$rootScope.actionInProgress=!1,C.traceError(y,12,e),s.ErrorHelper.saveError(e,n.ToolbarType.Settings,0,!0,!0,t.$rootScope)})},e.prototype.getSelectedCollectionId=function(){var e=this.collectionFilter?this.collectionFilter.id:null;if(this.currentSelectedNodeId){var t=this.getSelectedArtifact(this.currentSelectedNodeId,h.Collection);t&&(e=t.id)}return e},e.prototype.getNewNode=function(e,t,o){var n=new p(o.name,o.id,t);return n.state=v.Collapsed,n.childFetched=!1,n.tabIndex=0,n.hasFocus=!1,n.show=!0,n.children=[],n.artifactType=e,n},e.prototype.populateProjects=function(e,t){var o=this;e.childFetched=!0,e.tabIndex=0;var r=this;this.connectionInfoService.getTeamProjects(e.name,function(n){n=o.sortList(n);for(var i in n){var a=o.getNewNode(h.Project,e.id,n[i]);e.children.push(a),r.mapOfNodeIdAndNode[a.id]=new f(a.name,a.id,a.parentId)}t&&t()},function(e){r.onRefreshCompleted(),o.$rootScope.actionInProgress=!1,C.traceError(y,13,e),s.ErrorHelper.saveError(e,n.ToolbarType.Settings,0,!0,!0,o.$rootScope)})},e.prototype.populateTeams=function(e,t){var o=this;e.childFetched=!0,e.tabIndex=0,e.hasFocus=!1;var r=this;this.connectionInfoService.getTeams(this.getParentData(e).name,e.name,function(n){n=o.sortList(n);for(var i in n){var a=o.getNewNode(h.Team,e.id,n[i]);e.children.push(a),r.mapOfNodeIdAndNode[a.id]=new f(a.name,a.id,a.parentId);
}t&&t()},function(e){r.onRefreshCompleted(),o.$rootScope.actionInProgress=!1,C.traceError(y,14,e),s.ErrorHelper.saveError(e,n.ToolbarType.Settings,0,!0,!0,o.$rootScope)})},e.prototype.getParentData=function(e){if(!e)return null;if(!this.mapOfNodeIdAndNode[e.id])return null;var t=this.mapOfNodeIdAndNode[e.id].parentId;return this.mapOfNodeIdAndNode[t]},e.prototype.getUnicodeHtml=function(e){return this.$sce.trustAsHtml(e)},e.prototype.validErrorMessage=function(e){return o.validErrorCode.some(function(t){return 0===e.indexOf(t)})},e.prototype.onConnectionSuccessful=function(){var e=this;this.$localStorage.$sync(),delete this.$localStorage.loginInProgress,this.$localStorage.basicConnectionSettings=this.previewUrl,this.$localStorage.loggedIn=!0,this.$localStorage.$apply(),this.connectionStatusPassed=!0,this.showConnectionStatusIcon=!0,this.baseUrl=this.previewUrl,this.isloggedIn=!0,this.isInputEditable=!1,this.isRefreshing=!0,this.$scope.$apply(),this.connectionInfoService.initialize(this.previewUrl),this.loadData(function(){e.onCollectionChanged(),e.isRefreshing=!1,e.$rootScope.actionInProgress=!1,e.$scope.$apply(),e.utilityService.setTabindexOnToolbarItems("item-settings")})},e.prototype.onConnectionFailure=function(e){this.$localStorage.$sync(),this.$localStorage.loggedIn=!1,this.$localStorage.loginInProgress=!1,this.$localStorage.$apply(),this.tfsConnectionErrorMessage=e,this.connectionStatusPassed=!1,this.showConnectionStatusIcon=!0,this.isInputEditable=!0},e.prototype.getTeamRadioText=function(){return"Connected"},e.prototype.getOfflineFooterMessage=function(){var e=this.$localStorage.activeSession;return e&&e.state==n.SessionState.InProgress?"To change settings, stop the session":"Start the session to continue exploring your application."},e.prototype.getConnectedModeDescription=function(){return"Use the full capture, create, and collaborate capabilities for testing your web apps. Works with "+g.BrandingChangesHelper.getHostedBrandingName()+" and Team Foundation Server 2015 or later. "},e.prototype.changeConnectionOption=function(){this.$localStorage.connectionOption=this.connectionOption;var e=this.$localStorage.activeSettings;this.connectionOption===d.ConnectionOptionConstants.offlineMode?e&&(e.offlineMode=!0,this.$localStorage.$apply()):e&&(e.offlineMode=!1,this.$localStorage.$apply())},e.prototype.sortList=function(e){return e=e.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})},e.prototype.initializeMessaging=function(){var e=this;a.MessagingFactory.getSubscriptionService().subscribe(function(){e.onConnectionSuccessful(),s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,e.$rootScope)},i.NotificationType.TfsLoginSucceeded),a.MessagingFactory.getSubscriptionService().subscribe(function(){e.onReconnectSuccessfulDuringRefresh(),s.ErrorHelper.clearAllErrors(n.ToolbarType.Settings,e.$rootScope)},i.NotificationType.TfsReconnectSucceeded),a.MessagingFactory.getSubscriptionService().subscribe(function(t){e.isRefreshing=!1,e.$localStorage.refreshing=!1,e.$localStorage.reconnected=!1,e.$rootScope.actionInProgress=!1;var o={};o.statusText=t.message,C.traceError(y,16,t),s.ErrorHelper.saveError(o,n.ToolbarType.Settings,0,!0,!0,e.$rootScope),e.$scope.$apply()},i.NotificationType.TfsReconnectFailed),a.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onConnectionFailure(t.message),e.$rootScope.actionInProgress=!1;var o={};o.statusText=t.message,C.traceError(y,15,t),s.ErrorHelper.saveError(o,n.ToolbarType.Settings,0,!0,!0,e.$rootScope),e.$scope.$apply()},i.NotificationType.TfsLoginFailed)},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){a.MessagingFactory.getSubscriptionService().clearAll()})},e.prototype.stopIconBlink=function(){this.$localStorage.$sync(),this.$localStorage.iconBlink=!1,this.$localStorage.$apply()},e.$inject=["$filter","$scope","$rootScope","$location","ConnectionInfoService","$sce","$localStorage","$window","$timeout","BackgroundMessaging","$route","UtilityService"],e}();t.SignInFormController=x}),define("AngularTreeControl/TreeView.Directive",["require","exports"],function(e,t){var o=function(){function e(t){e.prototype.link=function(e,o,n){var r=n.treeId,i=n.treeModel,a=n.nodeId||"id",s=n.nodeLabel||"label",c=n.nodeChildren||"children",l=n.containerId,d='<ul><li data-ng-repeat="node in '+i+'"><div class="rowNode" data-ng-show="controller.show(node)" data-ng-class="controller.generateCssForSelectedNode(node)" tabindex="{{ node.tabIndex }}" role="listitem" aria-label="{{ nodeLabel }}" ngautofocus enable="{{ node.hasFocus === true }}" data-ng-keydown="controller.keyDownOnNode(node, $event)"><i class="collapsed" data-ng-show="controller.showCollpased(node)" data-ng-click="'+r+'.selectNodeHead(node)"></i><i class="expanded" data-ng-show="controller.showExpanded(node)" data-ng-click="'+r+'.selectNodeHead(node)"></i><i class="expanding" data-ng-show="controller.showExpanding(node)"></i><div class="textLabel" title="{{ node.name }}" data-ng-click="'+r+'.selectNodeLabel(node)">{{node.'+s+'}}</div></div><div scroll-into-view ="controller.nodeNeedsScroll(node)" scroll-container-id = "'+l+'" data-container-id = "'+l+'" data-ng-show="controller.show(node)" data-ng-hide="controller.showCollpased(node)" data-tree-id="'+r+'" data-tree-model="node.'+c+'" data-node-id='+a+" data-node-label="+s+" data-node-children="+c+"></div></li></ul>";r&&i&&(n.angularTreeview&&(e[r]=e[r]||{},e[r].selectNodeHead=e[r].selectNodeHead||function(t){e.controller.onNodeSelection(t,function(){e.$apply()})},e[r].selectNodeLabel=e[r].selectNodeLabel||function(t){e.controller.onNodeLabelSelection(t,function(){e.$apply()})}),o.html("").append(t(d)(e)))}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$compile"],t},e}();t.TreeView=o}),define("AngularTreeControl/TreeView.Module",["require","exports","../AngularTreeControl/TreeView.Directive"],function(e,t,o){angular.module("angularTreeview",["XT.Popup.CommonControls"]).directive("treeModel",o.TreeView.factory())}),define("SignIn/Tooltip.Filter",["require","exports","../../Model/Model"],function(e,t,o){function n(){return function(e){function t(e){return e===o.SessionState.InProgress?"Stop your session before you change the account URL":"Change account URL"}return t(e)}}t.tooltipFilter=n}),define("SignIn/ChangeClass.Filter",["require","exports"],function(e,t){function o(){return function(e,t){function o(e,t){return 1===e?t+"-disable":t}return o(e,t)}}t.changeClassFilter=o}),define("SignIn/TfsUrl.Filter",["require","exports"],function(e,t){function o(){return function(e){function t(e,t){return-1!==e.indexOf(t,e.length-t.length)}function o(e,t){return 0===e.indexOf(t)}function n(e){return t(e,d[0])||o(e,d[1])||o(e,d[2])||o(e,d[3])?!0:!1}function r(e){return e.length<=5&&null!=e.match(/^[0-9]+$/)&&parseInt(e)>=0&&parseInt(e)<=65536?!0:!1}function i(e){var o=document.createElement("a");return o.href=c+e,o.hostname?(n(e.toLowerCase())?o.href=l+o.hostname+o.pathname:o.port?r(o.port)?t(e,o.port)?o.href=c+o.hostname+":"+o.port+"/"+m:o.href=c+o.hostname+":"+o.port+o.pathname:o=null:o.href=c+o.hostname+":"+u+"/"+m,o):null}function a(e){var t=document.createElement("a");return t.href=e,t.hostname?("http:"===t.protocol?t.port?t.href=c+t.hostname+":"+t.port+t.pathname:t.href=c+t.hostname+":"+g+t.pathname:n(t.hostname)?t.href=l+t.hostname:"https:"===t.protocol&&(t.port?t.href=l+t.hostname+":"+t.port+t.pathname:t.href=l+t.hostname+":"+p+t.pathname),t):null}function s(e){if(!e)return"";var t=e.trim();if(null===t.match(/^[a-zA-Z0-9_.\/:-]+$/))return"";var n=null;if(n=o(t,c)||o(t,l)?a(t):i(t)){var r=n.toString();return"/"!==r.charAt(r.length-1)&&(r=r.concat("/")),r}return""}var c="http://",l="https://",d=[".visualstudio.com","dev.azure.com/","codeapp.ms/","codedev.ms/"],u=8080,g=80,p=443,m="tfs";return s(e)}}t.tfsUrlFilter=o}),define("SignIn/SignInForm.Module",["require","exports","../SignIn/SignIn.Controller","../SignIn/Tooltip.Filter","../SignIn/ChangeClass.Filter","../SignIn/TfsUrl.Filter","../CommonControls/AutoFocus.Directive"],function(e,t,o,n,r,i,a){angular.module("XT.Popup.SignInForm",["angularTreeview","XT.Popup.Common","XT.Popup.CommonControls"]).controller("SignInFormController",o.SignInFormController).filter("TooltipFilter",n.tooltipFilter).filter("ChangeClassFilter",r.changeClassFilter).filter("tfsurlFilter",i.tfsUrlFilter).directive("ngautofocus",["$document",a.autoFocus])}),define("NoteForm/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("NoteForm/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("NoteForm/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("NoteForm/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m}),define("NoteForm/NoteForm.Controller",["require","exports","../../Messaging/Messaging","../../Messaging/ChromeMessaging","../../Common/Constants"],function(e,t,o,n,r){var i=function(){function e(e,t,o,n,r){this.$location=e,this.$localStorage=t,this.$timeout=o,this.$scope=n,this.utilityService=r,this.uninitializeMessaging(),this.initializeLocalStorage(),this.$storage=t,this.utilityService.setTabindexOnToolbarItems("item-notes")}return e.prototype.keydown=function(e){e&&e.ctrlKey&&e.keyCode===r.KeyCodeConstants.sKeyCode&&this.save()},e.prototype.save=function(){var e=this;if(this.$storage.unsavedNote){var t=this.$storage.unsavedNote;this.clearLocalStorage(),this.$timeout(function(){n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.SaveNote,t,function(){e.$localStorage.$sync(),e.closeForm()})},50)}},e.prototype.clearLocalStorage=function(){this.$localStorage.$sync(),this.$localStorage.unsavedNote="",this.$localStorage.$apply()},e.prototype.initializeLocalStorage=function(){this.$localStorage.$default({unsavedNote:""})},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){$(".toolbar-item.selected a").focus(),e.$location.url("/")},50)},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll()})},e.$inject=["$location","$localStorage","$timeout","$scope","UtilityService"],e}();t.NoteController=i}),define("NoteForm/NoteForm.Module",["require","exports","../NoteForm/NoteForm.Controller","../CommonControls/AutoFocus.Directive"],function(e,t,o,n){angular.module("XT.Popup.NoteForm",["XT.Popup.CommonControls","XT.Popup.Common"]).controller("NoteController",o.NoteController).directive("ngautofocus",["$document",n.autoFocus])}),define("Timeline/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("Timeline/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",
e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("Timeline/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("Timeline/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Timeline/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m}),define("Timeline/../../Model/WindowHelper",["require","exports"],function(e,t){var o=function(){function e(){}return e.removeWindow=function(e){e&&(chrome.windows.remove?chrome.windows.remove(e):chrome.tabs.query({windowId:e},function(e){e.forEach(function(e){chrome.tabs.remove(e.id)})}))},e.openWindowInNewTab=function(e){chrome.tabs.create({url:e})},e}();t.WindowHelper=o}),define("Timeline/Timeline.Controller",["require","exports","../../Messaging/Messaging","../../Model/Model","../../Messaging/ChromeMessaging","../../Model/WindowHelper"],function(e,t,o,n,r,i){var a=i.WindowHelper,s="loading...",c=13,l="view-insights",d=function(){function e(e,t,o,n,r,i,a,c,l){this.$rootScope=e,this.timelineService=t,this.$localStorage=o,this.$scope=n,this.$location=r,this.$workItemService=i,this.$sce=a,this.$timeout=c,this.utilityService=l,this.sessionInsightUrlSuffix="/_testManagement/runs?_a=exploratorySession",this.numberOfCaptures=s,this.uninitializeMessaging(),this.initializeMessagingForAutoRefresh(),this.loadTimeline(),c(this.initializeFocus,0),this.utilityService.setTabindexOnToolbarItems("item-timeline")}return e.prototype.initializeFocus=function(){$("#"+l).focus()},e.prototype.loadTimeline=function(){var e=this;if(this.$localStorage.activeSession&&this.$localStorage.activeSession.state===n.SessionState.InProgress){var t=this.timelineService.getTimeline();this.$rootScope.actionInProgress=!0,t.then(function(t){e.timeline=t,e.$localStorage.lastViewed=new Date,e.numberOfCaptures="("+(e.timeline.timelineEvents.length-2).toString()+")"})["finally"](function(){e.$rootScope.actionInProgress=!1})}else this.numberOfCaptures="(0)"},e.prototype.initializeMessagingForAutoRefresh=function(){var e=this;r.MessagingFactory.getSubscriptionService().subscribe(function(){e.itemSelected()&&(e.numberOfCaptures=s,e.$scope.$apply(),e.loadTimeline())},o.NotificationType.StartAutoRefresh)},e.prototype.itemSelected=function(){var e="#"+this.$location.path().toLowerCase();return"#/timeline"===e?!0:!1},e.prototype.getEncodedUrl=function(e){return this.$sce.trustAsResourceUrl(e)},e.prototype.openSessionInsightPage=function(){var e=this.$localStorage.activeSettings,t=e.url.concat(e.projectDetails.name).concat("/").concat(e.teamDetails.name).concat(this.sessionInsightUrlSuffix);a.openWindowInNewTab(t)},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){r.MessagingFactory.getSubscriptionService().clearAll()})},e.prototype.exportSessionReport=function(){r.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.ExportSession,{},function(){})},e.prototype.keyDownOnSessionInsightIcon=function(e){e.keyCode===c&&this.openSessionInsightPage()},e.$inject=["$rootScope","TimelineService","$localStorage","$scope","$location","WorkItemService","$sce","$timeout","UtilityService"],e}();t.TimelineController=d});var PersistentStorageProxy,quotaIncreaseAmount=10485760,moduleName="PersistentStorageProxy";!function(e){function t(e,t,o,n,r,i,a){e(window.PERSISTENT,t,function(e){e.root.getFile(o,{create:!0},function(e){e.createWriter(function(t){a&&t.seek(t.length);var o=!1;t.onwrite=function(t){o||(o=!0,this.truncate(this.position),r(e.toURL()))},t.write(n)},i)},i)},i)}function o(e,o,n,r,i){var a=window.requestFileSystem||window.webkitRequestFileSystem;navigator.webkitPersistentStorage.queryUsageAndQuota(function(s,c){c-s<o.size?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,navigator.webkitPersistentStorage.requestQuota(c+quotaIncreaseAmount,function(s){t(a,s,e,o,n,r,i)},r)):t(a,c,e,o,n,r,i)})}function n(e,t,o){var n=window.requestFileSystem||window.webkitRequestFileSystem;navigator.webkitPersistentStorage.queryUsageAndQuota(function(r,i){n(window.PERSISTENT,i,function(n){n.root.getFile(e,{},function(e){e.file(function(e){t(e)},o)},o)},o)})}function r(e,t,o){var n=window.requestFileSystem||window.webkitRequestFileSystem;navigator.webkitPersistentStorage.queryUsageAndQuota(function(r,i){n(window.PERSISTENT,i,function(n){n.root.getFile(e,{create:!1},function(e){e.remove(t,o)},o)},o)})}function i(e,t,o,n){var r=window.requestFileSystem||window.webkitRequestFileSystem;r(window.PERSISTENT,t,function(t){t.root.getDirectory(e,{create:!0},function(e){o(e)},n)},n)}function a(e,t,o,n){var r=window.requestFileSystem||window.webkitRequestFileSystem;r(window.PERSISTENT,t,function(t){t.root.getDirectory(e,{create:!0},function(e){e.removeRecursively(function(){o()},n)},n)},n)}e.writeBlob=o,e.getBlob=n,e.removeBlob=r,e.createDirectory=i,e.removeDirectory=a}(PersistentStorageProxy||(PersistentStorageProxy={})),define("PersistentStorage",function(){}),define("Timeline/Timeline.Module",["require","exports","../Timeline/Timeline.Controller","../CommonControls/ngEnter.Directive"],function(e,t,o,n){angular.module("XT.Popup.Timeline",["XT.Popup.CommonControls","XT.Popup.Common"]).directive("ngEnter",n.ngEnter).controller("TimelineController",o.TimelineController)}),angular.module("XT.Popup.SessionForm",["XT.Popup.CommonControls"]),define("Session/Session.Module",["CommonControls/CommonControls.Module"],function(){}),define("VideoCapture/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("VideoCapture/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("VideoCapture/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("VideoCapture/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m}),define("VideoCapture/VideoCapture.Controller",["require","exports","../../Messaging/Messaging","../../Messaging/ChromeMessaging"],function(e,t,o,n){var r="toggle-recording-button",i=function(){function e(e,t,o,n,r){this.$localStorage=e,this.$scope=t,this.utilityService=o,this.$timeout=n,this.$location=r,this.startRecordingText="Start recording",this.stopRecordingText="Stop recording",this.uninitializeMessaging(),this.initializeFocus(),this.utilityService.setTabindexOnToolbarItems("item-video")}return e.prototype.videoCaptureHandler=function(){var e=this;this.utilityService.isOfflineMode()||(this.$localStorage.currentVideoCaptureId&&-1!==this.$localStorage.currentVideoCaptureId?n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.StopVideoCapture,{},function(){e.closeForm(),e.cleanUpStorage()}):n.MessagingFactory.getBroadcastingService().broadcast(o.NotificationType.StartVideoCapture,{}))},e.prototype.isVideoCaptureButtonDisabled=function(){
return this.$localStorage.videoCaptureRequestPresent?this.$localStorage.currentVideoCaptureId&&-1!==this.$localStorage.currentVideoCaptureId?!1:!0:!1},e.prototype.showVideoActionText=function(){return this.$localStorage.currentVideoCaptureId&&-1!==this.$localStorage.currentVideoCaptureId?this.stopRecordingText:this.startRecordingText},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){$(".toolbar-item.selected a").focus(),e.$location.url("/")},50)},e.prototype.cleanUpStorage=function(){this.$localStorage.currentVideoCaptureId=-1,this.$localStorage.elapsedVideoTime=null},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll()})},e.prototype.moveFocusTo=function(e){$("#"+e).focus()},e.prototype.initializeFocus=function(){this.isVideoCaptureButtonDisabled()?this.$timeout(this.moveFocusTo,0,!0,"minimize-page"):this.moveFocusTo(r)},e.$inject=["$localStorage","$scope","UtilityService","$timeout","$location"],e}();t.VideoCaptureController=i}),define("VideoCapture/VideoCapture.Module",["require","exports","../VideoCapture/VideoCapture.Controller"],function(e,t,o){angular.module("XT.Popup.VideoCapture",["XT.Popup.CommonControls"]).controller("VideoCaptureController",o.VideoCaptureController)}),define("MobileXt/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("MobileXt/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("MobileXt/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("MobileXt/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("MobileXt/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("MobileXt/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",
e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("MobileXt/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("MobileXt/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("MobileXt/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("MobileXt/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("MobileXt/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("MobileXt/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("MobileXt/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("MobileXt/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("MobileXt/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>';
}),define("MobileXt/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("MobileXt/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("MobileXt/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);
var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("MobileXt/../../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l}),define("MobileXt/../../Model/WindowHelper",["require","exports"],function(e,t){var o=function(){function e(){}return e.removeWindow=function(e){e&&(chrome.windows.remove?chrome.windows.remove(e):chrome.tabs.query({windowId:e},function(e){e.forEach(function(e){chrome.tabs.remove(e.id)})}))},e.openWindowInNewTab=function(e){chrome.tabs.create({url:e})},e}();t.WindowHelper=o}),define("MobileXt/MobileXt.Controller",["require","exports","../../Tracing/Tracing","../Common/MobileXt.Service","../../Messaging/ChromeMessaging","../../Model/WindowHelper"],function(e,t,o,n,r,i){var a=i.WindowHelper,s=n.PerfectoMobileConnection,c="MobileXtController",l=13,d=".perfectomobile.com",u=function(){function e(e,t,o,n,r,i,a,s,c,l){this.$rootScope=e,this.$sce=t,this.$location=o,this.$localStorage=n,this.$timeout=r,this.mobileXtService=i,this.uiGridConstants=a,this.$filter=s,this.$scope=c,this.utilityService=l,this.unicodeLookup={},this.signUpUrl="http://aka.ms/signupforperfectocloud ",this.uninitializeMessaging(),this.initializeLocalStorage(),this.$storage=n,this.createLookup(),this.initializeDefaultStyle(),this.utilityService.setTabindexOnToolbarItems("item-mobilext")}return e.prototype.getDevices=function(){var e=this;o.TracingService.traceVerbose(c,3,"Getting perfecto mobile cloud devices");var t=this.mobileXtService.getDevices(this.$filter("urlFilter")(this.$storage.perfectoCloudUrl,d),new s(this.$storage.perfectoUserName,this.password));this.$rootScope.actionInProgress=!0,t.then(function(){o.TracingService.traceVerbose(c,4,"Get devices succeeded"),e.refreshDevicesGrid(),e.collapseConnectionDetails(),e.expandDeviceDetails()})["catch"](function(){e.cleanUpCache(),e.refreshDevicesGrid(),o.TracingService.traceError(c,1,"Get devices failed")})["finally"](function(){e.$rootScope.actionInProgress=!1})},e.prototype.onEscapeKeyPress=function(){this.refreshDevicesGrid()},e.prototype.launchDevice=function(){var e=this,t=this.gridApi.selection.getSelectedRows();o.TracingService.traceVerbose(c,5,"Launching device"+t[0].deviceId);var n=this.mobileXtService.launchDevice(t[0].deviceId);this.$rootScope.actionInProgress=!0,n.then(function(){o.TracingService.traceVerbose(c,6,"Launched device"+t[0].deviceId)})["catch"](function(){o.TracingService.traceError(c,2,"Launch device failed")})["finally"](function(){e.$rootScope.actionInProgress=!1})},e.prototype.loadSignUpPage=function(){a.openWindowInNewTab(this.signUpUrl)},e.prototype.toggleConnectionCollapse=function(){this.connectionDetailsExpanded?this.collapseConnectionDetails():(this.deivcesExpanded&&this.collapseDeviceDetails(),this.expandConnectionDetails())},e.prototype.toggleDevicesCollapse=function(){this.deivcesExpanded?this.collapseDeviceDetails():(this.connectionDetailsExpanded&&this.collapseConnectionDetails(),this.expandDeviceDetails())},e.prototype.keyDownOnNewUser=function(e){e.keyCode===l&&this.loadSignUpPage()},e.prototype.refreshDevicesGrid=function(){this.$localStorage.$sync(),this.gridOptions.data=this.getDevicesFromLocalStorage()},e.prototype.cleanUpCache=function(){this.$localStorage.perfectoMobileDeviceList&&(delete this.$localStorage.perfectoMobileDeviceList,this.$localStorage.$apply())},e.prototype.collapseConnectionDetails=function(){this.connectionDetailsCss="section-title-collapsed",this.connectionCollapseButton=this.getUnicodeHtml("expand"),this.connectionDetailsExpanded=!1},e.prototype.collapseDeviceDetails=function(){this.devicesCss="section-title-collapsed",this.devicesCollapseButton=this.getUnicodeHtml("expand"),this.deivcesExpanded=!1},e.prototype.expandConnectionDetails=function(){this.connectionDetailsCss="section-title",this.connectionCollapseButton=this.getUnicodeHtml("collapse"),this.connectionDetailsExpanded=!0},e.prototype.expandDeviceDetails=function(){this.devicesCss="section-title",this.devicesCollapseButton=this.getUnicodeHtml("collapse"),this.deivcesExpanded=!0},e.prototype.initializeLocalStorage=function(){this.$localStorage.$default({})},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$location.url("/")},50)},e.prototype.getDevicesFromLocalStorage=function(){return this.$localStorage.perfectoMobileDeviceList?this.$localStorage.perfectoMobileDeviceList.filter(function(e){return"true"===e.available}):[]},e.prototype.initializeDefaultStyle=function(){this.$localStorage.perfectoMobileDeviceList&&0!==this.$localStorage.perfectoMobileDeviceList.length?(this.expandDeviceDetails(),this.collapseConnectionDetails()):(this.expandConnectionDetails(),this.collapseDeviceDetails()),this.isDeviceSelected=!1,this.setUpGrid()},e.prototype.createLookup=function(){this.unicodeLookup.expand="&#59758",this.unicodeLookup.collapse="&#59757"},e.prototype.getUnicodeHtml=function(e){var t=this.unicodeLookup[e];return t||(t=""),this.$sce.trustAsHtml(t)},e.prototype.setUpGrid=function(){var e=this,t=this;this.gridOptions={columnDefs:[{field:"manufacturer",width:115,filter:{condition:this.uiGridConstants.filter.CONTAINS}},{field:"model",width:140,filter:{condition:this.uiGridConstants.filter.CONTAINS}},{field:"os",displayName:"OS",width:90,filter:{condition:this.uiGridConstants.filter.CONTAINS}},{field:"osVersion",displayName:"OS Version",width:90},{field:"distributer",displayName:"Distributor",width:90,filter:{condition:this.uiGridConstants.filter.CONTAINS}},{field:"deviceId",displayName:"Device ID",width:90,maxWidth:2e4,filter:{condition:this.uiGridConstants.filter.CONTAINS}}],data:t.getDevicesFromLocalStorage(),enableFiltering:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,enableColumnResizing:!0,multiSelect:!1,noUnselect:!0,onRegisterApi:function(o){t.gridApi=o,o.selection.on.rowSelectionChanged(e.$rootScope,function(e){t.isDeviceSelected=!0})}}},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){r.MessagingFactory.getSubscriptionService().clearAll()})},e.$inject=["$rootScope","$sce","$location","$localStorage","$timeout","PerectoMobileCloudXtService","uiGridConstants","$filter","$scope","UtilityService"],e}();t.MobileXtController=u}),define("MobileXt/MobileXt.Module",["require","exports","../MobileXt/MobileXt.Controller"],function(e,t,o){angular.module("XT.Popup.MobileXt",["ngStorage","XT.Popup.Common","XT.Popup.CommonControls","ui.grid","ui.grid.selection","ui.grid.resizeColumns","ui.bootstrap"]).controller("MobileXtController",o.MobileXtController)}),define("Traceability/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("Traceability/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("Traceability/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Traceability/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Traceability/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e);
},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("Traceability/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("Traceability/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("Traceability/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("Traceability/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("Traceability/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("Traceability/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("Traceability/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("Traceability/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("Traceability/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("Traceability/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',
t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("Traceability/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("Traceability/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,
r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("Traceability/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("Traceability/../../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l}),define("Traceability/../../Service/WorkItemHelper",["require","exports","../Common/ExtensionStorage","../Common/Constants","../Model/Model"],function(e,t,o,n,r){var i=function(){function e(){}return e.populateWorkItemMetaDataCache=function(e,t){var r=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);r||(r={}),r[e]={category:t,color:n.WorkItemConstants.defaultWorkItemColor},o.LocalStorageService.store(o.workItemTypeMetaDataCache,r);var i=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);i||(i={}),i[t]={defaultWorkItemType:e},o.LocalStorageService.store(o.workItemCategoryMetaDataCache,i)},e.getWorkItemColor=function(e){if(this.isOffline()||!e)return n.WorkItemConstants.defaultWorkItemColor;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].color},e.getDefaultWorkItemType=function(e){if(this.isOffline())return r.WorkItemType.bug;var t=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);return t[e].defaultWorkItemType},e.getCategory=function(e){if(this.isOffline())return r.WorkItemCategories.BugCategory;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].category},e.isOffline=function(){var e=o.LocalStorageService.retrieve(o.activeSettingsKey);return!e||e.offlineMode?!0:!1},e._removeDirtyWorkItemFromLocalStorage=function(e){this.getCategory(e.type)===r.WorkItemCategories.BugCategory?this._removeDirtyBugFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TaskCategory?this._removeDirtyTaskFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TestCaseCategory?this._removeDirtyTestCaseFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.FeedbackResponseCategory&&this._removeDirtyFeedbackResponseFromLocalStorage()},e._removeDirtyBugFromLocalStorage=function(){o.LocalStorageService.remove(o.bugFormDirtyKey),o.LocalStorageService.remove(o.bugTitleDirtyKey),o.LocalStorageService.remove(o.unsavedBugTitleKey),o.LocalStorageService.remove(o.searchResultsForSimilarBugsKey),o.LocalStorageService.remove(o.selectedBugForUpdateKey),o.LocalStorageService.remove(o.includeImageActionLogsInBugKey)},e._removeDirtyTaskFromLocalStorage=function(){o.LocalStorageService.remove(o.taskFormDirtyKey),o.LocalStorageService.remove(o.taskTitleDirtyKey),o.LocalStorageService.remove(o.unsavedTaskDescriptionKey),o.LocalStorageService.remove(o.unsavedTaskTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInTaskKey)},e._removeDirtyFeedbackResponseFromLocalStorage=function(){o.LocalStorageService.remove(o.feedbackResponseFormDirtyKey),o.LocalStorageService.remove(o.feedbackResponseTitleDirtyKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseDescriptionKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInFeedbackResponseKey)},e._removeDirtyTestCaseFromLocalStorage=function(){o.LocalStorageService.remove(o.testCaseFormDirtyKey),o.LocalStorageService.remove(o.unsavedTestCaseStepsKey),o.LocalStorageService.remove(o.unsavedTestCaseTitleKey)},e}();t.WorkItemHelper=i}),define("Traceability/../../Model/WindowHelper",["require","exports"],function(e,t){var o=function(){function e(){}return e.removeWindow=function(e){e&&(chrome.windows.remove?chrome.windows.remove(e):chrome.tabs.query({windowId:e},function(e){e.forEach(function(e){chrome.tabs.remove(e.id)})}))},e.openWindowInNewTab=function(e){chrome.tabs.create({url:e})},e}();t.WindowHelper=o}),define("Traceability/Traceability.Controller",["require","exports","../../Tracing/Tracing","../../Messaging/ChromeMessaging","../../Model/Model","../../Model/ModelHelper","../../Messaging/Messaging","../../Common/ExtensionStorage","../../Service/WorkItemHelper","../../Model/WindowHelper"],function(e,t,o,n,r,i,a,s,c,l){var d=l.WindowHelper,u=c.WorkItemHelper,g=13,p="TraceabilityController",m=function(){function e(e,t,o,n,r,i,a,s,c,l,d,u){this.$sce=e,this.$location=t,this.$localStorage=o,this.$timeout=n,this.$scope=r,this.$route=i,this.$workItemService=a,this.$sessionService=s,this.$utilityService=c,this.$rootScope=l,this.$traceabilityService=d,this.backgroundMessaging=u,this.seacrhIconUnicode="&#57492",this.$storage=o,this.$localStorage.workItemSearchInProgress=!1,this.uninitializeMessaging(),this.stopIconBlink(),this.searchButton=this.$sce.trustAsHtml(this.seacrhIconUnicode),this.$localStorage.traceabilityEnabled?(this.getTracedWorkItem(),this.$traceabilityService.startWorkItemTracing(this.linkedWorkItem),this.$timeout(function(){$(".close-form-button").attr("tabindex","-1")},100)):this.$localStorage.searchResultsForTraceability&&this.getTraceableWorkItems(),this.$utilityService.setTabindexOnToolbarItems("item-traceability.showing")}return e.prototype.openWorkItem=function(e){d.openWindowInNewTab(e)},e.prototype.keyDownOnInput=function(e){e.keyCode===g&&this.queryWorkItems()},e.prototype.exploreWorkItem=function(){var e=this,t={};if(this.selectedTraceableWorkItem){o.TracingService.traceVerbose(p,1,"Fetching work item "+this.selectedTraceableWorkItem.id),t.workItemType=this.selectedTraceableWorkItem.type,t.traceabilityActionPoint="Search",n.MessagingFactory.getBroadcastingService().broadcast(a.NotificationType.PublishTelemetryData,{eventName:r.TelemetryEvent.Traceability,properties:t});var i=[];i.push(r.WorkItemField.title),i.push(r.WorkItemField.id),i.push(r.WorkItemField.workItemType),i.push(r.WorkItemField.assignedTo),i.push(r.WorkItemField.iterationPath),i.push(r.WorkItemField.areaPath),i.push(r.WorkItemField.acceptanceCriteria),i.push(r.WorkItemField.description),this.$localStorage.traceabilityEnabled=!0,this.$localStorage.$apply();var s=this.$workItemService.getWorkItemById(i,this.selectedTraceableWorkItem.id);s.then(function(){o.TracingService.traceVerbose(p,2,"Fetched work item "+e.selectedTraceableWorkItem.id),e.$localStorage.notifyTimelineForTraceability=!0,e.$localStorage.$apply(),e.$route.reload()})}},e.prototype.handleKeyPressForLink=function(e,t){var o=e.keyCode;return g===o?void this.openWorkItem(t.url):void 0},e.prototype.setTraceableWorkItemOnKeyDown=function(e,t){var o=e.keyCode;o===g&&this.setTraceableWorkItem(t),this.$utilityService.handleArrowKey(e,t,this.searchResultsForTraceability[this.searchResultsForTraceability.length-1].id)},e.prototype.getTabIndex=function(e){return this.searchResultsForTraceability[0].id===e.id?0:-1},e.prototype.setTraceableWorkItem=function(e){this.selectedTraceableWorkItem=e},e.prototype.generateCssForSelectedWorkItem=function(e){return this.selectedTraceableWorkItem&&e.id===this.selectedTraceableWorkItem.id?"selected":""},e.prototype.changeWorkItem=function(){var e=this,t=this.$traceabilityService.stopWorkItemTracing(this.linkedWorkItem);this.$rootScope.actionInProgress=!0,t.then(function(){e.$localStorage.linkedWorkItem="",e.$localStorage.searchResultsForTraceability="",e.$localStorage.traceabilityEnabled=!1,e.$localStorage.workItemSearchInProgress=!1,e.$localStorage.notifyTimelineForTraceability=!1,e.$localStorage.lastSearchedQueryPattern="",e.$localStorage.$apply(),e.$route.reload()})["finally"](function(){e.$rootScope.actionInProgress=!1})},e.prototype.queryWorkItems=function(){var e=this;i.ErrorHelper.clearAllErrors(r.ToolbarType.Traceability,this.$rootScope),this.$localStorage.$sync();var t=this.$localStorage.workItemQueryPatternForTraceability;this.$localStorage.lastSearchedQueryPattern=this.$localStorage.workItemQueryPatternForTraceability,t&&(this.searchResultsForTraceability=[],this.$localStorage.searchResultsForTraceability="",this.$rootScope.actionInProgress=!0,this.$localStorage.workItemSearchInProgress=!0,this.$localStorage.$apply(),this.checkQueryPatternIsId(t)?this.queryWorkItemsById(t,function(){e.queryWorkItemsByTitle(t,function(){e.getTraceableWorkItems(),e.$localStorage.workItemSearchInProgress=!1,e.$rootScope.actionInProgress=!1},function(){e.$localStorage.workItemSearchInProgress=!1,e.$rootScope.actionInProgress=!1})},function(){e.$localStorage.workItemSearchInProgress=!1,e.$rootScope.actionInProgress=!1}):this.queryWorkItemsByTitle(t,function(){e.getTraceableWorkItems(),e.$localStorage.workItemSearchInProgress=!1,e.$rootScope.actionInProgress=!1},function(){e.$localStorage.workItemSearchInProgress=!1,e.$rootScope.actionInProgress=!1}))},e.prototype.syncError=function(){var e=s.LocalStorageService.retrieve(s.toolbarErrorMap);this.$localStorage.toolbarErrorMap=e},e.prototype.checkQueryPatternIsId=function(e){return null!==e.trim().match(/^[0-9]+$/)},e.prototype.getTracedWorkItem=function(){this.$localStorage.$sync();var e=this.$localStorage.linkedWorkItem;if(e){var t={title:e.fields[r.WorkItemField.title],id:e.fields[r.WorkItemField.id],type:e.fields[r.WorkItemField.workItemType],assignedTo:e.fields[r.WorkItemField.assignedTo]?e.fields[r.WorkItemField.assignedTo].substring(0,e.fields[r.WorkItemField.assignedTo].indexOf("<")):"Unassigned",iterationPath:e.fields[r.WorkItemField.iterationPath],url:e[r.WorkItemField.url],timeStamp:e[r.WorkItemField.startTime]};this.mapWorkItemDescription(t,e),this.linkedWorkItem=t}},e.prototype.mapWorkItemDescription=function(e,t){u.getCategory(e.type)===r.WorkItemCategories.RequirementCategory?this.setWorkItemAcceptanceCriteria(e,t)?this.linkedWorkItemDetailsAvailable=!0:this.setWorkItemDescription(e,t)?this.linkedWorkItemDetailsAvailable=!0:(e.description="No acceptance criteria found",this.linkedWorkItemDetailsAvailable=!1):this.setWorkItemDescription(e,t)?this.linkedWorkItemDetailsAvailable=!0:(e.description="No description found",this.linkedWorkItemDetailsAvailable=!1)},e.prototype.setWorkItemAcceptanceCriteria=function(e,t){return t.fields[r.WorkItemField.acceptanceCriteria]?(this.descriptionType="Acceptance Criteria",e.description=this.$sce.trustAsHtml(t.fields[r.WorkItemField.acceptanceCriteria]),!0):!1},e.prototype.setWorkItemDescription=function(e,t){return t.fields[r.WorkItemField.description]?(this.descriptionType="Description",e.description=this.$sce.trustAsHtml(t.fields[r.WorkItemField.description]),!0):!1},e.prototype.queryWorkItemsByTitle=function(e,t,n){o.TracingService.traceVerbose(p,3,"Fetching work items with "+e+" in title");var i=[];i.push(r.WorkItemField.title),i.push(r.WorkItemField.id),i.push(r.WorkItemField.workItemType),i.push(r.WorkItemField.assignedTo),i.push(r.WorkItemField.iterationPath);var a=this.$workItemService.getWorkItemsByTitle(i,e);a.then(function(){o.TracingService.traceVerbose(p,4,"Fetching work items by title"),t&&t()},function(){n&&n()})},e.prototype.queryWorkItemsById=function(e,t,n){o.TracingService.traceVerbose(p,5,"Fetching work items with "+e+" in id");var i=[];i.push(r.WorkItemField.title),i.push(r.WorkItemField.id),i.push(r.WorkItemField.workItemType),i.push(r.WorkItemField.assignedTo),i.push(r.WorkItemField.iterationPath),i.push(r.WorkItemField.areaPath);var a=this.$workItemService.getWorkItemById(i,e);a.then(function(){o.TracingService.traceVerbose(p,6,"Fetching work items by id"),t&&t()},function(){n&&n()})},e.prototype.getTraceableWorkItems=function(){this.$localStorage.$sync();var e=this.$localStorage.searchResultsForTraceability;e?this.searchResultsForTraceability=e:(this.searchResultsForTraceability=[],i.ErrorHelper.saveError({message:"No work items found for the given search string. The search operation is restricted to work items created in the last 180 days."},r.ToolbarType.Traceability,1,!0,!0,this.$rootScope),this.syncError())},e.prototype.highlightText=function(e){return this.$utilityService.highlightText(e,this.$localStorage.lastSearchedQueryPattern)},e.prototype.stopIconBlink=function(){this.$localStorage.iconBlink=!1,this.$localStorage.$apply()},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll()})},e.$inject=["$sce","$location","$localStorage","$timeout","$scope","$route","WorkItemService","SessionService","UtilityService","$rootScope","TraceabilityService"],e}();t.TraceabilityController=m}),define("Traceability/Traceability.Module",["require","exports","../Traceability/Traceability.Controller"],function(e,t,o){angular.module("XT.Popup.Traceability",["XT.Popup.CommonControls"]).controller("TraceabilityController",o.TraceabilityController)}),define("Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("About/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00",
"Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("About/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n}),define("About/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("About/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("About/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("About/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("About/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("About/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("About/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',
t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("About/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("About/About.Controller",["require","exports","../../Model/BrowserHelper","../../Common/Utility"],function(e,t,o,n){var r=o.BrowserHelper,i="xt-learn-anchor",a=function(){function e(e,t,o,n,r){var i=this;this.$scope=e,this.$http=t,this.$localStorage=o,this.utils=n,this.utilityService=r;var a="../manifest.json";t.get(a).then(function(e){e.data&&(i.version=e.data.version)}),this.utilityService.setTabindexOnToolbarItems("item-about")}return e.prototype.initializeFocus=function(){$("#"+i).focus()},e.prototype.sendEmail=function(){var e="%3CProvide%20your%20Azure%20DevOps%20Services%2FTeam%20Foundation%20Server%20URL%3E";this.$localStorage.initialBaseUrl&&(e=this.$localStorage.initialBaseUrl);var t=n.getBrowserNameAndVersion(),o="mailto:devops_tools@microsoft.com?subject=Test%20%26%20Feedback%20extension&body=Version%3A%20"+this.version+"%0D%0ABrowser%20information%3A%20"+t+"%0D%0AAzure%20DevOps%20Services%2FTeam%20Foundation%20Server%20URL%3A%20"+e+"%0D%0A%0D%0AComments%3A%0D%0A%3CPlease%20type%20your%20feedback%20here%2C%20either%20good%20or%20bad%2E%20You%20could%20also%20send%20us%20your%20feature%20requests%2E%3E";chrome.tabs.create({url:o})},e.prototype.writeReview=function(){var e="https://aka.ms/xt-coming-soon";r.isChrome()?e="https://aka.ms/xt-chrome-writereview":r.isFirefox()&&(e="https://aka.ms/xt-firefox-writereview"),chrome.tabs.create({url:e})},e.$inject=["$scope","$http","$localStorage","ResourceUtilityService","UtilityService"],e}();t.AboutController=a}),define("About/About.Module",["require","exports","../About/About.Controller","../Common/ResourceUtility.Service","../Common/Utility.Service"],function(e,t,o,n,r){angular.module("XT.Popup.About",["XT.Popup.CommonControls","ngStorage"]).controller("AboutController",o.AboutController).service("ResourceUtilityService",n.ResourceUtilityService).service("UtilityService",r.UtilityService)}),define("License/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("License/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("License/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("License/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;
var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("License/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("License/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("License/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("License/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("License/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("License/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("License/License.Controller",["require","exports","../../Model/Model","../../Common/Types","../../Common/ExtensionStorage","../../Common/FeatureAvailabiliy","../../Common/ResourceHelper"],function(e,t,o,n,r,i,a){var s=i.FeatureAvailibilityService,c=i.FeatureFlag,l=function(){function e(e,t,o,n){this.$scope=e,this.$location=t,this.$localStorage=o,this.$timeout=n,this.pageContent={startTrial:{title:a.getBuyProductTitleMessage(),message:a.getStartTrialMessage(),footer1:a.getTrialNotificationContactAdminFooterMessage(),footer2:a.getTrialNotificationContinueFooterMessage(),showBuy:!0,showStartTrial:!0,showRemindMeLater:!1},trialExpired:{title:a.getTrialExpiredTitleMessage(),message:a.getTrialExpiredMessage(),footer1:a.getTrialNotificationContactAdminFooterMessage(),footer2:a.getTrialNotificationContinueFooterMessage(),showBuy:!0,showStartTrial:!1,showRemindMeLater:!1},trialAboutToExpire:{title:a.getTrialAboutToExpireTitleMessage(),message:a.getTrialAboutToExpireMessage(),footer1:a.getTrialNotificationContactAdminFooterMessage(),footer2:a.getTrialNotificationConitnueFooter2Message(),showBuy:!0,showStartTrial:!1,showRemindMeLater:!0}},this.$localStorage.$apply(),s.isFeatureEnabled(c.XTTrialMode)&&this.loadLicenseDataIfAny(this.$localStorage.alertInformation)}return e.prototype.loadLicenseDataIfAny=function(e){if(e&&e.length>0&&(e=e.filter(function(e){return e.isSeen===!1}),e.length>0)){var t=e.pop();switch(t.type){case o.AlertType.ConnectedModeAvailable:this.title=this.pageContent.startTrial.title,this.message=this.pageContent.startTrial.message,this.footer1=this.pageContent.startTrial.footer1,this.footer2=this.pageContent.startTrial.footer2,this.showBuy=this.pageContent.startTrial.showBuy,this.showStartTrial=this.pageContent.startTrial.showStartTrial,this.showRemindMeLater=this.pageContent.startTrial.showRemindMeLater;break;case o.AlertType.TrialModeOn:this.title=n.stringFormat(this.pageContent.trialAboutToExpire.title,t.description),this.message=this.pageContent.trialAboutToExpire.message,this.footer1=this.pageContent.trialAboutToExpire.footer1,this.footer2=this.pageContent.trialAboutToExpire.footer2,this.showBuy=this.pageContent.trialAboutToExpire.showBuy,this.showStartTrial=this.pageContent.trialAboutToExpire.showStartTrial,this.showRemindMeLater=this.pageContent.trialAboutToExpire.showRemindMeLater;break;case o.AlertType.TrialModeExpired:this.title=this.pageContent.trialExpired.title,this.message=this.pageContent.trialExpired.message,this.footer1=this.pageContent.trialExpired.footer1,this.footer2=this.pageContent.trialExpired.footer2,this.showBuy=this.pageContent.trialExpired.showBuy,this.showStartTrial=this.pageContent.trialExpired.showStartTrial,this.showRemindMeLater=this.pageContent.trialExpired.showRemindMeLater}}},e.prototype.buy=function(){chrome.tabs.create({url:"https://aka.ms/xt-buy"})},e.prototype.remindLater=function(){var e=r.LocalStorageService.retrieve(r.alertInformationKey);e[e.length-1].isSeen=!0,this.$localStorage.alertInformation=e,this.dismissNotification()},e.prototype.startTrial=function(){chrome.tabs.create({url:"https://aka.ms/xt-try"})},e.prototype.dismissNotification=function(){this.$localStorage.isNotificationDismissed=!0,this.$localStorage.lastUrl="/",this.$localStorage.$apply(),this.closeForm()},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$location.url(e.$localStorage.lastUrl)},0)},e.$inject=["$scope","$location","$localStorage","$timeout"],e}();t.LicenseController=l}),define("License/License.Module",["require","exports","../License/License.Controller"],function(e,t,o){angular.module("XT.Popup.License",["XT.Popup.CommonControls"]).controller("LicenseController",o.LicenseController)}),angular.module("XT.Popup.Shell",["XT.Popup.Toolbar","XT.Popup.BugForm","XT.Popup.BugForm2","XT.Popup.TaskForm","XT.Popup.TestCaseForm","XT.Popup.FeedbackResponseForm","XT.Popup.SignInForm","XT.Popup.NoteForm","XT.Popup.VideoCapture","XT.Popup.Timeline","XT.Popup.MobileXt","XT.Popup.Traceability","XT.Popup.About","XT.Popup.Notification","XT.Popup.License","XT.Popup.FeedbackRequests","XT.Popup.ForceStopSession"]),define("Shell/Shell.Module",["Toolbar/Toolbar.Module","BugForm/BugForm.Module","BugForm/BugForm2.Module","SignIn/SignInForm.Module","NoteForm/NoteForm.Module","Timeline/Timeline.Module","Session/Session.Module","VideoCapture/VideoCapture.Module","MobileXt/MobileXt.Module","Traceability/Traceability.Module","About/About.Module","License/License.Module"],function(){}),define("../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,
e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){
return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',
l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l}),define("Toolbar/Toolbar.Template",["require","exports"],function(e,t){t.html='<div ng-controller="ToolbarController as vm" role="menubar">    <div class="toolbar-item toolbar-button item-session"        title="{{vm.toolbarItemService.getTooltip(0)}}">        <a ng-href="#/Session" a-disabled="!(vm.isSessionCreationEnabled())" aria-labelledby="session-state" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'session\', vm, \'toggleSessionState\')">            <div class="playback-container" ng-click="vm.toggleSessionState()" role="menuitem">                <span id="session-state" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(0)}}</span>                <div class="icon-encoded right-seperator"                     ng-class="vm.$storage.activeSession | PlaybackIconFilter"                     ng-bind-html="vm.$storage.activeSession | PlaybackUnicodeFilter"                     ng-if="!vm.sessionService.isLoading"></div>                <div class="icon-encoded icon-loading right-seperator"                     ng-if="vm.sessionService.isLoading"></div>                <div ng-show="vm.showSessionError" ng-class="vm.sessionErrorCss" class="error-indicator bowtie-icon bowtie-status-failure"></div>            </div>        </a>    </div>    <div class="toolbar-item toolbar-button base-screenshot item-screenshot"         title="{{vm.toolbarItemService.getTooltip(vm.selectedScreenshotItem.type)}}"         ng-class="{\'selected\': vm.itemSelected(vm.screenshotItem), \'highlight\' : vm.isScreenShotExtendedToolbarExpanded && isContentVisible, \'right-seperator\':vm.selectedScreenshotItem.showSeperator}"  >        <a ng-href="{{vm.selectedScreenshotItem.url}}" ng-click="vm.selectedScreenshotItem.execute()" aria-labelledby="capture-screenshot"           a-disabled="!vm.isFunctionalityEnabled(vm.selectedScreenshotItem)" role="menuitem" class="toolbar-fill-div create-screenshot" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'screenshot\', vm.selectedScreenshotItem, \'execute\')">            <span id="capture-screenshot" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(1)}}</span>            <div class="toolbar-icon"                 ng-class="vm.selectedScreenshotItem.css"                 ng-bind-html="vm.selectedScreenshotItem.unicode">            </div>        </a>        <div class="subtoolbar-selector" aria-label="More options" title= "Click to see more options..." ng-show="vm.isScreenShotSelectionEnabled()" ng-click="vm.showScreenShotExtendedToolbar($event)"  role= "button" >&#59272; </div>        <div ng-show="vm.screenshotItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-notes"         title="{{vm.toolbarItemService.getTooltip(2)}}"         ng-class="{\'selected\': vm.itemSelected(vm.notesItem), \'right-seperator\':vm.notesItem.showSeperator}" ng-click="vm.notesItem.execute()">        <a ng-href="{{vm.notesItem.url}}" aria-labelledby="add-note"           a-disabled="!vm.isFunctionalityEnabled(vm.notesItem)" role="menuitem" class="toolbar-fill-div" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'notes\')">            <span id="add-note" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(2)}}</span>            <div class="toolbar-icon"                 ng-class="vm.notesItem.css"                 ng-bind-html="vm.notesItem.unicode">            </div>        </a>            <div ng-show="vm.notesItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-video"         title="{{vm.toolbarItemService.getTooltip(12)}}"         ng-class="{\'selected\': vm.itemSelected(vm.videoCaptureItem), \'right-seperator\':vm.videoCaptureItem.showSeperator}" ng-click="vm.videoCaptureItem.execute()">        <a ng-href="#/VideoCapture" aria-labelledby="record-screen"           a-disabled="!vm.isFunctionalityEnabled(vm.videoCaptureItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'video\')" role="menuitem" class="toolbar-fill-div">            <span id="record-screen" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(12)}}</span>            <div class="toolbar-icon"                 ng-class="vm.videoCaptureItem.css"                 ng-bind-html="vm.videoCaptureItem.unicode">            </div>            <svg  class="video-recording-icon" ng-show="vm.$localStorage.currentVideoCaptureId && vm.$localStorage.currentVideoCaptureId !== -1">                <circle cx="35" cy= "18" r= "4" fill= "red" />             </svg>        </a>        <div ng-show="vm.videoCaptureItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-workitem"         ng-show="vm.isToolBarItemVisible(vm.bugFormItem)"         title="{{vm.toolbarItemService.getTooltip(4)}}"         ng-class="{\'selected\': vm.itemSelected(vm.bugFormItem), \'highlight\' : vm.isWorkItemExtendedToolbarExpanded && isContentVisible,  \'right-seperator\':vm.bugFormItem.showSeperator, \'showing\':vm.isToolBarItemVisible(vm.bugFormItem)}" ng-click="vm.bugFormItem.execute()">        <a ng-href="{{vm.bugFormItem.url}}" aria-haspopup="true" aria-expanded="{{vm.isWorkItemExtendedToolbarExpanded}}"           a-disabled="!vm.isFunctionalityEnabled(vm.bugFormItem)" role="menuitem" aria-labelledby="create-bug" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'workitem\')" class="toolbar-fill-div create-wi-or-response">            <span id="create-bug" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(4)}}</span>            <div class="toolbar-icon"                 ng-class="vm.bugFormItem.css"                 ng-bind-html="vm.bugFormItem.unicode">            </div>        </a>            <div class="subtoolbar-selector" aria-label="More options" title="Click to see more options..." ng-show="vm.isWorkItemSelectionEnabled()" ng-click="vm.showWorkItemExtendedToolbar($event)"  role="button">&#59272;</div>        <div ng-show="vm.bugFormItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-workitem"         ng-show="vm.isToolBarItemVisible(vm.taskFormItem)"         title="{{vm.toolbarItemService.getTooltip(10)}}"         ng-class="{\'selected\': vm.itemSelected(vm.taskFormItem), \'highlight\' : vm.isWorkItemExtendedToolbarExpanded && isContentVisible, \'right-seperator\':vm.taskFormItem.showSeperator , \'showing\':vm.isToolBarItemVisible(vm.taskFormItem)}" ng-click="vm.bugFormItem.execute()">        <a ng-href="{{vm.taskFormItem.url}}" aria-haspopup="true" aria-expanded="{{vm.isWorkItemExtendedToolbarExpanded}}"           a-disabled="!vm.isFunctionalityEnabled(vm.taskFormItem)" role="menuitem" aria-labelledby="create-task" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'workitem\')" class="toolbar-fill-div create-wi-or-response">            <span id="create-task" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(10)}}</span>            <div class="toolbar-icon"                 ng-class="vm.taskFormItem.css"                 ng-bind-html="vm.taskFormItem.unicode">            </div>        </a>            <div class="subtoolbar-selector" aria-label="More options" title="Click to see more options..." ng-show="vm.isWorkItemSelectionEnabled()" ng-click="vm.showWorkItemExtendedToolbar($event)"  role="button" >&#59272;</div>        <div ng-show="vm.taskFormItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-workitem"         ng-show="vm.isToolBarItemVisible(vm.feedbackResponseFormItem)"         title="{{vm.toolbarItemService.getTooltip(13)}}"         ng-class="{\'selected\': vm.itemSelected(vm.feedbackResponseFormItem), \'highlight\' : vm.isWorkItemExtendedToolbarExpanded && isContentVisible, \'right-seperator\':vm.feedbackResponseFormItem.showSeperator , \'showing\':vm.isToolBarItemVisible(vm.feedbackResponseFormItem)}" ng-click="vm.feedbackResponseFormItem.execute()">        <a ng-href="{{vm.feedbackResponseFormItem.url}}" aria-haspopup="true" aria-expanded="{{vm.isWorkItemExtendedToolbarExpanded}}"           a-disabled="!vm.isFunctionalityEnabled(vm.feedbackResponseFormItem)" role="menuitem" aria-labelledby="feedback-response" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'workitem\')" class="toolbar-fill-div create-wi-or-response">            <span id="feedback-response" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(13)}}</span>            <div class="toolbar-icon"                 ng-class="vm.feedbackResponseFormItem.css"                 ng-bind-html="vm.feedbackResponseFormItem.unicode">            </div>        </a>            <div class="subtoolbar-selector" aria-label="More options" title="Click to see more options..." ng-show="vm.isWorkItemSelectionEnabled()" ng-click="vm.showWorkItemExtendedToolbar($event)"  role="button" >&#59272;</div>        <div ng-show="vm.feedbackResponseFormItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-workitem"         ng-show="vm.isToolBarItemVisible(vm.testCaseFormItem)"         title= "{{vm.toolbarItemService.getTooltip(11)}}"         ng-class="{\'selected\': vm.itemSelected(vm.testCaseFormItem), \'highlight\' : vm.isWorkItemExtendedToolbarExpanded && isContentVisible, \'right-seperator\':vm.taskFormItem.showSeperator , \'showing\':vm.isToolBarItemVisible(vm.testCaseFormItem)}" ng-click="vm.bugFormItem.execute()">        <a ng-href="{{vm.testCaseFormItem.url}}" aria-labelledby="create-testcase" role="menuitem" aria-haspopup="true" aria-expanded="{{vm.isWorkItemExtendedToolbarExpanded}}"           a-disabled="!vm.isFunctionalityEnabled(vm.testCaseFormItem) || !vm.isActionLogEnabled()" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'workitem\')" class="toolbar-fill-div create-wi-or-response">            <span id="create-testcase" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(11)}}</span>            <div class="toolbar-icon"                 ng-class="vm.testCaseFormItem.css"                 ng-bind-html="vm.testCaseFormItem.unicode">            </div>        </a>            <div class="subtoolbar-selector" title="Select WorkItem" ng-show="vm.isWorkItemSelectionEnabled()" ng-click="vm.showWorkItemExtendedToolbar($event)"  role="button" >&#59272;</div>        <div ng-show="vm.testCaseFormItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-timeline"         title="{{vm.toolbarItemService.getTooltip(5)}}"         ng-class="{\'selected\': vm.itemSelected(vm.timelineItem), \'right-seperator\':vm.timelineItem.showSeperator}" ng-click="vm.timelineItem.execute()">        <a ng-href="{{vm.timelineItem.url}}" aria-labelledby="view-session-timeline"           a-disabled="!vm.isFunctionalityEnabled(vm.timelineItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'timeline\')" role="menuitem" class="toolbar-fill-div">            <span id="view-session-timeline" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(5)}}</span>            <div class="toolbar-icon"                 ng-class="vm.timelineItem.css"                 ng-bind-html="vm.timelineItem.unicode">            </div>        </a>            <div ng-if="vm.$storage.activeSession.state === 1 && vm.timelineItem.showCounter" class="counter">{{vm.$storage.activeSession | TimelineCounter:vm.$storage.lastViewed:!vm.itemSelected(vm.timelineItem) }}</div>        <div ng-show="vm.timelineItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-traceability" ng-hide="vm.utilityService.isStakeholderMode()"         title=" {{ vm.toolbarItemService.getTooltip(8) }}"         ng-class="{\'selected\': vm.itemSelected(vm.traceabilityItem), \'right-seperator\':vm.traceabilityItem.showSeperator, \'workitem-linked\': vm.$localStorage.traceabilityEnabled, \'showing\':!vm.utilityService.isStakeholderMode()}" ng-click="vm.traceabilityItem.execute()">        <a ng-href="{{vm.traceabilityItem.url}}" aria-labelledby="explore-workitems"           a-disabled="!vm.isFunctionalityEnabled(vm.traceabilityItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'traceability\')" role="menuitem" class="toolbar-fill-div">            <span id="explore-workitems" class="hidden-aria-label">{{ vm.toolbarItemService.getTooltip(8) }}</span>            <div class="toolbar-icon"                 ng-class="vm.traceabilityItem.css"                 ng-bind-html="vm.traceabilityItem.unicode">            </div>            <div class="traceability-enabled-icon" ng-show="vm.$localStorage.traceabilityEnabled">&#59163;</div>        </a>            <div ng-show="vm.traceabilityItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-traceability" ng-show="vm.utilityService.isStakeholderMode()"         title=" {{ vm.toolbarItemService.getTooltip(14) }}"         ng-class="{\'selected\': vm.itemSelected(vm.feedbackRequestsItem), \'right-seperator\':vm.feedbackRequestsItem.showSeperator, \'showing\':vm.utilityService.isStakeholderMode()}" ng-click="vm.feedbackRequestsItem.execute()">        <a ng-href="{{vm.toolbarItemService.getStakeHolderTraceabilityPageUrl()}}" aria-label=" {{ vm.toolbarItemService.getTooltip(14) }}" role= "menuitem"           a-disabled="!vm.isFunctionalityEnabled(vm.feedbackRequestsItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'traceability\')" class="toolbar-fill-div">            <div class="toolbar-icon"                 ng-class="vm.feedbackRequestsItem.css"                 ng-bind-html="vm.feedbackRequestsItem.unicode">            </div>            <div class="traceability-enabled-icon" ng-show="vm.$localStorage.traceabilityEnabled">&#59163;</div>        </a>            <div ng-show="vm.feedbackRequestsItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-mobilext"         title="{{ vm.toolbarItemService.getTooltip(7) }}"         ng-class="{\'selected\': vm.itemSelected(vm.perfectoItem), \'right-seperator\':vm.perfectoItem.showSeperator}" ng-click="vm.perfectoItem.execute()">        <a ng-href="{{vm.perfectoItem.url}}" aria-labelledby="connect-to-device"           a-disabled="!vm.isFunctionalityEnabled(vm.perfectoItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'mobilext\')" role="menuitem" class="toolbar-fill-div">            <span id="connect-to-device" class="hidden-aria-label">{{ vm.toolbarItemService.getTooltip(7) }}</span>            <div class="toolbar-icon"                 ng-class="vm.perfectoItem.css"                 ng-bind-html="vm.perfectoItem.unicode">            </div>        </a>        <div ng-show="vm.perfectoItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-settings"         title="{{vm.toolbarItemService.getTooltip(6)}}"         ng-class="{\'selected\': vm.itemSelected(vm.settingsItem), \'right-seperator\':vm.settingsItem.showSeperator}" ng-click="vm.settingsItem.execute()">        <a ng-href="{{vm.settingsItem.url}}" aria-labelledby="configure"           a-disabled="!vm.isFunctionalityEnabled(vm.settingsItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'signin\')" role="menuitem" class="toolbar-fill-div">            <span id="configure" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(6)}}</span>            <div class="toolbar-icon bowtie-icon bowtie-settings-gear-outline xt-settings"                 ng-bind-html="vm.settingsItem.unicode">            </div>        </a>            <div ng-show="vm.settingsItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div>    <div class="toolbar-item toolbar-button item-about"         title="{{vm.toolbarItemService.getTooltip(9)}}"         ng-class="{\'selected\': vm.itemSelected(vm.aboutItem), \'right-seperator\':vm.aboutItem.showSeperator}" ng-click="vm.aboutItem.execute()">        <a ng-href="{{vm.aboutItem.url}}" aria-labelledby="about"           a-disabled="!vm.isFunctionalityEnabled(vm.aboutItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'about\')" role="menuitem" class="toolbar-fill-div">            <span id="about" class="hidden-aria-label">{{vm.toolbarItemService.getTooltip(9)}}</span>            <div class="toolbar-icon"                 ng-class="vm.aboutItem.css"                 ng-bind-html="vm.aboutItem.unicode">            </div>        </a>            <div ng-show="vm.aboutItem.showError" class="error-indicator bowtie-icon bowtie-status-failure"></div>    </div><div class="work-items" auto-hide-on-focus-loose ng-show="vm.isWorkItemExtendedToolbarExpanded && isContentVisible" > <div class="feedback-response-workitem item-feedback-response" ng-show="vm.utilityService.isStakeholderMode()" ng-class="{\'stakeholderOrder\': vm.utilityService.isStakeholderMode()}" ng-click="vm.workItemExtendedToolBarOptionSelected($event, vm.feedbackResponseFormItem)"">        <a ng-href="{{vm.feedbackResponseFormItem.url}}" aria-label=" {{vm.toolbarItemService.getTooltip(13)}}" role="menuitem" aria-posinset="{{ 0 + vm.utilityService.isStakeholderMode()}}" aria-setsize="3"           a-disabled="!vm.isFunctionalityEnabled(vm.feedbackResponseFormItem)" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'feedbackResponse\')" class="toolbar-fill-div create-wi-or-response">            <div class="bowtie-icon bowtie-work-item xt-feedback-response-icon-tab-view" ng-class="{\'disabled\': vm.utilityService.isOfflineMode()}"                 ng-bind-html="vm.feedbackResponseFormItem.unicode">            </div>            <div class="feedback-response-workitem-text" ng-class="{\'disabled\': vm.utilityService.isOfflineMode()}">               Provide feedback            </div>        </a>    </div><div class="bug-workitem item-bug" ng-click="vm.workItemExtendedToolBarOptionSelected($event, vm.bugFormItem)" ng-class="{\'stakeholderOrder\': vm.utilityService.isStakeholderMode()}" >        <a ng-href="{{vm.bugFormItem.url}}"           a-disabled="!vm.isFunctionalityEnabled(vm.bugFormItem)" role="menuitem" aria-posinset="{{ 1 + vm.utilityService.isStakeholderMode()}}" aria-setsize="3" aria-labelledby="create-bug" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'bug\')" class="toolbar-fill-div create-wi-or-response">            <div class="toolbar-icon bowtie-icon bowtie-file-bug xt-bug-option"                 ng-bind-html="vm.bugFormItem.unicode">            </div>           <div class="bug-workitem-text">           Create bug           </div>        </a>    </div><div class="task-workitem item-task" ng-click="vm.workItemExtendedToolBarOptionSelected($event, vm.taskFormItem)" ng-class="{\'stakeholderOrder\': vm.utilityService.isStakeholderMode()}" >        <a aria-label="Create Task" ng-href="{{vm.taskFormItem.url}}"           a-disabled="!vm.isFunctionalityEnabled(vm.taskFormItem)" tabindex="1" ng-keydown="vm.onKeyDownEvent($event, \'task\')" aria-posinset="{{ 2 + vm.utilityService.isStakeholderMode()}}" aria-setsize="3" role="menuitem" class="toolbar-fill-div create-wi-or-response">            <div class="toolbar-icon icon-selected-task" ng-class="{\'disabled\': vm.utilityService.isOfflineMode()}"                 ng-bind-html="vm.taskFormItem.unicode">            </div>            <div class="task-workitem-text" ng-class="{\'disabled\': vm.utilityService.isOfflineMode()}">               Create task               </div>        </a>    </div><div class="testcase-workitem item-testcase"  ng-hide="vm.utilityService.isStakeholderMode()" ng-class="{\'stakeholderOrder\': vm.utilityService.isStakeholderMode()}" ng-click="vm.workItemExtendedToolBarOptionSelected($event, vm.testCaseFormItem) && vm.isActionLogEnabled()" >        <a ng-href="{{vm.testCaseFormItem.url}}" aria-label="Create test case" role="menuitem" aria-posinset="{{ 3 + vm.utilityService.isStakeholderMode()}}" aria-setsize="3"           a-disabled="!vm.isFunctionalityEnabled(vm.testCaseFormItem) || !vm.isActionLogEnabled()" tabindex="-1" ng-keydown="vm.onKeyDownEvent($event, \'testcase\')" class="toolbar-fill-div">            <div class="toolbar-icon icon-selected-testcase" ng-class="{\'disabled\': vm.utilityService.isOfflineMode() || !vm.isActionLogEnabled()}"                 ng-bind-html="vm.testCaseFormItem.unicode">            </div>            <div class="task-workitem-text" ng-class="{\'disabled\': vm.utilityService.isOfflineMode() || !vm.isActionLogEnabled()}">               Create test case               </div>        </a>    </div></div><div class="screenshot-items"  auto-hide-on-focus-loose ng-if="vm.isScreenShotExtendedToolbarExpanded && isContentVisible" > <div class="screenshot-tab item-screenshot" title="{{vm.toolbarItemService.getTooltip(vm.screenshotItem.type)}}"            ng-click="vm.screenShotExtendedToolBarOptionSelected($event, vm.screenshotItem)" ng-keydown="vm.onKeyDownEvent($event, \'tab\', vm.screenshotItem, \'execute\')" >         <a ng-href="{{vm.screenshotItem.url}}"            class="toolbar-fill-div create-screenshot" tabindex="1">            <div class="toolbar-icon bowtie-icon icon-selected-screenshot"                 ng-bind-html="vm.screenshotItem.unicode">            </div>            <div class="screenshot-text" title="Capture browser tab">            Browser            </div>        </a>    </div><div class="screenshot-screen item-screenshot" title="{{vm.toolbarItemService.getTooltip(vm.screenshotScreenItem.type)}}"         ng-click="vm.screenShotExtendedToolBarOptionSelected($event, vm.screenshotScreenItem)" ng-keydown="vm.onKeyDownEvent($event, \'screen\',  vm.screenshotScreenItem, \'execute\')" >         <a ng-href="{{vm.screenshotScreenItem.url}}" tabindex="1"            class="toolbar-fill-div create-screenshot">            <div class="toolbar-icon bowtie-icon icon-selected-screenshot"                 ng-bind-html="vm.screenshotScreenItem.unicode">            </div>            <div class="screenshot-text">               Screen            </div>        </a>    </div><div class="screenshot-window item-screenshot" title="{{vm.toolbarItemService.getTooltip(vm.screenshotApplicationItem.type)}}"            ng-click="vm.screenShotExtendedToolBarOptionSelected($event, vm.screenshotApplicationItem)" ng-keydown="vm.onKeyDownEvent($event, \'window\', vm.screenshotApplicationItem, \'execute\')" >         <a ng-href="{{vm.screenshotApplicationItem.url}}" class="toolbar-fill-div create-screenshot" tabindex="1">            <div class="toolbar-icon bowtie-icon icon-selected-screenshot"                 ng-bind-html="vm.screenshotApplicationItem.unicode">            </div>            <div class="screenshot-text" title="Capture application">               Application            </div>        </a>    </div></div>';
}),define("Timeline/Timeline.Template",["require","exports"],function(e,t){t.timelineHtml='<div class="timeline" ng-controller="TimelineController as controller" ng-escape="controller.utilityService.minimizeForm()">   <error-control></error-control>   <div class="form-container timeline-container" ng-if="controller">       <div class="timeline-title">           Session timeline {{controller.numberOfCaptures}}           <button class="exportbutton" ng-if="!controller.$localStorage.activeSettings || controller.$localStorage.activeSettings.offlineMode" ng-click="controller.exportSessionReport()">Export</button>           <div class="session-insight" ng-if="!controller.$localStorage.supportTfsSessionCompact && controller.$localStorage.activeSettings && !controller.$localStorage.activeSettings.offlineMode && controller.$localStorage.connectedMode !== \'stakeholder\'">                <a id="view-insights" ng-href="" aria-label="View completed exploratory sessions" ng-click="controller.openSessionInsightPage()" title="View completed exploratory sessions" class="bowtie-icon bowtie-navigate-external" tabindex="0" ng-keydown="controller.keyDownOnSessionInsightIcon($event)">                </a>           </div>       </div>       <div class="timeline-entries" ng-if="controller.$localStorage.activeSession.state === 1">           <div ng-repeat="timelineEvent in controller.timeline.timelineEvents">               <div class="timeline-entry">                   <div class="timeline-entry-image">                       <div class="icon" ng-class="timelineEvent.css" ng-bind-html="timelineEvent.unicode"></div>                   </div>                   <div class="timeline-entry-data">                       <div class="timeline-entry-name" ng-if="timelineEvent.type != 2 && timelineEvent.type != 0 && timelineEvent.type != 4 && timelineEvent.type != 5">                           {{timelineEvent.title}}                       </div>                       <div class="timeline-entry-name" ng-if="timelineEvent.type == 0 || timelineEvent.type == 5">                           {{timelineEvent.title}}                       </div>                       <div class="timeline-entry-left-sidebar" ng-if="timelineEvent.type == 2">                              <div class="timeline-entry-workItem-container" ng-style="controller.$workItemService.getWorkItemColorBandStyle(timelineEvent.colorcss)" ng-if="timelineEvent.type == 2">                               <div class="timeline-entry-name" ng-if="controller.$localStorage.activeSettings && !controller.$localStorage.activeSettings.offlineMode">                                   <a ng-href="" ng-click="timelineEvent.execute()" tabindex="0" ng-enter="timelineEvent.execute()">{{timelineEvent.title}}</a>                               </div>                               <div class="timeline-entry-name" ng-if="!controller.$localStorage.activeSettings || controller.$localStorage.activeSettings.offlineMode">                                   {{timelineEvent.title}}                               </div>                               <div class="traceability-enabled-icon" ng-if="timelineEvent.linkedTo">&#59163;</div>                               <div class="traceability-linked-item" ng-if="timelineEvent.linkedTo">{{timelineEvent.linkedTo}}</div>                               <div class="timeline-entry-timestamp">                                   @ {{timelineEvent.getTime()}}                               </div>                               <div class="timeline-entry-workItem" >                                   {{timelineEvent.description}}                               </div>                           </div>                       </div>                       <div class="timeline-entry-left-sidebar" ng-if="timelineEvent.type == 4">                              <div class="timeline-entry-traceability" ng-style="controller.$workItemService.getWorkItemColorBandStyle(timelineEvent.colorcss)">                               <div class="timeline-entry-name">                               Exploring <a ng-href="" ng-click="timelineEvent.execute()" ng-enter="timelineEvent.execute()" tabindex="0">{{timelineEvent.title}}</a>                               </div>                               <div class="timeline-entry-timestamp">                                   @ {{timelineEvent.getTime()}}                               </div>                               <div class="timeline-entry-traceevent" ng-attr-title="{{timelineEvent.description}}">                               {{timelineEvent.description}}                                </div>                           </div>                       </div>                       <div class="timeline-entry-timestamp" ng-if="timelineEvent.type != 4 && timelineEvent.type != 2">                           @ {{timelineEvent.getTime()}}                       </div>                       <div class="timeline-entry-content" ng-if="timelineEvent.content.length != 0">                           <div class="timeline-entry-media" ng-if="timelineEvent.type == 0">                               <img drag-disabled ng-src="{{timelineEvent.content}}" alt="{{timelineEvent.name}}">                               <div class="screenshot-sourceurl" ng-if="!!timelineEvent.description">                                   Source:&nbsp;<a ng-click="timelineEvent.execute()" ng-enter="timelineEvent.execute()" tabindex="0">                                   <div class="screenshot-url-description">{{timelineEvent.description}}</div></a>                               </div>                           </div>                           <div class="timeline-entry-media" ng-if="timelineEvent.type == 5">                               <video src="{{ controller.getEncodedUrl(timelineEvent.content) }}" controls></video>                               <div class="screenshot-sourceurl">                                   <a ng-click="timelineEvent.execute()" ng-enter="timelineEvent.execute()" tabindex="0">                                   <div class="screenshot-url-description">Screen recording link</div></a>                               </div>                           </div>                           <div class="timeline-entry-note" ng-if="timelineEvent.type == 1" >{{timelineEvent.content}}</div>                           <div class="timeline-entry-notification" ng-if="timelineEvent.type == 3"></div>                       </div>                   </div>               </div>           </div>       </div>       <div class="session-stop-timeline" ng-if="controller.$localStorage.activeSession.state !== 1">            There is no session in progress. Click on <i>\'Start session\'</i> to start new session.       </div>       <xt-minimizepage></xt-minimizepage>   </div></div>'}),define("Shell/Shell.Template",["require","exports"],function(e,t){t.shellTemplate='<div class="xt-shell">    <div class="toolbar-area">        <div class="toolbar-area" ng-include="\'templateCache_toolbar.html\'"></div>    </div>    <div class="activity-area">        <progress-bar></progress-bar>        <ng-view></ng-view>    </div></div>'}),define("NoteForm/NoteForm.Template",["require","exports"],function(e,t){t.noteformTemplate='<div class="note-form" ng-controller="NoteController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container" ng-keydown="controller.keydown($event)">        <div class="note-title">            Note<span ng-show="controller.$storage.unsavedNote"> *</span>        </div>        <form name="noteForm">            <div class="note-content">                <textarea ng-model="controller.$storage.unsavedNote" aria-labelledby="add-notes" spellcheck="true" placeholder=" Start typing here..." required ngautofocus enable="true"></textarea>                <span id="add-notes" class="hidden-aria-label">Add notes</span>            </div>            <div class="button-container" tabindex="-1">                <button ng-click="controller.save()" ng-disabled="noteForm.$invalid" tabindex="{{ noteForm.$invalid ? -1 : 0 }}">                    <div class="save-text">                        Save                    </div>                </button>            </div>        </form>        <div ng-click="controller.clearLocalStorage()">            <xt-closeform></xt-closeform>        </div>    </div></div>'}),define("VideoCapture/VideoCapture.Template",["require","exports"],function(e,t){t.videoCaptureTemplate='<div class="video-form" ng-controller="VideoCaptureController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">           <div class="video-page-title">                <div ng-if="controller.$localStorage.currentVideoCaptureId && controller.$localStorage.currentVideoCaptureId !== -1">                Recording screen - <div class="timer"> {{ controller.$localStorage.elapsedVideoTime }} </div>                </div>                <div ng-if="!controller.$localStorage.currentVideoCaptureId || controller.$localStorage.currentVideoCaptureId === -1">                Record screen                </div>           </div>            <div class="video-static-text">               You can record your screen for a maximum of 10:00 minutes at a time. You can record multiple clips by restarting the screen capture again.            </div>        <div class="audio-section">            <span>               <label>              <input class="check-box" type="checkbox" ng-disabled="!(!controller.$localStorage.currentVideoCaptureId || controller.$localStorage.currentVideoCaptureId === -1)" ng-model="controller.$localStorage.enableAudio" >Record audio          </label>           </span>        </div>        <span ng-if="false">           <div class="fileformat-option" ng-show="false">                    <div class="fileformat-title">File format</div>                    <input type="radio" name="fileformat" value="webm" ng-model="controller.$localStorage.videoFileFormat">                   Webm                   <input type="radio" name="fileformat" value="wmv" ng-model="controller.$localStorage.videoFileFormat">                   Wmv           </div>        </span>            <div class="button-container" tabindex= "-1" >                 <button id="toggle-recording-button" ng-click="controller.videoCaptureHandler()" ng-disabled="controller.isVideoCaptureButtonDisabled()">                    <div class="video-action-text">                        {{ controller.showVideoActionText() }}                    </div>                </button>            </div>       <xt-minimizepage > </xt-minimizepage>    </div></div>'}),define("About/About.Template",["require","exports"],function(e,t){t.aboutTemplate='<div class="about-page-container form-container" ng-controller="AboutController as vm" ng-escape="vm.utilityService.minimizeForm()">    <div class="about-page-title">About</div>    <div class="product-name-change">        The Exploratory Testing extension is now {{vm.utils.getProductNameMessage()}}. <a ngautofocus enable="true" id="xt-learn-anchor" ng-click="vm.utilityService.openLink(\'https://aka.ms/xtlearn \')" ng-keydown="vm.utilityService.openLinkOnEnterPress($event, \'https://aka.ms/xtlearn \')" target="_blank"  tabindex="0">Learn more.</a>    </div>    <div class="product-details-container">        <div class="product-icon">            <img src="Images/explore.png" alt="">        </div>        <div class="product-details">            <div class="product-name">                {{vm.utils.getProductNameMessage()}}            </div>            <div class="product-specs">                <table>                    <tbody>                        <tr>                            <td class="spec-name">Version :</td>                            <td class="spec-value">                                {{vm.version}}                            </td>                        </tr>                    </tbody>                </table>            </div>            <div class="product-for" style="margin-top:5px;">Now everyone on the team can own quality.            </div>            <div class="product-for">Capture findings, create issues, and collaborate with            </div>            <div class="product-for">the team, directly from the browser.            </div>        </div>    </div>    <div class="product-details-information">    <table class="product-details-info-table-div">        <tbody>        <tr>        <td class="product-details-info-table-div">            <div class="product-details-information-block">               <a ng-click="vm.utilityService.openLink(\'http://aka.ms/xt-gettingstartedvideo \')" ng-keydown="vm.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xt-gettingstartedvideo \')" target="_blank"  tabindex="0">                   <div class="product-details-info-block-title product-details-info-block-center">                       Quick demo                   </div>                   <div class="product-details-info-block-center">                       <img class="product-details-image-block" src="Images/Video.png" alt="">                   </div>                   <div>                       <div class="product-details-info-block2">                            Watch the 2-min video to know how the extension works!                       </div>                   </div>               </a>             </div>        </td>        <td class="product-details-info-table-div">             <div class="product-details-information-block">                <a ng-click="vm.utilityService.openLink(\'http://aka.ms/xtgetstarted \')" ng-keydown="vm.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtgetstarted \')" target="_blank"  tabindex="0">                     <div class="product-details-info-block-title product-details-info-block-center">                         Help!                     </div>                     <div class="product-details-info-block-center">                         <img class="product-details-image-block" src="Images/Help.png" alt="">                     </div>                     <div>                         <div class="product-details-info-block2">                             Visit our documentation page to learn more.                         </div>                     </div>                 </a>             </div>        </td>        </tr>        <tr>        <td class="product-details-info-table-div">            <div class="product-details-information-block" >               <a ng-click="vm.sendEmail()" ng-enter="vm.sendEmail()" tabindex="0">                   <div class="product-details-info-block-title product-details-info-block-center">                       Feedback                   </div>                   <div class="product-details-info-block-center">                       <img class="product-details-image-block" src="Images/Feedback.png" alt="">                   </div>                   <div>                       <div class="product-details-info-block2">                           Have something to share with us? Reach out to us.                       </div>                   </div>               </a>            </div>        </td>        <td class="product-details-info-table-div">            <div class="product-details-information-block" >                <a ng-click="vm.writeReview()" ng-enter="vm.writeReview()" tabindex="0">                    <div class="product-details-info-block-title product-details-info-block-center">                        Rate us!                    </div>                    <div class="product-details-info-block-center">                        <img class="product-details-image-block" src="Images/Rating.png" alt="">                    </div>                    <div>                        <div class="product-details-info-block2">                             Liked the extension? You can rate us!                        </div>                    </div>                </a>             </div>        </td>        </tr>        </tbody>    </table>    <div class="about-page-footer">        <div class="about-page-copyright">            Copyright &copy; 2018 Microsoft Corp. All rights reserved.        </div>        <div class="about-page-links">            <div>                <a ng-click="vm.utilityService.openLink(\'http://aka.ms/xtlicense \')" ng-keydown="vm.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtlicense \')" target="_blank"  tabindex="0">License Terms</a>            </div>            <div class="seperator-box">                <div class="seperator-line"></div>            </div>            <div>                <a ng-click="vm.utilityService.openLink(\'http://aka.ms/xtprivacy \')" ng-keydown="vm.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtprivacy \')" target="_blank"  tabindex="0">Privacy Policy</a>            </div>            <div class="seperator-box">                <div class="seperator-line"></div>            </div>            <div>                <a ng-click="vm.utilityService.openLink(\'http://aka.ms/xtsupport \')" ng-keydown="vm.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtsupport \')" target="_blank"  tabindex="0">Support</a>            </div>        </div>    </div>    <xt-minimizepage></xt-minimizepage></div>'}),define("MobileXt/MobileXt.Template",["require","exports"],function(e,t){t.mobileXtTemplate='<div class="perfecto-form" ng-controller="MobileXtController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div class="logo-container">            <div class="xt-sprite xt-sprite-PerfectoMobile"></div>        </div>        <div class="section-data">            <div ng-class="controller.connectionDetailsCss">                <button type="button" ng-click="controller.toggleConnectionCollapse()" aria-label="Expand or collapse connection details" aria-expanded="{{ controller.connectionDetailsExpanded }}" ng-bind-html="controller.connectionCollapseButton"></button>                <p>Connection Details</p>            </div>            <form id="loginform" name="login" uib-collapse="!controller.connectionDetailsExpanded">                <div class=" form-entry">                    Perfecto Account<br>                    <input type="text" aria-labelledby="quality-lab-url" placeholder=" Enter your Continuous Quality Lab url" ng-model="controller.$storage.perfectoCloudUrl" ngautofocus enable="true" required />                    <span id="quality-lab-url" class="hidden-aria-label">Perfecto Continuous Quality Lab url</span>                    <div class="url-preview" ng-show="controller.$storage.perfectoCloudUrl && controller.$storage.perfectoCloudUrl.length != 0">                        <span>Preview:&nbsp;</span>                        <input type="text" value="{{ controller.$storage.perfectoCloudUrl | urlFilter:\'.perfectomobile.com\' }}" title="{{ controller.$storage.perfectoCloudUrl | urlFilter:\'.perfectomobile.com\' }}" readonly tabindex="-1" />                    </div>                    <div class="hide-url-preview" ng-show="!controller.$storage.perfectoCloudUrl || controller.$storage.perfectoCloudUrl.length === 0">                                              </div>                    <div class="perfecto-sign-up">                    Want to extend your tests on real mobile devices - <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up now</a>                    </div>                </div>                <div class="form-entry">                    <label for="username-field">Username</label><br>                    <input type="text" id="username-field" ng-model="controller.$storage.perfectoUserName" required />                </div>                <div class="form-entry">                    <label for="password-field">Password</label><br>                    <input type="PASSWORD" id="password-field" ng-model="controller.password" required />                </div>                <div class="perfecto-button-container">                    <button ng-click="controller.getDevices()" ng-disabled="login.$invalid || $root.actionInProgress || (controller.$storage.perfectoCloudUrl | urlFilter:\'.perfectomobile.com\') === \'\' " tabindex="{{ login.$invalid ? -1 : 0 }}">                        <div class="perfecto-button-text">                            Get Devices                        </div>                    </button>                </div>            </form>        </div>        <div class="section-data">            <div ng-class="controller.devicesCss">                <button type="button" ng-click="controller.toggleDevicesCollapse()" aria-label="Expand or collapse available devices" aria-expanded="{{ controller.deivcesExpanded }}" ng-bind-html="controller.devicesCollapseButton"></button>                <p>Available Devices</p>            </div>            <div id="devicegrid" uib-collapse="!controller.deivcesExpanded" ng-escape="controller.onEscapeKeyPress()">                <div ui-grid="controller.gridOptions" ui-grid-selection ui-grid-save-state ui-grid-resize-columns class="grid"></div>                <div class="perfecto-button-container">                    <button ng-click="controller.launchDevice()" ng-disabled="$root.actionInProgress || !controller.isDeviceSelected">                        <div class="perfecto-button-text">                            Launch Device                        </div>                    </button>                </div>            </div>        </div>        <div ng-click="controller.clearLocalStorage()">            <xt-minimizepage></xt-minimizepage>        </div>    </div></div>'}),define("TaskForm/TaskForm.Template",["require","exports"],function(e,t){t.taskFormTemplate='<div class="task-activity-container" ng-controller="TaskFormController as vm" ng-escape="vm.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container" ng-keydown="vm.keydown($event)">        <div class="task-form">            <div class="new-task-title">                New task<span ng-show="isDirty || isTitleDirty"> *</span>            </div>            <form name="taskForm">                <div class="title-input-container">                    <input class="task-title-input" aria-labelledby="task-title" type="text" ng-model="title" placeholder=" Task title" required ngautofocus enable="true" />                    <span id="task-title" class="hidden-aria-label">Title of the Task work item to create</span>                </div>                <div ng-if="!vm.utilityService.isOfflineMode()">                   <p class="include-text">                       Include:&nbsp                   </p>                   <span class="action-log-filter" ng-show="vm.showImageActionLogFilter()">                       <label title="{{vm.checkboxTooltipText}}">                       <input tabIndex="{{ vm.showImageActionLogFilter() && !isDirty ? 0 : -1 }}" class="check-box" ng-disabled="isDirty || !actionLogFlag" type="checkbox" ng-model="vm.includeImageActionLogsInTask" ng-change="vm.filterActionLogs(vm.includeImageActionLogsInTask)" >                           Image action log                       </label>                   </span>                   <span class="action-log-filter" ng-show="!vm.showImageActionLogFilter()">                       <label class="disabled-label">                       <input class="check-box" ng-disabled="true" type="checkbox">                           Image action log                       </label>                   </span>                   <span class="perf-data-filter" ng-if="vm.showPerfDataFilter()">                       <label title="{{vm.checkboxTooltipText}}">                           <input tabIndex="{{ vm.showPerfDataFilter() ? 0 : -1 }}" class="check-box" type="checkbox" ng-disabled="isDirty || !perfDataFlag" type="checkbox" ng-model="vm.includePerfDataInTask" ng-change="vm.filterPerfData(vm.includePerfDataInTask)" >                               Page load data                       </label>                   </span>                   <span class="perf-data-filter" ng-if="!vm.showPerfDataFilter()">                       <label class="disabled-label">                           <input class="check-box" type="checkbox" ng-disabled="true">                               Page load data                       </label>                   </span>                </div>                <div ng-if="vm.utilityService.isOfflineMode()">                   <p class="include-text-offline">                       Include:&nbsp                   </p>                   <span class="action-log-filter">                       <label class="disabled-label">                       <input class="check-box" ng-disabled="true" type="checkbox" >                           Image action log                       </label>                   </span>                   <span class="perf-data-filter">                       <label class="disabled-label">                           <input class="check-box" type="checkbox" ng-disabled="true">                               Page load data                       </label>                   </span>                </div>                <div class="task-description-container" aria-label="Task description" role="edit">                    <xt-editor content="description" scroll="delegateForScrollDownForm"></xt-editor>                </div>               <div class="active-recording-watermark" id="watermark" style="visibility:{{waterMarkStyle}}">                       {{ vm.waterMarkText }} <span ng-if="!vm.utilityService.isOfflineMode()"><a href="" ng-click="vm.utilityService.launchOptionsPage()">Options</a> page.</span>               </div>            </form>        </div>    </div>    <div class="task-form">        <div class="button-container" tabindex="-1">            <button ng-click="vm.createTask()" ng-disabled="taskForm.$invalid || $root.actionInProgress" tabindex="{{ taskForm.$invalid ? -1 : 0 }}">                <div class="save-text">                    Save                </div>            </button>        </div>    </div>    <div ng-click="vm.clearLocalStorage()">         <xt-closeform></xt-closeform>    </div></div>'}),define("BugForm/BugForm.Template",["require","exports"],function(e,t){t.bugFormTemplate='<div class="bug-activity-container" ng-controller="BugFormController as vm" ng-escape="vm.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div class="bug-form">            <div ng-click="vm.clearLocalStorage()">                <xt-closeform></xt-closeform>            </div>            <div class="new-bug-title">                New bug<span ng-show="isDirty"> *</span>            </div>            <form name="bugForm">                <div class="title-input-container">                    <input class="bug-title-input" type="text" ng-model="title" placeholder=" Bug title" ng-keydown="vm.keyDownOnInput($event)" required ngautofocus enable="true" />                </div>                <div class="bug-description-container">                    <xt-editor content="description"></xt-editor>                </div>            </form>        </div>    </div>    <div class="bug-form">        <div class="button-container" tabindex="-1">            <button ng-click="vm.createBug()" ng-disabled="bugForm.$invalid || $root.actionInProgress" tabindex="{{ bugForm.$invalid ? -1 : 0 }}">                <div class="save-text">                    Save                </div>            </button>        </div>    </div></div>'}),define("BugForm/BugForm2.Template",["require","exports"],function(e,t){t.bugForm2Template='<div class="bug-activity-container" ng-controller="BugForm2Controller as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container" ng-keydown="controller.keydown($event)">        <div class="bug-form">            <div class="new-bug-title" ng-show="!controller.$localStorage.selectedBugForUpdate">                New bug<span ng-show="isDirty || isTitleDirty"> *</span>            </div>            <div class="new-bug-title" ng-show="controller.$localStorage.selectedBugForUpdate">                Bug {{controller.$localStorage.selectedBugForUpdate.id}}<span ng-show="isDirty || isTitleDirty"> *</span>            </div>            <form name="bugForm" id="bugForm2">                <div class="bug-search-box">                    <input ng-class="{ \'search-disabled\': !controller.isSearchEnabled() && !controller.utilityService.isOfflineMode()}" type="text" aria-labelledby="search-bug" placeholder="{{controller.inputBoxPlaceholder}}" ng-model="title" ng-keydown="controller.keyDownOnInput($event)" ngautofocus enable="true" required/>                    <span id="search-bug" class="hidden-aria-label">{{controller.labelledby}}</span>                    <div ng-if="!controller.isSearchBugInProgress && controller.isSearchEnabled()" class="bugCount-button-container" tabindex="-1">                       <button ng-disabled="$root.actionInProgress || controller.$localStorage.searchResultsForSimilarBugs.length === 0" ng-click="controller.showSimilarBugs()" tabindex="0">{{controller.$localStorage.searchResultsForSimilarBugs.length + " Similar"}}</button>                    </div>                    <div ng-if="controller.isSearchBugInProgress && controller.isSearchEnabled()" class="loading-icon">                       <button ng-disable="true"></button>                    </div>                    <div ng-if="controller.utilityService.isOfflineMode()" class="bugCount-button-container-offline" title="View similar bugs (available in Connected mode only)">                       <button ng-disabled="true" tabindex="0">0 Similar</button>                    </div>                </div>                <div ng-if="!controller.utilityService.isOfflineMode()">                   <p class="include-text">                       Include:&nbsp                   </p>                   <span class="action-log-filter" ng-if="controller.showImageActionLogFilter()">                       <label title="{{controller.checkboxTooltipText}}">                       <input tabIndex="{{ controller.showImageActionLogFilter() && !isDirty ? 0 : -1 }}" class="check-box" ng-disabled="isDirty || !actionLogFlag" type="checkbox" ng-model="controller.includeImageActionLogsInBug" ng-change="controller.filterActionLogs(controller.includeImageActionLogsInBug)" >Image action log                       </label>                   </span>                   <span class="action-log-filter" ng-if="!controller.showImageActionLogFilter()">                       <label class="disabled-label">                       <input class="check-box" ng-disabled="true" type="checkbox" >Image action log                       </label>                   </span>                   <span class="perf-data-filter" ng-if="controller.showPerfDataFilter()">                       <label title="{{controller.checkboxTooltipText}}">                       <input tabIndex="{{ controller.showPerfDataFilter() ? 0 : -1 }}" class="check-box"  ng-disabled="isDirty || !perfDataFlag" type="checkbox" ng-model="controller.includePerfDataInBug" ng-change="controller.filterPerfData(controller.includePerfDataInBug)" >Page load data                       </label>                   </span>                   <span class="perf-data-filter" ng-if="!controller.showPerfDataFilter()">                       <label class="disabled-label">                       <input class="check-box"  ng-disabled="true" type="checkbox"" >Page load data                       </label>                   </span>                </div>                <div ng-if="controller.utilityService.isOfflineMode()">                   <p class="include-text-offline">                       Include:&nbsp                   </p>                   <span class="action-log-filter">                       <label class="disabled-label" style="color:grey">                       <input class="check-box" ng-disabled="true" type="checkbox" >Image action log                       </label>                   </span>                   <span class="perf-data-filter">                       <label class="disabled-label" style="color:grey">                       <input class="check-box"  ng-disabled="true" type="checkbox"" >Page load data                       </label>                   </span>                </div>                <div class="bug-description-container" aria-label="Bug description" role="edit">                    <xt-editor content="description" scroll="delegateForScrollDownForm"></xt-editor>                </div>               <div class="active-recording-watermark" id="watermark" style="visibility:{{waterMarkStyle}}">                       {{ controller.waterMarkText }} <span ng-if="!controller.utilityService.isOfflineMode()"><a href="" ng-click="controller.utilityService.launchOptionsPage()">Options</a> page.</span>               </div>            </form>        </div>        </div>        <div class="bug-form">           <div class="button-container" tabindex="-1">            <button ng-click="controller.saveBug()" ng-disabled="($root.actionInProgress && !controller.isSearchBugInProgress) || bugForm.$invalid" tabindex="{{ bugForm.$invalid ? -1 : 0 }}">                <div class="save-text">                    Save                </div>            </button>          </div>            <div ng-click="controller.clearLocalStorage()">                <xt-closeform></xt-closeform>            </div>      </div></div>';
}),define("BugForm/BugSearchResult.Template",["require","exports"],function(e,t){t.bugSearchResultTemplate='<div class="bug-activity-container" ng-controller="BugSearchResultController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div class="bug-form">            <div class="new-bug-title">                <a ng-href="#/BugForm2" >New bug</a> > {{controller.similarBugs.length+" Similar"}}            </div>            <form name="bugForm" id="bugForm2">                <div class="bug-search-box">                    <input aria-labelledby="bug-search" type="text" value="{{controller.searchTitle}}" ng-disabled="true" required/>                    <span id="bug-search" class="hidden-aria-label">Defect title to add or search</span>                    <div class="bugCount-button-container">                       <button ng-disabled="true">{{controller.similarBugs.length + " Similar"}}</button>                    </div>                </div>            </form>        </div>        </div>           <div class="searched-work-items" role="listbox" aria-label="Similar bugs">                <div class="workitem-container" role="option" ng-repeat="workItem in controller.similarBugs" data-ng-class="controller.generateCssForSelectedWorkItem(workItem)" ng-click="controller.setBugToUpdate(workItem)" ng-keyup="controller.setBugToUpdateOnKeyDown($event, workItem)" tabindex="{{ controller.getTabIndex(workItem) }}" aria-selected="{{ controller.isSelected(workItem) }}" aria-label="{{ workItem.title }}">                   <div ng-attr-id="{{workItem.id}}" class="searched-workitem-metadata" ng-style="controller.witService.getWorkItemColorBandStyle(workItem.type)">                       <div class="workitem-title" ng-attr-title="{{workItem.title}}" ng-bind-html="controller.highlightText(workItem.title)"></div>                            <div class="workitem-attributes">                               <div class="workitem-attribute" ng-show="workItem.type">{{workItem.type}}:&nbsp<div class="workitem-id"><a ng-href="" tabindex="-1" ng-click="controller.openBug(workItem.url)" ng-keyup="controller.handleKeyPressForLink($event, workItem)">{{workItem.id}}</a></div>&nbsp</div>                               <div class="workitem-attribute" ng-show="workItem.state">State:&nbsp<div class="workitem-attribute-value" ng-attr-title="{{workItem.state}}">{{workItem.state}}</div>&nbsp</div>                               <div class="workitem-attribute" ng-show="workItem.iterationPath">Iteration Path:&nbsp<div class="workitem-attribute-value" ng-attr-title="{{workItem.iterationPath}}">{{workItem.iterationPath}}</div>&nbsp</div>                           </div>                   </div>               </div>               <div class="bottom-border"></div>            </div>        <div class="bug-form" tabindex="-1">           <div class="button-container" tabindex="-1">            <button id="editWorkItem" ng-click="controller.getSelectedBug()" ng-disabled="!controller.selectedBug">                <div class="save-text">                    Edit                </div>            </button>          </div>      </div>      <xt-minimizepage > </xt-minimizepage></div>'}),define("Session/Session.Template",["require","exports"],function(e,t){t.sessionTemplate='<div class="session-page" error-control></div>'}),define("Traceability/Traceability.Template",["require","exports"],function(e,t){t.traceabilityFormTemplate='<div class="traceability-page" ng-controller="TraceabilityController as controller" ng-escape="controller.$utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container" ng-show="controller.linkedWorkItem">        <div class="traceability-page-title">           <div class="workitem-type">Explore work item</div>           <div class="change-workitem-button">               <button ng-click="controller.changeWorkItem()" ng-disabled="!controller.linkedWorkItem">Change               </button>          </div>       </div>       <div class="searched-workitem-metadata" ng-style="controller.$workItemService.getWorkItemColorBandStyle(controller.linkedWorkItem.type)">           <div class="workitem-title" ng-attr-title="{{controller.linkedWorkItem.title}}">{{controller.linkedWorkItem.title}}</div>            <div class="workitem-attributes">               <div class="workitem-attribute" ng-show="controller.linkedWorkItem.type">{{controller.linkedWorkItem.type}}:&nbsp<div class="workitem-id"><a ng-href="" ng-click="controller.openWorkItem(controller.linkedWorkItem.url)" ng-keyup="controller.handleKeyForLink($event, workItem)" tabindex="0">{{controller.linkedWorkItem.id}}</a></div>&nbsp</div>               <div class="workitem-attribute" ng-show="controller.linkedWorkItem.assignedTo">Assigned To:&nbsp<div class="workitem-attribute-value" ng-attr-title="{{controller.linkedWorkItem.assignedTo}}">{{controller.linkedWorkItem.assignedTo}}</div>&nbsp</div>               <div class="workitem-attribute" ng-show="controller.linkedWorkItem.iterationPath">Iteration Path:&nbsp<div class="workitem-attribute-value" ng-attr-title="{{controller.linkedWorkItem.iterationPath}}">{{controller.linkedWorkItem.iterationPath}}</div>&nbsp</div>           </div>       </div>       <div class="traceable-workitem-data">           <div class="description-type">{{controller.descriptionType}}</div>            <div class="description-content" ng-if="controller.linkedWorkItemDetailsAvailable == true" ng-bind-html="controller.linkedWorkItem.description"></div>            <div class="description-content-unavailable" ng-if="controller.linkedWorkItemDetailsAvailable == false">{{controller.linkedWorkItem.description}}</div>        </div>   </div>    <div class="form-container" ng-show="!controller.linkedWorkItem">        <div class="traceability-page-title">           <div class="workitem-type">Explore work item</div>       </div>       <div class="workitem-search-box">           <input type="text" placeholder="Search work item using id or keywords in title" aria-labelledby="search-work-item" ng-model="controller.$storage.workItemQueryPatternForTraceability" ng-disabled="controller.linkedWorkItem" ng-keydown="controller.keyDownOnInput($event)" ng-readonly="controller.$storage.workItemSearchInProgress" ngautofocus enable="true" required/>           <span id="search-work-item" class="hidden-aria-label">Work item to explore, search with id or keywords in title</span>           <div class="search-button-container" ng-attr-title="Search"><button ng-click="controller.queryWorkItems()" ng-bind-html="controller.searchButton" ng-disabled="controller.linkedWorkItem || !controller.$storage.workItemQueryPatternForTraceability || controller.$storage.workItemSearchInProgress"></div>       </div>       <div class="searched-work-items" role="grid" ng-show="controller.searchResultsForTraceability && controller.searchResultsForTraceability.length > 0">             <div tabindex="{{ controller.getTabIndex(workItem) }}" role="grid-row" class="workitem-container" ng-repeat="workItem in controller.searchResultsForTraceability" data-ng-class="controller.generateCssForSelectedWorkItem(workItem)" ng-click="controller.setTraceableWorkItem(workItem)" ng-keyup="controller.setTraceableWorkItemOnKeyDown($event, workItem)">               <div ng-attr-id="{{workItem.id}}" class="searched-workitem-metadata" ng-style="controller.$workItemService.getWorkItemColorBandStyle(workItem.type)">                   <div class="workitem-title" ng-attr-title="{{workItem.title}}" ng-bind-html="controller.highlightText(workItem.title)"></div>                    <div class="workitem-attributes">                       <div class="workitem-attribute" ng-show="workItem.type">{{workItem.type}}:&nbsp<div class="workitem-id"><a ng-href="" tabindex="-1" ng-click="controller.openWorkItem(workItem.url)" ng-keyup="controller.handleKeyPressForLink($event, workItem)">{{workItem.id}}</a></div>&nbsp</div>                       <div class="workitem-attribute" ng-show="workItem.assignedTo">Assigned To:&nbsp<div class="workitem-attribute-value" ng-attr-title="{{workItem.assignedTo}}">{{workItem.assignedTo}}</div>&nbsp</div>                       <div class="workitem-attribute" ng-show="workItem.iterationPath">Iteration Path:&nbsp<div class="workitem-attribute-value" ng-attr-title="{{workItem.iterationPath}}">{{workItem.iterationPath}}</div>&nbsp</div>                   </div>               </div>             </div>             <div class="bottom-border"></div>       </div>       <div class="link-button-container" ng-show="controller.searchResultsForTraceability && controller.searchResultsForTraceability.length > 0">           <button ng-click="controller.exploreWorkItem()" ng-disabled="!controller.selectedTraceableWorkItem">               <div class="button-text">                   Explore selected work item               </div>           </button>       </div>       <xt-minimizepage></xt-minimizepage>   </div></div>'}),define("FeedbackRequests/FeedbackRequests.Template",["require","exports"],function(e,t){t.feedbackRequestsPageTemplate='<div class="feedbackRequests-page" ng-controller="FeedbackRequestsController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">           <div class="feedback-request-items">                <div role="group" aria-labelledby="feedbackrequest-title">               <div id="feedbackrequest-title" class="feedbackRequest-page-title">                   <legend>Feedback Requests</legend> ({{ filteredFeedback.length }})               </div>               <div class="feedback-request-states">                       <div class="feedback-request-state state-pending">                            <input type="radio" aria-labelledby="pending-state" name="feedbackstate" value="Pending"  ng-change="controller.onChangeState()" ng-model="controller.feedbackStateOption">                           <span id="pending-state">Pending</span>                        </div>                        <div class="feedback-request-state state-completed">                            <input type="radio" aria-labelledby="completed-state" name="feedbackstate" value="Completed"  ng-change="controller.onChangeState()" ng-model="controller.feedbackStateOption">                           <span id="completed-state">Completed</span>                        </div>                        <div class="feedback-request-state state-declined">                            <input type="radio" aria-labelledby="declined-state" name="feedbackstate" value="Declined"  ng-change="controller.onChangeState()" ng-model="controller.feedbackStateOption">                           <span id="declined-state">Declined</span>                        </div>                </div>                </div>                <div class="feedback-requests-list" role="list">                  <div class="workitem-container" role="listitem" ng-repeat="workItem in filteredFeedback = (controller.feedbackRequests | feedbackFilter: controller.feedbackStateOption) " data-ng-class="controller.generateCssForSelectedWorkItem(workItem)" ng-click="controller.setSelectedFeedback(workItem)" ng-keyup="controller.setSelectedFeedbackOnKeyDown($event, workItem)" tabindex="{{ controller.getTabIndex(workItem) }}">                     <div ng-attr-id="{{workItem.id}}" class="searched-workitem-metadata" ng-style="controller.workItemService.getWorkItemColorBandStyle(workItem.type)">                         <div class="workitem-title" ng-attr-title="{{workItem.title}}"> {{workItem.title}} </div>                              <div class="workitem-attributes">                                 <div class="workitem-attribute" ng-show="workItem.createdBy"> Requested by : &nbsp<div class="workitem-attribute-value" ng-attr-title="{{workItem.createdBy}}">{{workItem.createdBy}}</div>&nbsp</div>                                 <div class="workitem-attribute" ng-show="workItem.createdDate">Requested date :&nbsp<div class="workitem-attribute-value" ng-attr-title="{{ workItem.createdDate | toLocaleDateFilter }}">{{workItem.createdDate | toLocaleDateFilter }}</div>&nbsp</div>                             </div>                             <div class="feedback-completion-buttons" ng-show="controller.showFeedbackCompletionButtons()">                                <div class="icon-complete-request bowtie-icon" ng-class="{\'bowtie-status-success-outline\': !completeHover, \'bowtie-status-success\':completeHover}" ng-click="controller.completeFeedbackRequest(workItem)" title="Complete feedback request" role="radio-button" ng-keyup="controller.selectCompleteFeedback($event, workItem)" ng-mouseenter="completeHover=true" tabindex="0" ng-focus="completeHover=true" ng-mouseleave="completeHover=false" ng-blur="completeHover=false"></div>                                 <div class="icon-decline-request bowtie-icon" ng-class="{\'bowtie-status-failure-outline\': !declineHover, \'bowtie-status-failure\':declineHover}" ng-click="controller.declineFeedbackRequest(workItem)" title="Decline feedback request" role="radio-button" ng-mouseenter="declineHover=true" tabindex="0" ng-focus="declineHover=true" ng-keyup="controller.selectDeclineFeedback($event, workItem)" ng-mouseleave="declineHover=false" ng-blur="declineHover=false"></div>                              </div>                     </div>                 </div>                 <div class="no-feedback-request" ng-show="controller.showNoFeedbackRequestsMessage() && (!filteredFeedback || filteredFeedback.length === 0)"><i>{{controller.getEmptyListMessage()}}</i>                 </div>               </div>               <div class="bottom-border"></div>            </div>        <div class="feedback-request-form" tabindex="-1">           <div class="button-container" tabindex="-1">            <button id="viewFeedback" ng-click="controller.viewFeedbackDetail()" ng-disabled="!controller.selectedFeedbackRequest || filteredFeedback.length === 0">                <div class="feedback-text">                    View feedback                </div>            </button>          </div>      </div>      <xt-minimizepage></xt-minimizepage></div>'}),define("TestCaseForm/TestCaseForm.Template",["require","exports"],function(e,t){t.testCaseFormTemplate='<div class="testcase-activity-container" ng-controller="TestCaseFormController as vm" ng-escape="vm.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container" ng-keydown="vm.keydown($event)">        <div class="testcase-form">            <div class="new-testcase-title">                New test case <span ng-show="isDirty"> *</span>            </div>            <form name="testcaseForm">                <div class="title-input-container">                    <input class="testcase-title-input" aria-labelledby="testcase-title" type="text" ng-model="title" placeholder=" Test case title" required ngautofocus enable="true" />                    <span id="testcase-title" class="hidden-aria-label">Title of the Test case work item to create</span>                </div>                <div ui-grid="gridOptions" class="myGrid" ui-grid-cellNav ui-grid-selection ui-grid-edit ui-grid-resize-columns ui.grid.cellNav >                </div>            </form>        </div>    </div>    <div class="task-form">        <div class="button-container" tabindex="-1">            <button ng-click="vm.createTestCase()" ng-disabled="testcaseForm.$invalid || $root.actionInProgress" tabindex="{{ testcaseForm.$invalid ? -1 : 0 }}">                <div class="save-text">                    Save                </div>            </button>        </div>    </div>            <div ng-click="vm.clearLocalStorage()">                <xt-closeform></xt-closeform>            </div></div>'}),define("Notification/Notification.Template",["require","exports"],function(e,t){t.notificationTemplate='<div class="notification-page-container form-container" ng-controller="NotificationController as vm" ng-escape="vm.utilityService.minimizeForm()">    <div class="notification-page-title">Notification</div>    <div class="product-description">        <p style="white-space: pre-line;">            <p>            <b>Image action log</b>            <p>By default, the image action log has been turned ON for your extension.</p>            <p>This captures your last 15 actions (mouse clicks, touch gestures, keyboard events) performed in the chrome browser. This captured data is used only to enhance your bug/task/test case creation experience. You can choose to exclude it at the time of filing the bug/task/test also. It is not used or shared anywhere else (read our <a href="http://aka.ms/xtprivacy" target="_blank">privacy policy</a>).</p>            <p>You can enable/disable this option at any time from the <a href="" ng-click="vm.launchOptions()">Options page</a> (right click on extension, select Options)</p>            </p>        </p>    </div>    <div class="notification-page">           <div class="button-container" tabindex="-1">            <button ng-click="vm.dismissNotification()">                <div class="dismiss-text">                    Ok, Got it!                </div>            </button>          </div>    </div></div>'}),define("License/License.Template",["require","exports"],function(e,t){t.licenseTemplate='<div class="license-page-container form-container" ng-controller="LicenseController as vm">    <div class="license-page-title">{{ vm.title }}</div>    <div class="license-page-message">{{ vm.message }}</div>    <div class="license-page-footer1">{{ vm.footer1 }}</div>    <div class="button-container">        <button class="license-page-start-trial secondary-button" ng-if="vm.showStartTrial" ng-click="vm.startTrial()">            <div class="license-page-button-text">                Start trial            </div>        </button>        <button class="license-page-buy primary-button" ng-if="vm.showBuy" ng-click="vm.buy()">            <div class="license-page-button-text">                Buy            </div>        </button>        <button class="license-page-remind-later secondary-button" ng-if="vm.showRemindMeLater" ng-click="vm.remindLater()">            <div class="license-page-button-text">                Remind me later            </div>        </button>    </div>    <div class="license-page-footer2">{{ vm.footer2 }}</div></div>'}),define("FeedbackResponseForm/FeedbackResponseForm.Template",["require","exports"],function(e,t){t.feedbackResponseFormTemplate='<div class="feedback-activity-container" ng-controller="FeedbackResponseFormController as vm" ng-escape="vm.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container" ng-save="vm.createFeedbackResponse()">        <div class="feedback-form">            <div class="new-feedback-title">                New feedback response<span ng-show="isDirty || isTitleDirty || isStarRatingDirty"> *</span>            </div>            <form name="feedbackResponseForm">                <div class="title-input-container">                    <input class="feedback-title-input" aria-labelledby="feedback-title" type="text" ng-model="title" placeholder=" Feedback response title" required />                    <span id="feedback-title" class="hidden-aria-label">Feedback response title</span>                    <div class="star-rating-control" title="Rating">                       <data-angular-star-rating                        data-max= "vm.starRatingMaxValue"                        data-value="starRatingValue"                        data-hover="vm.starsChangeOnHover" />                     </div>                </div>                <div ng-if="!vm.utilityService.isOfflineMode()">                   <p class="include-text">                       Include:&nbsp                   </p>                   <span class="action-log-filter" ng-show="vm.showImageActionLogFilter()">                       <label title="{{vm.checkboxTooltipText}}">                       <input tabIndex="{{ vm.showImageActionLogFilter() && !isDirty ? 0 : -1 }}" class="check-box" ng-disabled="isDirty || !actionLogFlag" type="checkbox" ng-model="vm.includeImageActionLogsInTask" ng-change="vm.filterActionLogs(vm.includeImageActionLogsInTask)" >                           Image action log                       </label>                   </span>                   <span class="action-log-filter" ng-show="!vm.showImageActionLogFilter()">                       <label class="disabled-label">                       <input class="check-box" ng-disabled="true" type="checkbox">                           Image action log                       </label>                   </span>                   <span class="perf-data-filter" ng-if="vm.showPerfDataFilter()">                       <label title="{{vm.checkboxTooltipText}}">                           <input tabIndex="{{ vm.showPerfDataFilter() ? 0 : -1 }}" class="check-box" type="checkbox" ng-disabled="isDirty || !perfDataFlag" type="checkbox" ng-model="vm.includePerfDataInTask" ng-change="vm.filterPerfData(vm.includePerfDataInTask)" >                               Page load data                       </label>                   </span>                   <span class="perf-data-filter" ng-if="!vm.showPerfDataFilter()">                       <label class="disabled-label">                           <input class="check-box" type="checkbox" ng-disabled="true">                               Page load data                       </label>                   </span>                </div>                <div ng-if="vm.utilityService.isOfflineMode()">                   <p class="include-text-offline">                       Include:&nbsp                   </p>                   <span class="action-log-filter">                       <label class="disabled-label">                       <input class="check-box" ng-disabled="true" type="checkbox" >                           Image action log                       </label>                   </span>                   <span class="perf-data-filter">                       <label class="disabled-label">                           <input class="check-box" type="checkbox" ng-disabled="true">                               Page load data                       </label>                   </span>                </div>                <div class="feedback-description-container" aria-label="Feedback description" role="edit">                    <xt-editor content="description" scroll="delegateForScrollDownForm"></xt-editor>                </div>               <div class="active-recording-watermark" id="watermark" style="visibility:{{waterMarkStyle}}">                       {{ vm.waterMarkText }} <span ng-if="!vm.utilityService.isOfflineMode()"><a href="" ng-click="vm.utilityService.launchOptionsPage()">Options</a> page.</span>               </div>            </form>        </div>    </div>    <div class="feedback-form">        <div class="button-container" tabindex="-1">            <button ng-click="vm.createFeedbackResponse()" ng-disabled="feedbackResponseForm.$invalid || $root.actionInProgress" tabindex="{{ feedbackResponseForm.$invalid ? -1 : 0 }}">                <div class="save-text">                    Save                </div>            </button>        </div>    </div>            <div ng-click="vm.clearLocalStorage()">                <xt-closeform></xt-closeform>            </div></div>'}),define("FeedbackRequests/FeedbackRequestDetail.Template",["require","exports"],function(e,t){t.feedbackRequestDetailTemplate='<div class="feedback-request-detail-container" ng-controller="FeedbackRequestDetailController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">           <div class="feedback-request-detail-form">               <div class="feedback-initializing message-style" ng-show= "!controller.showFeedbackDetailForm">  <i>Fetching feedback request...</i> </div>               <div class="feedbackRequest-page-title" ng-show= "controller.showFeedbackDetailForm">                   <a ng-href="#/FeedbackRequests" >Feedback requests</a>&nbsp;> {{ controller.getPageBreadcrumTitle() }}               </div>           </div>             <div ng-show= "controller.showFeedbackDetailForm">                   <div class="workitem-container" >                       <div ng-attr-id="{{controller.selectedFeedbackRequest.id}}" class="searched-workitem-metadata" ng-style="controller.witService.getWorkItemColorBandStyle(controller.selectedFeedbackRequest.type)">                               <div class="workitem-title" ng-attr-title="{{controller.selectedFeedbackRequest.title}}"> {{controller.selectedFeedbackRequest.title}} </div>                                <div class="workitem-attributes">                                   <div class="workitem-attribute" ng-show="controller.selectedFeedbackRequest.createdBy"> Requested by : &nbsp<div class="workitem-attribute-value" ng-attr-title="{{controller.selectedFeedbackRequest.createdBy}}">{{controller.selectedFeedbackRequest.createdBy}}</div>&nbsp</div>                                   <div class="workitem-attribute" ng-show="controller.selectedFeedbackRequest.createdDate">Requested date :&nbsp<div class="workitem-attribute-value" ng-attr-title="{{ controller.selectedFeedbackRequest.createdDate | toLocaleDateFilter }}">{{controller.selectedFeedbackRequest.createdDate | toLocaleDateFilter }}</div>&nbsp</div>                               </div>                       </div>                   </div>                   <div class = "feedback-request-details">                        <div class="feedback-notes" >Instructions: </div>                        <br/>                        <div class="feedback-instruction" ng-bind-html="controller.selectedApplicationStartInfo"> </div>                       <div class="message-style" ng-show = "controller.isInitiatedFromWeb"> <i>The extension is configured with the selected feedback request. You are all set to provide your feedback.</i> </div>                   </div>              </div>        <div class="feedback-request-form" tabindex="-1">           <div class="button-container" tabindex="-1">               <button id="provideFeedback" ng-click="controller.provideFeedback()" ng-disabled="controller.isProvideFeedbackDisabled()">                   <div class="feedback-text">                       Provide feedback                   </div>               </button>           </div>        </div>      </div>      <xt-minimizepage > </xt-minimizepage></div>'}),define("ForceStopSession/ForceStopSession.Template",["require","exports"],function(e,t){t.forceStopSessionPageTemplate='<div class="forceStopSession-page" ng-controller="ForceStopSessionController as controller" ng-escape="controller.utilityService.minimizeForm()"> <div class="showPage" ng-if="controller.showPopup">    <error-control></error-control>    <div class="form-container">          <div class="force-stop-session-page">               <div class="xt-closeform"><a aria-label="close" role="button" class="close-form-button" href="#" title="Discard message">&#57610;</a></div>          </div>     <div class="stop-session-error-heading">Stop session failed</div>     <div class="force-stop-session-message">Unable to stop session due to following reason:         <br><br>         <div class="force-stop-session-error-message" ng-bind="controller.failureReason"> </div>         <br>         <div class="force-stop-question">Do you want to force stop the session?</div>     </div>     <div class="decision-buttons button-container">                <button class="decision-button yes-button" ng-click="controller.onYesButtonClick()">                    <div class="yes-button-text">Yes, stop session anyway</div>                </button>     </div>    </div> </div></div>'}),define("Popup.Module",["require","exports","../Common/Types","Toolbar/Toolbar.Template","Timeline/Timeline.Template","Shell/Shell.Template","NoteForm/NoteForm.Template","VideoCapture/VideoCapture.Template","About/About.Template","MobileXt/MobileXt.Template","TaskForm/TaskForm.Template","BugForm/BugForm.Template","BugForm/BugForm2.Template","BugForm/BugSearchResult.Template","Session/Session.Template","Traceability/Traceability.Template","FeedbackRequests/FeedbackRequests.Template","TestCaseForm/TestCaseForm.Template","Notification/Notification.Template","License/License.Template","FeedbackResponseForm/FeedbackResponseForm.Template","FeedbackRequests/FeedbackRequestDetail.Template","ForceStopSession/ForceStopSession.Template","../Common/FeatureAvailabiliy","../Common/Utility"],function(e,t,o,n,r,i,a,s,c,l,d,u,g,p,m,f,h,v,S,b,y,T,C,F,k){function x(e){return!1}function I(e,t){var o=e.isNotificationDismissed||!1;if(o||t)"/Notification"===e.lastUrl&&(e.lastUrl=e.lastUrlBeforeNotification?e.lastUrlBeforeNotification:"/SignIn");else{var n=e.lastUrl?e.lastUrl:"/SignIn";"/Notification"!==n&&(e.lastUrlBeforeNotification=n),e.lastUrl="/Notification"}e.$apply()}function w(e,t){var o=e.alertInformation,n=o&&o.some(function(e){return e.isSeen===!1})||!1,r=n&&!t.isOfflineMode()&&L.isFeatureEnabled(M.XTTrialMode);if(r){var i=e.lastUrl?e.lastUrl:"/SignIn";"/License"!==i&&(e.lastUrlBeforeNotification=i),e.lastUrl="/License"}else"/License"===e.lastUrl&&(e.lastUrl=e.lastUrlBeforeNotification?e.lastUrlBeforeNotification:"/SignIn");e.$apply()}function D(e){e.put(R.toolbar,n.html),e.put(R.timeline,r.timelineHtml),e.put(R.shell,i.shellTemplate),e.put(R.noteform,a.noteformTemplate),e.put(R.about,c.aboutTemplate);var t=E.getSignInTemplate();e.put(R.signIn,t),e.put(R.mobileXt,l.mobileXtTemplate),e.put(R.bugform,u.bugFormTemplate),e.put(R.taskform,d.taskFormTemplate),e.put(R.testcaseform,v.testCaseFormTemplate),e.put(R.bugform2,g.bugForm2Template),e.put(R.bugsearchresult,p.bugSearchResultTemplate),e.put(R.traceability,f.traceabilityFormTemplate),e.put(R.notification,S.notificationTemplate),e.put(R.license,b.licenseTemplate),e.put(R.feedbackResponseForm,y.feedbackResponseFormTemplate),e.put(R.feedbackRequests,h.feedbackRequestsPageTemplate),e.put(R.feedbackRequestDetail,T.feedbackRequestDetailTemplate),e.put(R.forceStopSession,C.forceStopSessionPageTemplate)}function A(e){e.when("/SignIn",{templateUrl:R.signIn}),e.when("/Note",{templateUrl:R.noteform}),e.when("/BugForm",{templateUrl:R.bugform}),e.when("/BugForm2",{templateUrl:R.bugform2}),e.when("/BugSearchResult",{templateUrl:R.bugsearchresult}),e.when("/TaskForm",{templateUrl:R.taskform}),e.when("/TestCase",{templateUrl:R.testcaseform}),e.when("/FeedbackResponseForm",{templateUrl:R.feedbackResponseForm}),e.when("/Timeline",{templateUrl:R.timeline}),e.when("/MobileXt",{templateUrl:R.mobileXt}),e.when("/Session",{template:m.sessionTemplate}),e.when("/VideoCapture",{template:s.videoCaptureTemplate}),e.when("/About",{templateUrl:R.about}),e.when("/Traceability",{templateUrl:R.traceability}),e.when("/Notification",{templateUrl:R.notification}),e.when("/License",{templateUrl:R.license}),e.when("/FeedbackRequests",{templateUrl:R.feedbackRequests}),e.when("/FeedbackRequestDetail",{templateUrl:R.feedbackRequestDetail}),e.when("/ForceStopSessionPage",{templateUrl:R.forceStopSession})}var E=k.BrandingChangesHelper,M=F.FeatureFlag,L=F.FeatureAvailibilityService;angular.module("XT.Popup",["ngRoute","ngStorage","ngAnimate","XT.Popup.Shell"]).config(["$routeProvider","$compileProvider","$locationProvider",function(e,t,o){t.aHrefSanitizationWhitelist(/^\s*(https?|chrome-extension|filesystem|blob|moz-extension|ms-browser-extension):/),t.imgSrcSanitizationWhitelist(/^\s*(https?|chrome-extension|filesystem|blob|moz-extension|ms-browser-extension):/),o.hashPrefix(""),A(e)}]).run(["$rootScope","$location","$localStorage","$route","$templateCache","UtilityService",function(e,t,n,r,i,a){D(i),a.isOfflineMode()||(x(n)?I(n,!1):I(n,!0)),
w(n,a),e.$on("$routeChangeSuccess",function(e,o,r){var i=t.path()?t.path():"//";i&&(n.lastUrl=i,n.$apply())});var s=n.lastUrl;o.isStringNullOrEmpty(s)&&(s="/SignIn"),t.url(s),r.reload()}]);var R={shell:"templateCache_shell.html",toolbar:"templateCache_toolbar.html",about:"templateCache_about.html",mobileXt:"templateCache_mobileXt.html",timeline:"templateCache_timeline.html",noteform:"templateCache_noteform.html",signIn:"templateCache_signIn.html",bugform:"templateCache_bugform.html",bugform2:"templateCache_bugform2.html",bugsearchresult:"templateCache_bugsearchresult.html",taskform:"templateCache_taskform.html",testcaseform:"templateCache_testcaseform.html",traceability:"templateCache_traceability.html",notification:"temaplateCache_notificiation.html",license:"temaplateCache_license.html",feedbackResponseForm:"templateCache_feedbackResponse.html",feedbackRequests:"templateCache_feedbackRequests.html",feedbackRequestDetail:"templateCache_feedbackRequestDetail.html",forceStopSession:"templateCache_forceStopSession.html"}}),define("TaskForm/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("TaskForm/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("TaskForm/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("TaskForm/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("TaskForm/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("TaskForm/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",
t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("TaskForm/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("TaskForm/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("TaskForm/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("TaskForm/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("TaskForm/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("TaskForm/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("TaskForm/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("TaskForm/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("TaskForm/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>';
}),define("TaskForm/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("TaskForm/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("TaskForm/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);
var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("TaskForm/../../Service/WorkItemHelper",["require","exports","../Common/ExtensionStorage","../Common/Constants","../Model/Model"],function(e,t,o,n,r){var i=function(){function e(){}return e.populateWorkItemMetaDataCache=function(e,t){var r=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);r||(r={}),r[e]={category:t,color:n.WorkItemConstants.defaultWorkItemColor},o.LocalStorageService.store(o.workItemTypeMetaDataCache,r);var i=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);i||(i={}),i[t]={defaultWorkItemType:e},o.LocalStorageService.store(o.workItemCategoryMetaDataCache,i)},e.getWorkItemColor=function(e){if(this.isOffline()||!e)return n.WorkItemConstants.defaultWorkItemColor;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].color},e.getDefaultWorkItemType=function(e){if(this.isOffline())return r.WorkItemType.bug;var t=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);return t[e].defaultWorkItemType},e.getCategory=function(e){if(this.isOffline())return r.WorkItemCategories.BugCategory;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].category},e.isOffline=function(){var e=o.LocalStorageService.retrieve(o.activeSettingsKey);return!e||e.offlineMode?!0:!1},e._removeDirtyWorkItemFromLocalStorage=function(e){this.getCategory(e.type)===r.WorkItemCategories.BugCategory?this._removeDirtyBugFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TaskCategory?this._removeDirtyTaskFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TestCaseCategory?this._removeDirtyTestCaseFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.FeedbackResponseCategory&&this._removeDirtyFeedbackResponseFromLocalStorage()},e._removeDirtyBugFromLocalStorage=function(){o.LocalStorageService.remove(o.bugFormDirtyKey),o.LocalStorageService.remove(o.bugTitleDirtyKey),o.LocalStorageService.remove(o.unsavedBugTitleKey),o.LocalStorageService.remove(o.searchResultsForSimilarBugsKey),o.LocalStorageService.remove(o.selectedBugForUpdateKey),o.LocalStorageService.remove(o.includeImageActionLogsInBugKey)},e._removeDirtyTaskFromLocalStorage=function(){o.LocalStorageService.remove(o.taskFormDirtyKey),o.LocalStorageService.remove(o.taskTitleDirtyKey),o.LocalStorageService.remove(o.unsavedTaskDescriptionKey),o.LocalStorageService.remove(o.unsavedTaskTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInTaskKey)},e._removeDirtyFeedbackResponseFromLocalStorage=function(){o.LocalStorageService.remove(o.feedbackResponseFormDirtyKey),o.LocalStorageService.remove(o.feedbackResponseTitleDirtyKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseDescriptionKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInFeedbackResponseKey)},e._removeDirtyTestCaseFromLocalStorage=function(){o.LocalStorageService.remove(o.testCaseFormDirtyKey),o.LocalStorageService.remove(o.unsavedTestCaseStepsKey),o.LocalStorageService.remove(o.unsavedTestCaseTitleKey)},e}();t.WorkItemHelper=i}),define("TaskForm/TaskForm.Controller",["require","exports","../../Model/Model","../../Messaging/ChromeMessaging","../../Messaging/Messaging","../../Model/ModelHelper","../../Common/FeatureAvailabiliy","../../Service/WorkItemHelper","../../Common/Constants"],function(e,t,o,n,r,i,a,s,c){var l=s.WorkItemHelper,d=a.FeatureFlag,u=a.FeatureAvailibilityService,g=function(){function e(){}return e.unsavedTitleKey="unsavedTitle",e.unsavedDescriptionKey="unsavedDescription",e.formDirtyKey="formDirty",e.titleDirtyKey="titleDirty",e.includeImageActionLogsKey="includeImageActionLogs",e.includePerfDataKey="includePerfData",e}();t.LocalStorageKeys=g;var p=function(){function e(e,t,o,n,r,i,a,s){this.witService=e,this.reproSteps=t,this.$localStorage=o,this.$scope=n,this.$location=r,this.$timeout=i,this.$rootScope=a,this.utilityService=s,this.checkboxTooltipText="You can disable it from Options page.",this.screenRecordingWarning="Ongoing screen recording is not included in this task. Stop the recording to include it. You can override this from Options page.",this.initializeWorkItemTelemetryData(),this.initializeLocalStorageKeyMap(),this.initializeLocalStorage(),this.setImageActionLogInclusionFlag(),this.setActiveVideoInclusionFlag(),this.setPerfDataInclusionFlag(),this.initializeScope(),this.doRefresh=!0,this.uninitializeMessaging(),this.initializeMessagingForCustomizedTask(),this.initializeMessagingForErrorChange(),this.initializeMessagingForAutoRefresh(),this.initializeWatermarkText(u.isFeatureEnabled(d.ActionLog),u.isFeatureEnabled(d.PerfData)),this.utilityService.setTabindexOnToolbarItems("item-workitem.showing")}return e.prototype.initializeWorkItemTelemetryData=function(){this.witService.initializeWorkItemTelemetryData(l.getDefaultWorkItemType(o.WorkItemCategories.TaskCategory))},e.prototype.setImageActionLogInclusionFlag=function(){if(this.utilityService.isOfflineMode()||!u.isFeatureEnabled(d.ActionLog))this.includeImageActionLogsInTask=!1;else{var e=this.getLocalStorageField(this.$localStorageKeyMap[g.includeImageActionLogsKey]);this.includeImageActionLogsInTask=void 0!==e?e:!0}},e.prototype.setActiveVideoInclusionFlag=function(){this.utilityService.isOfflineMode()||!u.isFeatureEnabled(d.OngoingRecording)?(this.includeActiveVideoInWorkitem=!1,this.showActiveVideoFilter()?(i.ErrorHelper.clearLastError(o.ToolbarType.Task,this.$rootScope),i.ErrorHelper.saveError(this.screenRecordingWarning,o.ToolbarType.Task,2,!0,!1,this.$rootScope)):i.ErrorHelper.clearLastError(o.ToolbarType.Task,this.$rootScope)):this.includeActiveVideoInWorkitem=!0},e.prototype.setPerfDataInclusionFlag=function(){if(this.utilityService.isOfflineMode()||!u.isFeatureEnabled(d.PerfData))this.includePerfDataInTask=!1;else{var e=this.getLocalStorageField(this.$localStorageKeyMap[g.includePerfDataKey]);this.includePerfDataInTask=void 0!==e?e:!0}},e.prototype.keydown=function(e){e&&e.ctrlKey&&e.keyCode===c.KeyCodeConstants.sKeyCode&&this.createTask()},e.prototype.createTask=function(){var e=this;this.includeActiveVideoInWorkitem&&this.showActiveVideoFilter()?this.stopRecordingAndCreateWorkitem(function(){e.createDirtyTask()}):this.createDirtyTask()},e.prototype.createDirtyTask=function(){var e=this;i.ErrorHelper.clearAllErrors(o.ToolbarType.Task,this.$rootScope);var t=this.$scope.title;if(this.doRefresh){var n=this.$scope.description,r={title:t,description:n,type:l.getDefaultWorkItemType(o.WorkItemCategories.TaskCategory)};this.witService.createTraceabilityLink(r),this.witService.beginCreateWorkItem(r,function(t){e.$localStorage.$sync(),e.closeForm()})}else{var n=this.$scope.requiredDescription,r={title:t,description:n,type:l.getDefaultWorkItemType(o.WorkItemCategories.TaskCategory)};this.witService.createTraceabilityLink(r),this.witService.beginCreateWorkItem(r,function(t){e.$localStorage.$sync(),e.closeForm()}),this.doRefresh=!0}},e.prototype.stopRecordingAndCreateWorkitem=function(e){var t=this;n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.StopVideoCapture,{},function(){t.$localStorage.currentVideoCaptureId=-1,t.$localStorage.elapsedVideoTime=null,t.$localStorage.$apply(),t.includeActiveVideoInForm(function(){e()})})},e.prototype.initializeWatermarkText=function(e,t){this.$scope.actionLogFlag=e,this.$scope.perfDataFlag=t,this.$scope.actionLogFlag||this.$scope.perfDataFlag?this.$scope.actionLogFlag?this.$scope.perfDataFlag||(this.waterMarkText="Page load data is currently disabled. Enable it from "):this.waterMarkText="Image action log is currently disabled. Enable it from ":this.waterMarkText="Image action log and page load data are currently disabled. Enable them from ",document.getElementById("watermark")&&(this.$scope.actionLogFlag&&this.$scope.perfDataFlag?this.$scope.waterMarkStyle="hidden":this.$scope.waterMarkStyle="visible",this.utilityService.isOfflineMode()&&(this.$scope.waterMarkStyle="visible",this.waterMarkText="Image action log and page load data collection options are available in Connected mode only"))},e.prototype.clearLocalStorage=function(){this.setLocalStorageField(this.$localStorageKeyMap[g.formDirtyKey],!1),this.setLocalStorageField(this.$localStorageKeyMap[g.titleDirtyKey],!1),this.setLocalStorageField(this.$localStorageKeyMap[g.unsavedDescriptionKey],""),this.setLocalStorageField(this.$localStorageKeyMap[g.unsavedTitleKey],""),delete this.$localStorage[this.$localStorageKeyMap[g.includeImageActionLogsKey]]},e.prototype.showImageActionLogFilter=function(){return this.isOffline()?!1:u.isFeatureEnabled(d.ActionLog)?!0:!1},e.prototype.showActiveVideoFilter=function(){return-1!==this.$localStorage.currentVideoCaptureId&&this.$localStorage.currentVideoCaptureId?!0:!1},e.prototype.showPerfDataFilter=function(){return this.utilityService.isOfflineMode()?!1:u.isFeatureEnabled(d.PerfData)?!0:!1},e.prototype.isOffline=function(){return!this.$localStorage.activeSettings||this.$localStorage.activeSettings.offlineMode?!0:!1},e.prototype.filterActionLogs=function(){this.includeImageActionLogsInTask?this.setLocalStorageField(this.$localStorageKeyMap[g.includeImageActionLogsKey],!0):this.setLocalStorageField(this.$localStorageKeyMap[g.includeImageActionLogsKey],!1),this.loadDefaults(this.includeImageActionLogsInTask,this.includePerfDataInTask)},e.prototype.filterPerfData=function(){this.includePerfDataInTask?this.setLocalStorageField(this.$localStorageKeyMap[g.includePerfDataKey],!0):this.setLocalStorageField(this.$localStorageKeyMap[g.includePerfDataKey],!1),this.loadDefaults(this.includeImageActionLogsInTask,this.includePerfDataInTask)},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$rootScope.actionInProgress=!1,$(".toolbar-item.selected a").focus(),e.$location.url("/")},50)},e.prototype.initializeLocalStorageKeyMap=function(){this.$localStorageKeyMap={},this.$localStorageKeyMap[g.unsavedTitleKey]="unsavedTaskTitle",this.$localStorageKeyMap[g.unsavedDescriptionKey]="unsavedTaskDescription",this.$localStorageKeyMap[g.formDirtyKey]="taskFormDirty",this.$localStorageKeyMap[g.titleDirtyKey]="taskTitleDirty",this.$localStorageKeyMap[g.includeImageActionLogsKey]="includeImageActionLogsInTask",this.$localStorageKeyMap[g.includePerfDataKey]="includePerfDataInTask"},e.prototype.initializeMessagingForErrorChange=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onErrorChanged(t)},r.NotificationType.ActivityErrorChanged),this.unsubscribeErrorEvent=this.$rootScope.$on(r.NotificationType.ActivityErrorChanged.toString(),function(t,o){e.onErrorChanged(o)})},e.prototype.initializeMessagingForAutoRefresh=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(){e.itemSelected()&&(e.initializeLocalStorage(),e.initializeScope())},r.NotificationType.StartAutoRefresh)},e.prototype.onErrorChanged=function(e){e&&e.toolbarType===o.ToolbarType.Task&&e.errorMessage&&(this.$rootScope.actionInProgress=!1)},e.prototype.initializeMessagingForCustomizedTask=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(t,o){e.closeForm()},r.NotificationType.CloseWorkItemDialog)},e.prototype.initializeLocalStorage=function(){var e=this.$localStorageKeyMap[g.unsavedTitleKey],t=this.$localStorageKeyMap[g.unsavedDescriptionKey],o=this.$localStorageKeyMap[g.formDirtyKey],n=this.$localStorageKeyMap[g.titleDirtyKey],r={};r[e]="",r[t]="",r[o]=!1,r[n]=!1,this.$localStorage.$default(r)},e.prototype.setLocalStorageField=function(e,t){e&&""!==e&&(this.$localStorage[e]=t)},e.prototype.getLocalStorageField=function(e){return e&&""!==e?this.$localStorage[e]:void 0},e.prototype.initializeScope=function(){var e=this;this.includeImageActionLogsInTask?this.loadDefaults(!0,this.includePerfDataInTask):this.loadDefaults(!1,this.includePerfDataInTask),this.$scope.delegateForScrollDownForm=function(){return e.isScrollDownForm()}},e.prototype.loadDefaults=function(e,t){var o=this;this.$scope.isDirty=this.getLocalStorageField(this.$localStorageKeyMap[g.formDirtyKey]),this.$scope.isTitleDirty=this.getLocalStorageField(this.$localStorageKeyMap[g.titleDirtyKey]),this.$scope.isDirty?(this.$scope.title=this.getLocalStorageField(this.$localStorageKeyMap[g.unsavedTitleKey]),this.$scope.description=this.getLocalStorageField(this.$localStorageKeyMap[g.unsavedDescriptionKey])||"",this.addWatchers()):(this.reproSteps.getReproSteps(e,t).then(function(e){o.setLocalStorageField(o.$localStorageKeyMap[g.unsavedDescriptionKey],e),o.$scope.description=e||"",o.$scope.$apply(),o.$localStorage.$apply(),o.addWatchers()})["catch"](function(){o.addWatchers()}),this.$scope.title=this.getLocalStorageField(this.$localStorageKeyMap[g.unsavedTitleKey]))},e.prototype.includeActiveVideoInForm=function(e){var t=this;this.$scope.title=this.getLocalStorageField(this.$localStorageKeyMap[g.unsavedTitleKey]),this.reproSteps.getLastObservation(this.includeImageActionLogsInTask).then(function(o){t.$scope.requiredDescription=t.getLocalStorageField(t.$localStorageKeyMap[g.unsavedDescriptionKey])+o,t.addWatchers(),t.$scope.$apply(),null!=e&&(t.doRefresh=!1,e())})["catch"](function(){t.addWatchers()})},e.prototype.addWatchers=function(){var e=this;this.$scope.$watch("title",function(){e.$scope.title!==e.getLocalStorageField(e.$localStorageKeyMap[g.unsavedTitleKey])&&(e.$scope.isTitleDirty=!0,e.setLocalStorageField(e.$localStorageKeyMap[g.titleDirtyKey],!0),e.setLocalStorageField(e.$localStorageKeyMap[g.unsavedTitleKey],e.$scope.title))}),this.$scope.$watch("description",function(){angular.element("<div>"+e.$scope.description.trim()+"</div>").html()!==angular.element("<div>"+e.getLocalStorageField(e.$localStorageKeyMap[g.unsavedDescriptionKey]).trim()+"</div>").html()&&(e.$scope.isDirty=!0,e.witService.workItemTelemetryData.hasUpdated=!0,e.setLocalStorageField(e.$localStorageKeyMap[g.formDirtyKey],!0),e.setLocalStorageField(e.$localStorageKeyMap[g.unsavedDescriptionKey],e.$scope.description))})},e.prototype.itemSelected=function(){var e="#"+this.$location.path().toLowerCase();return"#/taskform"===e?!0:!1},e.prototype.uninitializeMessaging=function(){var e=this;this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll(),e.unsubscribeErrorEvent&&e.unsubscribeErrorEvent()})},e.prototype.isScrollDownForm=function(){return this.getLocalStorageField(this.$localStorageKeyMap[g.formDirtyKey])?!1:!0},e.$inject=["WorkItemService","ReproSteps","$localStorage","$scope","$location","$timeout","$rootScope","UtilityService"],e}();t.TaskFormController=p}),define("TaskForm/TaskForm.Module",["require","exports","../TaskForm/TaskForm.Controller","../CommonControls/AutoFocus.Directive","../BugForm/ReproSteps/ReproSteps.Service","../BugForm/ReproSteps/ActionLog.Service","../BugForm/ReproSteps/WorkItemObservations.Service"],function(e,t,o,n,r,i,a){angular.module("XT.Popup.TaskForm",["ngStorage","XT.Popup.CommonControls","XT.Popup.Common"]).controller("TaskFormController",o.TaskFormController).directive("ngautofocus",["$document",n.autoFocus]).service("ReproSteps",r.ReproSteps).service("ActionLogService",i.ActionLogService).service("WorkItemObservationsService",a.WorkItemObservations)}),define("TestCaseForm/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("TestCaseForm/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("TestCaseForm/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",
e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("TestCaseForm/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("TestCaseForm/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("TestCaseForm/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("TestCaseForm/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("TestCaseForm/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("TestCaseForm/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("TestCaseForm/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("TestCaseForm/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("TestCaseForm/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("TestCaseForm/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("TestCaseForm/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("TestCaseForm/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',
t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("TestCaseForm/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("TestCaseForm/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,
r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("TestCaseForm/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("TestCaseForm/../../Service/WorkItemHelper",["require","exports","../Common/ExtensionStorage","../Common/Constants","../Model/Model"],function(e,t,o,n,r){var i=function(){function e(){}return e.populateWorkItemMetaDataCache=function(e,t){var r=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);r||(r={}),r[e]={category:t,color:n.WorkItemConstants.defaultWorkItemColor},o.LocalStorageService.store(o.workItemTypeMetaDataCache,r);var i=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);i||(i={}),i[t]={defaultWorkItemType:e},o.LocalStorageService.store(o.workItemCategoryMetaDataCache,i)},e.getWorkItemColor=function(e){if(this.isOffline()||!e)return n.WorkItemConstants.defaultWorkItemColor;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].color},e.getDefaultWorkItemType=function(e){if(this.isOffline())return r.WorkItemType.bug;var t=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);return t[e].defaultWorkItemType},e.getCategory=function(e){if(this.isOffline())return r.WorkItemCategories.BugCategory;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].category},e.isOffline=function(){var e=o.LocalStorageService.retrieve(o.activeSettingsKey);return!e||e.offlineMode?!0:!1},e._removeDirtyWorkItemFromLocalStorage=function(e){this.getCategory(e.type)===r.WorkItemCategories.BugCategory?this._removeDirtyBugFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TaskCategory?this._removeDirtyTaskFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TestCaseCategory?this._removeDirtyTestCaseFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.FeedbackResponseCategory&&this._removeDirtyFeedbackResponseFromLocalStorage()},e._removeDirtyBugFromLocalStorage=function(){o.LocalStorageService.remove(o.bugFormDirtyKey),o.LocalStorageService.remove(o.bugTitleDirtyKey),o.LocalStorageService.remove(o.unsavedBugTitleKey),o.LocalStorageService.remove(o.searchResultsForSimilarBugsKey),o.LocalStorageService.remove(o.selectedBugForUpdateKey),o.LocalStorageService.remove(o.includeImageActionLogsInBugKey)},e._removeDirtyTaskFromLocalStorage=function(){o.LocalStorageService.remove(o.taskFormDirtyKey),o.LocalStorageService.remove(o.taskTitleDirtyKey),o.LocalStorageService.remove(o.unsavedTaskDescriptionKey),o.LocalStorageService.remove(o.unsavedTaskTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInTaskKey)},e._removeDirtyFeedbackResponseFromLocalStorage=function(){o.LocalStorageService.remove(o.feedbackResponseFormDirtyKey),o.LocalStorageService.remove(o.feedbackResponseTitleDirtyKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseDescriptionKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInFeedbackResponseKey)},e._removeDirtyTestCaseFromLocalStorage=function(){o.LocalStorageService.remove(o.testCaseFormDirtyKey),o.LocalStorageService.remove(o.unsavedTestCaseStepsKey),o.LocalStorageService.remove(o.unsavedTestCaseTitleKey)},e}();t.WorkItemHelper=i}),define("TestCaseForm/TestCaseForm.Controller",["require","exports","../../Model/Model","../../Messaging/ChromeMessaging","../../Messaging/Messaging","../../Model/ModelHelper","../../Service/WorkItemHelper","../../Common/Constants"],function(e,t,o,n,r,i,a,s){var c=a.WorkItemHelper,l=function(){function e(){}return e.attachment="Attachment",e.action="Action",e.expectedResult="Expected",e.timeStamp="timeStamp",e}();t.TestCaseGridConstants=l;var d=function(){function e(e,t,n,r,i,a,s,l,d){var u=this;this.$sce=e,this.witService=t,this.workItemObservationsService=n,this.$localStorage=r,this.$scope=i,this.$location=a,this.$timeout=s,this.$rootScope=l,this.utilityService=d,this.onSelectionChange=function(e){var t=u.fetchUnsavedTestSteps();for(var o in e){var n=e[o].entity.timeStamp,r=e[o].isSelected;t[n]?t[n].isSelected=r:t[n]={isSelected:r}}u.$localStorage.unsavedTestCaseSteps=t},this.testCaseFormTelemetry={actionsEdited:0,expectedResultsEdited:0,stepsRemoved:0},this.uninitializeMessaging(),this.initializeMessagingForErrorChange(),t.initializeWorkItemTelemetryData(c.getDefaultWorkItemType(o.WorkItemCategories.TestCaseCategory)),this.initializeLocalStorage(),this.$scope.isDirty=this.$localStorage.testCaseFormDirty,this.$scope.isDirty?this.$scope.title=this.$localStorage.unsavedTestCaseTitle:(this.$localStorage.unsavedTestCaseTitle="",this.$scope.title=""),this.addWatchers(),this.fillGridOptions(),this.loadGridWithImageActionLog(),this.utilityService.setTabindexOnToolbarItems("item-workitem.showing")}return e.prototype.keydown=function(e){e&&e.ctrlKey&&e.keyCode===s.KeyCodeConstants.sKeyCode&&this.createTestCase()},e.prototype.createTestCase=function(){var e=this;i.ErrorHelper.clearAllErrors(o.ToolbarType.TestCase,this.$rootScope);var t=this.loadTestCaseFromGrid(),n=t;this.updateTestCaseTelemetryInfo(),n.testCaseFormTemeletryInfo=this.testCaseFormTelemetry,n.workItemTelemetryInfo=this.witService.workItemTelemetryData,this.witService.beginCreateTestCase(n,function(t){e.$localStorage.$sync(),e.closeForm()})},e.prototype.loadTestCaseFromGrid=function(){var e={title:this.$scope.title};this.witService.createTraceabilityLink(e),e.type=c.getDefaultWorkItemType(o.WorkItemCategories.TestCaseCategory);var t=[],n=this.$scope.gridOptions,r=this.$scope.gridApi.grid.rows;for(var i in n.data)if(r[i].isSelected){var a={action:"",expected:""};if(n.data[i][l.action]&&(a.action=this.sanitizeStepData(n.data[i][l.action])),n.data[i][l.expectedResult]&&(a.expected=this.sanitizeStepData(n.data[i][l.expectedResult])),n.data[i][l.attachment]){var s=angular.element(n.data[i][l.attachment].$$unwrapTrustedValue());a.attachmentLocalUri=s.find("img").attr("src"),a.attachmentName=s.find("img").attr("name")}t.push(a)}return e.testSteps=t,e},e.prototype.fillGridOptions=function(){var e=this;this.$scope.gridOptions={enableSorting:!1,enableSelectAll:!0,enableColumnMenus:!1,enableColumnResizing:!0,enableRowSelection:!0,showSelectionCheckbox:!0,selectWithCheckboxOnly:!0,rowHeight:75,columnDefs:[{field:l.attachment,width:"125",enableCellEdit:!1,displayName:" Attachment",cellTemplate:'<div class="ui-grid-cell-contents" style="margin-left:-5px; margin-top:-2px"  ng-bind-html="COL_FIELD"></div>'},{field:l.action,enableCellEdit:!0,width:"135",editableCellTemplate:'<textarea class="custom-text-editor"; ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></textarea>',cellEditableCondition:function(e){return e.row.isSelected===!0},cellTemplate:'<div  class= "custom-text-editor-container" title= "{{grid.getCellValue(row, col)}}" > {{grid.getCellValue(row, col) }}</div>'},{field:l.expectedResult,width:"141",displayName:"Expected result",enableCellEdit:!0,cellEditableCondition:function(e){return e.row.isSelected===!0},editableCellTemplate:'<textarea class="custom-text-editor"; ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></textarea>',cellTemplate:'<div class= "custom-text-editor-container" title= "{{grid.getCellValue(row, col)}}" > {{grid.getCellValue(row, col) }}</div>'}],data:[],onRegisterApi:function(t){e.$scope.gridApi=t,t.edit.on.afterCellEdit(e.$scope,function(t,o,n,r){n!==r&&(o.field===l.action?e.changeActionInLocalStorage(t.timeStamp,n):o.field===l.expectedResult&&e.changeExpectedResultInLocalStorage(t.timeStamp,n))}),t.selection.on.rowSelectionChanged(e.$scope,function(t){var o=[];o.push(t),e.onSelectionChange(o)}),t.selection.on.rowSelectionChangedBatch(e.$scope,function(t){e.onSelectionChange(t)})}}},e.prototype.clearLocalStorage=function(){this.$localStorage.testCaseFormDirty=!1,delete this.$localStorage.unsavedTestCaseSteps,this.$localStorage.unsavedTestCaseTitle="",this.$localStorage.$apply()},e.prototype.htmlEncode=function(e){if(e){var t=document.createElement("div").appendChild(document.createTextNode(e)).parentNode;return t.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return""},e.prototype.sanitizeStepData=function(e){return e?this.htmlEncode(e).replace(/&nbsp;/g,"&amp;nbsp;"):""},e.prototype.loadGridWithImageActionLog=function(){var e=this,t=this.fetchUnsavedTestSteps();this.workItemObservationsService.getLatestActionLogObservations().then(function(o){for(var n=1;o.length>0;){var r=o.pop(),i=e.$sce.trustAsHtml(r.getThumbnail()),a=angular.element("<div>"+r.getText()+"</div>").text();if(0===a.indexOf(s.ActionLogConstants.inputTextActionLogPrefix)){var c=angular.element("<div>"+r.getText()+"</div>"),l=c.find("i");a=s.ActionLogConstants.inputTextActionLogPrefix+" '"+l.attr("title")+"'"}var d=!0,u="";t&&t[r.timeStamp.toString()]&&(d=t[r.timeStamp.toString()].isSelected,u=t[r.timeStamp.toString()].expectedResult||"",a=void 0===t[r.timeStamp.toString()].action?a:t[r.timeStamp.toString()].action),e.$scope.gridOptions.data.push({Attachment:i,Action:a,Expected:u,timeStamp:r.timeStamp}),d&&(e.$scope.gridApi.grid.modifyRows(e.$scope.gridOptions.data),e.$scope.gridApi.selection.selectRow(e.$scope.gridOptions.data[n-1])),n+=1}e.$scope.$apply()})},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$rootScope.actionInProgress=!1,$(".toolbar-item.selected a").focus(),e.$location.url("/")},50)},e.prototype.uninitializeMessaging=function(){var e=this;this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll(),e.unsubscribeErrorEvent&&e.unsubscribeErrorEvent()})},e.prototype.initializeMessagingForErrorChange=function(){var e=this;n.MessagingFactory.getSubscriptionService().subscribe(function(t){e.onErrorChanged(t)},r.NotificationType.ActivityErrorChanged),this.unsubscribeErrorEvent=this.$rootScope.$on(r.NotificationType.ActivityErrorChanged.toString(),function(t,o){e.onErrorChanged(o)})},e.prototype.onErrorChanged=function(e){e&&e.toolbarType===o.ToolbarType.Task&&e.errorMessage&&(this.$rootScope.actionInProgress=!1)},e.prototype.initializeLocalStorage=function(){this.$localStorage.$default({unsavedTestCaseTitle:"",testCaseFormDirty:!1})},e.prototype.changeExpectedResultInLocalStorage=function(e,t){var o=this.fetchUnsavedTestSteps();o[e]?o[e].expectedResult=t:o[e]={isSelected:!0,expectedResult:t},this.$localStorage.unsavedTestCaseSteps=o},e.prototype.changeActionInLocalStorage=function(e,t){var o=this.fetchUnsavedTestSteps();o[e]?o[e].action=t:o[e]={isSelected:!0,action:t},this.$localStorage.unsavedTestCaseSteps=o},e.prototype.addWatchers=function(){var e=this;this.$scope.$watch("title",function(){e.$scope.title!==e.$localStorage.unsavedTestCaseTitle&&(e.$scope.isDirty=!0,e.$localStorage.testCaseFormDirty=!0,e.$localStorage.unsavedTestCaseTitle=e.$scope.title)})},e.prototype.fetchUnsavedTestSteps=function(){var e={};return this.$localStorage.unsavedTestCaseSteps&&(e=this.$localStorage.unsavedTestCaseSteps),e},e.prototype.updateTestCaseTelemetryInfo=function(){var e=this.fetchUnsavedTestSteps(),t=this.$scope.gridOptions.data;for(var o in t){var n=t[o][l.timeStamp];e[n]&&(e[n].isSelected||this.testCaseFormTelemetry.stepsRemoved++,e[n].action&&this.testCaseFormTelemetry.actionsEdited++,e[n].expectedResult&&this.testCaseFormTelemetry.expectedResultsEdited++)}},e.$inject=["$sce","WorkItemService","WorkItemObservationsService","$localStorage","$scope","$location","$timeout","$rootScope","UtilityService"],e}();t.TestCaseFormController=d}),define("TestCaseForm/TestCaseForm.Module",["require","exports","../CommonControls/AutoFocus.Directive","../BugForm/ReproSteps/ActionLog.Service","../TestCaseForm/TestCaseForm.Controller","../BugForm/ReproSteps/WorkItemObservations.Service"],function(e,t,o,n,r,i){angular.module("XT.Popup.TestCaseForm",["ngStorage","ui.grid","ui.grid.edit","ui.grid.resizeColumns","ui.grid.cellNav","XT.Popup.CommonControls","XT.Popup.Common"]).controller("TestCaseFormController",r.TestCaseFormController).directive("ngautofocus",["$document",o.autoFocus]).service("ActionLogService",n.ActionLogService).service("WorkItemObservationsService",i.WorkItemObservations)}),define("Notification/Notification.Controller",["require","exports"],function(e,t){var o=function(){function e(e,t,o,n,r){this.$scope=e,this.$location=t,this.$localStorage=o,this.$timeout=n,this.utilityService=r}return e.prototype.dismissNotification=function(){this.$localStorage.isNotificationDismissed=!0,this.$localStorage.lastUrl=this.$localStorage.lastUrlBeforeNotification?this.$localStorage.lastUrlBeforeNotification:"/",this.$localStorage.$apply(),this.closeForm()},e.prototype.closeForm=function(){var e=this;this.$timeout(function(){e.$location.url(e.$localStorage.lastUrl)},50)},e.prototype.launchOptions=function(){this.utilityService.launchOptionsPage()},e.$inject=["$scope","$location","$localStorage","$timeout","UtilityService"],e}();t.NotificationController=o}),define("Notification/Notification.Module",["require","exports","../Notification/Notification.Controller"],function(e,t,o){angular.module("XT.Popup.Notification",["XT.Popup.CommonControls"]).controller("NotificationController",o.NotificationController)}),define("FeedbackResponseForm/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",
e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m}),define("FeedbackResponseForm/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("FeedbackResponseForm/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("FeedbackResponseForm/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackResponseForm/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackResponseForm/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackResponseForm/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("FeedbackResponseForm/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("FeedbackResponseForm/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("FeedbackResponseForm/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){
return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("FeedbackResponseForm/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("FeedbackResponseForm/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("FeedbackResponseForm/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("FeedbackResponseForm/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("FeedbackResponseForm/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>'}),define("FeedbackResponseForm/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("FeedbackResponseForm/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',
l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("FeedbackResponseForm/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("FeedbackResponseForm/../../Service/WorkItemHelper",["require","exports","../Common/ExtensionStorage","../Common/Constants","../Model/Model"],function(e,t,o,n,r){var i=function(){function e(){}return e.populateWorkItemMetaDataCache=function(e,t){var r=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);r||(r={}),r[e]={category:t,color:n.WorkItemConstants.defaultWorkItemColor},o.LocalStorageService.store(o.workItemTypeMetaDataCache,r);var i=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);i||(i={}),i[t]={defaultWorkItemType:e},o.LocalStorageService.store(o.workItemCategoryMetaDataCache,i)},e.getWorkItemColor=function(e){if(this.isOffline()||!e)return n.WorkItemConstants.defaultWorkItemColor;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].color},e.getDefaultWorkItemType=function(e){if(this.isOffline())return r.WorkItemType.bug;var t=o.LocalStorageService.retrieve(o.workItemCategoryMetaDataCache);return t[e].defaultWorkItemType},e.getCategory=function(e){if(this.isOffline())return r.WorkItemCategories.BugCategory;var t=o.LocalStorageService.retrieve(o.workItemTypeMetaDataCache);return t[e].category},e.isOffline=function(){var e=o.LocalStorageService.retrieve(o.activeSettingsKey);return!e||e.offlineMode?!0:!1},e._removeDirtyWorkItemFromLocalStorage=function(e){this.getCategory(e.type)===r.WorkItemCategories.BugCategory?this._removeDirtyBugFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TaskCategory?this._removeDirtyTaskFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.TestCaseCategory?this._removeDirtyTestCaseFromLocalStorage():this.getCategory(e.type)===r.WorkItemCategories.FeedbackResponseCategory&&this._removeDirtyFeedbackResponseFromLocalStorage()},e._removeDirtyBugFromLocalStorage=function(){o.LocalStorageService.remove(o.bugFormDirtyKey),o.LocalStorageService.remove(o.bugTitleDirtyKey),o.LocalStorageService.remove(o.unsavedBugTitleKey),o.LocalStorageService.remove(o.searchResultsForSimilarBugsKey),o.LocalStorageService.remove(o.selectedBugForUpdateKey),o.LocalStorageService.remove(o.includeImageActionLogsInBugKey)},e._removeDirtyTaskFromLocalStorage=function(){o.LocalStorageService.remove(o.taskFormDirtyKey),o.LocalStorageService.remove(o.taskTitleDirtyKey),o.LocalStorageService.remove(o.unsavedTaskDescriptionKey),o.LocalStorageService.remove(o.unsavedTaskTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInTaskKey)},e._removeDirtyFeedbackResponseFromLocalStorage=function(){o.LocalStorageService.remove(o.feedbackResponseFormDirtyKey),o.LocalStorageService.remove(o.feedbackResponseTitleDirtyKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseDescriptionKey),o.LocalStorageService.remove(o.unsavedFeedbackResponseTitleKey),o.LocalStorageService.remove(o.includeImageActionLogsInFeedbackResponseKey)},e._removeDirtyTestCaseFromLocalStorage=function(){o.LocalStorageService.remove(o.testCaseFormDirtyKey),o.LocalStorageService.remove(o.unsavedTestCaseStepsKey),o.LocalStorageService.remove(o.unsavedTestCaseTitleKey)},e}();t.WorkItemHelper=i});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackResponseForm/FeedbackResponseForm.Controller",["require","exports","../../Model/ModelHelper","../TaskForm/TaskForm.Controller","../../Model/Model","../../Service/WorkItemHelper","../../Common/ExtensionStorage"],function(e,t,o,n,r,i,a){var s=i.WorkItemHelper,c=function(e){function t(t,o,n,r,i,a,s,c){e.call(this,t,o,n,r,i,a,s,c),this.starRatingMaxValue=5,r.starRatingValue=this._getStarRatingFromLocalStorage(),r.isStarRatingDirty=this._isStarRatingDirty(),this.starsChangeOnHover=!1,this._addRatingWatch(),c.setTabindexOnToolbarItems("item-workitem.showing")}return __extends(t,e),t.prototype.initializeWorkItemTelemetryData=function(){this.witService.initializeWorkItemTelemetryData(s.getDefaultWorkItemType(r.WorkItemCategories.FeedbackResponseCategory))},t.prototype.initializeLocalStorageKeyMap=function(){this.$localStorageKeyMap={},this.$localStorageKeyMap[n.LocalStorageKeys.unsavedTitleKey]=a.unsavedFeedbackResponseTitleKey,this.$localStorageKeyMap[n.LocalStorageKeys.unsavedDescriptionKey]=a.unsavedFeedbackResponseDescriptionKey,this.$localStorageKeyMap[n.LocalStorageKeys.formDirtyKey]=a.feedbackResponseFormDirtyKey,this.$localStorageKeyMap[n.LocalStorageKeys.titleDirtyKey]=a.feedbackResponseTitleDirtyKey,this.$localStorageKeyMap[n.LocalStorageKeys.includeImageActionLogsKey]=a.includeImageActionLogsInFeedbackResponseKey,this.$localStorageKeyMap[n.LocalStorageKeys.includePerfDataKey]=a.includePerfDataInFeedbackResponseKey},t.prototype.onErrorChanged=function(e){e&&e.toolbarType===r.ToolbarType.FeedbackResponse&&e.errorMessage&&(this.$rootScope.actionInProgress=!1)},t.prototype.createFeedbackResponse=function(){
var e=this;this.includeActiveVideoInWorkitem&&this.showActiveVideoFilter()?this.stopRecordingAndCreateWorkitem(function(){e._createFeedbackResponseWorkItem()}):this._createFeedbackResponseWorkItem()},t.prototype.clearLocalStorage=function(){e.prototype.clearLocalStorage.call(this),this._setStarRatingInLocalStorage(0),this.$localStorage.feedbackStarRatingDirty=!1},t.prototype.itemSelected=function(){var e="#"+this.$location.path().toLowerCase();return"#/feedbackresponseform"===e?!0:!1},t.prototype._createFeedbackResponseWorkItem=function(){var e=this;o.ErrorHelper.clearAllErrors(r.ToolbarType.FeedbackResponse,this.$rootScope);var t=this.$scope,n=t.title,i=t.starRatingValue,a=this.doRefresh?this.$scope.description:this.$scope.requiredDescription,c={title:n,description:a,rating:i,type:s.getDefaultWorkItemType(r.WorkItemCategories.FeedbackResponseCategory)};this.witService.createTraceabilityLink(c),this.witService.beginCreateFeedbackResponse(c,function(t){e.$localStorage.$sync(),e.clearLocalStorage(),e.closeForm()}),this.doRefresh=!0},t.prototype._getStarRatingFromLocalStorage=function(){this.$localStorage.$sync();var e=this.$localStorage.feedbackResponseStarRating;return e?e:0},t.prototype._isStarRatingDirty=function(){var e=!1,t=(this.$scope,this.$localStorage.feedbackStarRatingDirty);return t&&(e=t),e},t.prototype._setStarRatingInLocalStorage=function(e){this.$localStorage.feedbackResponseStarRating=e,this.$localStorage.$apply()},t.prototype._addRatingWatch=function(){var e=this,t=this.$scope;t.$watch("starRatingValue",function(){t.starRatingValue!==e.$localStorage.feedbackResponseStarRating&&(e.$localStorage.feedbackResponseStarRating=t.starRatingValue,0!==t.starRatingValue&&(e.$localStorage.feedbackStarRatingDirty=!0,t.isStarRatingDirty=!0))})},t}(n.TaskFormController);t.FeedbackResponseFormController=c}),define("StarRatingControl/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("StarRatingControl/StarRating.Directive",["require","exports","../../Common/Constants"],function(e,t,o){var n=function(){function e(t){e.prototype.scope={value:"=value",max:"=max",hover:"=hover",isReadonly:"=isReadonly",isStarFocussed:"=isStarFocussed"},e.prototype.restrict="EA",e.prototype.replace=!0,e.prototype.link=function(e,n,r){function i(){e.renderAry=[];for(var o=0;o<e.max;o++)o<e.value?e.renderAry.push({"bowtie-icon bowtie-favorite feedback-rating-icon":!0}):e.renderAry.push({"bowtie-icon bowtie-favorite-outline feedback-rating-icon":!0});n.html("").append(t(a)(e))}e.isStarFocussed=!1,void 0===e.max&&(e.max=5),void 0===e.isReadonly&&(e.isReadonly=!1);var a='<span class="star-rating-directive" ng-class="{isReadonly: isReadonly}"><i ng-class="renderObj" ng-repeat="renderObj in renderAry" ng-click="focusout() || setValue($index)" ng-keydown="shiftFocus(detectKeystroke($event), $index)"ng-attr-tabindex="{{isStarFocussed ? -1 : 0}}" ng-focus="focusin()" ng-blur="focusout()" role="button"aria-pressed="{{isButtonPressed($index)}}"aria-label="{{getLabel($index)}}"ng-mouseenter="changeValue($index, changeOnHover )" ></i></span>';e.focusin=function(){e.isStarFocussed=!0},e.isButtonPressed=function(t){return t<e.value?!0:!1},e.focusout=function(){e.isStarFocussed=!1},e.getLabel=function(e){var t="Click here to rate ";return t.concat(e+1)},e.setValue=function(t){e.isReadonly||(e.value=t+1)},e.detectKeystroke=function(e){return e.which},e.shiftFocus=function(t,n){var r;t===o.KeyCodeConstants.rightArrow?(r=$(":focus").next(),r.focus()):t===o.KeyCodeConstants.leftArrow?(r=$(":focus").prev(),r.focus()):(t===o.KeyCodeConstants.spaceBar||t===o.KeyCodeConstants.enterKeyCode)&&(e.setValue(n),setTimeout(function(){var e="i:eq("+n.toString()+")",t=$(e);t.focus()},0),e.isStarFocussed=!0)},e.changeValue=function(t){e.hover&&e.setValue(t)},e.$watch("value",function(e,t){e&&i()}),e.$watch("max",function(e,t){e&&i()})}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$compile"],t},e}();t.StarRating=n}),define("StarRatingControl/StarRating.Module",["require","exports","../StarRatingControl/StarRating.Directive"],function(e,t,o){angular.module("angularStarRatingModule",["XT.Popup.CommonControls"]).directive("angularStarRating",o.StarRating.factory())}),define("FeedbackResponseForm/FeedbackResponseForm.Module",["require","exports","../FeedbackResponseForm/FeedbackResponseForm.Controller","../CommonControls/AutoFocus.Directive","../BugForm/ReproSteps/ReproSteps.Service","../BugForm/ReproSteps/ActionLog.Service","../BugForm/ReproSteps/WorkItemObservations.Service","../CommonControls/ngSave.Directive"],function(e,t,o,n,r,i,a,s){angular.module("XT.Popup.FeedbackResponseForm",["ngStorage","angularStarRatingModule","XT.Popup.CommonControls","XT.Popup.Common"]).controller("FeedbackResponseFormController",o.FeedbackResponseFormController).directive("ngSave",s.ngSave).directive("ngautofocus",["$document",n.autoFocus]).service("ReproSteps",r.ReproSteps).service("ActionLogService",i.ActionLogService).service("WorkItemObservationsService",a.WorkItemObservations)}),define("FeedbackRequests/../../Messaging/Messaging",["require","exports"],function(e,t){!function(e){e[e.CustomizedWorkItemCreated=0]="CustomizedWorkItemCreated",e[e.PageEventCaptured=1]="PageEventCaptured",e[e.StartTraceability=2]="StartTraceability",e[e.VerifyIfOfflineSessionRunning=3]="VerifyIfOfflineSessionRunning",e[e.AnnotationToolReady=4]="AnnotationToolReady",e[e.AnnotateScreenshot=5]="AnnotateScreenshot",e[e.AnnotationDone=6]="AnnotationDone",e[e.AnnotationCancelled=7]="AnnotationCancelled",e[e.SessionLoad=8]="SessionLoad",e[e.SessionUpdate=9]="SessionUpdate",e[e.SessionStart=10]="SessionStart",e[e.SessionStop=11]="SessionStop",e[e.ExportSession=12]="ExportSession",e[e.CaptureScreenshot=13]="CaptureScreenshot",e[e.ScreenshotCaptureCompleted=14]="ScreenshotCaptureCompleted",e[e.ScreenshotCaptureCancelled=15]="ScreenshotCaptureCancelled",e[e.SaveSettings=16]="SaveSettings",e[e.CreateWorkItem=17]="CreateWorkItem",e[e.NewAttachmentCreated=18]="NewAttachmentCreated",e[e.NewBugCreated=19]="NewBugCreated",e[e.CloseWorkItemDialog=20]="CloseWorkItemDialog",e[e.AttachmentsAvailable=21]="AttachmentsAvailable",e[e.SaveAnnotationSettings=22]="SaveAnnotationSettings",e[e.FetchAnnotationSettings=23]="FetchAnnotationSettings",e[e.AnnotationSettingsFetchResponse=24]="AnnotationSettingsFetchResponse",e[e.FetchObjectFromLocalStorage=25]="FetchObjectFromLocalStorage",e[e.FetchObjectFromLocalStorageResponse=26]="FetchObjectFromLocalStorageResponse",e[e.TracingLevelChanged=27]="TracingLevelChanged",e[e.SaveNote=28]="SaveNote",e[e.NoteSaved=29]="NoteSaved",e[e.Trace=30]="Trace",e[e.ExecuteTfsCommand=31]="ExecuteTfsCommand",e[e.UploadInlineImage=32]="UploadInlineImage",e[e.ActivityErrorChanged=33]="ActivityErrorChanged",e[e.ExecutePerfectoCommand=34]="ExecutePerfectoCommand",e[e.TfsLoginFailed=35]="TfsLoginFailed",e[e.TfsLoginSucceeded=36]="TfsLoginSucceeded",e[e.StartAutoRefresh=37]="StartAutoRefresh",e[e.TfsReconnectSucceeded=38]="TfsReconnectSucceeded",e[e.TfsReconnectFailed=39]="TfsReconnectFailed",e[e.QueryTraceableWorkItems=40]="QueryTraceableWorkItems",e[e.QueryWorkItem=41]="QueryWorkItem",e[e.ClearTraceabilityData=42]="ClearTraceabilityData",e[e.QuerySimilarBugs=43]="QuerySimilarBugs",e[e.QueryBug=44]="QueryBug",e[e.UpdateWorkItem=45]="UpdateWorkItem",e[e.ActionLogFeatureChanged=46]="ActionLogFeatureChanged",e[e.PublishTelemetryData=47]="PublishTelemetryData",e[e.CreateTestCase=48]="CreateTestCase",e[e.StartVideoCapture=49]="StartVideoCapture",e[e.StopVideoCapture=50]="StopVideoCapture",e[e.ScreenshotCaptureGetActiveWindow_V1=51]="ScreenshotCaptureGetActiveWindow_V1",e[e.CaptureScreenshot_V1=52]="CaptureScreenshot_V1",e[e.ScreenshotCaptureCancelled_V1=53]="ScreenshotCaptureCancelled_V1",e[e.ScreenshotCaptureCompleted_V1=54]="ScreenshotCaptureCompleted_V1",e[e.ScreenshotCaptureError_V1=55]="ScreenshotCaptureError_V1",e[e.StopTraceability=56]="StopTraceability",e[e.GetSystemInfomation_V1=57]="GetSystemInfomation_V1",e[e.StartVideoCapture_V1=58]="StartVideoCapture_V1",e[e.StopVideoCapture_V1=59]="StopVideoCapture_V1",e[e.VideoCaptureError_V1=60]="VideoCaptureError_V1",e[e.VideoCaptureCompleted_V1=61]="VideoCaptureCompleted_V1",e[e.VideoCaptureCancelled_V1=62]="VideoCaptureCancelled_V1",e[e.VideoCaptureStarted_V1=63]="VideoCaptureStarted_V1",e[e.PerfData=64]="PerfData",e[e.FeatureFlagStatus=65]="FeatureFlagStatus",e[e.StartActionLogCapture_V1=66]="StartActionLogCapture_V1",e[e.StopActionLogCapture_V1=67]="StopActionLogCapture_V1",e[e.GetActionLogReport_V1=68]="GetActionLogReport_V1",e[e.ActionLogContainerCreated_V1=69]="ActionLogContainerCreated_V1",e[e.ActionLogError_V1=70]="ActionLogError_V1",e[e.ActionLogUploadCompleted_V1=71]="ActionLogUploadCompleted_V1",e[e.PingTab=72]="PingTab",e[e.ShowNotification=73]="ShowNotification",e[e.CreateFeedbackResponse=74]="CreateFeedbackResponse",e[e.VerifyIfSessionIsRunning_V1=75]="VerifyIfSessionIsRunning_V1",e[e.ConfigureXtForFeedbackRequest_V1=76]="ConfigureXtForFeedbackRequest_V1",e[e.QueryFeedbackRequests=77]="QueryFeedbackRequests",e[e.QueryFeedbackRequestDetail=78]="QueryFeedbackRequestDetail",e[e.UpdateSessionState=79]="UpdateSessionState",e[e.CreateOrUpdateFeedbackSessionWithGivenState=80]="CreateOrUpdateFeedbackSessionWithGivenState",e[e.ProvideFeedback=81]="ProvideFeedback",e[e.EnableDefaultWorkItemInToolbar=82]="EnableDefaultWorkItemInToolbar",e[e.CaptureDesktopScreenshot_V1=83]="CaptureDesktopScreenshot_V1",e[e.LoadScreenshotContentFromBlob=84]="LoadScreenshotContentFromBlob",e[e.CaptureDesktopScreenshot=85]="CaptureDesktopScreenshot"}(t.NotificationType||(t.NotificationType={}));t.NotificationType}),define("FeedbackRequests/../../Common/Constants",["require","exports"],function(e,t){var o=function(){function e(){}return e.focusAreaWidth=300,e.focusAreaHeight=60,e.runnerActionLogThumbnailWidth=200,e.runnerActionLogThumbnailHeight=100,e.thumbnailFocusAreaWidth=100,e.thumbnailFocusAreaHeight=60,e.thumbnailScaleFactor=.5,e.imageTageClassName="action-log-image",e.linkTageClassName="action-log-link",e.canvasId="image-editor",e.inputTextActionLogPrefix="Update input field with value",e.videoThumbnailClassName="xt-video-attachment",e.actionLogFileNamePrefix="actionLog-",e.actionLogFileFormat="jpeg",e.clickEventType="click",e.keyboardEventType="keyboard",e.actionLogsFileName="actionLog",e.stepHeader="Steps",e.actionHeader="Actions",e.imageHeader="Image",e.screenshotHeader="Full screen image",e.maxRunnerActionLogs=100,e.defaultActionLogCount=15,e.defaultActionLogBufferLength=20,e}();t.ActionLogConstants=o;var n=function(){function e(){}return e.enterKeyCode=13,e.escKeyCode=27,e.sKeyCode=83,e.rightArrow=39,e.leftArrow=37,e.downArrow=40,e.upArrow=38,e.spaceBar=32,e}();t.KeyCodeConstants=n;var r=function(){function e(){}return e.minFrameRate=1,e.maxFrameRate=60,e.defaultFrameRate=30,e.defaultWindowHeight=1280,e.vgaWindowHeight=640,e.defaultWindowWidth=720,e.vgaWindowWidth=360,e.captureIntervalInSeconds=1,e.maxVideoLengthInMinutes=10,e.optimalFrameRate=5,e.maxVideoSizeInBytes=52428800,e}();t.VideoCaptureConstants=r;var i=function(){function e(){}return e.defaultWorkItemCategoryColorMap={"Microsoft.BugCategory":"FFCC293D","Microsoft.TaskCategory":"FFF2CB1D","Microsoft.EpicCategory":"FFFF7B00","Microsoft.FeatureCategory":"FF773B93","Microsoft.RequirementCategory":"FF009CCC","Microsoft.TestCaseCategory":"FFFF9D00","Microsoft.SharedStepCategory":"FFFF9D00","Microsoft.SharedParameterCategory":"FFFF9D00","Microsoft.CodeReviewResponseCategory":"FFFF9D00","Microsoft.FeedbackRequestCategory":"FFFF9D00","Microsoft.FeedbackResponseCategory":"FFFF9D00","Microsoft.TestPlanCategory":"FFFF9D00","Microsoft.TestSuiteCategory":"FFFF9D00"},e.defaultWorkItemColor="FFCC293D",e}();t.WorkItemConstants=i;var a=function(){function e(){}return e.XTSource="XT",e.WebRunnerSource="WebRunner",e}();t.TelemetryConstants=a;var s=function(){function e(){}return e.maxRecords=7,e}();t.PerfDataConstants=s;var c=function(){function e(){}return e.exploratoryTestingExtensionGalleryId="ms.vss-exploratorytesting-web",e.testManagerExtensionGalleryId="ms.vss-testmanager-web",e}();t.CommonExtensionContants=c;var l=function(){function e(){}return e.stakeholderMode="stakeholder",e.teamMode="tfs",e.offlineMode="offline",e.connectedMode="connected",e}();t.ConnectionOptionConstants=l;var d=function(){function e(){}return e.pendingState="Pending",e.completedState="Completed",e.declinedState="Declined",e}();t.FeedbackStateOptionConstants=d;var u=function(){function e(){}return e.feedbackDetailsPageUrl="#/FeedbackRequestDetail",e.feedbackListsPageUrl="#/FeedbackRequests",e}();t.StakeHolderTraceabiltyPageUrls=u;var g=function(){function e(){}return e.unAuthorized="UnauthorizedAccessException",e}();t.ExceptionConstants=g;var p=function(){function e(){}return e.chromeBrowserName="Google Chrome",e.firefoxBrowserName="Mozilla Firefox",e.edgeBrowserName="Microsoft Edge",e}();t.BrowserConstants=p;var m=function(){function e(){}return e.xtMinimizeId="minimize-page",e}();t.ElementIds=m;var f=function(){function e(){}return e.login="To capture screen or action logs, make sure Test & Feedback extension is connected to {0}.",e}();t.Messages=f}),define("FeedbackRequests/../../Model/BrowserHelper",["require","exports","../Common/Constants"],function(e,t,o){var n=function(){function e(){}return e.isChrome=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.chromeExtensionHost},e.isFirefox=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.firefoxExtensionHost},e.isEdge=function(){return chrome.extension.getURL("").split(this.hostSeparator)[0]===this.edgeExtensionHost},e.getBrowserInfo=function(){return e.isFirefox()?o.BrowserConstants.firefoxBrowserName:e.isEdge()?o.BrowserConstants.edgeBrowserName:o.BrowserConstants.chromeBrowserName},e.getOptionsPage=function(){return chrome.extension.getURL("options/options.html")},e.getSessionStorageDirectoryName=function(){return this.isChrome()?"Session":"Main"},e.chromeExtensionHost="chrome-extension:",e.firefoxExtensionHost="moz-extension:",e.edgeExtensionHost="ms-browser-extension:",e.hostSeparator="//",e}();t.BrowserHelper=n});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackRequests/../../Messaging/ChromeMessaging",["require","exports","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n){function r(){try{return window.self!==window.top}catch(e){return!0}}var i=o.NotificationType,a=function(){function e(){}return e.prototype.sendMessage=function(e,t,o,n){var r={notificationType:t,data:o};chrome.tabs.sendMessage(e,r,n)},e.prototype.queryTabs=function(e,t,o){chrome.tabs.query(e,function(e){var n=[];e.forEach(function(e){e.id!==t&&n.push({windowId:e.windowId,url:e.url,title:e.title})}),o(n)})},e}(),s=function(){function e(){}return e.prototype.broadcast=function(e,t,o){var n={notificationType:e,data:t};this.sendMessage(n,o)},e.prototype.broadcastAsync=function(e,t){if(r())throw"async messaging not supported in sandbox";var o=Q.defer();return this.broadcast(e,t,function(e){o.resolve(e)}),o.promise},e.prototype.sendMessage=function(e,t){},e}(),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){!t&&n.BrowserHelper.isEdge()&&(t=function(e){}),chrome.runtime.sendMessage(e,t)},t}(s),l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.sendMessage=function(e,t){window.parent.postMessage(e,"*")},t}(s),d=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var o=this.subscriptions[t];o?this.subscriptions[t].push(e):(o=[],o.push(e),this.subscriptions[t]=o)},e.prototype.clearAll=function(){this.subscriptions={}},e.prototype.clearAllForNotificationType=function(e){this.subscriptions&&this.subscriptions[e]&&(this.subscriptions[e]=[])},e.prototype.notifySubscribers=function(e,t,o,n){var r=this.subscriptions[e];if(r)for(var i=0;i<r.length;i++)r[i](t,o,n)},e}(),u=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o,n,r){t.notifySubscribers(e,o,n,r)})}return __extends(t,e),t.prototype.listenToMessages=function(e){chrome.runtime.onMessage.addListener(function(t,o,n){return t?(e(t.notificationType,t.data,n,o),n?!0:!1):void 0})},t}(d),g=function(e){function t(){var t=this;e.call(this),this.listenToMessages(function(e,o){t.notifySubscribers(e,o,null,null)})}return __extends(t,e),t.prototype.listenToMessages=function(e){window.addEventListener("message",function(t){t.data&&e(t.data.notificationType,t.data.data)})},t}(d),p=function(){function e(){}return e.getSubscriptionService=function(){return r()?e.getSandboxSubscriptionService():this.getChromeSubscriptionService()},e.getBroadcastingService=function(){return r()?e.getSandboxBroadcastingService():this.getChromeBroadcastingService()},e.getChromeMessagingTabService=function(){return e.chromeTabMessagingService?e.chromeTabMessagingService:(e.chromeTabMessagingService=new a,e.chromeTabMessagingService)},e.getSandboxSubscriptionService=function(){return e.sandboxSubscriptionService?e.sandboxSubscriptionService:(e.sandboxSubscriptionService=new g,e.sandboxSubscriptionService)},e.getChromeSubscriptionService=function(){return e.chromeSubscriptionService?e.chromeSubscriptionService:(e.chromeSubscriptionService=new u,e.chromeSubscriptionService)},e.getSandboxBroadcastingService=function(){return e.sandboxBroadcastingService?e.sandboxBroadcastingService:(e.sandboxBroadcastingService=new l,e.sandboxBroadcastingService)},e.getChromeBroadcastingService=function(){return e.chromeBroadcastingService?e.chromeBroadcastingService:(e.chromeBroadcastingService=new c,e.chromeBroadcastingService)},e}();t.MessagingFactory=p;var m=function(){function e(e){this._iframe=e,this._sandbox=e.contentWindow,this.listenToChromeMessages(),this.listenToSandboxMessages()}return e.prototype.listenToSandboxMessages=function(){var e=this;window.addEventListener("message",function(t){t.data&&t.data.resize&&t.data.height?e._iframe.style.height=t.data.height:e.sendMessageToChrome(t.data)})},e.prototype.sendMessageToChrome=function(e){e.notificationType===i.AnnotationToolReady?chrome.windows.getCurrent(function(t){e.data.windowId=t.id,chrome.runtime.sendMessage(e)}):chrome.runtime.sendMessage(e)},e.prototype.listenToChromeMessages=function(){var e=this;chrome.runtime.onMessage.addListener(function(t,o,n){t&&void 0!=t.notificationType&&e.sendMessageToSandbox(t)})},e.prototype.sendMessageToSandbox=function(e){this._sandbox.postMessage(e,"*")},e}();t.SandboxMessagingRelay=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackRequests/../../Common/ExtensionStorage",["require","exports","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserHelper"],function(e,t,o,n,r){function i(){try{return window.self!==window.top}catch(e){return!0}}var a=r.BrowserHelper,s=function(){function e(){}return e.initializeService=function(){var e=this;o.MessagingFactory.getSubscriptionService().subscribe(function(t){o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorageResponse,e.retrieve(t))},n.NotificationType.FetchObjectFromLocalStorage)},e.store=function(e,o){localStorage.setItem(t.ngStoragePrefix+e,JSON.stringify(o))},e.retrieve=function(e){return JSON.parse(localStorage.getItem(t.ngStoragePrefix+e))},e.retrieveAsync=function(e,r){if(i())o.MessagingFactory.getBroadcastingService().broadcast(n.NotificationType.FetchObjectFromLocalStorage,e),o.MessagingFactory.getSubscriptionService().subscribe(function(e){r(JSON.parse(e))},n.NotificationType.FetchObjectFromLocalStorageResponse);else{var a=localStorage.getItem(t.ngStoragePrefix+e);r(JSON.parse(a))}},e.remove=function(o){localStorage.removeItem(t.ngStoragePrefix+o),a.isEdge()&&e.store(o,null)},e}();t.LocalStorageService=s;var c=function(){function e(){}return e.getStorageService=function(){return this.storageService?this.storageService:(a.isChrome()?this.storageService=new u:this.storageService=new d,this.storageService)},e}();t.PersistentStorageFactory=c;var l=function(){function e(){}return e.prototype.getBlobContentAsync=function(e,t){void 0===t&&(t=!0);var o=Q.defer();return this.getBlob(e,function(e){if(e){var t=new FileReader;t.onloadend=function(e){o.resolve(t.result)},t.readAsText(e)}else o.resolve(null)},o.reject,t),o.promise},e}();t.BaseStorageService=l;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.writeBlobInDir=function(e,t,o,n,r,i){var a=this;void 0===i&&(i=!1),i?this.openIndexDb(e,function(e){a.getFile(e,t,!1,function(i){var s=new Blob([i,o],{type:o.type});a.storeFile(e,t,s,n,r)},r)},r):this.openIndexDb(e,function(e){a.storeFile(e,t,o,n,r)},r)},t.prototype.writeBlob=function(e,t,o,n,r,i){var a=this;void 0===r&&(r=!1),void 0===i&&(i=!0);var s=this.getFileInfo(e,i);r?this.openIndexDb(s.dbName,function(e){a.getFile(e,s.fileName,!1,function(r){var i=new Blob([r,t],{type:t.type});a.storeFile(e,s.fileName,i,o,n)},n)},n):this.openIndexDb(s.dbName,function(e){a.storeFile(e,s.fileName,t,o,n)},n)},t.prototype.storeFile=function(e,t,o,n,r){e.blobs.put({name:t,data:o}).then(function(){e.close(),n(URL.createObjectURL(o))})["catch"](function(t){e.close(),r(t)})},t.prototype.getBlob=function(e,t,o,n){var r=this;void 0===n&&(n=!0);var i=this.getFileInfo(e,n);this.openIndexDb(i.dbName,function(e){r.getFile(e,i.fileName,!0,t,o)},o)},t.prototype.getFile=function(e,t,o,n,r){e.blobs.get(t).then(function(t){o&&e.close(),n(t?t.data:null)})["catch"](function(t){o&&e.close(),r(t)})},t.prototype.removeBlobInDir=function(e,t,o,n){this.openIndexDb(e,function(e){e.blobs.clear(t).then(function(){e.close(),o()})["catch"](function(t){e.close(),n(t)})},n)},t.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0);var r=this.getFileInfo(e,n);this.removeBlobInDir(r.dbName,r.fileName,t,o)},t.prototype.createDirectory=function(e,t,o,n){var r=new Dexie(e);r.version(1).stores({blobs:"name,data"}),o(e)},t.prototype.removeDirectory=function(e,t,o,n){this.openIndexDb(e,function(t){t.blobs.clear().then(function(){t.close(),o(e)})["catch"](function(e){t.close(),n(e)})},n)},t.prototype.openIndexDb=function(e,t,o){var n=new Dexie(e);n.version(1).stores({blobs:"name,data"}),n.open()["catch"](function(e){o(e)}),t(n)},t.prototype.getFileInfo=function(e,t){var o=e.split("/");if(1===o.length)var n=e.substr(0,4),r=t?a.getSessionStorageDirectoryName():n;else r=o[0],e=o[1];return{dbName:r,fileName:e}},t}(l);t.IndexDatabaseStorageService=d;var u=function(e){function o(){e.apply(this,arguments)}return __extends(o,e),o.prototype.writeBlobInDir=function(e,t,o,n,r,i){if(void 0===i&&(i=!1),!this.isUnitTest()){var a=e.concat("/").concat(t);PersistentStorageProxy.writeBlob(a,o,n,r,i)}},o.prototype.writeBlob=function(e,t,o,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.isUnitTest()||PersistentStorageProxy.writeBlob(this.getFilePath(e,i),t,o,n,r)},o.prototype.getBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.getBlob(this.getFilePath(e,n),t,o)},o.prototype.removeBlobInDir=function(e,t,o,n){if(!this.isUnitTest()){var r=e.concat("/").concat(t);PersistentStorageProxy.removeBlob(r,o,n)}},o.prototype.removeBlob=function(e,t,o,n){void 0===n&&(n=!0),this.isUnitTest()||PersistentStorageProxy.removeBlob(this.getFilePath(e,n),t,o)},o.prototype.createDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.createDirectory(e,t,o,n)},o.prototype.removeDirectory=function(e,t,o,n){this.isUnitTest()||PersistentStorageProxy.removeDirectory(e,t,o,n)},o.prototype.getFilePath=function(e,o){if(void 0===o&&(o=!0),!o)return e;var n=s.retrieve(t.activeSessionKey);return n&&1===n.version?n.id.concat("/").concat(e):a.getSessionStorageDirectoryName().concat("/").concat(e)},o.prototype.isUnitTest=function(){return"true"===localStorage.getItem("isUnitTest")},o}(l);t.PersistentStorageService=u,t.activeSessionKey="activeSession",t.actionLogUrlKey="actionLogUrl",t.actionLogUrl_DataCollectorKey="actionLogUrl_DataCollector",t.activeScreenShotAndWindowIdMap="activeScreenShotAndWindowIdMap",t.activeScreenShotAndWindowIdMap_Datacollector="activeScreenShotAndWindowIdMap_DataCollector",t.toolbarErrorMap="toolbarErrorMap",t.activeSettingsKey="activeSettings",t.activeAnnotationSettingsKey="activeAnnotationSettings",t.notesCountKey="numberOfNotesInSession",t.videosCountKey="numberOfVideosInSession",t.enableAudio="enableAudio",t.currentVideoCaptureIdKey="currentVideoCaptureId",t.currentVideoCaptureId_DataCollectorKey="currentVideoCaptureId_DataCollector",t.activeVideoCaptureRequestPresent="videoCaptureRequestPresent",t.activeVideoCaptureRequestPresent_DataCollector="videoCaptureRequestPresent_DataCollector",t.videoFileFormatKey="videoFileFormat",t.videoFileFormat_DataCollectorKey="videoFileFormat_DataCollector",t.currentVideoCaptureTimeKey="elapsedVideoTime",t.currentVideoCaptureTime_DataCollectorKey="elapsedVideoTime_DataCollector",t.browserCloseEventsWhileVideoRecordingKey="browserCloseEventsWhileVideoRecording",t.browserCloseEventsWhileVideoRecording_DataCollectorKey="browserCloseEventsWhileVideoRecording_DataCollector",t.browserCloseEventsWhileVideoUploadingKey="browserCloseEventsWhileVideoUploading",t.screenshotsCountKey="numberOfScreenshotsInSession",t.ngStoragePrefix="ngStorage-",t.connectionSettingsKey="connectionSettings",t.basicConnectionSettingsKey="basicConnectionSettings",t.connectionOptionKey="connectionOption",t.connectedModeKey="connectedMode",t.changeTeamDetailsKey="changeTeamDetails",t.loginInProgressKey="loginInProgress",t.mostRecentlyUsedUrlsKey="mostRecentlyUsedUrls",t.initialBaseUrlKey="initialBaseUrl",t.refreshingKey="refreshing",t.loggedInKey="loggedIn",t.reconnectKey="reconnected",t.deviceListLocalStorageKey="perfectoMobileDeviceList",t.mobileXtUrlKey="perfectoCloudUrl",t.mobileXtUsernameKey="perfectoUserName",t.iconBlinkKey="iconBlink",t.lastUrlKey="lastUrl",t.useSoapApiForUpgradeKey="useSoapApiForUpgrade",t.useSoapApiFprUpgradeKey="useSoapApiFprUpgrade",t.perfAttachmentCountKey="perfAttachmentCount",t.perfDataMaxRecords="perfDataMaxRecords",t.perfDataNextIndex="perfDataNextIndex",t.lastUrlBeforeNotificationKey="lastUrlBeforeNotification",t.isNotificationDismissedKey="isNotificationDismissed",t.linkedWorkItemKey="linkedWorkItem",t.searchResultsForTraceabilityKey="searchResultsForTraceability",t.searchResultsForFeedbackRequestsKey="searchResultsForFeedbackRequests",t.traceabilityEnabledKey="traceabilityEnabled",t.workItemQueryPatternForTraceabilityKey="workItemQueryPatternForTraceability",t.lastSearchedQueryPatternKey="lastSearchedQueryPattern",t.workItemSearchInProgressKey="workItemSearchInProgress",t.notifyTimelineForTraceabilityKey="notifyTimelineForTraceability",t.similarBugsKey="searchResultsForSimilarBugs",t.selectedBugKey="selectedBugForUpdate",t.selectedBugDescriptionKey="selectedBugDescriptionKey",t.isBugSelectedForUpdateKey="isBugSelectedForUpdate",t.taskFormDirtyKey="taskFormDirty",t.taskTitleDirtyKey="taskTitleDirty",t.unsavedTaskDescriptionKey="unsavedTaskDescription",t.unsavedTaskTitleKey="unsavedTaskTitle",t.includeImageActionLogsInTaskKey="includeImageActionLogsInTask",t.selectedFeedbackRequestApplicationLaunchKey="selectedFeedbackRequestApplicationLaunch",t.selectedFeedbackRequestKey="selectedFeedback",t.isProvideFeedbackInitiatedFromWeb="isProvideFeedbackInitiatedFromWeb",t.bugFormDirtyKey="bugFormDirty",t.bugTitleDirtyKey="bugTitleDirty",t.unsavedBugTitleKey="unsavedBugTitle",t.searchResultsForSimilarBugsKey="searchResultsForSimilarBugs",t.selectedBugForUpdateKey="selectedBugForUpdate",t.includeImageActionLogsInBugKey="includeImageActionLogsInBug",t.testCaseFormDirtyKey="testCaseFormDirty",t.unsavedTestCaseStepsKey="unsavedTestCaseSteps",t.unsavedTestCaseTitleKey="unsavedTestCaseTitle",t.feedbackResponseFormDirtyKey="feedbackResponseFormDirty",t.feedbackResponseTitleDirtyKey="feedbackResponseTitleDirty",t.unsavedFeedbackResponseDescriptionKey="unsavedFeedbackResponseDescription",t.unsavedFeedbackResponseTitleKey="unsavedFeedbackResponseTitle",t.includeImageActionLogsInFeedbackResponseKey="includeImageActionLogsInFeedbackResponse",t.includePerfDataInFeedbackResponseKey="includePerfDataInFeedbackResponse",
t.groupingDetails="groupingDetails",t.traceabilityRequestKey="traceabilityRequest",t.iconBeforeErrorKey="iconBeforeError",t.currentIconKey="currentIcon",t.offlineReport="offlineReport",t.reportDirectoryName="Reports",t.actionLogKey="ActionLog",t.newBranding="NewBranding",t.sessionActionLogMaxCountKey="sessionActionLogMaxCount",t.exportedSessionReportPath="Reports/SessionReport.html",t.extensionUniqueIdentifier="ExtensionID",t.actionLogFullImageSizeInBytes="actionLogFullImageSizeInKB",t.isImageActionLogTurnedOnDuringUpgrade="isImageActionLogTurnedOnDuringUpgrade",t.supportTfsSessionCompactKey="supportTfsSessionCompact",t.currentVersionKey="currentVersion",t.workItemTypeMetaDataCache="workItemTypeMetaDataCache",t.workItemCategoryMetaDataCache="workItemCategoryMetaDataCache",t.bugWorkItemTypeCache="bugWorkItemTypeCache",t.alertInformationKey="alertInformation",t.licenseUpdatedDateTimeKey="licenseUpdatedDateTime",t.licenseUpdateIntervalKey="licenseUpdateIntervalInHrs",t.selectedFeedbackRequestWorkitemObjectKey="selectedFeedbackRequestWorkitemObject",t.teamSettingsKey="teamSettings",t.forceStopSessionReason="forceStopSessionReason"}),define("FeedbackRequests/../../Model/Model",["require","exports"],function(e,t){!function(e){e[e.Session=0]="Session",e[e.ScreenShot=1]="ScreenShot",e[e.Note=2]="Note",e[e.Bug=3]="Bug",e[e.Bug2=4]="Bug2",e[e.TimeLine=5]="TimeLine",e[e.Settings=6]="Settings",e[e.MobileXt=7]="MobileXt",e[e.Traceability=8]="Traceability",e[e.About=9]="About",e[e.Task=10]="Task",e[e.TestCase=11]="TestCase",e[e.Video=12]="Video",e[e.FeedbackResponse=13]="FeedbackResponse",e[e.FeedbackRequests=14]="FeedbackRequests",e[e.ScreenShotScreen=15]="ScreenShotScreen",e[e.ScreenShotApplication=16]="ScreenShotApplication"}(t.ToolbarType||(t.ToolbarType={}));t.ToolbarType;!function(e){e[e.BrowserTab=0]="BrowserTab",e[e.Screen=1]="Screen",e[e.Application=2]="Application"}(t.ScreenshotType||(t.ScreenshotType={}));t.ScreenshotType;!function(e){e[e.Off=0]="Off",e[e.AsRequirements=1]="AsRequirements",e[e.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));t.BugsBehavior;!function(e){e[e.Unknown=0]="Unknown",e[e.XTDesktop=1]="XTDesktop",e[e.FeedbackDesktop=2]="FeedbackDesktop",e[e.XTWeb=3]="XTWeb",e[e.FeedbackWeb=4]="FeedbackWeb"}(t.TestSessionSource||(t.TestSessionSource={}));var o=(t.TestSessionSource,function(){function e(){}return e.testPlanIdString="TestPlanId",e.feedbackRequestIdString="FeedbackRequestId",e}());t.TestSessionConstants=o;var n=function(){function e(){}return e.solicited="Solicited",e.unsolicited="UnSolicited",e.none="None",e}();t.FeedbackTypeConstants=n,function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Paused=3]="Paused",e[e.Declined=4]="Declined"}(t.SessionState||(t.SessionState={}));t.SessionState;!function(e){e[e["0 - Not Rated"]=0]="0 - Not Rated",e[e["1 - Poor"]=1]="1 - Poor",e[e["2 - Fair"]=2]="2 - Fair",e[e["3 - Good"]=3]="3 - Good",e[e["4 - Very Good"]=4]="4 - Very Good",e[e["5 - Excellent"]=5]="5 - Excellent"}(t.FeedbackResponseRating||(t.FeedbackResponseRating={}));t.FeedbackResponseRating;!function(e){e[e.NotStarted=1]="NotStarted",e[e.InProgress=2]="InProgress",e[e.Completed=4]="Completed"}(t.ServerSessionState||(t.ServerSessionState={}));t.ServerSessionState;!function(e){e[e.Created=0]="Created",e[e.ContainerCreated=1]="ContainerCreated",e[e.Uploaded=2]="Uploaded",e[e.Failed=3]="Failed"}(t.AttachmentState||(t.AttachmentState={}));t.AttachmentState;!function(e){e[e.Screenshot=0]="Screenshot",e[e.SystemInformation=1]="SystemInformation",e[e.Note=2]="Note",e[e.Video=3]="Video",e[e.ActionLog=4]="ActionLog",e[e.PerfData=5]="PerfData"}(t.AttachmentType||(t.AttachmentType={}));var r=(t.AttachmentType,function(){function e(){}return e}());t.CaptureWindowPayload=r,function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard"}(t.ActionLogType||(t.ActionLogType={}));var i=(t.ActionLogType,function(){function e(){}return e}());t.IActionLogReportPayload=i,function(e){e[e.TFS_CONNECTION_FAILED=1]="TFS_CONNECTION_FAILED",e[e.TFS_AUTH_FAILED=2]="TFS_AUTH_FAILED",e[e.WINDOW_NOT_FOUND=3]="WINDOW_NOT_FOUND",e[e.SCREEN_RECORDING_DISABLED=4]="SCREEN_RECORDING_DISABLED",e[e.DATACOLLECTION_ALREADY_INPROGRESS=5]="DATACOLLECTION_ALREADY_INPROGRESS",e[e.TAB_NOT_REACHABLE=6]="TAB_NOT_REACHABLE",e[e.ACTIONLOG_FEATURE_DISABLED=7]="ACTIONLOG_FEATURE_DISABLED",e[e.MICROPHONE_NOTFOUND=8]="MICROPHONE_NOTFOUND"}(t.ErrorCode||(t.ErrorCode={}));var a=(t.ErrorCode,function(){function e(){}return e}());t.IConnectedUserDetails=a,function(e){e[e.AnnotationSettings=0]="AnnotationSettings",e[e.WorkItemFiling=1]="WorkItemFiling",e[e.VsoSessionSettings=2]="VsoSessionSettings",e[e.DeviceProvider=3]="DeviceProvider",e[e.Traceability=4]="Traceability",e[e.TestCaseForm=5]="TestCaseForm",e[e.VideoCapture=6]="VideoCapture",e[e.ActionLog=7]="ActionLog",e[e.QueryFeedbackRequestsData=8]="QueryFeedbackRequestsData",e[e.ProvideFeedback=9]="ProvideFeedback",e[e.FirefoxInstallEvent=10]="FirefoxInstallEvent"}(t.TelemetryEvent||(t.TelemetryEvent={}));t.TelemetryEvent;!function(e){e[e.ConnectedModeAvailable=0]="ConnectedModeAvailable",e[e.TrialModeOn=1]="TrialModeOn",e[e.TrialModeExpired=2]="TrialModeExpired"}(t.AlertType||(t.AlertType={}));t.AlertType;!function(e){e[e.Offline=0]="Offline",e[e.VSTS=1]="VSTS",e[e.TFS=2]="TFS"}(t.ServerType||(t.ServerType={}));var s=(t.ServerType,function(){function e(){}return e.epic="Epic",e.productBacklogItem="Product Backlog Item",e.testCase="Test Case",e.userStory="User Story",e.feature="Feature",e.scenario="Scenario",e.requirement="Requirement",e.bug="Bug",e.task="Task",e.feedbackResponse="Feedback Response",e}());t.WorkItemType=s;var c=function(){function e(){}return e.BugCategory="Microsoft.BugCategory",e.TaskCategory="Microsoft.TaskCategory",e.TestCaseCategory="Microsoft.TestCaseCategory",e.ScenarioCategory="Microsoft.ScenarioCategory",e.EpicCategory="Microsoft.EpicCategory",e.RequirementCategory="Microsoft.RequirementCategory",e.FeatureCategory="Microsoft.FeatureCategory",e.FeedbackResponseCategory="Microsoft.FeedbackResponseCategory",e.FeedbackRequestCategory="Microsoft.FeedbackRequestCategory",e.HiddenCategory="Microsoft.HiddenCategory",e}();t.WorkItemCategories=c;var l=function(){function e(){}return e.workItemType="System.WorkItemType",e.id="System.Id",e.title="System.Title",e.iterationPath="System.IterationPath",e.assignedTo="System.AssignedTo",e.workItemState="System.State",e.acceptanceCriteria="Microsoft.VSTS.Common.AcceptanceCriteria",e.description="System.Description",e.areaPath="System.AreaPath",e.reproSteps="Microsoft.VSTS.TCM.ReproSteps",e.systemInfo="Microsoft.VSTS.TCM.SystemInfo",e.applicationStartInfo="Microsoft.VSTS.Feedback.ApplicationStartInformation",e.applicationLaunchInstruction="Microsoft.VSTS.Feedback.ApplicationLaunchInstructions",e.createdBy="System.CreatedBy",e.createdDate="System.CreatedDate",e.url="url",e.startTime="startTime",e.relations="Relations",e}();t.WorkItemField=l;var d=function(){function e(){}return e.relatedLink="System.LinkTypes.Related",e.relatedLinkForward="System.LinkTypes.Related-Forward",e.parentLink="System.LinkTypes.Hierarchy-Reverse",e.testedByForward="Microsoft.VSTS.Common.TestedBy-Forward",e.testedByReverse="Microsoft.VSTS.Common.TestedBy-Reverse",e}();t.WorkItemRelations=d;var u=function(){function e(){}return e.filedWorkItemKey="AssociatedWorkItem",e.exploredWorkItemKey="ExploredWorkItem",e}();t.SessionKeys=u;var g=function(){function e(e,t,o,n){this.eventType=e,this.timing=t,this.requestURL=o,this.eventData=n}return e}();t.PerfData=g;var p=function(){function e(){}return e}();t.PerfResourceData=p;var m=function(){function e(e,t){this.serverUrl=e,this.lastAccessedTime=t}return e}();t.MostRecentlyUsedUrls=m});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define("FeedbackRequests/../../Common/SessionData",["require","exports","../Common/ExtensionStorage"],function(e,t,o){!function(e){e[e.chromeScreenCapture=0]="chromeScreenCapture",e[e.chromeDesktopCapture=1]="chromeDesktopCapture"}(t.chromeApiType||(t.chromeApiType={}));var n=(t.chromeApiType,function(){function e(e,t,o,n,r,i){this._screenshotDefaultPrefix="Screenshot-",this.id=e,this.content=t,o&&(this.state=o),this.isXTSession=r,n?this.name=n:this.name=this._generateScreenshotName(),null!=i&&(this.chromeApiType=i)}return e.prototype.setPosition=function(e,t){this.top=e,this.left=t},e.prototype.setDimension=function(e,t){this.width=e,this.height=t},e.prototype._generateScreenshotName=function(){return this._screenshotDefaultPrefix.concat(this._generateScreenshotSuffix())},e.prototype._generateScreenshotSuffix=function(){if(this.isXTSession)return this._getScreenshotCountAndUpdateInLocalStorage().toString();var e=new Date(Date.now());return e.toISOString().replace(/:/g,"-")},e.prototype._getScreenshotCountAndUpdateInLocalStorage=function(){var e=o.LocalStorageService.retrieve(o.screenshotsCountKey);return e?e+=1:e=1,o.LocalStorageService.store(o.screenshotsCountKey,e),e},e}());t.Screenshot=n;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.ScreenshotEx=r;var i=function(){function e(e,t){this.id=e,this.content=t}return e}();t.SystemInformation=i;var a=function(){function e(e,t){this.notesPrefix="Note-",this.content=e,this.size=t,this.id=this.getNoteId()}return e.prototype.getNoteId=function(){var e=o.LocalStorageService.retrieve(o.notesCountKey),t=parseInt(e)+1;return o.LocalStorageService.store(o.notesCountKey,t),this.notesPrefix.concat(t.toString())},e}();t.Note=a;var s=function(){function e(e,t){this.videoPrefix="ScreenRecording-",this.size=e,this.isXTSession=t,this.id=this.getVideoId()}return e.prototype.getVideoId=function(){if(this.isXTSession){var e=o.LocalStorageService.retrieve(o.videosCountKey),t=parseInt(e)+1;o.LocalStorageService.store(o.videosCountKey,t);var n=o.LocalStorageService.retrieve(o.videoFileFormatKey);return n=null===n?"webm":n,this.videoPrefix.concat(t.toString()).concat("."+n)}var n=o.LocalStorageService.retrieve(o.videoFileFormat_DataCollectorKey);n=null===n?"webm":n;var r=new Date(Date.now());return this.videoPrefix.concat(r.toISOString().replace(/:/g,"-")).concat("."+n)},e}();t.Video=s;var c=function(){function e(e){this.actionLogPrefix="ActionLog-",this.fileFormat=".html",this.size=e,this.id=this.getActionLogId()}return e.getActionLogSessionData=function(t,o,n){var r=new e(n);return r.id=t?t:r.id,r.content=o?o:r.content,r},e.prototype.getActionLogId=function(){var e=new Date(Date.now());return this.actionLogPrefix.concat(e.toISOString().replace(/:/g,"-")).concat(this.fileFormat)},e}();t.ActionLog=c;var l=function(){function e(e,t,o){this.content=e,this.size=t,this.id=o}return e}();t.PerfData=l}),define("FeedbackRequests/../../Model/BrowserActionService",["require","exports","../Common/ExtensionStorage","../Model/Model"],function(e,t,o,n){function r(){s||(s=new l)}function i(){return s||r(),s}function a(){s=null}t.initializeService=r,t.getService=i,function(e){e[e.Default=0]="Default",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.Empty=3]="Empty"}(t.ExtensionIconType||(t.ExtensionIconType={}));var s,c=t.ExtensionIconType;t.deinitializeService=a;var l=function(){function e(){this.iconLookup={},this.iconWidth=19,this.iconHeight=19,this.iconLookup[c.Default]="../../Images/NormalState-",this.iconLookup[c.InProgress]="../../Images/SessionOnState-",this.iconLookup[c.Error]="../../Images/ErrorState-";var e=o.LocalStorageService.retrieve(o.activeSessionKey);e&&e.state===n.SessionState.InProgress?(o.LocalStorageService.store(o.iconBeforeErrorKey,c.InProgress),o.LocalStorageService.store(o.currentIconKey,c.InProgress)):(o.LocalStorageService.store(o.iconBeforeErrorKey,c.Default),o.LocalStorageService.store(o.currentIconKey,c.Default))}return e.prototype.setIcon=function(e){if(e===c.Empty){var t=document.createElement("canvas"),n=t.getContext("2d").createImageData(this.iconWidth,this.iconHeight);chrome.browserAction.setIcon({imageData:n})}else{var r=this.iconLookup[e];o.LocalStorageService.store(o.currentIconKey,e),e!==c.Error&&o.LocalStorageService.store(o.iconBeforeErrorKey,e),chrome.browserAction.setIcon({path:{19:r+"19.png",38:r+"38.png"}})}},e.prototype.clearError=function(){this.setIcon(o.LocalStorageService.retrieve(o.iconBeforeErrorKey))},e.prototype.getCurrentIconState=function(){return o.LocalStorageService.retrieve(o.currentIconKey)},e}()}),define("FeedbackRequests/../../Common/ResourceStrings",["require","exports"],function(e,t){var o=function(){function e(){}return e.productNameShort="TF",e.productName="Test & Feedback",e.Tfs2015Name="TFS 2015",e.Tfs2017Name="TFS 2017",e.productNameWithExtension=e.productName+" extension",e.buyProductTitleString="Buy "+e.productName+" extension",e.trialExpiredTitleString="Your 30-day trial has expired",e.trialAboutToExpireTitleString="Your trial will expire in {0}",e.startTrialMessage="The preview of "+e.productName+" extension has ended. To continue using this extension in Connected mode, select an option below. We'll send a request to your admin.",e.trialExpiredMessage="To continue using "+e.productName+" in Connected mode, select Buy. We'll send a request to your admin.",e.trialAboutToExpireMessage="To continue using "+e.productName+" in Connected mode after trial ends, select Buy. We'll send a request to your admin.",e.trialNotificationContactAdminFooter="You can use Connected mode when your admin approves your request.",e.trialNotificationContinueFooter="For now, you can keep using "+e.productName+" in Standalone mode for free!",e.trialNotificationConitnueFooter2="And remember, you can use "+e.productName+" in Standalone mode for free!",e.stakeholderTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2017Name+" and above to respond to feedback requests.",e.teamModeTfsNotSupportedMessage="TFS version you are connecting to is not supported. Use "+e.Tfs2015Name+" and above to use in connected mode.",e}();t.ResourceStrings=o}),define("FeedbackRequests/../../Common/ResourceHelper",["require","exports","../Common/ResourceStrings"],function(e,t,o){function n(){return o.ResourceStrings.productNameShort}function r(){return o.ResourceStrings.productName}function i(){return o.ResourceStrings.productNameWithExtension}function a(){return o.ResourceStrings.buyProductTitleString}function s(){return o.ResourceStrings.trialExpiredTitleString}function c(){return o.ResourceStrings.trialAboutToExpireTitleString}function l(){return o.ResourceStrings.startTrialMessage}function d(){return o.ResourceStrings.trialExpiredMessage}function u(){return o.ResourceStrings.trialAboutToExpireMessage}function g(){return o.ResourceStrings.trialNotificationContactAdminFooter}function p(){return o.ResourceStrings.trialNotificationContinueFooter}function m(){return o.ResourceStrings.trialNotificationConitnueFooter2}function f(){return o.ResourceStrings.stakeholderTfsNotSupportedMessage}function h(){return o.ResourceStrings.teamModeTfsNotSupportedMessage}t.getProductNameShortMessage=n,t.getProductNameMessage=r,t.getProductNameWithExtensionMessage=i,t.getBuyProductTitleMessage=a,t.getTrialExpiredTitleMessage=s,t.getTrialAboutToExpireTitleMessage=c,t.getStartTrialMessage=l,t.getTrialExpiredMessage=d,t.getTrialAboutToExpireMessage=u,t.getTrialNotificationContactAdminFooterMessage=g,t.getTrialNotificationContinueFooterMessage=p,t.getTrialNotificationConitnueFooter2Message=m,t.getTFSNotSupportedMessageForStakeholder=f,t.getTFSNotSupportedMessageForBasicUser=h}),define("FeedbackRequests/../../Popup2/Common/ResourceUtility.Service",["require","exports","../../Common/ResourceHelper"],function(e,t,o){var n=function(){function e(){}return e.prototype.getProductNameMessage=function(){return o.getProductNameMessage()},e.prototype.getProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e.getProductNameShortMessage=function(){return o.getProductNameShortMessage()},e.GetProductNameMessage=function(){return o.getProductNameMessage()},e.GetProductNameWithExtensionMessage=function(){return o.getProductNameWithExtensionMessage()},e}();t.ResourceUtilityService=n}),define("FeedbackRequests/../../Common/Types",["require","exports"],function(e,t){function o(){var e=(128+Math.floor(64*Math.random())).toString(16);return n(8)+"-"+n(4)+"-4"+n(3)+"-"+e+n(2)+"-"+n(12)}function n(e){if(!e)return Math.floor(16*Math.random()).toString(16);for(var t="",o=0;e>o;o++)t+=n();return t}function r(e){var t=!0;return e&&e.length>0&&(t=!1),t}function i(e,t){return r(e)?!1:e.lastIndexOf(t)+t.length===e.length?!0:!1}function a(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return s(!1,e,t)}function s(e,t,o){for(var n="",r=0;;){var i=t.indexOf("{",r),a=t.indexOf("}",r);if(0>i&&0>a){n+=t.slice(r);break}if(a>0&&(i>a||0>i)){if("}"!==t.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=t.slice(r,a+1),r=a+2}else if(n+=t.slice(r,i),r=i+1,"{"!==t.charAt(r)){if(0>a)throw new Error("The format string contains an unmatched opening or closing brace.");var s=t.substring(r,a),c=s.indexOf(":"),l=parseInt(0>c?s:s.substring(0,c),10);if(isNaN(l))throw new Error("The format string is invalid.");var d=0>c?"":s.substring(c+1),u=o[l];("undefined"==typeof u||null===u)&&(u=""),n+=u.toFormattedString?u.toFormattedString(d):u.format?u.format(d):u.toString(),r=a+1}else n+="{",r++}return n}t.newGuid=o,t.isStringNullOrEmpty=r,t.endsWith=i,t.stringFormat=a}),define("FeedbackRequests/../../Common/FeatureAvailabiliy",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging"],function(e,t,o,n,r){var i=function(){function e(){}return e.initialize=function(){var e=this;this._subscriptionService=n.MessagingFactory.getSubscriptionService(),this._subscriptionService.subscribe(function(t,o){e.isFeatureEnabled(t.flagType)&&o()},r.NotificationType.FeatureFlagStatus),this.updateDefaultFeatureStatesInLocalStore()},e.updateDefaultFeatureStatesInLocalStore=function(){for(var e in this.defaultFeatureStates)if(!this.doesFeatureExists(e)&&this.defaultFeatureStates.hasOwnProperty(e)){var t=this.defaultFeatureStates[e];o.LocalStorageService.store(e,t),e===a[a.ActionLog]&&chrome.storage.local.set(this.getFeatureFlagJson(e,t))}},e.isFeatureEnabled=function(e){return o.LocalStorageService.retrieve(a[e])||!1},e.doesFeatureExists=function(e){return null!==o.LocalStorageService.retrieve(e)},e.setFeatureFlagState=function(e,t){var n=a[e];o.LocalStorageService.store(n,t),e===a.ActionLog&&chrome.storage.local.set(this.getFeatureFlagJson(n,t))},e.getFeatureFlagJson=function(e,t){var o={};return o[e]=t,o},e.defaultFeatureStates={ActionLog:!0,Task:!0,SearchSimilarBugs:!0,OfflineMode:!0,RestApiForSession:!0,PerfData:!0,RunnerActionLog:!0,XTTrialMode:!1,OngoingRecording:!0,StakeholderMode:!0},e}();t.FeatureAvailibilityService=i,function(e){e[e.ActionLog=0]="ActionLog",e[e.Task=1]="Task",e[e.SearchSimilarBugs=2]="SearchSimilarBugs",e[e.OfflineMode=3]="OfflineMode",e[e.RestApiForSession=4]="RestApiForSession",e[e.PerfData=5]="PerfData",e[e.RunnerActionLog=6]="RunnerActionLog",e[e.XTTrialMode=7]="XTTrialMode",e[e.OngoingRecording=8]="OngoingRecording",e[e.StakeholderMode=9]="StakeholderMode",e[e.NewBranding=10]="NewBranding"}(t.FeatureFlag||(t.FeatureFlag={}));var a=t.FeatureFlag}),define("FeedbackRequests/../../Popup2/CommonControls/InputDropdown.Template",["require","exports"],function(e,t){t.inputDropdownControlTemplate='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Team Services / Team Foundation Server url" ng-model="url"></div>',t.inputDropdownControlTemplateNewBranding='<div id="input-mrutfsurls">  <div class ="typeahead-dropdown-icon bowtie-triangle-down bowtie-icon dropdown-button" role="button" aria-label="Open drop down" tabIndex="0" aria-pressed="{{ isDropOpen }}" ng-click="onDropDownClick()" ng-mousedown="onMouseDown($event)" ng-keydown="onKeyDown($event)" ng-if="isDropButtonVisible()"> </div>  <input class="typeahead" type= "text" aria-labelledby="team-services-url" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" ng-model="url"></div>'}),define("FeedbackRequests/../../Popup2/SignIn/SignIn.Template",["require","exports"],function(e,t){t.signInTemplate='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Team Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Team Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Visual Studio Team Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Visual Studio Team Services account? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>',t.signInTemplateNewBranding='<div class="sign-in-page" ng-controller="SignInFormController as controller" ng-escape="controller.utilityService.minimizeForm()">    <error-control></error-control>    <div class="form-container">        <div role="group" aria-labelledby="connection-settings">           <div id="connection-settings" class="sign-in-page-title">               <legend>Connection settings</legend>           </div>           <div class="sign-in-option">               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'tfs-option\'}}">                   <input id="connected-radio-button" type="radio" aria-labelledby="connected" name="connection" value="connected" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="connected">{{ controller.getTeamRadioText() }}</span>               </div>               <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'offline-option\'}}">                   <input id="standalone-radio-button" type="radio" aria-labelledby="standalone" name="connection" value="offline" ng-disabled="controller.$localStorage.activeSession.state === 1" ng-change="controller.changeConnectionOption()" ng-model="controller.connectionOption">                   <span id="standalone">Standalone</span>               </div>           </div>        </div>        <div class="tfs-content" ng-if="controller.connectionOption === \'connected\'">           <div class="connected-mode-description" ng-if="!controller.isloggedIn">               {{ controller.getConnectedModeDescription() }}<a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" target="_blank" tabindex="0">Learn more</a>                <br>           </div>        <div class="connect-tfs-control">            <div class="tfs-header-section">                <div class="tfs-header">Server URL</div>            <button class="disconnect-button" ng-if="controller.connectionStatusPassed && controller.$localStorage.activeSession.state !== 1" ng-click="controller.disconnect()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'disconnect\'}}" title="{{ controller.$localStorage.activeSession.state | TooltipFilter }}">                    Disconnect                </div>            </button>            <button class="disconnect-button" ng-if="(!controller.connectionStatusPassed && controller.$localStorage.initialBaseUrl  && $root.actionInProgress) || controller.$localStorage.activeSession.state === 1" ng-click="controller.repair()" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}">                <div  class="disconnect" title="Repair">                    Repair                </div>            </button>                <!--                <div class="icon-info"></div>                -->            </div>            <div class="tfs-url" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }">                  <span ng-if="!controller.isInputEditable"> <input ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text" ng-model="controller.baseUrl;" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}" aria-labelledby="team-services-url" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}" placeholder=" Enter Azure DevOps Services / Team Foundation Server url" /></span>                  <span id="team-services-url" class="hidden-aria-label">Team Foundation Server or Azure DevOps Services URL</span>                  <span ng-if="controller.isInputEditable"> <input-dropdown tfsurl="controller.baseUrl" ng-style="{\'background-color\': !controller.isInputEditable ? \'#DDDDDD\' : \'white\' }" type="text"  tabindex="-1" ng-readonly="!controller.isInputEditable" ng-keydown="controller.keyDownOnNext($event)" enable="{{ controller.isloggedIn === false }}"></input-dropdown></span>                <div class="connection-status">                    <div class="passed"                         ng-class="controller.statusPassedItem.css"                         ng-bind-html="controller.statusPassedItem.unicode"                         ng-if="controller.connectionStatusPassed && controller.showConnectionStatusIcon"></div>                </div>            </div>            <div class="tfs-url-preview" ng-if="!controller.connectionStatusPassed && controller.baseUrl && controller.baseUrl.length != 0 " ng-if="!controller.isTeamSelected" >                <span>Preview:&nbsp;</span>                <input type="text" value="{{ controller.$localStorage.initialBaseUrl = controller.baseUrl; controller.baseUrl | tfsurlFilter }}" title="{{ controller.baseUrl | tfsurlFilter }}" readonly tabindex="-1" />            </div>            <div class="tfs-url-preview" ng-if="controller.isInputEditable && (!controller.baseUrl || controller.baseUrl.length === 0) ">            </div>            <div class="vso-sign-up" ng-if="!controller.isloggedIn">              Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up </a>for free.            </div>        </div>        <div class="button-container" ng-if="!controller.isloggedIn" tabindex="-1">            <button ng-click="controller.validateTfsUrl()" ng-disabled="$root.actionInProgress || !controller.$localStorage.initialBaseUrl" tabindex="{{ controller.enableTabIndex(!controller.isloggedIn) }}">                <div class="submit-text">                    Next                </div>            </button>        </div>        <div ng-if="controller.$storage.changeTeamDetails !== false" >            <div ng-if="controller.isloggedIn" class="team-path">                <div class="project-team-header">                    <div class="select-team-text" tabindex="-1" ng-if="!controller.isTeamSelected"><label for="team-search-input" id="search-label-id">Select your team<label></div>                </div>                   <div class="refresh-button" title="Refresh" ng-click="controller.refresh()" role="button" tabindex="{{ controller.enableTabIndex(controller.isloggedIn) }}" ng-keydown="controller.keyDownOnRefresh($event)">Refresh</div>                <div class="select-team">                   <div class="filter">                        <div class="select-collection-header" title="{{controller.collectionFilter.name}}" ng-if="controller.data.length > 1" >                            <select class="select-collection" tabindex="{{ controller.enableTabIndex(controller.data.length > 1 && !controller.isloggedIn) }}" ng-disabled="controller.$storage.activeSession.state === 1" ng-options="collection.name for collection in controller.data" ng-model="controller.collectionFilter"> </select>                       </div>                       <div class="team-filter" >                            <input class="input-box" id="team-search-input" type="text" results="0"  ng-disabled="controller.$storage.activeSession.state === 1" ng-change="controller.teamFilterChanged()" ng-model="controller.teamFilter" aria-describedby="team-search-input" ng-model-options="{debounce: 300}" enable="controller.isloggedIn"  placeholder= " Search..." />                           <div class="team-search-button-container" title="Search">&#57492;</div>                       </div>                   </div>                 </div>             </div>            <!-- as a Dom element -->            <div class="team-selector" id="team-selector-container" ng-if="controller.isloggedIn">                <div ng-if="!controller.isRefreshing"                     data-angular-treeview="true"                     data-tree-id="tree"                     data-tree-model="controller.data"                     data-node-id="id"                     data-node-label="name"                     data-node-children="children"                     data-container-id="team-selector-container">                </div>                <div ng-if="controller.isRefreshing" class="refresh-icon">                </div>            </div>        </div>            <button class="change-button" ng-click="controller.changeConnectionSettings()" ng-disabled="controller.isChangeButtonDisabled()" ng-if="controller.$storage.changeTeamDetails === false">                   <div class="{{ controller.$localStorage.activeSession.state | ChangeClassFilter: \'change\' }}" > Change </div>            </button>            <div class="selected-team-title" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails === false">Selected Team: </div>            <div class="selected-team-text" ng-if="controller.$storage.changeTeamDetails === false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="selected-team-text-without-title" ng-if="controller.$storage.changeTeamDetails !== false && controller.isloggedIn" title="{{ controller.teamPath }} ">{{ controller.teamPath }} </div>            <div class="button-container" ng-if="controller.isloggedIn && controller.$storage.changeTeamDetails !== false" tabindex=-1>                 <button ng-click="controller.save()" ng-disabled="controller.isSaveDisable() || controller.$storage.activeSession.state === 1 || $root.actionInProgress" tabindex="{{ controller.enableTabIndex(!controller.isSaveDisable()) }}">                    <div class="submit-text">                         Save                    </div>                 </button>             </div>        </div>        <div class="offline-content" ng-if="controller.connectionOption === \'offline\'">        Make notes, take screenshots, file bugs, and share your findings as a report. Open to everyone. No connection to Azure DevOps Services or Team Foundation Server required. <a ng-click="controller.utilityService.openLink(\'https://aka.ms/xtmodes \')" target="_blank" ng-keydown="controller.utilityService.openLinkOnEnterPress($event, \'http://aka.ms/xtmodes \')" tabindex="0">Learn more</a><br><br>Don\'t have a Azure DevOps organization? <a ng-href="" ng-click="controller.loadSignUpPage()" ng-keydown="controller.keyDownOnNewUser($event)" tabindex="0">Sign up</a> for free.        <br>        <br>        <i> {{ controller.getOfflineFooterMessage() }} </i>        </div>        <xt-minimizepage></xt-minimizepage>    </div></div>';
}),define("FeedbackRequests/../../Common/Utility",["require","exports","../Common/Constants","../Common/ExtensionStorage","../Common/Types","../Common/FeatureAvailabiliy","../Popup2/CommonControls/InputDropdown.Template","../Popup2/SignIn/SignIn.Template"],function(e,t,o,n,r,i,a,s){function c(e){var t=!1;if(e){var o=(new Date).getTime()-e.getTime();400>o&&(t=!0)}return t}function l(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|chromium|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===o[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(o=o[2]?[d(o[1]),o[2]]:[navigator.appName,navigator.appVersion,"-?"],o.join(" "))}function d(e){switch(e.toLowerCase()){case"chrome":return o.BrowserConstants.chromeBrowserName;case"firefox":return o.BrowserConstants.firefoxBrowserName;case"edge":return o.BrowserConstants.edgeBrowserName;default:return e}}function u(e,t){var o="tfsallin.net",n=e;return e.search(o)<=0&&!g(e)&&(n+=t+"/"),n}function g(e){var t=p(e);return t.match(/.visualstudio.com$/)||t.match(/^dev.azure.com$/)||t.match(/^codeapp.ms$/)||t.match(/^codedev.ms$/)?!0:!1}function p(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname:""}function m(e,t){var o="";return e&&t&&(o=e,g(e)||(o=e.replace(t+"/",""))),o}function f(e,t,i){chrome.tabs.get(e,function(e){if(e){var a=n.LocalStorageService.retrieve(n.basicConnectionSettingsKey),s=n.LocalStorageService.retrieve(n.activeSettingsKey),c=a?a:s.serverbaseUrl,l=n.LocalStorageService.retrieve(n.loggedInKey),d=document.createElement("a");if(d.href=e.url,l&&c){var u=document.createElement("a");if(u.href=c,d.protocol==u.protocol&&d.host===u.host)return void t()}i(r.stringFormat(o.Messages.login,d.hostname))}else i(r.stringFormat(o.Messages.login,"server"))})}t.ignoreEvent=c,t.getBrowserNameAndVersion=l,t.getFullyQualifiedBrowerName=d,t.getCollectionUrl=u,t.isHostedUrl=g,t.getTfsUrl=m,t.ValidateTabHost=f;var h=function(){function e(){this.items={},this.length=0}return e.prototype.add=function(e,t){this.items[e]=t,this.length++},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}();t.Map=h;var v=function(){function e(){}return e.getFooterBrandingPerfPage=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps </a>. ":"Visual Studio Team Services</a> / Team Foundation Server using the Connected mode. "},e.getConnectedServerTypeForHosted=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps organization":"VSTS account"},e.getInputDropDownTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?a.inputDropdownControlTemplateNewBranding:a.inputDropdownControlTemplate},e.getSignInTemplate=function(){var e="";return e=i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?s.signInTemplateNewBranding:s.signInTemplate},e.getHostedBrandingName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?e?"Azure DevOps":"Azure DevOps Services":"Visual Studio Team Services"},e.getHostedBrandingShortName=function(e){return i.FeatureAvailibilityService.isFeatureEnabled(i.FeatureFlag.NewBranding)?"Azure DevOps":"Team Services"},e}();t.BrandingChangesHelper=v}),define("FeedbackRequests/../../Model/PerfDataInsightViewService",["require","exports","../Popup2/Common/ResourceUtility.Service","../Common/Utility"],function(e,t,o,n){var r=function(){function e(){}return e.getInsightView=function(t,o,n){var r=t.url,i=t.data,a=i.items.start,s=i.items.end,c=i.items.count;delete i.start,delete i.end,delete i.count,e.barHeight=o?o:10,e.barWidth=n?n:1500,e.RSvgWidth=e.barWidth+e.hShift;var l="<html><head><title>Performance Insights</title>";return l+='<script>function showB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "visible");bEnd.setAttribute("visibility", "visible");bTxtStart.setAttribute("visibility", "visible");bTxtEnd.setAttribute("visibility", "visible");}function hideB(t) {var bStart = document.getElementById("bStart" + t.id);var bEnd = document.getElementById("bEnd" + t.id);var bTxtStart = document.getElementById("bTxtStart" + t.id);var bTxtEnd = document.getElementById("bTxtEnd" + t.id);bStart.setAttribute("visibility", "hidden");bEnd.setAttribute("visibility", "hidden");bTxtStart.setAttribute("visibility", "hidden");bTxtEnd.setAttribute("visibility", "hidden");}var gTags = document.getElementsByTagName("g");var startYPos = 15;function translateBoundaries(gTag, diff){var rects = gTag.getElementsByTagName("rect"), bStart, bEnd, bTxtStart, bTxtEnd, id;for(var i=0;i<rects.length;i++){if(rects[i].getAttribute("id")){id = rects[i].getAttribute("id");bStart = document.getElementById("bStart"+id);bEnd = document.getElementById("bEnd"+id);bTxtStart = document.getElementById("bTxtStart"+id);bTxtEnd = document.getElementById("bTxtEnd"+id);bStart.setAttribute("y1", Number(bStart.getAttribute("original_y1"))+diff);bStart.setAttribute("y2", Number(bStart.getAttribute("original_y2"))+diff);bEnd.setAttribute("y1", Number(bEnd.getAttribute("original_y1"))+diff);bEnd.setAttribute("y2", Number(bEnd.getAttribute("original_y2"))+diff);bTxtStart.setAttribute("y", Number(bTxtStart.getAttribute("original_y"))+diff);bTxtEnd.setAttribute("y", Number(bTxtEnd.getAttribute("original_y"))+diff);}}}function translateTicks(y){var ticks = document.getElementsByClassName("resourceTick");for(var i=0;i<ticks.length;i++){ticks[i].setAttribute("y2", y+15);}}function showAll(){var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], 0);currY += 15;}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function filter(filter){if(filter === "All"){showAll();return;};var currY = startYPos, original_y;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;console.log("NULL");}if(gTags[i].getAttribute("type") === filter){gTags[i].setAttribute("visibility", "visible");gTags[i].setAttribute("transform", "translate(0, "+currY+")");original_y = gTags[i].getAttribute("original_y");translateBoundaries(gTags[i], currY-original_y);currY += 15;} else{gTags[i].setAttribute("visibility", "hidden");}}translateTicks(currY);document.getElementById("resourceSvg").setAttribute("height", currY+70);}function setSvgHeight() {y = 15;for(var i=0;i<gTags.length;i++){if(gTags[i].getAttribute("type") === null){continue;}y += 15;}document.getElementById("resourceSvg").setAttribute("height", y+70);}window.onload = setSvgHeight;</script>',l+='</head><body style="min-width:'+e.RSvgWidth+'">',l+=e.addCSS(),l+=e.addReportTitle(r),l+='<div class="perfInsight" width= "100%" height= "100%" >\n',s=s>i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart?s:i.items.pageTimings.loadEventEnd-i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd<=0?l+"</div>\n</body></html>":(l+=e.generateNavigationWaterfall(i.items.pageTimings,i.items.pageTimings.navigationStart,i.items.pageTimings.loadEventEnd,12),l+=e.generateResourceWaterfall(i,a,s,c),l+="</div>\n",l+=e.addFooter(),l+"</body></html > ")},e.addCSS=function(){var e='<style>.perfInsight {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 100%;text-align: left;color: #333;line-height: 120%;padding-bottom: 2px;padding-top: 1px;padding-left: 1px;position: relative;margin-bottom: 0;overflow: auto;}.line {position: relative;margin-bottom: 0;border-bottom: 2px solid #ccc;height: 2px;overflow: hidden;}#main p.inlineBlock {margin-bottom: 0;display: inline-block;}.ReportGenerationText {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 140%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;float: left;padding-top: 5px;margin-top: 20px;margin-bottom: 20px;width: 100%;}.PageLoaded {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-bottom: 10px;width: 100%;float: left;margin-top: 10px;}.ReportHeader {position: relative;width: 95%;height: 300px;margin-bottom: 10px;margin-bottom: 20px;padding-left: 1px;}.ReportTitle {font-family: "Segoe UI", Arial, Helvetica, sans-serif;font-size: 400%;text-align: left;color: #0079cc;line-height: 120%;padding-bottom: 2px;padding-top: 1px;position: relative;margin-bottom: 0;width: 100%;float: left;display: inline-block;}.ExploratoryTestingLabel {font-family: "Segoe UI", Arial, Helvetica, sans-serif;padding-left: 1px;font-size: 200%;text-align: left;color: #999;line-height: 120%;padding-bottom: 2px;position: relative;margin-top: 10px;width: 100%;float: left;display: inline-block;}.TocTitleDiv {position: relative;top: 0px;height: 60px;width: 100%;background: #eee;}.TocHeader {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;line-height: 120%;padding: 15px;position: relative;}.ReportEndText {font-family: "Segoe UI Semibold", Arial, Helvetica, sans-serif;font-size: 200%;font-weight: bold;text-align: left;color: #0079cc;position: relative;margin-bottom: 0;padding: 15px;}.GreyedTileFooterDiv {position: relative;margin-bottom: 0;margin-top: 20px;background-color: #eee;width: 100%;padding-top: 0px;height: 60px;}caption, h2{text-align: left}.appCache:hover, .blocked:hover, .connect:hover, .crossDomainRed:hover, .dns:hover, .dnsN:hover, .domContentLoadEvent:hover, .domProcessing:hover, .networkServer:hover, .onLoadEvent:hover, .redirect:hover, .request:hover, .response:hover, .responseN:hover, .tcp:hover, .total:hover, .ttfb:hover, .unload:hover {    opacity: .5}html, body, caption, h1, h2, h3, html, li, p, a, section, table, tbody, td, th, thead, tr, ul {margin: 0;padding: 0;border: none;font: inherit;vertical-align: baseline}h3 {font-weight: 700}body, html {height: 100%}html {font-size: 100.01%}body {padding: 0 32px;font-family: helvetica, arial, sans-serif;font-size: 75% ;}h1 {margin: 1em 0;font-size: 2em}caption, h2 {margin: .7em 0;font-size: 1.4em}h3 {display: inline}table {border-collapse: collapse;border: 1px solid #111}th{padding:.5em 1emfont-weight: 700}.background{background-color:#fff;fill: #fff}.background:hover {background-color: #999;fill:#999;opacity: .5}.blocked {fill: #FFE0D9;background-color: #FFE0D9;color: #000}.connect,.dns,.redirect,.request,.response{color: #fff}.redirect {fill: #DEEAF6;background-color: #DEEAF6}.dns {fill: #FEFCBA;background-color: #FEFCBA}.connect {fill: #CFC;background-color: #CFC}.request {fill: #D1A3FF;background-color: #D1A3FF}.response {fill: #ECD9FF;background-color: #ECD9FF}.unload {fill: #FB9FC6;background-color: #FB9FC6}.tick {stroke: #ccc}.resource-detail {position: absolute;visibility: hidden}.crossDomainRed {fill: #f3c;background-color: #f3c;color: #000}.total{fill:#3BCCFF;background-color: #3BCCFF;color:#000}.networkServer {fill: #C8FFFF;background-color: #C8FFFF;color: #fff}.tcp {fill: #FEFCBA;background-color: #FEFCBA;color: #fff}.appCache {fill: #F7CAAC;background-color: #F7CAAC;color: #fff}.ttfb {fill: #CFC;background-color: #CFC;color: #fff}.dnsN {fill: #FCF;background-color: #FCF;color: #fff}.domProcessing {fill: #FCDF74;background-color: #FCDF74;color: #fff}.domContentLoadEvent {fill: #FCCC74;background-color: #FCCC74;color: #fff}.onLoadEvent {fill: #A8D08D;background-color: #A8D08D;color: #fff}.responseN {fill: #9CF;background-color:#9CF;color: #fff}</style>';return e},e.generateResourceWaterfall=function(t,o,n,r){e.RSvgHeight=(r+1)*(e.barHeight+e.margin)+e.vShift,e.RBoundaries="",e.setScale(o?o:0,n,!1);for(var i in e.typesDict)e.typesDict[i].done=!1,e.typesDict[i].count=0;var a='<div>\n<div class="TocTitleDiv">\n<div class="TocHeader">Resource Chart</div>\n</div>\n<div class="line"></div><div style="float:right;">\n'+e.addRTable()+"</div>\n</div><br>\n";a+=e.addSelectMenu(t)+"<br><br>",a+='<div style="margin-bottom:10px" class="resourceTimingChart">\n<svg id="resourceSvg" width="100%" height="'+e.RSvgHeight+'px">\n<g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Resources </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',a+=e.addNavigationChart(t.items.pageTimings,0,e.barWidth,e.barHeight,"Navigations");var s=1;for(var c in t.items)if("pageTimings"!==c&&"timestamp"!==c&&t.items[c]&&t.items[c].intervals){var l=e.generateChart(t.items[c],s++,e.barWidth,e.barHeight,c);a+=l}return a+=e.getTicks(!1),a+='</g>\n</svg><hr style="width='+(e.barWidth+300)+'">\n</div>'},e.generateNavigationWaterfall=function(t,o,n,r){var i={total:["Total","0"],networkServer:["Network/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["tcp","connectStart"],appCache:["App-Cache","domainLookupStart"],dnsN:["Dns","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]};e.NSvgWidth=e.barWidth+e.hShift,e.NSvgHeight=r*(e.barHeight+e.margin)+e.vShift,e.NBoundaries="",e.setScale(o?o:0,n,!0);var a='<div>\n\n<div class="TocTitleDiv">\n<div class="TocHeader">Navigation Chart</div>\n</div>\n<div class="line"></div></div>\n<div style="margin-bottom:10px;margin-top:20px" class="NavigationTimingChart">\n<svg width="100%" height="'+e.NSvgHeight+'px"><g transform="translate(950, 19)"><text style="font-weight: bold;">Time (ms) </text></g><g transform="translate(25, 19)"><text style="font-weight: bold;">Navigations </text></g><g transform="translate(165, 19)"><text style="font-weight: bold;">Total Time (ms)</text></g><g transform="translate(250, 60)">',s=0;for(var c in i)"0"===i[c][1]&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c])),t[c]>=0&&t[i[c][1]]>=0&&(a+=e.generateNavigationChart(t,s++,e.barWidth,e.barHeight,c,i[c]));return a+=e.getTicks(!0),a+='</g></svg><hr style="width='+(e.barWidth+300)+'">\n</div>\n<br>'},e.generateNavigationChart=function(t,o,n,r,i,a){var s,c=o*(r+5);s='<g transform="translate(0, '+c+')" style="opacity: 1">',s+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"></rect>',0===o&&(s+=e.generateNRect(o,t.navigationStart,t[i],i,n,r,c)),t[a[1]]>=0&&(s+=e.generateNRect(o,t[a[1]],t[i],i,n,r,c)),s+='<text x="-250" y="10" class="resource-label">'+a[0]+"</text>";for(var l=new Array,d=0;d<e.totalTimeInLength;d++)l.push("&nbsp;");for(var u=t[i].toFixed(2),d=u.length-1,g=e.totalTimeInLength-1;d>=0;d--,g-=2)l[g]=u[d],l[g-1]="";return s+='<text x="-100" y="10" class="resource-label">'+l.join("")+" </text>",s+"</g>"},e.generateChart=function(t,o,n,r,i){var a,s=o*(r+5);if(a='<g visibility="visible" original_y="'+s+'" type="'+t.type+'" transform="translate(0, '+s+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>',t.intervals.requestStart>0)for(var c in t.intervals)a+=c+"- "+t.intervals[c]+" ; ";else a+="Total duration- "+(t.end-t.start).toString();a+="</title></rect>",t.intervals.requestStart>0?(a+=e.generateRect(o,t.start,t.intervals.requestStartDelay,"blocked",n,r,s),a+=e.generateRect(o,t.intervals.redirectStart,t.intervals.redirect,"redirect",n,r,s),a+=e.generateRect(o,t.intervals.dnsLookupStart,t.intervals.dnsLookupTime,"dns",n,r,s),a+=e.generateRect(o,t.intervals.connectStart,t.intervals.connectTime,"connect",n,r,s),a+=e.generateRect(o,t.intervals.requestStart,t.intervals.request,"request",n,r,s),a+=e.generateRect(o,t.intervals.reponseStart,t.intervals.response,"response",n,r,s)):a+=e.generateRect(o,t.start,t.end-t.start,"response",n,r,s);var l=t.name.length>20?t.name.substr(0,10)+"....."+t.name.substr(-5,t.name.length):t.name;a+='<text x="-250" y="10" class="resource-label">'+l+"<title>"+i+"</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.totalDuration.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.addNavigationChart=function(t,o,n,r,i){var a,s={networkServer:["NW/Server","navigationStart"],crossDomainRedirect:["Cross-Domain-Redirect","navigationStart"],tcp:["TCP","connectStart"],appCache:["AppCache","domainLookupStart"],dnsN:["DNS","domainLookupStart"],ttfb:["Time to first Byte","requestStart"],responseN:["Response","responseStart"],unload:["Unload","unloadEventStart"],domProcessing:["DomProcessing","domProcessingStart"],domContentLoadedEvent:["DomContentLoaded","domContentLoadedEventStart"],onLoadEvent:["Load Event","onLoadEventStart"]},c=o*(r+e.margin);a='<g transform="translate(0, '+c+')" style="opacity: 1">',a+='<rect x="-250" y="0" width="100%" height="'+r+'px" class="background"><title>Total Time '+t.total+"</title></rect>";for(var l in s)"0"===s[l][1]&&(a+=e.generateRect(o,0,t[l],l,n,r,c)),t[l]>=0&&t[s[l][1]]>=0&&(a+=e.generateRect(o,t[s[l][1]]-t.navigationStart,t[l],l,n,r,c));a+='<text x="-250" y="10" class="resource-label">'+i+"<title>Page Navigation Timings</title></text>";for(var d=new Array,u=0;u<e.totalTimeInLength;u++)d.push("&nbsp;");for(var g=t.total.toFixed(2),u=g.length-1,p=e.totalTimeInLength-1;u>=0;u--,p-=2)d[p]=g[u],d[p-1]="";return a+='<text x="-100" y="10" class="resource-label">'+d.join("")+" </text>",a+"</g>"},e.generateRect=function(t,o,n,r,i,a,s){var c="";if(o>=0){var l=o*e.RScale,d=l+n*e.RScale,u=o+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.RScale+'" height="'+a+'" class="resourceRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.RBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'" original_y1="'+(s+10)+'" original_y2="'+(s-8)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle" original_y="'+(s-10)+'">'+o.toFixed(0)+"</text>",e.RBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'" original_y1="'+(s+10)+'" original_y2="'+(s+25)+'"></line>',e.RBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle" original_y="'+(s+30)+'">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.generateNRect=function(t,o,n,r,i,a,s){var c="";if(o>0){var l=(o-e.NStartMs)*e.NScale,d=l+n*e.NScale,u=o-e.NStartMs+n,g=r;r="responseN"===r||"dnsN"===r?r.substr(0,r.length-1):r,c='<rect onmouseover="showB(this)" onmouseout="hideB(this)" id="'+g+t+'" x="'+l+'" y="0" width="'+n*e.NScale+'" height="'+a+'" class="navigationRect '+r+'"><title>'+r+"- "+n+"</title></rect>",e.NBoundaries+='<line class="boundaryStart" stroke="blue" visibility="hidden" id="bStart'+g+t+'" x1="'+l+'" x2="'+l+'" y1="'+(s+10)+'" y2="'+(s-8)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtStart'+g+t+'" x="'+l+'" y="'+(s-10)+'" dy="-3" text-anchor="middle">'+(o-e.NStartMs).toFixed(0)+"</text>",e.NBoundaries+='<line class="boundaryEnd" stroke="blue" visibility="hidden" id="bEnd'+g+t+'" x1="'+d+'" x2="'+d+'" y1="'+(s+10)+'" y2="'+(s+25)+'"></line>',e.NBoundaries+='<text fill="blue" visibility="hidden" id="bTxtEnd'+g+t+'" x="'+d+'" y="'+(s+30)+'" dy="+5" text-anchor="middle">'+u.toFixed(0)+"</text>",e.currX+=n*e.RScale}return c},e.setScale=function(t,o,n){n?(e.NStartMs=t,e.NEndMs=o-o%10+100,e.NScale=e.barWidth/(e.NEndMs-e.NStartMs)):(e.RStartMs=0,e.REndMs=o-o%10+100,e.RScale=e.barWidth/(e.REndMs-e.RStartMs))},e.getTicks=function(t){var o,n,r,i,a;if(t){for(o='<g transform="translate(0, -6)">',i=Number((e.NEndMs-e.NStartMs)/10),a=0;a<=e.NEndMs-e.NStartMs;a+=i)n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.NEndMs-e.NStartMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.NBoundaries+"</g>"}for(o='<g transform="translate(0, -6)">',i=Number((e.REndMs-e.RStartMs)/10),a=e.RStartMs;a<=e.REndMs;a+=i)n=(a-e.RStartMs)*e.RScale,r=e.RSvgHeight+30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick resourceTick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>";return a-i<e.REndMs&&(n=a*e.NScale,r=e.NSvgHeight-30,o+='<line x1="'+n+'" x2="'+n+'" y1="0px" y2="'+r+'" class="tick"></line>',o+='<text x="'+n+'" y="0" dy="-3" text-anchor="middle">'+a.toFixed(0)+"</text>"),o+e.RBoundaries+"</g>"},e.addRTable=function(){var e='<br><br>\n<table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;">\n<thead><tr><td width="16.67%" style="padding:0;background-color:#FFE0D9">Blocked</td><td width="16.67%" style="padding:0;background-color:#DEEAF6">Redirect</td><td width="16.67%" style="padding:0;background-color:#FEFCBA">DNS</td><td width="16.67%" style="padding:0;background-color:#CCFFCC">Connect</td><td width="16.67%" style="padding:0;background-color:#D1A3FF">Request</td><td width="16.67%" style="padding:0;background-color:#ECD9FF">Response</td></tr></thead>\n</table>\n';return e},e.addNTable=function(){var e='<br><br><table style="margin:0 auto;text-align:center;padding:0;margin-bottom:10px;"><thead><tr><td width="9.09%" style="padding:0;background-color:#C8FFFF">NW/Server</td><td width="9.09%" style="padding:0;background-color:#ff33cc">Cross-Domain-Redirect</td><td width="9.09%" style="padding:0;background-color:#FEFCBA">TCP</td><td width="9.09%" style="padding:0;background-color:#F7CAAC">AppCache</td><td width="9.09%" style="padding:0;background-color:#FFCCFF">DNS</td><td width="9.09%" style="padding:0;background-color:#CCFFCC">Time to first Byte</td><td width="9.09%" style="padding:0;background-color:#99CCFF">Response</td><td width="9.09%" style="padding:0;background-color:#FB9FC6">Unload</td><td width="9.09%" style="padding:0;background-color:#FCDF74">DomProcessing</td><td width="9.09%" style="padding:0;background-color:#FCCC74">DomContentLoad</td><td width="9.09%" style="padding:0;background-color:#A8D08D">Load Event</td></tr></thead></table>';return e},e.addSelectMenu=function(t){var o=0;for(var n in t.items)"pageTimings"!==n&&"timestamp"!==n&&t.items[n]&&t.items[n].intervals&&t.items[n].intervals.requestStart>=0&&t.items[n].type&&(e.typesDict[t.items[n].type.split(" ")[0]].done=!0,e.typesDict[t.items[n].type.split(" ")[0]].count++,o++);var r='<br><select style="margin-top:10px" onchange="filter(this.value)">';r+='<option value="All" title="'+o+'">All</option>';for(var i in e.typesDict)e.typesDict[i].done&&(r+='<option value="'+e.typesDict[i].name+'" title="'+e.typesDict[i].count+'">'+e.typesDict[i].name+"</option>");return r+"</select>"},e.addFooter=function(){var e=n.BrandingChangesHelper.getFooterBrandingPerfPage(),t='<div class="ReportGenerationText"><p class="inlineBlock">This page load report was generated using <a style="color:0079cc" href="http://aka.ms/xtmarketplace">'+o.ResourceUtilityService.GetProductNameWithExtensionMessage()+'</a> for <a style="color:0079cc" href="https://visualstudio.com">'+e+'<a style="color:0079cc" href="http://aka.ms/xtlearn">Learn more</a></p>';return t+='<div class="GreyedTileFooterDiv"><div class="ReportEndText"><p>End of report.</p></div></div><div class="line"></div>',t+"</div>"},e.addReportTitle=function(e){var t='<div class="ReportTitle">\n<p class="inlineBlock">Page Load Report</p></div>\n',n=e.length>123?e.substr(0,123)+"...":e,r='<div class="ExploratoryTestingLabel">\n<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAAKNyObAAAIYUlEQVRYR+1YfXBU1RW/977dLKkhbULTFgTKRJSY/Yg2rSNFnEw7Tlu1DnaMlewmxMLASCC7RP/oOLYsjBVGxWQ3JANBJU12ozYw004/xtoPY6dTi5ha9iMIYUaQqh1pCQ0Bk82+d/s7b/dmN58kzMhfvpk7++59997zO+f8zj3nLmczPpLT55qSlkLDqu/D6wo0iWaOp9/VDmrMHEdn1OB8dzhSf8jP/ALNmFnW5K/ZG076WlHht/T0+JPVzmCtZPLgXDfH/JOhqBcKEVZOSs3pmRFcSuPtsqas5UbD0A9h8vWQMB8SNDQdNvyfKY2b1pyHdl1a+kX8DgNPMBTxPfWpWC5bzUq7PyfXkl9kGNoRjF9PVhGj2jdljqYN658kbZplPZPy6TTWBp3ltHdFNw/MyVQTJs9oOTVXaU6/p5wF72F8KVofXGZXczzO4Ca4j3gJjHx9OFb/4sby/da23k2jVwtwVuBSnGGsdlm7TZ9/8ST4twTd46FovX1jeZulrXcj8XIzfLvXBMfkxnDU+3xFxQ6NOHsNwHG5dXnQdiGX9WfAeUtV0LhdTZu55C0ZcL4D6ttn4D6zXBYH5hAQXNYuOzhvfEBMzTlsuqkz6m27ppwjYYvPF5xCOH5VHSVTBgRntUhbHdckWscyhT24xBAsCmCUJfopNWVSXKBOHSWc8z2dkfrHKit/oXV3P6h/qtGqhHicgVcg6MG0sDDAedRBW2VvvEUI8Ta+EVWGpSErwnHfUQKvwFX0MIPSIfXJquavOTZ1UXBFzilgbmfz9zgzfof9qLoYMpKaq+v4ljNk1XhlKScLIUs04wjekgIj94+ULKqbjeVSMiqx7/ji4ArgJPezHfzD8oXzLidGjkHgDWQZyfk2cKop47ZUBqksb8u3jQwfZYJ1WQbzd7effnh4bfmzX9QSOd/B2jthsmLOZS44O4L397Hkb7rUX3059uhZc/0EGswIbsydjuDPAOlx2gALes8uGLi9qKhUTqVtlbO1gBK+Gdl5g08A9gYs+/IMvLuAPTsZz3myM/LIx9kApwWnkv26sufsuqH1YnOr6SzOV8Fqf5+K7GOR62x2ggJhTHdOAPUR+gPQ8DpYbzHeTd6llOZndUOu64p7X1d7TwsuEwTB1wGpIkUj1hqKeeumAqaUqXYFHFLKP0Hcl9JyLyB6XwChDklpOSHYaCMU3ActL2HD+1EKopphi9JzR1DR3IeK5jWSMSU4JXx8BSw/tlqEYyhx3iwwzxWZgcGUe4mb8fKF822JEUSsXJ4W9gbT9Q2hvoZTykJuZ1OV1bD+uT1e928aqynZu8Cw6HthuofQpT0HLZpxa/s/fWcmgSML0KIztxYuGE0aMVigCN0kirR7QjHfHya4yexmlGlqlIz7FDDLxfzvUlDQcbOo9yM9dYykIlJRgLh5aeEAz7mk7ceX6rSHDsNDD0wCN+ZOV+B5uHE9aYNJF2CNvXCFZnBpbg4NDKgpOBP/Ql23/yHHniUWbjmOT7loA0mLcL38ztYPx6cwySvtO6zdcX+C9nA7mn7IOF8rmfXhvBxt6HJiGMZgN5JMwYzV48ApYFXOpjsF4z1pM5Mlp49qyTtCsfp1HkfgMcx6hoTCetvD0fqdE4Epq1WVBW/TpPwJ1LwXfLwP2eTXtM7jaqqBAX5O7wiQA1lCoVVlt2B9fZpNFNBJT5FGHDDdjGdiRUt9C8i9lq5/yB6/Qf9utIQw2E0dce/7mYtN6vblublxIbNorYC/xtyRsxdCEe8GpUTlyudybUPitBlMkvWPgctkgsCPMbgLSyknjoV6GmD2j3l/BbiVdLQAHA5p5kI7KYT2/aQhznVFHwEdiJPd4ty5Pr74vwV/hdD3AOobGP4CLkgrit/9j3kJituLPpfLkoXgUBjf78DQsAlOJfZ1juZinUsSQryhb9O5U12spc5E6UvRre8CHEXkDSD1W7DTaXDpl6FI/Ut0ayOOgV+PwoXPGhq7ietwHTdC4YivVeXmmrLAHYbO6iAxP+0B4nom2tKuuWcWVqNlKYDcKA9Ftv0Da+Pol4Jv8Q8WnL+FLjYqZ1bd3LJUWHQiex7aIBbuwgVod/Z9Vr1jn9cw5y60BHiWKmvcruADCMTuWQIjcKbbQcg1HVHvr7DpH9H/NtqQEHpJx7GGD7KqmTcwvhqgWmVSe0YVDJlqJMVJOlaS8wdPYO5SyhhI7H7Rv7wwT+SyGG5VlFLIIioICMR0jxkQOOF3our1u52BndjwiZRJ6WroO0DJrtoR+JHkwiMEa+g4Vv9OtqfUxsrCbkfzXSgMfp/GcNh0K7Teg5+GOVhtzHJ4OYK67naUVJRPSbgAulMFw9w58nmb8clIoqwztpWi3zysKTB6erbD6qo8klxVzMDxF0yjYIDO/F5e42xcaTBBZqfInCkIprIgWdkA724j3uHuehjh+wNzYvqYoFci/UBxgTG+tksfXfhu0soZ/CkQ7UhZnr+ZKPnKal7tDLwNCeWmkNm5Mxtk6riRzEw3OERXQOOjGKM/dASYtM86mL+NUhgtIgqdLCv8OjMs/dn/o2QBI6pocO3KzojvCIcpL2PALIeu8kkpJfkaZIrfepyNOGDFobQXiLvHwMGnE4bxane84bzbFegQhrGLiSSKTdu3kCVAJ7PqMRWF67aAwy1mVYIq4SCIXHuVwLKXjeLesIruDW5H4H7OGaUhugipB7Ucp0jEIwn0MjT6Q0g9SQDzKWDkam6Gb97gFvDza1RJcoFt5/hISTUAt4LiJ7Sh/CfJjW57sBSOfQqbUUq7gmd4j2D64x3RbW/OqhKeI76s6SmiK/J7HI0VyBao1fgqTCpGs6HR32J0h3gLhekr4ZiP8vKkO8T/AUdXecW4X2hcAAAAAElFTkSuQmCC" style="vertical-align: sub"> '+o.ResourceUtilityService.GetProductNameMessage()+'</img></p><p style="margin-top:50px"> \nPage loaded: <a target="_blank" href="'+e+'" style="color:#0079cc" title="'+e+'">'+n+"</a></p\n><br></div>\n";return t+r},e.hShift=300,e.vShift=75,e.margin=5,e.totalTimeInLength=20,e.typesDict={Image:{name:"Image",done:!1,count:0},JavaScript:{name:"JavaScript",done:!1,count:0},Php:{name:"Php",done:!1,count:0},Style:{name:"Style Sheet",done:!1,count:0},Flash:{name:"Flash",done:!1,count:0},Font:{name:"Font",done:!1,count:0},Video:{name:"Video",done:!1,count:0},Source:{name:"Source Map",done:!1,count:0},XHR:{name:"XHR",done:!1,count:0},Object:{name:"Object resource",done:!1,count:0},SVG:{name:"SVG",done:!1,count:0},Link:{name:"Link",done:!1,count:0},Html:{name:"Html",done:!1,count:0},Script:{name:"Script resource",done:!1,count:0},CSS:{name:"CSS resource",done:!1,count:0},Embed:{name:"Embed resource",done:!1,count:0},Doc:{name:"Doc",done:!1,count:0},Manifest:{name:"Manifest",done:!1,count:0},Other:{name:"Other Request",done:!1,count:0}},e}();t.PerfInsightView=r}),define("FeedbackRequests/../../Model/ModelHelper",["require","exports","../Model/Model","../Common/SessionData","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/BrowserActionService","../Model/PerfDataInsightViewService","../Common/Constants","../Common/ResourceHelper"],function(e,t,o,n,r,i,a,s,c,l,d){function u(e,t,o){o?o.$emit(e.toString(),t):i.MessagingFactory.getBroadcastingService().broadcast(e,t)}function g(e){var t=Q.defer(),o={windowId:e};return chrome.tabs.query(o,function(e){t.resolve(e[0].id)}),t.promise}function p(e,t,o){var n=new Image;n.onload=function(){var e=document.createElement("CANVAS"),n=e.getContext("2d");e.height=this.height,e.width=this.width,n.drawImage(this,0,0);var r=e.toDataURL(o);t(r)},n.src=e}var m=n.SystemInformation,f=n.Screenshot,h=n.Note,v=n.Video,S=n.PerfData,b=n.ActionLog,y=r.LocalStorageService,T=function(){function e(){}return e.getAttachment=function(e){var t;if(e instanceof f)t={url:e.id,name:e.name,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Screenshot,source:e.source,timeStamp:new Date};else if(e instanceof m)t={url:e.id,name:e.id,length:e.size,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.SystemInformation,timeStamp:new Date};else if(e instanceof h)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id),type:o.AttachmentType.Note};else if(e instanceof v)t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getContentFunction(e.id,e.isXTSession?!0:!1),type:o.AttachmentType.Video};else if(e instanceof S){var n=JSON.parse(e.content),i=c.PerfInsightView.getInsightView(n),a=new Blob([i],{type:"application/json"});r.PersistentStorageFactory.getStorageService().writeBlob(e.id,a,function(){},function(){}),t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getPerfDataContentFunction(e.id,i),type:o.AttachmentType.PerfData}}else e instanceof b&&(t={url:e.id,name:e.id,length:e.size,timeStamp:new Date,state:o.AttachmentState.Created,getContent:this.getActionLogContentFunction(e.id,e.content,e.isXTSession?!0:!1),type:o.AttachmentType.ActionLog});return t},e.getContentFunction=function(e,t){return void 0===t&&(t=!0),function(o){r.PersistentStorageFactory.getStorageService().getBlob(e,function(e){o(e)},function(e){console.log(e)},t)}},e.getActionLogContentFunction=function(e,t,o){return void 0===o&&(o=!0),function(o){var n=new Blob([t],{type:"text/plain"}),r=new File([n],e);o(r)}},e.getPerfDataContentFunction=function(e,t){return function(e){var o=new Blob([t],{type:"application/json"}),n=o;e(n)}},e}();t.AttachmentConverter=T,t.sendMessage=u,t.getTabId=g,t.convertToDataUrl=p;var C=function(){function e(){}return e.getError=function(e){var t=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(!t)return null;var o=t[e];return o&&0!==o.length?o.pop():null},e.saveError=function(t,o,n,i,c,l){if(void 0===n&&(n=0),void 0===i&&(i=!0),void 0===c&&(c=!0),t){var d=r.LocalStorageService.retrieve(r.toolbarErrorMap);
d||(d=new Object);var g=d[o];g||(g=[]);var p=this.getErrorMessage(t);if(p){p=p.trim(),0===p.indexOf("404")&&(p=e.GetNotSupportedTfsErrorMessage());var m=t.status;g.push({errorCode:m,errorMessage:p,errorLevel:n,sticky:i,showNotification:c}),d[o]=g,y.store(r.toolbarErrorMap,d),u(a.NotificationType.ActivityErrorChanged,{toolbarType:o,errorMessage:p,errorLevel:n,showNotification:c},l),0===n&&s.getService().setIcon(s.ExtensionIconType.Error)}}},e.clearLastError=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){n.pop(),o[e]=n,y.remove(r.toolbarErrorMap),y.store(r.toolbarErrorMap,o);var i,c,l=null;if(n.length>0){var d=n.pop();l=d.errorMessage,i=d.errorLevel,c=d.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:l,errorLevel:i,showNotification:c},t)}}},e.clearNonStickyErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];if(n&&0!==n.length){var i=[];for(var c in n){var l=n[c];l.sticky&&i.push(l)}o[e]=i,y.store(r.toolbarErrorMap,o);var d,g,p=null;if(i.length>0){var m=i.pop();p=m.errorMessage,d=m.errorLevel,g=m.showNotification}else s.getService().clearError();u(a.NotificationType.ActivityErrorChanged,{toolbarType:e,errorMessage:p,errorLevel:d,showNotification:g},t)}}},e.clearAllErrors=function(e,t){var o=r.LocalStorageService.retrieve(r.toolbarErrorMap);if(o){var n=o[e];n&&0!==n.length&&(o[e]=[],y.store(r.toolbarErrorMap,o),u(a.NotificationType.ActivityErrorChanged,{toolbarType:e},t),s.getService().clearError())}},e.getErrorMessage=function(e,t){void 0===t&&(t=!0);var o=null;return"string"==typeof e||e instanceof String?o=e:(e.statusText?o=e.statusText:e.message?o=e.message:e.errorMessage&&(o=e.errorMessage),t&&(o&&o.match("parsererror$")||e.status&&401===e.status)&&(o="Unable to connect to server. Click on repair in connection settings page. Details:"+o)),o},e.GetNotSupportedTfsErrorMessage=function(){var e=d.getTFSNotSupportedMessageForBasicUser(),t=r.LocalStorageService.retrieve(r.connectedModeKey);return t===l.ConnectionOptionConstants.stakeholderMode&&(e=d.getTFSNotSupportedMessageForStakeholder()),e},e}();t.ErrorHelper=C}),define("FeedbackRequests/../../Tracing/Tracing",["require","exports","../Common/ExtensionStorage","../Messaging/ChromeMessaging","../Messaging/Messaging","../Model/ModelHelper"],function(e,t,o,n,r,i){var a=i.ErrorHelper;!function(e){e[e.Error=0]="Error",e[e.Perf=1]="Perf",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Verbose=4]="Verbose"}(t.TraceLevel||(t.TraceLevel={}));var s=t.TraceLevel;!function(e){e[e.Background=0]="Background",e[e.Popup=1]="Popup",e[e.AnnotationTool=2]="AnnotationTool"}(t.Component||(t.Component={}));var c=t.Component,l=function(){function e(){}return e.initializeService=function(e){var t=this;this.component=e,this.setTracingLevel(),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.setTracingLevelFromString(e)},r.NotificationType.TracingLevelChanged),this.component===c.Background&&(o.PersistentStorageFactory.getStorageService().createDirectory(this.tracingDirectoryName,this.tracingDirectorySize,function(){},function(){}),n.MessagingFactory.getSubscriptionService().subscribe(function(e,o){t.flushTraceQueue()},r.NotificationType.SessionStop),n.MessagingFactory.getSubscriptionService().subscribe(function(e){t.traceInternal(e.traceLevel,e.formattedMessage,e.optionalParams)},r.NotificationType.Trace))},e.traceEnter=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.time(e),this.trace(t,o,s.Verbose,n,r)},e.traceLeave=function(e,t,o,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this.tracingLevel>=s.Perf&&console.timeEnd(e),this.trace(t,o,s.Verbose,n,r)},e.traceError=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Error,a.getErrorMessage(o),n)},e.traceWarning=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Warning,o,n)},e.traceInfo=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Info,o,n)},e.traceVerbose=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.trace(e,t,s.Verbose,o,n)},e.trace=function(e,t,o,i){for(var a=[],l=4;l<arguments.length;l++)a[l-4]=arguments[l];if(!(this.tracingLevel<o)){var d=new Date(Date.now()),u="("+d.toISOString()+")",g="["+c[this.component]+"-"+s[o]+" @"+u+"];XTModule:"+e+";XTModuleTracepoint:"+t+";"+i;this.component!==c.Background?n.MessagingFactory.getBroadcastingService().broadcast(r.NotificationType.Trace,{traceLevel:o,formattedMessage:g,optionalParams:a}):this.traceInternal(o,g,a)}},e.traceInternal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(e){case s.Verbose:console.log(t,o),this.persistTrace(10,t,o);break;case s.Info:console.info(t,o),this.persistTrace(5,t,o);break;case s.Warning:console.warn(t,o),this.persistTrace(0,t,o);break;case s.Error:console.error(t,o),this.persistTrace(0,t,o)}},e.setTracingLevel=function(){var e=this;o.LocalStorageService.retrieveAsync(this.tracingLevelKey,function(t){e.setTracingLevelFromString(t)})},e.setTracingLevelFromString=function(e){if(void 0!=e){var t=Number(e);this.tracingLevel=t}},e.persistTrace=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var r=this.getFormattedTrace(t,o);this.traceQueue.push(r),this.traceQueue.length>e&&this.flushTraceQueue()},e.getFormattedTrace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n in t)e="\n"+e.replace("{"+n+"}",arguments[n]);return e},e.flushTraceQueue=function(){if(this.traceQueue.length>0){var e=this.traceQueue;this.traceQueue=new Array;var t=new Blob([e],{type:"text/plain"});o.PersistentStorageFactory.getStorageService().writeBlobInDir(this.tracingDirectoryName,this.getTraceFileName(),t,function(){},function(){},!0)}},e.getDayOfWeek=function(){var e=new Date;return e.getDay()},e.getTraceFileName=function(){var e=this.getDayOfWeek(),t=o.LocalStorageService.retrieve(this.lastTraceDate),n=this.traceFileNamePrefix+e;return t!==e&&(o.LocalStorageService.store(this.lastTraceDate,e),o.PersistentStorageFactory.getStorageService().removeBlobInDir(this.tracingDirectoryName,n,function(){},function(){})),n},e.tracingLevelKey="TracingLevel",e.component=c.Background,e.tracingDirectoryName="Logs",e.tracingLevel=s.Error,e.traceFileNamePrefix="xt-console-traces-",e.traceQueue=new Array,e.tracingDirectorySize=104857600,e.lastTraceDate="LastTraceDate",e}();t.TracingService=l}),define("FeedbackRequests/FeedbackRequests.Controller",["require","exports","../../Tracing/Tracing","../../Messaging/ChromeMessaging","../../Model/Model","../../Model/ModelHelper","../../Common/Constants"],function(e,t,o,n,r,i,a){var s="FeedbackRequestsController",c=function(){function e(e,t,o,n,r,i,s,c,l,d){this.$sce=e,this.$location=t,this.$localStorage=o,this.$filter=n,this.$scope=r,this.$route=i,this.workItemService=s,this.utilityService=c,this.$rootScope=l,this.sessionService=d,this.enterKeyCode=a.KeyCodeConstants.enterKeyCode,this.spaceBarKeyCode=a.KeyCodeConstants.spaceBar,this.emptyPendingListMessage="There are no pending feedback requests to display for connected project/team",this.emptyCompletedListMessage="There are no completed feedback requests to display for connected project/team",this.emptyDeclinedListMessage="There are no declined feedback requests to display for connected project/team",this.uninitializeMessaging(),this.initializeFeedbackRequests(),this.$localStorage.$sync(),this.$localStorage.stakeholderTraceabilityPageUrl=a.StakeHolderTraceabiltyPageUrls.feedbackListsPageUrl,this.$localStorage.$apply(),this.utilityService.setTabindexOnToolbarItems("item-traceability.showing")}return e.prototype.initializeFocus=function(){$("#"+a.ElementIds.xtMinimizeId).focus()},e.prototype.generateCssForSelectedWorkItem=function(e){return this.selectedFeedbackRequest&&e.id===this.selectedFeedbackRequest.id?"selected":""},e.prototype.setSelectedFeedback=function(e){this.selectedFeedbackRequest=e},e.prototype.getTabIndex=function(e){return!e||!this.feedbackRequests||this.feedbackRequests.length<1?-1:this.getFilteredFeedbackRequests()[0].id===e.id?0:-1},e.prototype.setSelectedFeedbackOnKeyDown=function(e,t){var o=e.keyCode;$(e.target);if(o===this.enterKeyCode)return void this.setSelectedFeedback(t);var n=this.getFilteredFeedbackRequests();n.length<=0||this.utilityService.handleArrowKey(e,t,n[n.length-1].id)},e.prototype.getFeedbackRequestsCount=function(){return this.feedbackRequests?this.feedbackRequests.length:0},e.prototype.getFilteredFeedbackRequests=function(){return this.$filter("feedbackFilter")(this.feedbackRequests,this.feedbackStateOption)},e.prototype.viewFeedbackDetail=function(){this.$localStorage.$sync(),this.$localStorage.selectedFeedback=this.selectedFeedbackRequest,this.$localStorage.stakeholderTraceabilityPageUrl=a.StakeHolderTraceabiltyPageUrls.feedbackDetailsPageUrl,this.$localStorage.$apply(),this.$location.url("/FeedbackRequestDetail")},e.prototype.showFeedbackCompletionButtons=function(){var e=!1;return this.feedbackStateOption===a.FeedbackStateOptionConstants.pendingState&&(e=!0),e},e.prototype.selectCompleteFeedback=function(e,t){(e.keyCode===this.enterKeyCode||e.keyCode===this.spaceBarKeyCode)&&(this.completeFeedbackRequest(t),this.utilityService.setTabindexOnToolbarItems("item-traceability.showing"),e.stopPropagation())},e.prototype.completeFeedbackRequest=function(e){var t=this,o=e;if(this.$rootScope.actionInProgress=!0,o){var n=o.associatedFeedbackSession;this._isGivenSessionActive(n)?this.sessionService.stopSession(function(e){n.state=r.SessionState.Completed,t.updateFeedbackSessionInLocalStore(o,e)},function(e){i.ErrorHelper.saveError(e,r.ToolbarType.Traceability,1,!0,!0,t.$rootScope),t.$rootScope.actionInProgress=!1}):this.updateFeedbackSessionState(e,r.SessionState.Completed)}else this.$rootScope.actionInProgress=!1},e.prototype.selectDeclineFeedback=function(e,t){(e.keyCode===this.enterKeyCode||e.keyCode===this.spaceBarKeyCode)&&(this.declineFeedbackRequest(t),this.utilityService.setTabindexOnToolbarItems("item-traceability.showing"),e.stopPropagation())},e.prototype.declineFeedbackRequest=function(e){var t=this,o=e;if(this.$rootScope.actionInProgress=!0,o){var n=o.associatedFeedbackSession;this._isGivenSessionActive(n)?this.sessionService.declineSession(function(e){n.state=r.SessionState.Declined,t.updateFeedbackSessionInLocalStore(o,e)},function(e){i.ErrorHelper.saveError(e,r.ToolbarType.Traceability,1,!0,!0,t.$rootScope),t.$rootScope.actionInProgress=!1}):this.updateFeedbackSessionState(e,r.SessionState.Declined)}else this.$rootScope.actionInProgress=!1},e.prototype.getEmptyListMessage=function(){var e=this.emptyPendingListMessage;return this.feedbackStateOption===a.FeedbackStateOptionConstants.declinedState?e=this.emptyDeclinedListMessage:this.feedbackStateOption===a.FeedbackStateOptionConstants.completedState&&(e=this.emptyCompletedListMessage),e},e.prototype.showNoFeedbackRequestsMessage=function(){var e=!0;return this.$rootScope.actionInProgress&&(e=!1),e},e.prototype.updateFeedbackSessionState=function(e,t){var o=this,n={feedbackId:e.id,session:e.associatedFeedbackSession,state:t};this.sessionService.createOrUpdateFeedbackSessionWithGivenState(n,function(t){e.associatedFeedbackSession=t,o.updateFeedbackSessionInLocalStore(e,t)},function(e){i.ErrorHelper.saveError(e,r.ToolbarType.Traceability,1,!0,!0,o.$rootScope)})},e.prototype.onChangeState=function(){this.$localStorage.$sync(),this.$localStorage.feedbackStateOption=this.feedbackStateOption,this.$localStorage.$apply(),this.selectedFeedbackRequest=null},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll()})},e.prototype.initializeFeedbackRequests=function(){this.feedbackStateOption=this.getFeedbackStateOptionIniatlValue(),delete this.$localStorage.selectedFeedback,this.$localStorage.$apply(),this.getFeedbackRequests()},e.prototype.getFeedbackRequests=function(){var e=this;i.ErrorHelper.clearAllErrors(r.ToolbarType.FeedbackRequests,this.$rootScope),o.TracingService.traceVerbose(s,1,"Starting Fetch of Feedback Requests "),this.$rootScope.actionInProgress=!0;var t=this.getFeedbackRequestListsColumn(),n=this.workItemService.getFeedbackRequests(t);n["finally"](function(){e.$localStorage.$sync(),e.feedbackRequests=e.$localStorage.searchResultsForFeedbackRequests,e.$rootScope.actionInProgress=!1,o.TracingService.traceVerbose(s,2,"Fetch of Feedback Requests  completed with #FB :"+e.getFeedbackRequestsCount())})},e.prototype.getFeedbackStateOptionIniatlValue=function(){var e=a.FeedbackStateOptionConstants.pendingState;this.$localStorage.$sync();var t=this.$localStorage.feedbackStateOption;return t&&""!==t&&(e=t),e},e.prototype.updateFeedbackSessionInLocalStore=function(e,t){this.$localStorage.$sync();for(var o=this.$localStorage.searchResultsForFeedbackRequests,n=0;n<o.length;n++)if(e.id===o[n].id){o[n].associatedFeedbackSession=t;break}this.feedbackRequests=o,this.$localStorage.searchResultsForFeedbackRequests=o,this.$localStorage.$apply(),this.$rootScope.actionInProgress=!1,this.$scope.$apply()},e.prototype.getFeedbackRequestListsColumn=function(){var e=[];return e.push(r.WorkItemField.title),e.push(r.WorkItemField.id),e.push(r.WorkItemField.workItemType),e.push(r.WorkItemField.workItemState),e.push(r.WorkItemField.iterationPath),e.push(r.WorkItemField.createdBy),e.push(r.WorkItemField.createdDate),e},e.prototype._isGivenSessionActive=function(e){var t=!1,o=this.$localStorage.activeSession;return o&&e&&o.state===r.SessionState.InProgress&&e.id==o.id&&(t=!0),t},e.$inject=["$sce","$location","$localStorage","$filter","$scope","$route","WorkItemService","UtilityService","$rootScope","SessionService"],e}();t.FeedbackRequestsController=c}),define("FeedbackRequests/FeedbackRequestDetail.Controller",["require","exports","../../Tracing/Tracing","../../Messaging/ChromeMessaging","../../Model/Model","../../Common/ExtensionStorage","../../Messaging/Messaging","../../Model/ModelHelper","../../Common/Constants"],function(e,t,o,n,r,i,a,s,c){var l="FeedbackRequestDetailController",d=function(){function e(e,t,o,n,r,i,a,s,c){this.$sce=e,this.$location=t,this.$localStorage=o,this.$timeout=n,this.$scope=r,this.witService=i,this.$rootScope=a,this.sessionService=s,this.utilityService=c,this.showFeedbackDetailForm=!0,this.isInitiatedFromWeb=!1,this.uninitializeMessaging(),this.initializeFeedbackRequestDetail(),this._stopIconBlink(),this.utilityService.setTabindexOnToolbarItems("item-traceability.showing")}return e.prototype.initializeFocus=function(){$("#"+c.ElementIds.xtMinimizeId).focus()},e.prototype.getPageBreadcrumTitle=function(){var e="";return this.selectedFeedbackRequest&&this.selectedFeedbackRequest.createdBy&&(e=this.selectedFeedbackRequest.createdBy),"Request by "+e.split(" ")[0]},e.prototype.getSelectedFeedbackRequest=function(){var e=this;if(this.selectedFeedbackRequest){o.TracingService.traceVerbose(l,1,"Fetching feedback Request with id: "+this.selectedFeedbackRequest.id);var t=this.getFeedbackRequestDetailColumn();if(this.$rootScope.actionInProgress=!0,this.selectedFeedbackRequest.applicationLaunchInstruction)this.setFeedbackApplicationStartInfo(this.selectedFeedbackRequest);else{var n=this.witService.getWorkItemById(t,this.selectedFeedbackRequest.id,null,r.WorkItemCategories.FeedbackRequestCategory);n.then(function(){o.TracingService.traceVerbose(l,2,"Fetched feedback with id"+e.selectedFeedbackRequest.id),e.$localStorage.$sync();var t=e.$localStorage.selectedFeedback;e.setFeedbackApplicationStartInfo(t)})}}},e.prototype.provideFeedback=function(){var e=this;this.selectedFeedbackRequest&&!this.sessionService.isLoading&&(this.publishProvideFeedbackTelemetry(),this.$rootScope.actionInProgress=!0,this.sessionService.isLoading=!0,this.sessionService.provideFeedback(this.selectedFeedbackRequest.id,function(){e.$rootScope.actionInProgress=!1,e.showFeedbackDetailForm=!0,e.$localStorage.$sync(),e.selectedFeedbackRequest=e.$localStorage.selectedFeedback,e.sessionService.isLoading=!1,e.$scope.$apply(),s.sendMessage(a.NotificationType.EnableDefaultWorkItemInToolbar,{},e.$rootScope)},function(){e.$rootScope.actionInProgress=!1,e.sessionService.isLoading=!1,e.$scope.$apply()}))},e.prototype.isProvideFeedbackDisabled=function(){return this.sessionService.isLoading?!0:this.$localStorage.activeSession&&this.$localStorage.activeSession.state===r.SessionState.InProgress&&this.selectedFeedbackRequest&&this.selectedFeedbackRequest.associatedFeedbackSession&&this.selectedFeedbackRequest.associatedFeedbackSession.id==this.$localStorage.activeSession.id?!0:!1},e.prototype.setFeedbackApplicationStartInfo=function(e){var t=this;e.applicationLaunchInstruction&&e.applicationLaunchInstruction.length>0?this.readApplicationStartInfo().then(function(e){t.updateUIPostFetchOfApplicationStartInfo(t.$sce.trustAsHtml("<div>"+e+"</div>"))}):this.updateUIPostFetchOfApplicationStartInfo(this.$sce.trustAsHtml("<div></div>"))},e.prototype.updateUIPostFetchOfApplicationStartInfo=function(e){var t=this;this.selectedApplicationStartInfo=e,this.$rootScope.actionInProgress=!1,this.selectedFeedbackRequest=this.$localStorage.selectedFeedback,this.showFeedbackDetailForm=!0,this.$timeout(function(){t.$scope.$apply()},0)},e.prototype.publishProvideFeedbackTelemetry=function(){var e={};e.isInitiatedFromWeb=this.isInitiatedFromWeb,n.MessagingFactory.getBroadcastingService().broadcast(a.NotificationType.PublishTelemetryData,{eventName:r.TelemetryEvent.ProvideFeedback,properties:e})},e.prototype.readApplicationStartInfo=function(){return i.PersistentStorageFactory.getStorageService().getBlobContentAsync(i.selectedFeedbackRequestApplicationLaunchKey,!1)},e.prototype.getFeedbackRequestDetailColumn=function(){var e=[];return e.push(r.WorkItemField.title),e.push(r.WorkItemField.id),e.push(r.WorkItemField.workItemType),e.push(r.WorkItemField.createdDate),e.push(r.WorkItemField.createdBy),e.push(r.WorkItemField.areaPath),e.push(r.WorkItemField.iterationPath),e.push(r.WorkItemField.applicationLaunchInstruction),e},e.prototype.initializeFeedbackRequestDetail=function(){this.selectedFeedbackRequest=this.$localStorage.selectedFeedback,this.selectedApplicationStartInfo=this.$sce.trustAsHtml("<div class='feedback-details-loading'> <i>Loading instructions...</i></div>"),this.handleProvideFeedbackIfInitiatedFromWeb(),this.getSelectedFeedbackRequest()},e.prototype.handleProvideFeedbackIfInitiatedFromWeb=function(){this.$localStorage.$sync(),this.$localStorage.isProvideFeedbackInitiatedFromWeb&&(this.showFeedbackDetailForm=!1,this.isInitiatedFromWeb=!0,this.provideFeedback(),this.$localStorage.isProvideFeedbackInitiatedFromWeb=!1,this.$localStorage.$apply())},e.prototype.uninitializeMessaging=function(){this.$scope.$on("$destroy",function(){n.MessagingFactory.getSubscriptionService().clearAll()})},e.prototype._stopIconBlink=function(){this.$localStorage.iconBlink=!1,this.$localStorage.$apply()},e.$inject=["$sce","$location","$localStorage","$timeout","$scope","WorkItemService","$rootScope","SessionService","UtilityService"],e}();t.FeedbackRequestDetailController=d}),define("FeedbackRequests/feedback.Filter",["require","exports","../../Common/Constants","../../Model/Model"],function(e,t,o,n){function r(){return function(e,t){function r(e,t){var r=[];return e&&angular.forEach(e,function(e){switch(t){case o.FeedbackStateOptionConstants.pendingState:e.associatedFeedbackSession&&e.associatedFeedbackSession.state!==n.SessionState.InProgress&&e.associatedFeedbackSession.state!==n.SessionState.Paused||r.push(e);break;case o.FeedbackStateOptionConstants.completedState:e.associatedFeedbackSession&&e.associatedFeedbackSession.state===n.SessionState.Completed&&r.push(e);break;case o.FeedbackStateOptionConstants.declinedState:e.associatedFeedbackSession&&e.associatedFeedbackSession.state===n.SessionState.Declined&&r.push(e)}}),r}return r(e,t)}}t.feedbackFilter=r}),define("FeedbackRequests/Feedback.Filter",["require","exports","../../Common/Constants","../../Model/Model"],function(e,t,o,n){function r(){return function(e,t){function r(e,t){var r=[];return e&&angular.forEach(e,function(e){switch(t){case o.FeedbackStateOptionConstants.pendingState:e.associatedFeedbackSession&&e.associatedFeedbackSession.state!==n.SessionState.InProgress&&e.associatedFeedbackSession.state!==n.SessionState.Paused||r.push(e);break;case o.FeedbackStateOptionConstants.completedState:e.associatedFeedbackSession&&e.associatedFeedbackSession.state===n.SessionState.Completed&&r.push(e);break;case o.FeedbackStateOptionConstants.declinedState:e.associatedFeedbackSession&&e.associatedFeedbackSession.state===n.SessionState.Declined&&r.push(e)}}),r}return r(e,t)}}t.feedbackFilter=r}),define("FeedbackRequests/FeedbackRequests.Module",["require","exports","../FeedbackRequests/FeedbackRequests.Controller","../FeedbackRequests/FeedbackRequestDetail.Controller","../FeedbackRequests/Feedback.Filter"],function(e,t,o,n,r){angular.module("XT.Popup.FeedbackRequests",["XT.Popup.CommonControls"]).controller("FeedbackRequestsController",o.FeedbackRequestsController).controller("FeedbackRequestDetailController",n.FeedbackRequestDetailController).filter("feedbackFilter",r.feedbackFilter)}),define("ForceStopSession/ForceStopSession.Controller",["require","exports"],function(e,t){var o=function(){function e(e,t,o,n,r,i,a,s,c,l){this.toolbarItemService=e,this.$sce=t,this.$location=o,this.$localStorage=n,this.$timeout=r,this.$scope=i,this.$route=a,this.$rootScope=s,this.sessionService=c,this.utilityService=l,this.showPopup=!0,this.failureReason=this.$localStorage.forceStopSessionReason,this.autoForceStopSessionOnSessionAllreadyUpdatedError(this.failureReason)}return e.prototype.onYesButtonClick=function(){this.$localStorage.$sync(),this.toolbarItemService.cleanUpCache(),this.sessionService.isLoading=!1,this.$location.url("/")},e.prototype.autoForceStopSessionOnSessionAllreadyUpdatedError=function(e){e.includes("Test Artifact")&&e.includes("is already updated")&&(this.showPopup=!1,this.onYesButtonClick())},e.$inject=["ToolbarItemService","$sce","$location","$localStorage","$timeout","$scope","$route","$rootScope","SessionService","UtilityService"],e}();t.ForceStopSessionController=o}),define("ForceStopSession/ForceStopSession.Module",["require","exports","../ForceStopSession/ForceStopSession.Controller"],function(e,t,o){angular.module("XT.Popup.ForceStopSession",["XT.Popup.CommonControls"]).controller("ForceStopSessionController",o.ForceStopSessionController)}),require(["Popup.Module","Toolbar/Toolbar.Module","Common/Common.Module","CommonControls/CommonControls.Module","BugForm/BugForm.Module","TaskForm/TaskForm.Module","TestCaseForm/TestCaseForm.Module","BugForm/BugForm2.Module","Timeline/Timeline.Module","NoteForm/NoteForm.Module","SignIn/SignInForm.Module","MobileXt/MobileXt.Module","Traceability/Traceability.Module","About/About.Module","VideoCapture/VideoCapture.Module","AngularTreeControl/TreeView.Module","Notification/Notification.Module","License/License.Module","FeedbackResponseForm/FeedbackResponseForm.Module","FeedbackRequests/FeedbackRequests.Module","ForceStopSession/ForceStopSession.Module","StarRatingControl/StarRating.Module"],function(){angular.bootstrap(document,["XT.Popup"])}),define("main",function(){});