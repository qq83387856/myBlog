{"version":3,"sources":["webpack:///./src/app/core/commands/base-get-document-detail-command.ts","webpack:///./src/app/core/commands/base-list-context-menu-click-command.ts","webpack:///./src/app/shared/commands/sys0-commit-type.ts","webpack:///./src/app/viewer/commands/abstract-section-deleted-update-command.ts","webpack:///./src/app/viewer/commands/applet-message-close-command.ts","webpack:///./src/app/viewer/commands/base-create-section-command.ts","webpack:///./src/app/viewer/commands/base-move-section-command.ts","webpack:///./src/app/viewer/commands/core/help-click-command.ts","webpack:///./src/app/viewer/commands/dialog/confirm-update-change-action-command.ts","webpack:///./src/app/viewer/commands/dialog/divide-section-dialog-creation-complete-command.ts","webpack:///./src/app/viewer/commands/dialog/divide-section-ok-cancel-command.ts","webpack:///./src/app/viewer/commands/dialog/edit-confirm-ok-cancel-command.ts","webpack:///./src/app/viewer/commands/dialog/viewer-document-information-change-menu-command.ts","webpack:///./src/app/viewer/commands/dialog/viewer-document-information-change-tab-navigator.ts","webpack:///./src/app/viewer/commands/dialog/viewer-document-information-getUser-number-command.ts","webpack:///./src/app/viewer/commands/dialog/viewer-document-information-ok-cancel-command.ts","webpack:///./src/app/viewer/commands/dialog/viewer-inform-dialog-ok-cancel-command.ts","webpack:///./src/app/viewer/commands/dialog/viewer-show-document-information-command.ts","webpack:///./src/app/viewer/commands/edit-complete-command.ts","webpack:///./src/app/viewer/commands/edit-upload-command.ts","webpack:///./src/app/viewer/commands/edit-upload-fts-command.ts","webpack:///./src/app/viewer/commands/edit-upload-section-command.ts","webpack:///./src/app/viewer/commands/export-section-command.ts","webpack:///./src/app/viewer/commands/get-document-detail-command.ts","webpack:///./src/app/viewer/commands/init-context-menu-command.ts","webpack:///./src/app/viewer/commands/list-context-menu-click-command.ts","webpack:///./src/app/viewer/commands/menu/add-section-command.ts","webpack:///./src/app/viewer/commands/menu/change-mode-command.ts","webpack:///./src/app/viewer/commands/menu/delete-command.ts","webpack:///./src/app/viewer/commands/menu/divide-section-command.ts","webpack:///./src/app/viewer/commands/menu/download-command.ts","webpack:///./src/app/viewer/commands/menu/menu-control-command.ts","webpack:///./src/app/viewer/commands/menu/move-command.ts","webpack:///./src/app/viewer/commands/menu/open-application-command.ts","webpack:///./src/app/viewer/commands/menu/open-full-text-application-command.ts","webpack:///./src/app/viewer/commands/menu/replace-section-command.ts","webpack:///./src/app/viewer/commands/menu/select-all-command.ts","webpack:///./src/app/viewer/commands/menu/unselect-command.ts","webpack:///./src/app/viewer/commands/menu/update-command.ts","webpack:///./src/app/viewer/commands/menu/viewer-show-create-url-command.ts","webpack:///./src/app/viewer/commands/menu/viewer-show-document-sub-data-dialog-command.ts","webpack:///./src/app/viewer/commands/menu/viewer-show-inform-dialog-command.ts","webpack:///./src/app/viewer/commands/pdf/show-pdf-command.ts","webpack:///./src/app/viewer/commands/start-export-section-command.ts","webpack:///./src/app/viewer/commands/sys0-application-complete-command.ts","webpack:///./src/app/viewer/commands/thumbnail/change-mode-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/add-tag-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/click-select-section-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/delete-tag-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/edit-mode-export-section-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/get-section-thumbnail-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/insert-section-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/move-section-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/open-app-export-section-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/open-fts-export-section.ts","webpack:///./src/app/viewer/commands/thumbnail/section/rename-section-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/section-change-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/section-drag-drop-command.ts","webpack:///./src/app/viewer/commands/thumbnail/section/section-item-click-command.ts","webpack:///./src/app/viewer/commands/thumbnail/upload-command.ts","webpack:///./src/app/viewer/commands/viewer-image-edit-command.ts","webpack:///./src/app/viewer/commands/viewer-unknown-file-ext-command.ts","webpack:///./src/app/viewer/containers/dialogs/confirm-update-dialog/confirm-update-dialog-commandmap.ts","webpack:///./src/app/viewer/containers/dialogs/confirm-update-dialog/confirm-update-dialog.component.html","webpack:///./src/app/viewer/containers/dialogs/confirm-update-dialog/confirm-update-dialog.component.scss","webpack:///./src/app/viewer/containers/dialogs/confirm-update-dialog/confirm-update-dialog.component.ts","webpack:///./src/app/viewer/containers/dialogs/confirm-update.ts","webpack:///./src/app/viewer/containers/dialogs/divide-section-dialog/divide-section-dialog.commandmap.ts","webpack:///./src/app/viewer/containers/dialogs/divide-section-dialog/divide-section-dialog.component.html","webpack:///./src/app/viewer/containers/dialogs/divide-section-dialog/divide-section-dialog.component.scss","webpack:///./src/app/viewer/containers/dialogs/divide-section-dialog/divide-section-dialog.component.ts","webpack:///./src/app/viewer/containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.commandmap.ts","webpack:///./src/app/viewer/containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component.html","webpack:///./src/app/viewer/containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component.scss","webpack:///./src/app/viewer/containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component.ts","webpack:///./src/app/viewer/containers/dialogs/full-text-dialog/full-text-dialog.component.html","webpack:///./src/app/viewer/containers/dialogs/full-text-dialog/full-text-dialog.component.scss","webpack:///./src/app/viewer/containers/dialogs/full-text-dialog/full-text-dialog.component.ts","webpack:///./src/app/viewer/containers/dialogs/viewer-circulate-dialog/viewer-circulate-dialog.component.html","webpack:///./src/app/viewer/containers/dialogs/viewer-circulate-dialog/viewer-circulate-dialog.component.scss","webpack:///./src/app/viewer/containers/dialogs/viewer-circulate-dialog/viewer-circulate-dialog.component.ts","webpack:///./src/app/viewer/containers/main-view/main-view-commandmap.ts","webpack:///./src/app/viewer/containers/main-view/main-view.component.html","webpack:///./src/app/viewer/containers/main-view/main-view.component.scss","webpack:///./src/app/viewer/containers/main-view/main-view.component.ts","webpack:///./src/app/viewer/containers/message-area-view/message-area-view.component.html","webpack:///./src/app/viewer/containers/message-area-view/message-area-view.component.scss","webpack:///./src/app/viewer/containers/message-area-view/message-area-view.component.ts","webpack:///./src/app/viewer/containers/pdf/pdf-view.commandmap.ts","webpack:///./src/app/viewer/containers/pdf/pdf-view.component.ts","webpack:///./src/app/viewer/containers/section/section-view.commandmap.ts","webpack:///./src/app/viewer/containers/section/section-view.component.html","webpack:///./src/app/viewer/containers/section/section-view.component.scss","webpack:///./src/app/viewer/containers/section/section-view.component.ts","webpack:///./src/app/viewer/containers/section/section-view.contextdata.ts","webpack:///./src/app/viewer/containers/thumbnail/thumbnail-view.commandmap.ts","webpack:///./src/app/viewer/containers/thumbnail/thumbnail-view.component.html","webpack:///./src/app/viewer/containers/thumbnail/thumbnail-view.component.scss","webpack:///./src/app/viewer/containers/thumbnail/thumbnail-view.component.ts","webpack:///./src/app/viewer/containers/viewer-base/viewer-base.commandmap.ts","webpack:///./src/app/viewer/containers/viewer-base/viewer-base.component.html","webpack:///./src/app/viewer/containers/viewer-base/viewer-base.component.scss","webpack:///./src/app/viewer/containers/viewer-base/viewer-base.component.ts","webpack:///./src/app/viewer/containers/viewer-base/viewer-base.menudata.ts","webpack:///./src/app/viewer/containers/viewer-mapping-def.ts","webpack:///./src/app/viewer/containers/viewer/viewer.commandmap.ts","webpack:///./src/app/viewer/containers/viewer/viewer.component.html","webpack:///./src/app/viewer/containers/viewer/viewer.component.scss","webpack:///./src/app/viewer/containers/viewer/viewer.component.ts","webpack:///./src/app/viewer/locator/viewer-model-locator.ts","webpack:///./src/app/viewer/models/viewer-enable-model.ts","webpack:///./src/app/viewer/services/sys0-viewer.service.ts","webpack:///./src/app/viewer/services/viewer-mapping.service.ts","webpack:///./src/app/viewer/services/viewer-menu-mapping.service.ts","webpack:///./src/app/viewer/services/viewer-menu-to-action-map.ts","webpack:///./src/app/viewer/services/viewer-model-locator.service.ts","webpack:///./src/app/viewer/store/viewer.actions.ts","webpack:///./src/app/viewer/store/viewer.effects.ts","webpack:///./src/app/viewer/store/viewer.initial-state.ts","webpack:///./src/app/viewer/store/viewer.reducer.ts","webpack:///./src/app/viewer/viewer-routing.module.ts","webpack:///./src/app/viewer/viewer.module.ts"],"names":[],"mappings":"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","file":"viewer-viewer-module.js","sourcesContent":["import { ComponentRef } from '@angular/core';\r\n\r\nimport * as CoreSelector from '../../core/store/core.selectors';\r\nimport { getLoginInfo } from '../../core/store/core.selectors';\r\nimport { Sys0ThumbnailListComponent } from '../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { PdfViewBaseComponent } from '../../shared/components/pdf-view-base/pdf-view-base.component';\r\nimport { ProgressDialogComponent } from '../../shared/components/progress-dialog/progress-dialog.component';\r\nimport { ListEvent } from '../../shared/event/list-event';\r\nimport { SectionViewComponent } from '../../viewer/containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../viewer/models/viewer-view-types';\r\nimport { ApplicationError } from '../application-error';\r\nimport { SystemCloseDialogComponent } from '../containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { BaseModelLocator } from '../locator/base-model-locator';\r\nimport { LoginInfo } from '../models/login-info';\r\nimport { Param } from '../models/param';\r\nimport { PropNameType } from '../models/prop-name-type';\r\nimport { Sys0AlertType } from '../models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../models/sys0-error-info';\r\nimport { Sys0ErrorType } from '../models/sys0-error-type';\r\nimport { BaseModelLocatorService } from '../services/base-model-locator.service';\r\nimport { UrlService } from '../services/url.service';\r\nimport { HideInitializationPreLoader } from '../store/core.actions';\r\nimport { Sys0StringUtil } from '../utils/sys0-string-util';\r\nimport { DocumentVO } from '../vo/document-vo';\r\nimport { SectionVO } from '../vo/section-vo';\r\nimport { isStatusVO, StatusVO } from '../vo/status-vo';\r\nimport { Sys0Exception } from '../vo/sys0-exception';\r\nimport { isVersionVO, VersionVO } from '../vo/version-vo';\r\nimport { isWorkflowVO, WorkflowVO } from '../vo/workflow-vo';\r\n\r\nimport { AbstractSys0RpcCommand } from './abstract-sys0-rpc-command';\r\nimport { Sys0EventType } from './sys0-event-type';\r\nimport { Sys0Object } from './sys0-object';\r\n\r\n/**\r\n * 文書情報(セクション数)を取得します。\r\n *\r\n */\r\nexport class BaseGetDocumentDetailCommand extends AbstractSys0RpcCommand {\r\n  protected static readonly VER_ID: string = 'VerID';\r\n\r\n  // ★Stitch V1.3対応 Baseのモデルロケーター追加\r\n  /**\r\n   * @private\r\n   * モデルロケーター\r\n   */\r\n  protected locator = BaseModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * セクション数のチェックをするかどうかを表します。\r\n   */\r\n  protected sectionChecking = false;\r\n\r\n  /**\r\n   * システム終了するかどうか\r\n   */\r\n  private systemCloseError = false;\r\n\r\n  // ★Stitch V1.3対応 isPreLoading対応\r\n  /** プレローダーのインスタンスです */\r\n  // private preLoader: ComponentRef<ProgressDialogComponent> | null = null;\r\n\r\n  // ★Stitch V1.3対応　UrlServiceを定義\r\n  private urlService: UrlService;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * getStatus()の呼び出しを、Sys0ApplicationCompleteCommandから移動する。\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    this.setModelLocator();\r\n\r\n    // 権限チェックを先にやる\r\n    const sys0Object: Sys0Object = new Sys0Object(true);\r\n\r\n    // 権限チェック\r\n    // ★Stitch V1.3対応 this.locator.currentDocumentのnullよけ\r\n    if (this.locator.currentDocument) {\r\n      sys0Object.checkStatus(this.locator.currentDocument, this.checkStatusCallBack);\r\n    }\r\n\r\n    // 非同期\r\n    param.isAsync = true;\r\n  }\r\n\r\n  /**\r\n   * イベントオブジェクトの作成を行ないます。\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    this.systemCloseError = false;\r\n    return new Sys0BaseEvent(Sys0EventType.GET_DOCUMENT_DETAIL_EVENT);\r\n  }\r\n\r\n  /**\r\n   * 文書詳細情報の取得を行ないます。\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応 getDocumentDetail()の第二引数がstring[]の為、any[] →　string[]\r\n    const props: string[] = [\r\n      PropNameType.PROP_NAME,\r\n      PropNameType.PROP_SECTIONS,\r\n      PropNameType.PROP_VERSION,\r\n      PropNameType.PROP_PATH_IDS,\r\n      PropNameType.PROP_SIZE,\r\n      PropNameType.PROP_TAG_LIST,\r\n      PropNameType.PROP_ID\r\n    ];\r\n    // ★Stitch V1.3対応 delegate対応,this.locator.currentDocumentがnullの場合はApplicationErrorとした。\r\n    if (!this.locator.currentDocument) {\r\n      throw new ApplicationError('this.locator.currentDocument is null');\r\n    }\r\n    this.http.getDocumentDetail(this.locator.currentDocument, props);\r\n  }\r\n\r\n  /**\r\n   * 取得した文書情報から、文書名とセクション数を反映します。\r\n   * セクション数が0件の場合はエラーとし、セクション数が0件以上の場合は、\r\n   * 空のSectionVOの作成を行ないます。\r\n   * サムネイルリストにCHANGEイベントをなげて、メニュー状態を初期化します。\r\n   * 文書が取得できた場合には文書のワークフロー状態を取得して画面に反映させます。\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    const currentDocument: DocumentVO | null = this.locator.currentDocument;\r\n    const result: DocumentVO = event as DocumentVO;\r\n\r\n    // 取得情報を反映\r\n    // ★Stitch V1.3対応 currentDocumentのnullよけ\r\n    if (currentDocument) {\r\n      currentDocument.name = result.name;\r\n      currentDocument.sections = result.sections;\r\n      currentDocument.size = result.size;\r\n      currentDocument.version = result.version;\r\n\r\n      if (this.locator.version == null || this.locator.version.name === currentDocument.version) {\r\n        if (currentDocument.tagList == null && result.tagList != null) {\r\n          // ★Stitch V1.3対応 ArrayCollection() →　Array()\r\n          currentDocument.tagList = new Array();\r\n        }\r\n        if (result.tagList) {\r\n          currentDocument.tagList = result.tagList;\r\n        } else {\r\n          currentDocument.tagList = null;\r\n        }\r\n      }\r\n\r\n      // 親IDを入れる\r\n      if (result.pathIds != null && result.pathIds.length > 0) {\r\n        // ★Stitch V1.3対応 getItemAt →　[]\r\n        currentDocument.parentId = result.pathIds[result.pathIds.length - 1] as string;\r\n      } else {\r\n        currentDocument.parentId = currentDocument.cabId;\r\n      }\r\n\r\n      let versionId: string | null = null;\r\n      if (this.locator.version) {\r\n        versionId = this.locator.version.id;\r\n      }\r\n\r\n      this.postGetDocumentDetail();\r\n\r\n      const sys0Object: Sys0Object = new Sys0Object(true);\r\n      // ★Stitch V1.3対応 Sys0Object.getSectionList()の第三引数versionIdをnull許可に変更\r\n      sys0Object.getSectionList(currentDocument, versionId, this.getSectionListCallback);\r\n    }\r\n  }\r\n\r\n  protected setModelLocator() {\r\n    throw new ApplicationError('継承先で実装してください。');\r\n  }\r\n\r\n  protected get sectionList(): any[] | null {\r\n    throw new Error('継承先で実装してください。');\r\n  }\r\n  // ★Stitch V1.3対応 ArrayCollection　→　any[]\r\n  protected set sectionList(list: any[] | null) {\r\n    throw new Error('継承先で実装してください。');\r\n  }\r\n\r\n  protected get currentMode(): number {\r\n    throw new ApplicationError('実装してください。');\r\n  }\r\n\r\n  protected initalizeSectionView() {}\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n\r\n  /**\r\n   * メニューの制御をします。\r\n   */\r\n  protected setEnableModel() {}\r\n\r\n  protected postGetDocumentDetail() {}\r\n\r\n  /**\r\n   * セクション一覧取得のコールバックです。\r\n   */\r\n  protected getSectionListCallback(result: any) {\r\n    // ★Stitch V1.3対応 ArrayCollection → Array\r\n    if (result == null || result instanceof Array) {\r\n      const currentDocument: DocumentVO | null = this.locator.currentDocument;\r\n      let source: any[] | null = null;\r\n      if (result == null) {\r\n        source = [];\r\n      } else {\r\n        // ★Stitch V1.3対応 source削除\r\n        source = result as any[];\r\n      }\r\n\r\n      for (const section of source) {\r\n        section['parentDocument'] = currentDocument;\r\n      }\r\n\r\n      if (this.sectionList == null) {\r\n        // ★Stitch V1.3対応 ArrayCollection →　any[]\r\n        this.sectionList = source as any[];\r\n      } else {\r\n        // VOを追加する\r\n        // ★Stitch V1.3対応 source削除\r\n        this.sectionList = source;\r\n      }\r\n\r\n      // ★Stitch V1.3対応 currentDocumentのnullよけ\r\n      if (currentDocument) {\r\n        if (currentDocument.tagList) {\r\n          for (const tagVo of currentDocument.tagList) {\r\n            const sectionNo: number = tagVo.sectionNo as number;\r\n            // ★Stitch V1.3対応 getItemAt　→　[]\r\n            const sectionVo: SectionVO = this.sectionList[sectionNo - 1] as SectionVO;\r\n\r\n            tagVo.selected = true;\r\n            sectionVo.tag = tagVo;\r\n          }\r\n        }\r\n      }\r\n      // ★Stitch V1.3対応 TileList　→　Sys0ThumbnailListComponent 使われずため、コマンドアウト\r\n      // const thumbnailList: Sys0ThumbnailListComponent = this.getThumbnailList();\r\n\r\n      // セクション数0件の場合エラー\r\n      if (source.length === 0) {\r\n        if (this.sectionChecking) {\r\n          this.messageService.showErrorMessage('warn.section.nonexist');\r\n        }\r\n\r\n        const pdfView: PdfViewBaseComponent = this.getPdfView();\r\n        if (pdfView) {\r\n          pdfView.offIFrame(true);\r\n          pdfView.message = '';\r\n        }\r\n        // ★Stitch V1.3対応 isPreLoading対応\r\n        const isPreLoading = this.stateUtilService.getCurrentState(CoreSelector.getApplicationInitializationPreLoading);\r\n        // 0件の場合はここで起動時の進捗中を閉じる\r\n        if (isPreLoading) {\r\n          // 起動時の対応。プレローダーが上がっていたら\r\n          // プレローダーを非表示にする。\r\n          this.store.dispatch(new HideInitializationPreLoader());\r\n        }\r\n        this.terminate();\r\n        return;\r\n      }\r\n\r\n      // ★Stitch V1.3対応 [issue 103]のため、クリックなどの操作をsectionView.callLaterに入れる\r\n      const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n      if (sectionView == null) {\r\n        throw new ApplicationError('Unexpected null value for sectionView.');\r\n      }\r\n      // ★Stitch V1.3対応 描画完了後に処理させたいため、callLaterで処理するように修正\r\n      sectionView.callLater(function() {\r\n        sectionView.thumbnailList.selectedIndex = 0;\r\n        sectionView.thumbnailList.onItemClick(new ListEvent(ListEvent.ITEM_CLICK));\r\n        sectionView.thumbnailList.onChange();\r\n      });\r\n    } else {\r\n      // ∴\r\n    }\r\n\r\n    // ワークフローの状態を取得します\r\n    const sys0Object: Sys0Object = new Sys0Object();\r\n    // ★Stitch V1.3対応 this.locator.currentDocumentのnullよけ\r\n    if (this.locator.currentDocument) {\r\n      // ★Stitch V1.3対応\r\n      // ワークフロー機能は提供しない\r\n      // 第二引数　null　→　[]\r\n      // sys0Object.getWorkFlow(this.locator.currentDocument, [], this.getWorkFlowCallBack);\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  protected getPdfView(): PdfViewBaseComponent {\r\n    throw new ApplicationError('継承先で実装してください。');\r\n  }\r\n\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // /**\r\n  //  * 対象ファイルのワークフロー状態を取得します。\r\n  //  */\r\n  // protected getWorkFlowCallBack(object: any) {\r\n  //   this.locator.useWorkFlowButton = false;\r\n  //   // ★Stitch V1.3対応 LoginInfoを定義\r\n  //   const loginInfo: LoginInfo = this.stateUtilService.getCurrentState(getLoginInfo);\r\n  //   if (this.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n  //      this.locator.useWorkFlowButton = false;\r\n  //   } else {\r\n  //     if (isWorkflowVO(object)) {\r\n  //       const workflow: WorkflowVO = object as WorkflowVO;\r\n  //       // ★Stitch V1.3対応 null許容を追加\r\n  //       const verId: string | null = this.getVerId();\r\n  //       if (workflow.waitingApprover) {\r\n  //         if (verId != null) {\r\n  //           this.locator.useWorkFlowButton = false;\r\n  //           // ★Stitch V1.3対応 LoginInfoを使用\r\n  //         } else if (loginInfo.userId === workflow.waitingApprover.id) {\r\n  //           this.locator.useWorkFlowButton = true;\r\n  //         }\r\n  //       } else {\r\n  //         this.locator.useWorkFlowButton = false;\r\n  //       }\r\n  //     } else {\r\n  //       // ★Stitch V1.3対応　失敗時には objectにはSys0Exceptionが格納されている\r\n  //       // const exception: Sys0Exception = fault.rootCause as Sys0Exception;\r\n  //       const exception: Sys0Exception = object as Sys0Exception;\r\n  //       if (exception.key !== Sys0ErrorType.DOCUMENT_UPDATE_AUTH) {\r\n  //         this.isBusy = true;\r\n  //\r\n  //         // ★Stitch V1.3対応 HttpErrorResponseにhttpErrorを利用する\r\n  //         this.fail(exception.httpError);\r\n  //       }\r\n  //       this.locator.useWorkFlowButton = false;\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  protected getThumbnailList(): Sys0ThumbnailListComponent {\r\n    throw new ApplicationError('継承先で実装してください。');\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.systemCloseError) {\r\n      // ボタンなしのエラーダイアログ\r\n      // ★Stitch V1.3対応 || ''を追加\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message || '');\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文書が削除されていた場合のメッセージを取得します。\r\n   * @inheritDoc\r\n   */\r\n  protected getDeleteMessageKey(): string {\r\n    this.systemCloseError = true;\r\n    return 'warn.section.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 文書に全権限がなかった場合のメッセージを取得します。\r\n   * @inheritDoc\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.systemCloseError = true;\r\n    return 'warn.section.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 文書に読み取り権限がなかった場合のメッセージを取得します。\r\n   * @inheritDoc\r\n   */\r\n  protected getReadAuthMessageKey(): string {\r\n    return 'warn.section.docreadauth';\r\n  }\r\n\r\n  /**\r\n   * 文書がゴミ箱に移動された場合のメッセージです。\r\n   * @inheritDoc\r\n   */\r\n  protected getTrashMessageKey(): string {\r\n    this.systemCloseError = true;\r\n    return 'warn.section.docintrash';\r\n  }\r\n\r\n  /**\r\n   * 権限チェック\r\n   */\r\n  private checkStatusCallBack(result: any) {\r\n    let isCancel = false;\r\n\r\n    if (isStatusVO(result)) {\r\n      const vo: StatusVO = result as StatusVO;\r\n      if (vo == null) {\r\n        isCancel = true;\r\n      } else if (vo.disable || vo.erase) {\r\n        this.showSysCloseDialog('warn.section.docnonexist');\r\n        isCancel = true;\r\n      } else if (vo.remove) {\r\n        if (this.locator.currentDocument && this.locator.currentDocument.name) {\r\n          this.showSysCloseDialog('warn.section.docintrash', Sys0StringUtil.truncateToLength(this.locator.currentDocument.name));\r\n        } else {\r\n          this.showSysCloseDialog('warn.viewer.docintrash');\r\n        }\r\n        isCancel = true;\r\n      } else if (this.currentMode === 0 && !vo.enableRead) {\r\n        if (this.locator.currentDocument && this.locator.currentDocument.name) {\r\n          this.showSysCloseDialog('warn.section.docreadauth', Sys0StringUtil.truncateToLength(this.locator.currentDocument.name));\r\n        } else {\r\n          this.showSysCloseDialog('warn.viewer.docreadauth');\r\n        }\r\n        isCancel = true;\r\n      } else {\r\n        // エラーなし\r\n        if (!vo.enableUpdate) {\r\n          // 先でエラーにさせる\r\n          isCancel = false;\r\n        }\r\n\r\n        this.initalizeSectionView();\r\n      }\r\n\r\n      if (this.locator.version && !isCancel) {\r\n        // 版ビューアー時の追加チェック\r\n        const sys0Object: Sys0Object = new Sys0Object(true);\r\n        sys0Object.getVersionDetail(this.locator.version, this.getVersionDetailCallback);\r\n      } else {\r\n        this.checkComplete(isCancel);\r\n      }\r\n      // ★Stitch V1.3対応 Fault →　Sys0Exception\r\n    } else if (result instanceof Sys0Exception) {\r\n      const sys0Exception: Sys0Exception = result as Sys0Exception;\r\n\r\n      if (sys0Exception.key === Sys0ErrorType.OBJECT_BAD_ID) {\r\n        this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, 'warn.section.docnonexist');\r\n      }\r\n\r\n      this.checkComplete(true);\r\n    } else {\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 版のチェック\r\n   */\r\n  private getVersionDetailCallback(result: any) {\r\n    if (isVersionVO(result)) {\r\n      this.locator.version = result as VersionVO;\r\n      // ★Stitch V1.3対応 Fault →　Sys0Exception\r\n    } else if (result instanceof Sys0Exception) {\r\n      const sys0Exception: Sys0Exception = result as Sys0Exception;\r\n\r\n      if (sys0Exception.key === Sys0ErrorType.VERSION_DELETE || sys0Exception.key === Sys0ErrorType.OBJECT_BAD_ID) {\r\n        // 版が削除されている\r\n        this.showSysCloseDialog('warn.download.versiondeleted');\r\n        this.checkComplete(true);\r\n        return;\r\n      }\r\n    } else {\r\n      this.checkComplete(true);\r\n    }\r\n\r\n    this.checkComplete();\r\n  }\r\n  // ★Stitch V1.3対応 getVerId()をnullを許容に変更\r\n  private getVerId(): string | null {\r\n    // ★Stitch V1.3対応 urlServiceを使用,nullを許容を追加\r\n    let id: string | null = this.urlService.getUrlParam(BaseGetDocumentDetailCommand.VER_ID);\r\n    if (id != null) {\r\n      id = Sys0StringUtil.trim(id);\r\n      if (id.length === 0) {\r\n        // ★Stitch V1.3対応 null →　''\r\n        id = '';\r\n      }\r\n    }\r\n\r\n    return id;\r\n  }\r\n}\r\n","import { UUID } from 'angular2-uuid';\r\n\r\nimport { ListBase } from '../../shared/components/list-base';\r\n\r\nimport { AbstractSys0Command } from './abstract-sys0-command';\r\n\r\n/**\r\n * 一覧で右クリックメニューが開かれたとき基底クラスです。\r\n *\r\n */\r\nexport class BaseListContextMenuClickCommand extends AbstractSys0Command {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * イベントハンドラー用\r\n   */\r\n  clickMenu(event: Event) {\r\n    this.event = event;\r\n    this.execCommand();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param listBase\r\n   * @param selectedItems\r\n   * @param object\r\n   *\r\n   */\r\n  protected setSelectedItem(listBase: ListBase, selectedItems: any[], object: UUID): boolean {\r\n    let found = false;\r\n    if (selectedItems.length > 1 && object != null) {\r\n      // 複数選択済みの場合\r\n\r\n      // 右クリックした位置のオブジェクトが、選択位置に含まれているかのチェック\r\n      for (const selectedObject of selectedItems) {\r\n        // ★Stitch V1.3対応 引数のnull → ''に変更,object.uid →　object\r\n        if (selectedObject.uid === object) {\r\n          // あった\r\n          found = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!found) {\r\n        // 選択されている位置じゃない場合は、再選択させる。\r\n        listBase.selectedItem = object;\r\n      }\r\n    } else {\r\n      // 未選択または、1件だけ選択の場合は、選択状態にする。\r\n      const selectedItem: any = listBase.selectedItem;\r\n      // ★Stitch V1.3対応 object.uid →　object\r\n      if ((selectedItem == null && object == null) || (selectedItem != null && object != null && selectedItem.uid === object)) {\r\n        found = true;\r\n      }\r\n\r\n      listBase.selectedItem = object;\r\n    }\r\n\r\n    return found;\r\n  }\r\n\r\n  protected doCommand() {}\r\n}\r\n","/**\r\n * コミット時の設定\r\n *\r\n */\r\nexport class Sys0CommitType {\r\n  /**\r\n   * 版を上げる（版番号を指定）\r\n   */\r\n  static readonly COMMIT_VERSION_UP: number = 1;\r\n\r\n  /**\r\n   * 版を上げる（1 の位を上げる）\r\n   */\r\n  static readonly COMMIT_VERSION_UP_MAJOR: number = 2;\r\n\r\n  /**\r\n   * 版を上げる（0.1 の位を上げる）\r\n   */\r\n  static readonly COMMIT_VERSION_UP_MINOR: number = 3;\r\n\r\n  /**\r\n   * 版を上げない\r\n   */\r\n  static readonly COMMIT_VERSION_KEEP: number = 4;\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { AbstractSys0Command } from '../../core/commands/abstract-sys0-command';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { Sys0ThumbnailListComponent } from '../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { SharedCommand } from '../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerBaseComponent } from '../containers/viewer-base/viewer-base.component';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\nimport { ISupportSectionDeletedUpdate } from './i-support-section-deleted-update';\r\nimport { UpdateCommand } from './menu/update-command';\r\n\r\n/**\r\n * セクションを一覧から削除するのをサポートします。\r\n *\r\n */\r\nexport class AbstractSectionDeletedUpdateCommand extends AbstractSys0Command implements ISupportSectionDeletedUpdate {\r\n  private locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 指定のセクションを削除します。\r\n   */\r\n  deleteSection(section: SectionVO) {\r\n    this.refreshSectionList();\r\n  }\r\n\r\n  protected doCommand() {}\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected changeMainSelectedSection() {\r\n    // ★Stitch V1.3対応 null許可に変更\r\n    // メイン選択の移動\r\n    let selectItem: SectionVO | null;\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n\r\n    const thumnailList: Sys0ThumbnailListComponent = sectionListView.thumbnailList;\r\n    const selectedItemIndex: number = thumnailList.selectedIndex;\r\n    // ★Stitch V1.3対応 this.locator.sectionListがnullの場合はエラーにする\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('this.locator.sectionList is null.');\r\n    }\r\n\r\n    if (this.locator.sectionList.length < 1) {\r\n      selectItem = null;\r\n    } else if (selectedItemIndex === -1 || selectedItemIndex > this.locator.sectionList.length) {\r\n      selectItem = this.locator.sectionList[this.locator.sectionList.length - 1] as SectionVO;\r\n    } else {\r\n      selectItem = this.locator.sectionList[selectedItemIndex - 1] as SectionVO;\r\n    }\r\n\r\n    thumnailList.selectedItem = selectItem;\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    // thumnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n    thumnailList.onChange();\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    // thumnailList.dispatchEvent(new ListEvent(ListEvent.ITEM_CLICK));\r\n    thumnailList.onItemClick();\r\n  }\r\n\r\n  protected refreshSectionList() {\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const viewerBase = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent;\r\n    // ★Stitch V1.3対応 getCommand対応\r\n    // const updateCommand: UpdateCommand = Viewer(root).base.commandMap.getCommand(Sys0CommandType.COMMAND_TYPE_UPDATE) as UpdateCommand;\r\n    const updateCommand: UpdateCommand = this.commandProvider.getCommand(\r\n      viewerBase,\r\n      SharedCommand.SharedActionTypes.Update\r\n    ) as UpdateCommand;\r\n    updateCommand.refreshSection(this.refreshSectionCallback);\r\n  }\r\n\r\n  protected refreshSectionCallback() {\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n\r\n    // 更新後にメニューの制御を行なう。\r\n    const thumnailList: Sys0ThumbnailListComponent = sectionListView.thumbnailList;\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    // thumnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n    thumnailList.onChange();\r\n  }\r\n}\r\n","import { AbstractSys0Command } from '../../core/commands/abstract-sys0-command';\r\n\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\n/**\r\n * アプレットからのメッセージを閉じたときの処理を行ないます。\r\n *\r\n */\r\nexport class AppletMessageCloseCommand extends AbstractSys0Command {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * メッセージの表示を行ないます。\r\n   */\r\n  protected doCommand() {\r\n    ViewerModelLocatorService.getInstance().resetUploadSection();\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../core/commands/abstract-sys0-rpc-command';\r\nimport { Sys0ConnectObject } from '../../core/commands/sys0-connect-object';\r\nimport { Sys0EventType } from '../../core/commands/sys0-event-type';\r\nimport { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { Param } from '../../core/models/param';\r\nimport { Sys0AlertType } from '../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../core/models/sys0-error-info';\r\nimport { Sys0ErrorType } from '../../core/models/sys0-error-type';\r\nimport { Sys0StringUtil } from '../../core/utils/sys0-string-util';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { Sys0Exception } from '../../core/vo/sys0-exception';\r\nimport { Sys0ThumbnailListComponent } from '../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport * as SharedAction from '../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\n/**\r\n * セクション追加用のベースコマンドです。\r\n *\r\n */\r\nexport abstract class BaseCreateSectionCommand extends AbstractSys0RpcCommand {\r\n  /**\r\n   * 最大文字数\r\n   */\r\n  protected static readonly SECTION_NAME_MAX_LENGTH = 120;\r\n\r\n  /**\r\n   * プロパティ名\r\n   */\r\n  protected static PROP_FILE_NAME = 'fileName';\r\n\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  protected locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * 選択中のセクションです。\r\n   */\r\n  protected selectedSection: SectionVO | null = null;\r\n\r\n  /**\r\n   * 挿入/差し替えをする位置\r\n   */\r\n  protected insertIndex = -1;\r\n\r\n  /**\r\n   * 登録するセクションのリストです。\r\n   */\r\n  protected sectionList: SectionVO[] | null = null;\r\n\r\n  /**\r\n   * 現在処理中のセクションです。\r\n   */\r\n  protected currentSection: SectionVO | null = null;\r\n\r\n  /**\r\n   * 処理を中断されたかを表します。 trueならば、中断ボタンをおされています。\r\n   */\r\n  protected isCanceled = false;\r\n\r\n  /**\r\n   * ナビゲーションメッセージを表示しない。\r\n   */\r\n  protected showNavigation = true;\r\n\r\n  /**\r\n   * ビューアーを閉じるように促します。\r\n   */\r\n  protected isSystemClose = false;\r\n\r\n  /**\r\n   * 作成したセクション\r\n   */\r\n  protected lastIndex: number;\r\n\r\n  /**\r\n   * サムネイルリスト\r\n   */\r\n  protected thumbnailList: Sys0ThumbnailListComponent;\r\n\r\n  protected constructor() {\r\n    super();\r\n\r\n    this.displayProgress = true;\r\n    this.cancelable = true;\r\n    this.keepProgress = true;\r\n  }\r\n\r\n  /**\r\n   * 進捗中ダイアログのメッセージ初期化を事前に行います。\r\n   * @inheritDoc\r\n   */\r\n  execCommand() {\r\n    this.settingProgressLabel();\r\n    this.showNavigation = true;\r\n\r\n    super.execCommand();\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  check(param: Param): void {\r\n    // セクションの選択情報を設定する。\r\n    this.setSelectedSection();\r\n  }\r\n\r\n  /**\r\n   * 進捗中ダイアログのカウントを設定します。\r\n   *\r\n   * イベントオブジェクトを生成します。\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    // 今から追加または差し替えるSectionVOを設定する\r\n    this.currentSection = this.sectionList && this.sectionList[this.locator.createdSectionCount];\r\n\r\n    // Trim\r\n    if (this.currentSection && this.currentSection.name) {\r\n      this.currentSection.name = Sys0StringUtil.trim(this.currentSection.name);\r\n\r\n      // 文字数超過の処理\r\n      if (this.currentSection.name.length > BaseCreateSectionCommand.SECTION_NAME_MAX_LENGTH) {\r\n        this.currentSection.name = this.currentSection.name.substr(0, BaseCreateSectionCommand.SECTION_NAME_MAX_LENGTH);\r\n      }\r\n    }\r\n\r\n    // 進捗中表示の設定\r\n    this.addCount = this.locator.createdSectionCount + 1;\r\n    this.allCount = this.locator.uploadSectionCount;\r\n    this.isSystemClose = false;\r\n\r\n    // セクション名\r\n    const name: string | null = this.sectionList && this.sectionList[this.locator.createdSectionCount].name;\r\n    if (name == null) {\r\n      this.progressObjectName = '';\r\n    } else {\r\n      this.progressObjectName = name;\r\n    }\r\n\r\n    return new Sys0BaseEvent(this.eventType);\r\n  }\r\n  /**\r\n   * delegate呼び出し(insertSection)を行ないます。\r\n   * @inheritDoc\r\n   */\r\n  call(): void {\r\n    if (this.currentSection) {\r\n      if (this.locator.currentDocument == null) {\r\n        throw new ApplicationError('currentDocument is null');\r\n      }\r\n      if (this.currentSection.sectionNo == null) {\r\n        throw new ApplicationError('sectionNo is null');\r\n      }\r\n      if (this.locator.viewerId == null) {\r\n        throw new ApplicationError('viewerId is null');\r\n      }\r\n\r\n      this.locator.updated = true;\r\n      this.http.insertSection(\r\n        this.locator.currentDocument,\r\n        this.currentSection.sectionNo,\r\n        this.currentSection[BaseCreateSectionCommand.PROP_FILE_NAME],\r\n        this.locator.viewerId\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 作成されたセクションのVOを取得します。\r\n   *\r\n   * サムネイルリストに表示するロケーターにSectionVOを追加します。\r\n   *\r\n   * 次のファイルがあったら続行(checkComplete)し、なかったら処理を終了します。\r\n   * @inheritDoc\r\n   */\r\n  succeed(result: SectionVO): void {\r\n    const feedback: SectionVO = result;\r\n    if (feedback == null) {\r\n      // エラー表示\r\n      return;\r\n    }\r\n    this.refreshList(feedback);\r\n    // 登録済みセクションをカウントアップ\r\n    this.addCount = this.locator.createdSectionCount++;\r\n\r\n    if (this.isCanceled || this.locator.uploadSectionCount === this.locator.createdSectionCount) {\r\n      this.postProcess();\r\n      this.terminate();\r\n    } else {\r\n      this.checkComplete();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  abort(): void {\r\n    this.isCanceled = true;\r\n  }\r\n\r\n  protected settingProgressLabel(): void {\r\n    // 進捗表示の設定\r\n    this.progressNameLabel = this.wording.get('info.progress.sectionname');\r\n    this.progressMessageLabel = this.wording.get('info.progress.addingsection');\r\n    this.progressCountLabel = this.wording.get('info.progress.progressmessage');\r\n  }\r\n\r\n  /**\r\n   * セクションの選択情報を設定します。\r\n   */\r\n  protected setSelectedSection(): void {\r\n    // ★Stitch V1.3対応\r\n    const sectionView: SectionViewComponent | undefined = this.viewManager.get(ViewerViewTypes.SectionView) as\r\n      | SectionViewComponent\r\n      | undefined;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Unexpected null value for sectionView.');\r\n    }\r\n    this.thumbnailList = sectionView.thumbnailList;\r\n\r\n    // 選択中のセクション\r\n    this.selectedSection = this.thumbnailList.selectedItem as SectionVO;\r\n\r\n    // 未選択または、複数選択されている場合は-1を、単一選択の場合選択しているindexを設定する。\r\n    this.insertIndex =\r\n      this.thumbnailList.selectedIndices.length > 1 || this.thumbnailList.selectedIndex === -1 ? -1 : this.thumbnailList.selectedIndex;\r\n\r\n    this.continueProgress = false;\r\n  }\r\n\r\n  /**\r\n   * セクション数の上限チェックです。\r\n   */\r\n  protected checkSectionLimit(): boolean {\r\n    return (this.sectionList ? this.sectionList.length : 0) + (this.locator.sectionList ? this.locator.sectionList.length : 0) <= 200;\r\n  }\r\n\r\n  /**\r\n   * イベントタイプです。\r\n   */\r\n  protected get eventType(): string {\r\n    return Sys0EventType.INSERT_SECTION;\r\n  }\r\n\r\n  protected createSection(fileName: string, sectionNo: number): SectionVO {\r\n    // 拡張子を外す\r\n    const lastIndex: number = fileName.lastIndexOf('.');\r\n    let docName: string = fileName.substr(0, lastIndex);\r\n    if (docName.length > BaseCreateSectionCommand.SECTION_NAME_MAX_LENGTH) {\r\n      docName = docName.substr(0, BaseCreateSectionCommand.SECTION_NAME_MAX_LENGTH);\r\n    }\r\n\r\n    // 作成するセクションのVOを作成・設定する\r\n\r\n    const sectionVO: SectionVO = new SectionVO();\r\n    sectionVO.cabId = this.locator.currentDocument && this.locator.currentDocument.cabId;\r\n    sectionVO.id = this.locator.currentDocument && this.locator.currentDocument.id;\r\n    sectionVO.name = docName;\r\n    sectionVO.sectionNo = sectionNo;\r\n    sectionVO[BaseCreateSectionCommand.PROP_FILE_NAME] = fileName;\r\n\r\n    return sectionVO;\r\n  }\r\n\r\n  protected postProcess(): void {\r\n    // セクションNo振りなおし\r\n    this.locator.renumberSectionList();\r\n\r\n    this.thumbnailList.invalidateDisplayList();\r\n    this.thumbnailList.validateDisplayList();\r\n    this.thumbnailList.selectedIndex = this.lastIndex;\r\n\r\n    // ★Stitch V1.3対応\r\n    // 挿入したsectionのアイテム(this.lastIndex) へのスクロール\r\n    // Angularでは行単位でなくアイテムインデックス単位でスクロールするため、scrollToIndex(this.lastIndex)へ置き換える\r\n    // const row: number = this.lastIndex / this.thumbnailList.columnCount;\r\n    // this.thumbnailList.scrollToPos(row - this.thumbnailList.verticalScrollPosition);\r\n    this.thumbnailList.scrollToIndex(this.lastIndex);\r\n\r\n    // ドロップしたセクション数に達した場合か、中断された場合。\r\n    if (this.showNavigation && this.locator.createdSectionCount > 0) {\r\n      this.showNavigateMessage();\r\n    }\r\n    // ModelLocatorの内容を初期状態に戻す。\r\n    this.resetModel();\r\n\r\n    // メニューの更新\r\n    // ★Stitch V1.3対応  CHANGE イベントに相当するメソッドの実行\r\n    this.thumbnailList.onChange();\r\n    // ★Stitch V1.3対応  ITEM_CLICK イベントに相当するメソッドの実行\r\n    this.thumbnailList.onItemClick();\r\n  }\r\n\r\n  /**\r\n   * 追加された文書を一覧に表示します。\r\n   *\r\n   * @param newSection 追加された文書です。\r\n   */\r\n  protected refreshList(newSection: SectionVO): void {\r\n    newSection.sectionNo = this.locator.sectionList && this.locator.sectionList.length * 10;\r\n    if (this.locator.sectionList) {\r\n      if (this.insertIndex >= 0) {\r\n        // 配列の指定した場所に挿入\r\n        this.locator.sectionList.splice(this.insertIndex + 1, 0, newSection);\r\n        this.insertIndex++;\r\n        this.lastIndex = this.insertIndex;\r\n      } else {\r\n        // 後ろに追加する\r\n        this.locator.sectionList.push(newSection);\r\n        this.lastIndex = this.locator.sectionList.length - 1;\r\n      }\r\n    }\r\n    this.thumbnailList.dataProvider = this.locator.sectionList;\r\n  }\r\n\r\n  /**\r\n   * ナビゲーションバーにメッセージを表示する。\r\n   */\r\n  protected showNavigateMessage(): void {\r\n    const msg: string = this.wording.get('info.messagearea.addedsection', this.locator.createdSectionCount);\r\n    // 　メッセージ設定アクション発行\r\n    this.store.dispatch(new SharedAction.SetNavigateMessage(msg));\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * ModelLocatorの内容を初期状態に戻す。\r\n   */\r\n  protected resetModel(): void {\r\n    this.locator.resetUploadSection();\r\n    this.insertIndex = -1;\r\n    this.isCanceled = false;\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  protected postFailProcess(): void {\r\n    this.postProcess();\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  protected getErrorInfo(exception: Sys0Exception): Sys0ErrorInfo | null {\r\n    if (this.isCanceled) {\r\n      // キャンセルされた場合はエラーを出さない。\r\n      this.postProcess();\r\n      this.terminate();\r\n      return null;\r\n    }\r\n\r\n    const errorInfo: Sys0ErrorInfo | null = super.getErrorInfo(exception);\r\n\r\n    if (errorInfo) {\r\n      if (exception.key === Sys0ErrorType.UPLOAD_TEMP_FILENAME_SIZE_OVER) {\r\n        // ファイルパスが長すぎた\r\n        this.showNavigation = false;\r\n        errorInfo.message = this.wording.get('warn.docregister.toolongpath');\r\n      }\r\n    }\r\n\r\n    return errorInfo;\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo): void {\r\n    if (this.isSystemClose) {\r\n      // システム終了\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message ? errorInfo.message : '');\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        // 編集モードの場合\r\n        // 編集を破棄する。\r\n        this.cancelEdit();\r\n      }\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  protected getFileSizeOver(): string {\r\n    return 'warn.common.filenametoolong';\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して終わる。\r\n   */\r\n  protected cancelEdit(): void {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('parameter is null');\r\n    } else {\r\n      sys0ConnectObject.documentUpdateEnd(this.locator.currentDocument, null, '', '', false, () => {});\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../core/commands/abstract-sys0-rpc-command';\r\nimport { Param } from '../../core/models/param';\r\nimport { Sys0BaseEvent } from '../../core/models/sys0-base-event';\r\n\r\n/**\r\n * セクション移動用のベースコマンドです。\r\n */\r\nexport class BaseMoveSectionCommand extends AbstractSys0RpcCommand {\r\n  /**\r\n   * コンストラクタです。\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  call() {\r\n    throw new ApplicationError('Method not implemented.');\r\n  }\r\n  succeed(response: any) {\r\n    throw new ApplicationError('Method not implemented.');\r\n  }\r\n  request(param: Param): Sys0BaseEvent | null {\r\n    throw new ApplicationError('Method not implemented.');\r\n  }\r\n}\r\n","import { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { ExternalJsCallback } from '../../../core/external-js-callback';\r\nimport { UrlService } from '../../../core/services/url.service';\r\n\r\n/**\r\n * ヘルプを表示するコマンドです。\r\n *\r\n */\r\nexport class HelpClickCommand extends AbstractSys0Command {\r\n  // ★Stitch V1.3対応\r\n  private urlService: UrlService;\r\n\r\n  // ★Stitch V1.3対応\r\n  private externalJsCallback: ExternalJsCallback;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.urlService = this.injector.get(UrlService);\r\n    this.externalJsCallback = this.injector.get(ExternalJsCallback);\r\n  }\r\n  /**\r\n   * @inheritDoc\r\n   * ヘルプボタンが押下された時の処理\r\n   * ヘルプ用画面を表示する。\r\n   */\r\n  protected doCommand() {\r\n    // BaseURLの設定\r\n    const url = this.urlService.getBaseURL();\r\n\r\n    // ヘルプ画面を表示\r\n    const helpURL = url + '/doc/RSNUserGuide.pdf';\r\n    this.externalJsCallback.openApp(helpURL);\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","/**\r\n * CHANGE_UPDATEイベントが発生したときの処理です。\r\n *\r\n */\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { ConfirmUpdateEvent } from '../../../core/event/confirm-update-event';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0CommonUtil } from '../../../core/utils/sys0-common-util';\r\nimport { ConfirmUpdateItem } from '../../../shared/models/confirm-update-item';\r\nimport { ConfirmUpdateDialogComponent } from '../../containers/dialogs/confirm-update-dialog/confirm-update-dialog.component';\r\n\r\nexport class ConfirmUpdateChangeActionCommand extends AbstractSys0Command {\r\n  private dialog: ConfirmUpdateDialogComponent;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  check(param: Param) {\r\n    this.dialog = this.parent as ConfirmUpdateDialogComponent;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * 画面の切り替えを行ないます。\r\n   */\r\n  protected doCommand() {\r\n    const confirmEvent: ConfirmUpdateEvent = this.event as ConfirmUpdateEvent;\r\n\r\n    if (!confirmEvent.relatedEvent) {\r\n      throw new ApplicationError('event is null');\r\n    }\r\n\r\n    const level: number = (this.dialog.confirm.item.level === ConfirmUpdateItem.VERUP_MAJOR) ? 1 : 0;\r\n\r\n    // 版上げ後のバージョンを取得する。\r\n    this.dialog.confirm.item.updateVersion =\r\n      Sys0CommonUtil.getNextVersion(this.dialog.confirm.item.currentVersion == null ? '' : this.dialog.confirm.item.currentVersion, level);\r\n\r\n    this.dialog.confirm.visible = confirmEvent.relatedEvent.target.selectedValue === ConfirmUpdateItem.UPDATE_VERSIONUP;\r\n    this.terminate();\r\n  }\r\n}\r\n","import { CreationCompleteBaseCommand } from '../../../shared/commands/creation-complete-base-command';\r\nimport { DivideSectionDialogComponent } from '../../containers/dialogs/divide-section-dialog/divide-section-dialog.component';\r\n\r\n/**\r\n * 文書分割画面のcreationCompleteイベントの処理です。\r\n */\r\nexport class DivideSectionDialogCreationCompleteCommand extends CreationCompleteBaseCommand {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 文書分割画面を生成時にvalidatorEnabledプロパティを設定します。\r\n   */\r\n  protected doCommand(): void {\r\n    const dialog: DivideSectionDialogComponent = this.parent as DivideSectionDialogComponent;\r\n\r\n    dialog.formBindValidatorEnabled = true;\r\n\r\n    super.doCommand();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../../core/commands/abstract-sys0-rpc-command';\r\nimport { Sys0EventType } from '../../../core/commands/sys0-event-type';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../../core/models/sys0-error-info';\r\nimport { Sys0ErrorType } from '../../../core/models/sys0-error-type';\r\nimport { Sys0StringUtil } from '../../../core/utils/sys0-string-util';\r\nimport { isCabinetVO } from '../../../core/vo/cabinet-vo';\r\nimport { DocumentVO } from '../../../core/vo/document-vo';\r\nimport { ObjectBaseVO } from '../../../core/vo/object-base-vo';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { Sys0Exception } from '../../../core/vo/sys0-exception';\r\nimport { BaseDialogViewComponent } from '../../../shared/components/base-dialog-view/base-dialog-view.component';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\nimport { DivideSectionDialogComponent } from '../../containers/dialogs/divide-section-dialog/divide-section-dialog.component';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerBaseComponent } from '../../containers/viewer-base/viewer-base.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { UpdateCommand } from '../menu/update-command';\r\n\r\n/**\r\n * セクション分割設定画面でOK/キャンセルボタンを押されたときの処理です。\r\n */\r\nexport class DivideSectionOkCancelCommand extends AbstractSys0RpcCommand {\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  private dialog: DivideSectionDialogComponent | null = null;\r\n\r\n  /**\r\n   * 分割先のフォルダー。エラー時に使用。\r\n   */\r\n  private divideFolder: ObjectBaseVO | null = null;\r\n\r\n  constructor() {\r\n    super();\r\n    // ★StitchV1.3対応\r\n    // dispProgress = true;\r\n  }\r\n\r\n  /**\r\n   * キャンセル時は、画面を閉じるだけです。\r\n   * OKボタンが押されたときは、確認ダイアログを表示します。\r\n   */\r\n  check(param: Param) {\r\n    this.dialog = this.parent as DivideSectionDialogComponent;\r\n\r\n    if (this.event.type === BaseDialogViewComponent.CLICK_OK_EVENT) {\r\n      this.dialog.inputNewName = Sys0StringUtil.trim(this.dialog.inputNewName);\r\n\r\n      const validaterResult = this.dialog.formBind.validateAll();\r\n      if (validaterResult) {\r\n        for (const valiResult of validaterResult.results) {\r\n          if (valiResult.isError) {\r\n            this.messageService.showErrorMessage('warn.common.inputtext', Alert.OK, Sys0AlertType.TYPE_WARNING, null);\r\n            param.cancel = true;\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      param.isAsync = true;\r\n      this.messageService.showErrorMessage(\r\n        'question.section.divide',\r\n        Alert.YES | Alert.NO,\r\n        Sys0AlertType.TYPE_QUESTION,\r\n        this.confirmCloseHandler\r\n      );\r\n    } else {\r\n      this.popup.removePopUp(this.dialog);\r\n\r\n      param.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * イベントオブジェクトを生成します。\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    this.progressMessageLabel = this.wording.get('info.progress.divide');\r\n\r\n    return new Sys0BaseEvent(Sys0EventType.DIVIDE_DOCUMENT);\r\n  }\r\n\r\n  /**\r\n   * セクションの分割を呼び出します。\r\n   */\r\n  call() {\r\n    if (this.dialog == null) {\r\n      throw new ApplicationError('this.dialog is null.');\r\n    }\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('this.locator.currentDocument is null.');\r\n    }\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    const sectionVO: SectionVO = sectionListView.thumbnailList.selectedItem as SectionVO;\r\n    const mode: number = this.dialog.selectedValue as number;\r\n\r\n    this.popup.removePopUp(this.dialog);\r\n\r\n    this.locator.updated = true;\r\n    // 分割依頼\r\n    this.http.divideDocument(this.locator.currentDocument, sectionVO.sectionNo || 0, mode, this.dialog.inputNewName);\r\n  }\r\n\r\n  /**\r\n   * セクション一覧を更新します。\r\n   */\r\n  succeed(event: any) {\r\n    const newDocment: DocumentVO = event as DocumentVO;\r\n\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('this.locator.currentDocument is null.');\r\n    }\r\n\r\n    const currentSections: number = this.locator.currentDocument.sections as number;\r\n    this.locator.currentDocument.sections = currentSections - Number(newDocment.sections);\r\n\r\n    // セクション一覧の更新\r\n    const viewerBase = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent;\r\n    const updateCommand: UpdateCommand = this.commandProvider.getCommand(\r\n      viewerBase,\r\n      SharedCommand.SharedActionTypes.Update\r\n    ) as UpdateCommand;\r\n    updateCommand.refreshSection(this.refreshCallback);\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  protected getErrorInfo(exception: Sys0Exception): Sys0ErrorInfo | null {\r\n    if (exception.key === Sys0ErrorType.FOLDER_DOC_CREATE_AUTH) {\r\n      this.divideFolder = exception.userItem as ObjectBaseVO;\r\n    }\r\n\r\n    return super.getErrorInfo(exception);\r\n  }\r\n\r\n  // ★StitchV1.3対応 Sprite⇒anyで対応\r\n  protected get failAlertParent(): any {\r\n    return this.dialog;\r\n  }\r\n\r\n  /**\r\n   * 文書作成権限がない場合のメッセージキーを返します。\r\n   */\r\n  protected getCreateAuthMessageKey(): string {\r\n    let folderName: string | null = null;\r\n    if (isCabinetVO(this.divideFolder)) {\r\n      folderName = this.wording.get('lbl.tree.topcabinet');\r\n    } else {\r\n      folderName = this.divideFolder != null && this.divideFolder.name != null ? this.divideFolder.name : '';\r\n    }\r\n    return this.wording.get('warn.section.dividedocauth', folderName);\r\n  }\r\n\r\n  /**\r\n   * 裏でアクセス権がなくなった場合のメッセージキーを返す。\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    return 'warn.section.docallauth';\r\n  }\r\n\r\n  /**\r\n   * 裏でアクセス権が変更されていた場合のメッセージキーを返す。\r\n   */\r\n  protected getSeQuenceInvalidKey(): string {\r\n    return 'warn.section.canceleddocedit';\r\n  }\r\n\r\n  private confirmCloseHandler(event) {\r\n    if (event.detail === Alert.YES) {\r\n      this.checkComplete();\r\n    } else {\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  private refreshCallback(sucess: boolean) {\r\n    // メッセージを表示\r\n    // IMessageArea(root).navigateMessage = this.wording.get('info.messagearea.divide');\r\n    this.store.dispatch(new SharedAction.SetNavigateMessage(this.wording.get('info.messagearea.divide')));\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { ExternalJsCallback } from '../../../core/external-js-callback';\r\nimport { LoginInfo } from '../../../core/models/login-info';\r\nimport { Param } from '../../../core/models/param';\r\nimport { ServerInfoType } from '../../../core/server-info-type';\r\nimport { UrlService } from '../../../core/services/url.service';\r\nimport { getLoginInfo } from '../../../core/store/core.selectors';\r\nimport { ConfirmUpdateItem } from '../../../shared/models/confirm-update-item';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\nimport { EditConfirmDialogComponent } from '../../containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\nimport { BaseDialogViewComponent } from './../../../shared/components/base-dialog-view/base-dialog-view.component';\r\n/**\r\n * 保存方法の選択ダイアログでのOK/キャンセルボタンクリック時の処理です。\r\n */\r\nexport class EditConfirmOkCancelCommand extends AbstractSys0Command {\r\n  /**\r\n   * モデルロケーターです。\r\n   */\r\n  protected locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  // ★Stitch V1.3対応\r\n  protected externalJsCallback: ExternalJsCallback;\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected openMode = 0;\r\n\r\n  protected dialog: EditConfirmDialogComponent;\r\n  private urlService: UrlService;\r\n\r\n  /**\r\n   * 更新確認のモデルです。\r\n   */\r\n  private confirmItem: ConfirmUpdateItem | null = null;\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.urlService = this.injector.get(UrlService);\r\n    this.externalJsCallback = this.injector.get(ExternalJsCallback);\r\n  }\r\n\r\n  check(param: Param) {\r\n    this.dialog = this.parent as EditConfirmDialogComponent;\r\n\r\n    if (\r\n      this.dialog.updateAction === EditConfirmDialogComponent.EDIT_CANCEL ||\r\n      this.event.type === BaseDialogViewComponent.CLICK_CANCEL_EVENT\r\n    ) {\r\n      this.locator.removeApp(this.dialog.sectionNo.toString());\r\n\r\n      this.closeDialog();\r\n\r\n      let msg: string | null = null;\r\n      let mode: string | null = null;\r\n      if (this.dialog.currentState == null) {\r\n        msg = this.wording.get('info.messagearea.sectioneditcancel');\r\n        mode = '0';\r\n      } else {\r\n        msg = this.wording.get('info.messagearea.ftseditcancel');\r\n        mode = '1';\r\n      }\r\n\r\n      this.store.dispatch(new SharedAction.SetNavigateMessage(msg));\r\n\r\n      // キャンセル処理\r\n\r\n      if (this.locator.viewerId == null) {\r\n        throw new ApplicationError('viewerId is null');\r\n      }\r\n\r\n      if (this.dialog.filename == null) {\r\n        throw new ApplicationError('this.dialog.filename is null');\r\n      }\r\n      // キャンセル処理\r\n      this.externalJsCallback.cancelEdit(\r\n        this.locator.makeEditAppFileName(\r\n          this.locator.viewerId,\r\n          this.dialog.docId,\r\n          this.dialog.sectionNo.toString(),\r\n          this.dialog.filename,\r\n          mode\r\n        )\r\n      );\r\n\r\n      param.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected doCommand() {\r\n    this.dialog = this.parent as EditConfirmDialogComponent;\r\n\r\n    this.locator.editUpdateMode = this.dialog.updateAction.valueOf() as number;\r\n\r\n    const fileName: string | null = this.dialog.filename;\r\n\r\n    this.closeDialog();\r\n\r\n    this.progress.addCommand(null, false, 0, '', '', this.wording.get('info.progress.preparing'), null, 0, true);\r\n\r\n    let mode = '0';\r\n    if (this.dialog.currentState != null) {\r\n      mode = '1';\r\n    }\r\n    // キャンセル処理\r\n\r\n    if (this.locator.viewerId == null) {\r\n      throw new ApplicationError('viewerId is null');\r\n    }\r\n\r\n    if (fileName == null) {\r\n      throw new ApplicationError('this.dialog.filename is null');\r\n    }\r\n\r\n    if (this.dialog.docId == null) {\r\n      throw new ApplicationError('this.dialog.docId is null');\r\n    }\r\n    this.externalJsCallback.uploadFile(\r\n      this.getUploadUrl(),\r\n      this.locator.makeEditAppFileName(this.locator.viewerId, this.dialog.docId, this.dialog.sectionNo.toString(), fileName, mode)\r\n    );\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * Upload用のURLを取得します。\r\n   */\r\n  private getUploadUrl(): string {\r\n    let url: string | null = null;\r\n\r\n    const baseRemoteUrl = this.urlService.getBaseRemoteUrl();\r\n    const loginInfo: LoginInfo = this.stateUtilService.getCurrentState(getLoginInfo);\r\n    const loginInfoId = loginInfo[loginInfo.sessionId];\r\n\r\n    if (baseRemoteUrl != null && baseRemoteUrl.indexOf('{server.name}') < 0) {\r\n      url = baseRemoteUrl + '/' + ServerInfoType.UPLOAD_SERVLET + '?sessionID=' + loginInfoId + '&viewId=' + this.locator.viewerId;\r\n    } else {\r\n      // BaseURLの設定\r\n      const baseURL = this.urlService.getBaseURL();\r\n      url = baseURL + '/' + ServerInfoType.UPLOAD_SERVLET + '?sessionID=' + loginInfoId + '&viewId=' + this.locator.viewerId;\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.popup.removePopUp(this.parent);\r\n\r\n    // メニューの更新\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    sectionListView.thumbnailList.onChange();\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorType } from '../../../core/models/sys0-error-type';\r\nimport { Sys0Exception } from '../../../core/vo/sys0-exception';\r\n// tslint:disable-next-line:max-line-length\r\nimport { BaseDocumentInformationChangeMenuCommand } from '../../../shared/commands/dialog/property/base-document-information-change-menu-command';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * ビューア画面の文書情報ダイアログのメニュー切り替えを行うときの処理をおこなうコマンドクラスです。\r\n *\r\n */\r\nexport class ViewerDocumentInformationChangeMenuCommand extends BaseDocumentInformationChangeMenuCommand {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n  check(param: Param) {\r\n    super.check(param);\r\n\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  protected showErrorMessage(exception: Sys0Exception) {\r\n    // 文書が削除されていた、アクセス権なしの場合\r\n    if (exception.key === Sys0ErrorType.DOCUMENT_DELETE || exception.key === Sys0ErrorType.DOCUMENT_ALL_AUTH) {\r\n      // 更新モードの場合、ロックを解除\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        // 編集を破棄する。\r\n        this.cancelEdit();\r\n      } else {\r\n        this.disconnect();\r\n      }\r\n      this.showSysCloseDialog('warn.pdf.docnonexist');\r\n    } else {\r\n      // ★Stitch V1.3対応 messageDetail空判断を追加する\r\n      let messageDetail: string;\r\n      if (exception.messageDetail == null) {\r\n        messageDetail = this.wording.get('warn.common.unknownerror');\r\n      } else {\r\n        messageDetail = this.wording.get('warn.common.unknownerror', exception.messageDetail);\r\n      }\r\n      this.messageService.showErrorMessage(messageDetail, Alert.OK, Sys0AlertType.TYPE_SYSTEM_ERROR, null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して、ロックを解除します。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    // ★Stitch V1.3対応 currentDocumentの非空判断\r\n    const currentDocument = ViewerModelLocatorService.getInstance().currentDocument;\r\n    if (currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    sys0ConnectObject.documentUpdateEnd(currentDocument, null, null, null, false, null);\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorType } from '../../../core/models/sys0-error-type';\r\nimport { DocumentVO } from '../../../core/vo/document-vo';\r\nimport { Sys0Exception } from '../../../core/vo/sys0-exception';\r\n// tslint:disable-next-line:max-line-length\r\nimport { BaseDocumentInformationChangeTabNavigator } from '../../../shared/commands/dialog/property/base-document-information-change-tab-navigator';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * ビューアの文書情報ダイアログのタブ切り替えを行うときの処理をおこなうコマンドクラスです。\r\n *\r\n */\r\nexport class ViewerDocumentInformationChangeTabNavigator extends BaseDocumentInformationChangeTabNavigator {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n  check(param: Param) {\r\n    super.check(param);\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  protected showErrorMessage(exception: Sys0Exception) {\r\n    // 文書が削除されていた、アクセス権なしの場合\r\n    if (exception.key === Sys0ErrorType.DOCUMENT_DELETE || exception.key === Sys0ErrorType.DOCUMENT_ALL_AUTH) {\r\n      // 更新モードの場合、ロックを解除\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        // 編集を破棄する。\r\n        this.cancelEdit();\r\n      } else {\r\n        this.disconnect();\r\n      }\r\n\r\n      // ★Stitch V1.3対応\r\n      // 他のコマンドに合わせて、showSysCloseDialog()よりmessageServiceを利用する方式に変更\r\n      this.showSysCloseDialog('warn.pdf.docnonexist');\r\n    } else {\r\n      this.messageService.showErrorMessage(this.wording.get('warn.common.unknownerror'), Alert.OK, Sys0AlertType.TYPE_SYSTEM_ERROR, null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して、ロックを解除します。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    const parentDoc: DocumentVO | null = this.locator.currentDocument;\r\n    // ★Stitch V1.3対応　locatorの空判断\r\n    if (parentDoc == null) {\r\n      throw new ApplicationError('parentDoc is null.');\r\n    }\r\n    sys0ConnectObject.documentUpdateEnd(parentDoc, null, null, null, false, null);\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   * ★Stitch V1.3対応\r\n   * 新規作成\r\n   */\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorInfo } from '../../../core/models/sys0-error-info';\r\nimport { DocumentVO } from '../../../core/vo/document-vo';\r\n// tslint:disable-next-line:max-line-length\r\nimport { BaseDocumentInformationGetUserNumberCommand } from '../../../shared/commands/dialog/property/base-document-information-get-user-number-command';\r\n// tslint:disable-next-line:max-line-length\r\nimport { DocumentInformationBaseComponent } from '../../../shared/components/dialog/property/document-information-base/document-information-base.component';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * ビューア画面の文書情報ダイアログの採番を行うときの処理をおこなうコマンドクラスです。\r\n *\r\n */\r\nexport class ViewerDocumentInformationGetUserNumberCommand extends BaseDocumentInformationGetUserNumberCommand {\r\n  /**\r\n   * ビューアーを閉じるように促します。\r\n   */\r\n  private isSystemClose = false;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    super.check(param);\r\n\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  protected get targetVo(): DocumentVO {\r\n    // ★Stitch V1.3対応 docProperty初期化方法を変更します。\r\n    const baseDialog = this.event.currentTarget as DocumentInformationBaseComponent;\r\n    const docProperty = baseDialog.documentProperty;\r\n    return docProperty.vo;\r\n  }\r\n\r\n  /**\r\n   * OKボタンのない、エラーメッセージを表示します。\r\n   *\r\n   * @param errorInfo\r\n   *\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.isSystemClose) {\r\n      // disconnectを実行する\r\n      this.disconnect();\r\n      // ★Stitch V1.3対応　errorInfo.messageの空判断\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo is null.');\r\n      }\r\n      this.showSysCloseDialog(errorInfo.message);\r\n\r\n      // 初期化\r\n      this.isSystemClose = false;\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文書のアクセス権がない場合、エラーメッセージを返します。\r\n   *\r\n   * @return\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 文書が削除されていた場合、エラーメッセージを返します。\r\n   *\r\n   * @return\r\n   */\r\n  protected getDeleteMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","// tslint:disable-next-line:max-line-length\r\nimport { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { ExternalJsCallback } from '../../../core/external-js-callback';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorInfo } from '../../../core/models/sys0-error-info';\r\nimport { DocumentVO, isDocumentVO } from '../../../core/vo/document-vo';\r\nimport { MainComponent } from '../../../main/containers/main/main.component';\r\nimport { MainViewTypes } from '../../../main/models/main-view-types';\r\n// tslint:disable-next-line:max-line-length\r\nimport { BaseDocumentInformationOkCancelCommand } from '../../../shared/commands/dialog/property/base-document-information-ok-cancel-command';\r\n// tslint:disable-next-line:max-line-length\r\nimport { DocumentInformationBaseComponent } from '../../../shared/components/dialog/property/document-information-base/document-information-base.component';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * ビューアから開いた文書情報ダイアログのOK/キャンセルボタンをクリックしたときの処理です。\r\n *\r\n * OKボタンをクリックした場合で、\r\n * プロパティを表示している場合は、内容を保存して画面を閉じます。\r\n * プロパティ以外の場合は、何もせず、画面を閉じます。\r\n * &middot;ビューア参照モードから文書情報ダイアログを表示した場合は、\r\n * disconnectObjectを実行します。\r\n * &middot;ビューア更新モードから文書情報ダイアログを表示した場合は、\r\n * editDocumentDetailを実行します。\r\n *\r\n * キャンセルボタンをクリックした場合は、変更した内容を破棄し、\r\n * 文書情報ダイアログを閉じます。\r\n *\r\n */\r\nexport class ViewerDocumentInformationOkCancelCommand extends BaseDocumentInformationOkCancelCommand {\r\n  /**\r\n   * モデルロケーターです。\r\n   */\r\n  protected locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * ビューアーを閉じるように促します。\r\n   */\r\n  private isSystemClose = false;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  call() {\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      // 更新モード時のみ\r\n      this.locator.updated = true;\r\n    }\r\n    // ★Stitch V1.3対応 responderを削除\r\n    super.call();\r\n  }\r\n\r\n  succeed(event: any) {\r\n    if (isDocumentVO(event.result != null && event.result)) {\r\n      // ★Stitch V1.3対応　this.dialogの空判断\r\n      if (this.dialog == null) {\r\n        throw new ApplicationError('dialog is null.');\r\n      }\r\n      // 更新する場合のみ\r\n      if (this.isCommit || this.dialog.viewerMode === BaseModelLocator.MODE_EDITABLE) {\r\n        const documentVo: DocumentVO = event.result as DocumentVO;\r\n\r\n        if (this.dialog.viewerMode === BaseModelLocator.MODE_EDITABLE) {\r\n          this.locator.documentPropInfo = documentVo;\r\n        } else {\r\n          this.locator.currentDocument = documentVo;\r\n        }\r\n\r\n        // ビューアの名前を変更\r\n        let title: string | null = null;\r\n        if (this.locator.version) {\r\n          title = documentVo.name + '(' + this.wording.get('lbl.viewer.version') + this.locator.version.name + ')';\r\n        } else {\r\n          title = documentVo.name;\r\n        }\r\n\r\n        // ★Stitch V1.3対応 MainComponentを取得する\r\n        const main = this.viewManager.get(MainViewTypes.Root) as MainComponent | undefined;\r\n        if (main == null) {\r\n          throw new ApplicationError('main is null.');\r\n        }\r\n\r\n        // ★Stitch V1.3対応 titleを設定、実装方法を修正する\r\n        if (title == null) {\r\n          throw new ApplicationError('title is null.');\r\n        }\r\n        // ブラウザの名前を変更\r\n        let externalJsCallback: ExternalJsCallback;\r\n        externalJsCallback = this.injector.get(ExternalJsCallback);\r\n        externalJsCallback.setTitle(title);\r\n\r\n        // メッセージエリアに更新完了のメッセージを表示\r\n        // ★Stitch V1.3対応 navigateMessage対応\r\n        this.store.dispatch(new SharedAction.SetNavigateMessage(this.wording.get('info.docprop.update')));\r\n\r\n        // terminate();\r\n      }\r\n\r\n      // 画面を閉じる\r\n      this.closeDialog();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文書プロパティの情報を取得します。\r\n   */\r\n  protected getDialogInfo() {\r\n    this.dialog = this.event.currentTarget as DocumentInformationBaseComponent;\r\n    // ★Stitch V1.3対応　this.locator.currentDocumentの空判断\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    this.selectedItem = this.locator.currentDocument;\r\n  }\r\n\r\n  /**\r\n   * OKボタンのないエラーメッセージダイアログを表示します。\r\n   *\r\n   * @param errorInfo\r\n   *\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.isSystemClose) {\r\n      // disconnectを実行する\r\n      this.doPostFailProcess = true;\r\n      this.postFailProcess();\r\n      // ★Stitch V1.3対応　errorInfo.messageの空判断\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo is null.');\r\n      }\r\n      this.showSysCloseDialog(errorInfo.message);\r\n\r\n      // 初期化\r\n      this.isSystemClose = false;\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * アクセス権がない場合、エラーメッセージを返します。\r\n   *\r\n   * @return\r\n   *\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 削除されていた場合、エラーメッセージを返します。\r\n   *\r\n   * @return\r\n   *\r\n   */\r\n  protected getDeleteMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * ごみ箱に移動されていた場合、エラーメッセージを返します。\r\n   *\r\n   * @return\r\n   *\r\n   */\r\n  protected getTrashMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docintrash';\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { StatusVO } from '../../../core/vo/status-vo';\r\nimport { BaseInformDialogOkCancelCommand } from '../../../shared/commands/dialog/base-inform-dialog-ok-cancel-command';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * ビューアからの通知入力ダイアログでOKまたは、キャンセルボタンを押されたときの処理です。\r\n *\r\n */\r\nexport class ViewerInformDialogOkCancelCommand extends BaseInformDialogOkCancelCommand {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n  check(param: Param) {\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n\r\n    super.check(param);\r\n  }\r\n\r\n  protected showErrorMessage(status: StatusVO): boolean {\r\n    // 削除されていた or アクセス権なし\r\n    if (status.erase || status.disable) {\r\n      this.showSysCloseDialog('warn.pdf.docnonexist');\r\n\r\n      // 更新モードの場合、ロックを解除\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        // 編集モードの場合\r\n        // 編集を破棄する。\r\n        this.cancelEdit();\r\n      }\r\n\r\n      this.checkComplete(true);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して、ロックを解除します。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    // ★Stitch V1.3対応 viewerのundefined判断\r\n    const locator = ViewerModelLocatorService.getInstance();\r\n    if (locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n\r\n    sys0ConnectObject.documentUpdateEnd(locator.currentDocument, null, null, null, false, null);\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { Sys0Object } from '../../../core/commands/sys0-object';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { BaseEvent } from '../../../core/event/base-event';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorType } from '../../../core/models/sys0-error-type';\r\nimport { DocumentVO } from '../../../core/vo/document-vo';\r\nimport { Sys0Exception } from '../../../core/vo/sys0-exception';\r\nimport { DocumentViewComponent } from '../../../main/containers/document-view/document-view.component';\r\nimport { BaseShowDocumentInformationCommand } from '../../../shared/commands/menu/base-show-document-information-command';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ViewerBaseComponent } from '../../containers/viewer-base/viewer-base.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * メニューからの文書プロパティダイアログの表示を行ないます。\r\n * ビューアから文書プロパティダイアログを表示する際に呼ばれます。\r\n *\r\n */\r\nexport class ViewerShowDocumentInformationCommand extends BaseShowDocumentInformationCommand {\r\n  private viewerLocator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  private setLocator = false;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheirtDoc\r\n   */\r\n  check(param: Param) {\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n\r\n    super.check(param);\r\n\r\n    // 旧版の場合、編集不可\r\n    /* if(locator.version != null) {\r\n        notEdit = true;\r\n    } */\r\n    param.isAsync = true;\r\n  }\r\n\r\n  // ★Stitch V1.3対応 親クラスのメッソドを継承するためにここで定義する\r\n  protected doCommand() {}\r\n\r\n  /**\r\n   * ビューアのdocumentVoを取得します。\r\n   */\r\n  protected getSelectedItem() {\r\n    // ★Stitch V1.3対応 viewerLocator.currentDocumentの非空判断\r\n    if (this.viewerLocator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    this.selectedItem = this.viewerLocator.currentDocument.clone();\r\n  }\r\n\r\n  /**\r\n   * 選択している文書の文書情報詳細を取得します。\r\n   *\r\n   * 編集権限がない文書、ごみ箱に移動された文書、ビューアが更新モードの場合は、\r\n   * getDocumentDetailを実行します。\r\n   * ビューアが参照モードで更新権限がある場合は、\r\n   * connectObjectを実行します。\r\n   *\r\n   * @param target documentVo\r\n   */\r\n  protected getDocumentInformationDetail(target: DocumentVO) {\r\n    // ★Stitch V1.3対応 currentMode取得方法\r\n    this.viewerMode = this.locator.currentMode;\r\n\r\n    if (this.viewerMode === BaseModelLocator.MODE_EDITABLE || this.notEdit) {\r\n      if (!this.notEdit) {\r\n        this.viewerEdit = true;\r\n      }\r\n\r\n      // ロケーターに値がセットされている場合\r\n      if (this.viewerLocator.documentPropInfo == null) {\r\n        const sys0Object: Sys0Object = new Sys0Object();\r\n        sys0Object.getDocumentDetail(target, null, this.documentDetailCallback);\r\n        this.setLocator = true;\r\n      } else {\r\n        this.documentDetailCallback(this.viewerLocator.documentPropInfo.clone());\r\n      }\r\n    } else {\r\n      const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n      sys0ConnectObject.connectObject(target, null, this.documentDetailCallback);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ブラウザを閉じられた場合、メッセージを表示するか判断するためのフラグをセット\r\n   */\r\n  protected setBeforeUnloadShowMsgDocPropFlg() {\r\n    this.locator.beforeUnloadShowMsgDocProp = true;\r\n  }\r\n\r\n  protected showErrorMessage(exception: Sys0Exception) {\r\n    switch (exception.key) {\r\n      // 文書が削除されている\r\n      case Sys0ErrorType.DOCUMENT_DELETE:\r\n      // 文書のアクセス権なし\r\n      case Sys0ErrorType.DOCUMENT_ALL_AUTH:\r\n        this.showSysCloseDialog('warn.pdf.docnonexist');\r\n\r\n        // 更新モードの場合、ロックを解除\r\n        if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n          // 編集モードの場合\r\n          // 編集を破棄する。\r\n          this.cancelEdit();\r\n        }\r\n\r\n        break;\r\n      default:\r\n        // ★Stitch V1.3対応 messageDetail空判断を追加する\r\n        let messageDetail: string;\r\n        if (exception.messageDetail == null) {\r\n          messageDetail = this.wording.get('warn.common.unknownerror');\r\n        } else {\r\n          messageDetail = this.wording.get('warn.common.unknownerror', exception.messageDetail);\r\n        }\r\n        this.messageService.showErrorMessage(messageDetail, Alert.OK, Sys0AlertType.TYPE_SYSTEM_ERROR);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * OK/キャンセルが押された場合に呼ばれるコマンドを定義しています。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n  protected saveDocumentInformation(event: BaseEvent) {\r\n    // ★Stitch V1.3対応\r\n    // commandMap.execEvent対応\r\n    const base = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n    if (base == null) {\r\n      throw new ApplicationError('Unexpected undefined value for base.');\r\n    }\r\n    this.commandProvider.execCommand(base, SharedCommand.SharedActionTypes.DocumentInformationClick, event);\r\n  }\r\n\r\n  /**\r\n   * 文書情報ダイアログのタブを切り替えたときの処理です。\r\n   *\r\n   * @param event\r\n   */\r\n  protected changeTabNavigator(event: BaseEvent) {\r\n    // ★Stitch V1.3対応\r\n    // commandMap.execEvent対応\r\n    const base = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n    if (base == null) {\r\n      throw new ApplicationError('Unexpected undefined value for base.');\r\n    }\r\n    this.commandProvider.execCommand(base, SharedCommand.SharedActionTypes.DocumentInformationClick, event);\r\n  }\r\n\r\n  /**\r\n   * 文書情報ダイアログ採番実行時の処理です。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n  protected getUserNumber(event: BaseEvent) {\r\n    // ★Stitch V1.3対応\r\n    // commandMap.execEvent対応\r\n    const base = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n    if (base == null) {\r\n      throw new ApplicationError('Unexpected undefined value for base.');\r\n    }\r\n    this.commandProvider.execCommand(base, SharedCommand.SharedActionTypes.GetUserNumber, event);\r\n  }\r\n\r\n  /**\r\n   * 文書情報ダイアログのメニューを切り替えたときの処理です。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n  protected changeMenu(event: BaseEvent) {\r\n    // ★Stitch V1.3対応\r\n    // commandMap.execEvent対応\r\n    const base = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n    if (base == null) {\r\n      throw new ApplicationError('Unexpected undefined value for base.');\r\n    }\r\n\r\n    this.commandProvider.execCommand(base, SharedCommand.SharedActionTypes.ChangeMenu, event);\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して、ロックを解除します。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    // ★Stitch V1.3対応 currentDocumentの非空判断\r\n    const currentDocument = ViewerModelLocatorService.getInstance().currentDocument;\r\n    if (currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    sys0ConnectObject.documentUpdateEnd(currentDocument, null, null, null, false, null);\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../core/application-error';\r\nimport { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { Sys0CommonUtil } from '../../core/utils/sys0-common-util';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { BaseEditApplicationCommand } from '../../shared/commands/base-edit-application-command';\r\nimport { AutoEditEvent } from '../../shared/event/auto-edit-event';\r\nimport { EditConfirmDialogComponent } from '../containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component';\r\nimport { PdfViewComponent } from '../containers/pdf/pdf-view.component';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\n/**\r\n * 編集終了後の処理です。\r\n *\r\n */\r\nexport class EditCompleteCommand extends BaseEditApplicationCommand {\r\n  private viewerLocator: ViewerModelLocator = this.locator as ViewerModelLocator;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  protected get locator(): BaseModelLocator {\r\n    return ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  protected doCommand() {\r\n    let running = -1;\r\n\r\n    const viewerLocator: ViewerModelLocator = this.locator as ViewerModelLocator;\r\n    if (viewerLocator.runnningAppSections.hasOwnProperty(this.autoEditEvent.sectionNo.toString())) {\r\n      running = viewerLocator.runnningAppSections[this.autoEditEvent.sectionNo.toString()];\r\n    }\r\n\r\n    if (running === SectionVO.APP_OPEN) {\r\n      // アプリが開いている\r\n      if (this.autoEditEvent.editResult === AutoEditEvent.RESULT_EDIT) {\r\n        // 編集あり\r\n        if (this.viewerLocator.sectionList == null) {\r\n          throw new ApplicationError('sectionList is null.');\r\n        }\r\n        const sectionList: any[] = this.viewerLocator.sectionList;\r\n        const sectionVo: SectionVO = sectionList[this.autoEditEvent.sectionNo - 1] as SectionVO;\r\n        this.logger.info(\r\n          'アプリ終了 >> 編集されていました: ' +\r\n            sectionVo.name +\r\n            ' sectionVo.runningApp=' +\r\n            sectionVo.runningApp.toString() +\r\n            ' running = ' +\r\n            running.toString()\r\n        );\r\n        if (running === SectionVO.APP_OPEN && this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n          // 更新モードで編集してたファイル\r\n\r\n          // ★Stitch V1.3対応 Componentの生成方法をPopup Service経由に変更\r\n          // tslint:disable-next-line:max-line-length\r\n          const componentRef = this.popup.createComponentInstance(EditConfirmDialogComponent) as ComponentRef<\r\n            EditConfirmDialogComponent\r\n          > | null;\r\n          if (componentRef == null) {\r\n            throw new ApplicationError('Failed to create component<DocumentSubDataDialogComponent>.');\r\n          }\r\n          const dialog = componentRef.instance;\r\n\r\n          dialog.filename = this.autoEditEvent.fileName || '';\r\n          dialog.docId = this.autoEditEvent.docId;\r\n          dialog.sectionNo = this.autoEditEvent.sectionNo;\r\n\r\n          dialog.notifyChange();\r\n          // セクション名は拡張子を除いたファイル名\r\n          dialog.sectionName = Sys0CommonUtil.getFileNameWithoutExt(dialog.filename);\r\n\r\n          // ★Stitch V1.3対応 component取得\r\n          const pdfView: PdfViewComponent = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent;\r\n          pdfView.offIFrame(true);\r\n\r\n          // IFrameエリアを閉じる\r\n          // ★Stitch V1.3対応 component取得\r\n          const sectionView: SectionViewComponent = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n          sectionView.visibleIFrameHtml = false;\r\n\r\n          (this.locator as ViewerModelLocator).lastEditFileName = this.autoEditEvent.fileName;\r\n          // ダイアログを表示します。\r\n          this.popup.addPopUp(componentRef);\r\n          dialog.callLater(this.viewDetail);\r\n\r\n          if (this.autoEditEvent.isFts) {\r\n            // 全文データの場合は追加なしの画面\r\n            dialog.currentState = EditConfirmDialogComponent.STATE_FTS;\r\n            dialog.editCurrentVersionLabel = this.wording.get('lbl.ftseditconfirm.message').replace('\\n', '<br/>');\r\n            dialog.editVisible = false;\r\n          }\r\n          this.popup.createPopUp(EditConfirmDialogComponent);\r\n        } else {\r\n          this.logger.info(\r\n            'アプリ終了 >> その他 (runningApp = ' + running.toString() + ' ' + 'editMode = ' + this.locator.currentMode.toString() + ')'\r\n          );\r\n        }\r\n      } else {\r\n        this.logger.info('アプリ終了 >> 編集されてませんでした。(セクション番号: ' + this.autoEditEvent.sectionNo.toString() + ')');\r\n\r\n        this.resetFlag(this.autoEditEvent.sectionNo);\r\n        this.refresh();\r\n        if (this.viewerLocator.viewerId == null) {\r\n          throw new ApplicationError('viewerId is null.');\r\n        }\r\n        this.postNonEdit(this.viewerLocator.viewerId);\r\n      }\r\n    } else {\r\n      this.logger.info('アプリは更新可能ではないので何もせずに終了します。');\r\n      // nullでないことを保証した上で動作する\r\n      if (this.viewerLocator.viewerId == null) {\r\n        throw new ApplicationError('viewerId is null.');\r\n      }\r\n      // 編集なしなどの場合\r\n\r\n      this.resetFlag(this.autoEditEvent.sectionNo);\r\n      this.refresh();\r\n      // ★Stitch V1.3対応\r\n      // キャストしたパラメータをnullチェックしてもエラーが解消しなかったため、\r\n      // BaseLocatorからキャストせず、viewerLocatorから参照するように変更\r\n      this.postNonEdit(this.viewerLocator.viewerId);\r\n      // postNonEdit(ViewerModelLocator(locator).viewerId);\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  private viewDetail(dialog: EditConfirmDialogComponent) {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.viewerLocator.sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    // セクション数が200以上だったら追加できない。\r\n    // ★Stitch V1.3対応\r\n    // キャストしたパラメータをnullチェックしてもエラーが解消しなかったため、\r\n    // BaseLocatorからキャストせず、viewerLocatorから参照するように変更\r\n    dialog.insert.enabled = !(this.viewerLocator.sectionList.length >= 200);\r\n    // dialog.insert.enabled = !((this.locator as ViewerModelLocator).sectionList.length >= 200);\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (dialog.filename == null) {\r\n      throw new ApplicationError('fileName is null.');\r\n    }\r\n    Sys0CommonUtil.setFocusToFirstItem(dialog.confirm);\r\n  }\r\n\r\n  private resetFlag(sectionNo: number) {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.viewerLocator.sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    // ★Stitch V1.3対応\r\n    // キャストしたパラメータをnullチェックしてもエラーが解消しなかったため、\r\n    // BaseLocatorからキャストせず、viewerLocatorから参照するように変更\r\n    const sectionVO: SectionVO = this.viewerLocator.sectionList[sectionNo - 1] as SectionVO;\r\n    // const sectionVO: SectionVO = (this.locator as ViewerModelLocator).sectionList[sectionNo - 1] as SectionVO;\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionVO.sectionNo == null) {\r\n      throw new ApplicationError('sectionVO.sectionNo is null.');\r\n    }\r\n    (this.locator as ViewerModelLocator).removeApp(sectionVO.sectionNo.toString());\r\n  }\r\n\r\n  private refresh() {\r\n    // セクション一覧更新\r\n    // D&Dエリアも更新される\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    // ★Stitch V1.3対応 dispatch対応\r\n    sectionListView.thumbnailList.onChange();\r\n    // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n  }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { AbstractSys0Command } from '../../core/commands/abstract-sys0-command';\r\nimport { ISys0Command } from '../../core/commands/i-sys0-command';\r\nimport { AutoEditEvent } from '../../shared/event/auto-edit-event';\r\nimport { ViewerBaseComponent } from '../containers/viewer-base/viewer-base.component';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerCommand } from '../store/viewer.actions';\r\n\r\n/**\r\n * アプリ/全文データ 編集後の再登録をおこないます。\r\n *\r\n */\r\nexport class EditUploadCommand extends AbstractSys0Command {\r\n  /**\r\n   * イベントオブジェクトです。\r\n   */\r\n  private autoEditEvent: AutoEditEvent | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected doCommand() {\r\n    this.autoEditEvent = this.event as AutoEditEvent;\r\n    let sys0Command: ISys0Command | null = null;\r\n\r\n    // ★Stitch V1.3対応\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerBaseComponent | undefined;\r\n    if (viewer == null) {\r\n      throw new ApplicationError('Failed to retrieve viewer.');\r\n    }\r\n    // 全文か？\r\n    if (this.autoEditEvent.isFts) {\r\n      sys0Command = this.commandProvider.getCommand(viewer, ViewerCommand.ViewerActionTypes.EditUploadFts);\r\n    } else {\r\n      sys0Command = this.commandProvider.getCommand(viewer, ViewerCommand.ViewerActionTypes.EditUploadSection);\r\n    }\r\n    sys0Command.event = this.event; // そのまま渡す\r\n\r\n    sys0Command.execCommand();\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\n\r\nimport { ApplicationError } from '../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../core/commands/abstract-sys0-rpc-command';\r\nimport { Sys0EventType } from '../../core/commands/sys0-event-type';\r\nimport { ExternalJsCallback } from '../../core/external-js-callback';\r\nimport { Param } from '../../core/models/param';\r\nimport { Sys0BaseEvent } from '../../core/models/sys0-base-event';\r\nimport { StateUtilService } from '../../core/services/state-util.service';\r\nimport * as CoreSelector from '../../core/store/core.selectors';\r\nimport { StoreUtil } from '../../core/utils/store-util';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { AutoEditEvent } from '../../shared/event/auto-edit-event';\r\nimport { ListEvent } from '../../shared/event/list-event';\r\nimport { SharedCommand } from '../../shared/store/shared.actions';\r\nimport * as SharedAction from '../../shared/store/shared.actions';\r\nimport { EditConfirmDialogComponent } from '../containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\n/**\r\n * 全文データ 編集後の再登録をおこないます。\r\n */\r\nexport class EditUploadFtsCommand extends AbstractSys0RpcCommand {\r\n  // ★Stitch V1.3対応 ExternalJsCallbackを定義\r\n  protected externalJsCallback: ExternalJsCallback;\r\n\r\n  /** イベントオブジェクトです。 */\r\n  private autoEditEvent: AutoEditEvent | null = null;\r\n\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  private stateUtil: StateUtilService;\r\n\r\n  /**\r\n   * コンストラクタです。\r\n   */\r\n  constructor() {\r\n    super();\r\n\r\n    this.cancelable = false;\r\n    this.displayProgress = true;\r\n    this.stateUtil = this.injector.get(StateUtilService);\r\n    this.externalJsCallback = this.injector.get(ExternalJsCallback);\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  check(param: Param) {\r\n    this.autoEditEvent = this.event as AutoEditEvent;\r\n\r\n    this.progress.removeCommand(null); // 準備中を消す\r\n\r\n    this.progressNameLabel = this.wording.get('info.progress.sectionname');\r\n    if (this.locator.editUpdateMode === EditConfirmDialogComponent.EDIT_UPDATE) {\r\n      this.progressMessageLabel = this.wording.get('info.progress.updatesection');\r\n    } else {\r\n      this.progressMessageLabel = this.wording.get('info.progress.addingsection');\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.SET_SUB_DATA);\r\n  }\r\n\r\n  /**\r\n   * 全文検索データの差し替えを呼び出す。\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.');\r\n    }\r\n    if (this.locator.viewerId == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.viewerId.');\r\n    }\r\n    if (this.autoEditEvent.fileName == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.fileName.');\r\n    }\r\n    // 全文データを登録する\r\n    this.http.setSubData(\r\n      this.locator.currentDocument,\r\n      this.autoEditEvent.sectionNo,\r\n      SectionVO.RENDITION_TYPE_FTS,\r\n      this.locator.viewerId,\r\n      this.autoEditEvent.fileName\r\n    );\r\n  }\r\n\r\n  succeed(event: any) {\r\n    // メッセージを出す\r\n    const msg = this.wording.get('info.messagearea.updatefts');\r\n    this.store.dispatch(new SharedAction.SetNavigateMessage(msg));\r\n    // 終了処理\r\n    this.postProcess();\r\n    this.locator.updated = true;\r\n    this.terminate();\r\n  }\r\n\r\n  fail(event: HttpErrorResponse) {\r\n    super.fail(event);\r\n\r\n    // ★Stitch V1.3対応 isStoppedの情報をStateUtilServiceから取得\r\n    const isStopped: boolean = this.stateUtil.getCurrentState(CoreSelector.getApplicationStop) || false;\r\n    if (isStopped) {\r\n      // OKボタンなしの場合\r\n      this.resumeAppEdit();\r\n    }\r\n  }\r\n\r\n  protected postFailProcess() {\r\n    this.postProcess();\r\n\r\n    this.resumeAppEdit();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected postProcess() {\r\n    // ★Stitch V1.3対応\r\n    // Flex版ではSectionViewのイベントを呼び出すためにthumbnailListを取得していたが、\r\n    // 直接SectionViewのイベントを呼び出すので、thumbnailListは不要。よって処理を削除\r\n\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    // 起動フラグ解除\r\n    this.locator.removeApp(this.autoEditEvent.sectionNo.toString());\r\n\r\n    // ★Stitch V1.3対応\r\n    const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionView.');\r\n    }\r\n    // メニューの更新\r\n    // ★Stitch V1.3対応 storeを利用したChangeコマンド呼び出しに変更\r\n    const changeListEvent: ListEvent = new ListEvent(ListEvent.CHANGE);\r\n    const changeAction = StoreUtil.makeAction(SharedCommand.Change, sectionView, changeListEvent);\r\n    this.store.dispatch(changeAction);\r\n    // ★Stitch V1.3対応 storeを利用したClickコマンド呼び出しに変更\r\n    const itemClickEvent: ListEvent = new ListEvent(ListEvent.ITEM_CLICK);\r\n    const itemClickAction = StoreUtil.makeAction(SharedCommand.ItemClick, sectionView, itemClickEvent);\r\n    this.store.dispatch(itemClickAction);\r\n  }\r\n\r\n  protected getAllAuthMessageKey(): string {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.');\r\n    }\r\n    if (this.locator.currentDocument.name == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.name.');\r\n    }\r\n    return this.wording.get('warn.application.updatedocauth', this.locator.currentDocument.name);\r\n  }\r\n\r\n  protected getUpdateAuthMessageKey(): string {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.');\r\n    }\r\n    if (this.locator.currentDocument.name == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.name.');\r\n    }\r\n    return this.wording.get('warn.application.updatedocauth', this.locator.currentDocument.name);\r\n  }\r\n\r\n  /**\r\n   * アプリを再起動する\r\n   */\r\n  private resumeAppEdit() {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.viewerId == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.viewerId.');\r\n    }\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    if (this.autoEditEvent.fileName == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.fileName.');\r\n    }\r\n    // アプリを再起動する\r\n    this.externalJsCallback.resumeEditFTS(\r\n      this.locator.makeEditAppFileName(\r\n        this.locator.viewerId,\r\n        this.autoEditEvent.docId,\r\n        this.autoEditEvent.sectionNo.toString(),\r\n        this.autoEditEvent.fileName,\r\n        '1'\r\n      ),\r\n      1\r\n    );\r\n  }\r\n\r\n  /**\r\n   * アプリ編集終了処理を行う。\r\n   */\r\n  // ★Stitch V1.3対応 どこからも呼び出されていないため削除\r\n  // private endAppEdit() {}\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\n\r\nimport { ApplicationError } from '../../core/application-error';\r\nimport { Sys0EventType } from '../../core/commands/sys0-event-type';\r\nimport { Param } from '../../core/models/param';\r\nimport { StateUtilService } from '../../core/services/state-util.service';\r\nimport * as CoreSelector from '../../core/store/core.selectors';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { AutoEditEvent } from '../../shared/event/auto-edit-event';\r\nimport * as SharedAction from '../../shared/store/shared.actions';\r\nimport { EditConfirmDialogComponent } from '../containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\n\r\nimport { ReplaceSectionCommand } from './menu/replace-section-command';\r\n\r\n/**\r\n * アプリ編集後の再登録をおこないます。\r\n */\r\nexport class EditUploadSectionCommand extends ReplaceSectionCommand {\r\n  /** イベントオブジェクトです。 */\r\n  private autoEditEvent: AutoEditEvent | null = null;\r\n\r\n  private stateUtil: StateUtilService;\r\n  /**\r\n   * コンストラクタです。\r\n   */\r\n  constructor() {\r\n    super();\r\n\r\n    this.cancelable = false;\r\n    this.stateUtil = this.injector.get(StateUtilService);\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  check(param: Param) {\r\n    this.autoEditEvent = this.event as AutoEditEvent;\r\n\r\n    this.progress.removeCommand(null);\r\n\r\n    this.setSelectedSection();\r\n    this.sectionList = [];\r\n\r\n    // セクション番号\r\n    const sectionNo: number = this.startSectionNo();\r\n    // ★Stitch V1.3対応\r\n    if (this.autoEditEvent.fileName == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.fileName.');\r\n    }\r\n    const section: SectionVO = this.createSection(this.autoEditEvent.fileName, sectionNo);\r\n    if (this.autoEditEvent.fileName == null || this.autoEditEvent.fileName === '') {\r\n      param.cancel = true;\r\n      return;\r\n    }\r\n\r\n    this.sectionList.push(section);\r\n    this.locator.createdSectionCount = 0;\r\n    this.locator.uploadSectionCount = 1;\r\n  }\r\n\r\n  /**\r\n   * セクションの差し替えを呼び出す。\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.');\r\n    }\r\n    if (this.currentSection == null) {\r\n      throw new ApplicationError('Failed to retrieve this.currentSection.');\r\n    }\r\n    if (this.currentSection.sectionNo == null) {\r\n      throw new ApplicationError('Failed to retrieve this.currentSection.sectionNo.');\r\n    }\r\n    if (this.locator.viewerId == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.viewerId.');\r\n    }\r\n\r\n    if (this.locator.editUpdateMode === EditConfirmDialogComponent.EDIT_UPDATE) {\r\n      this.http.replaceSection(\r\n        this.locator.currentDocument,\r\n        this.currentSection.sectionNo,\r\n        this.currentSection[EditUploadSectionCommand.PROP_FILE_NAME],\r\n        this.locator.viewerId\r\n      );\r\n    } else {\r\n      this.http.insertSection(\r\n        this.locator.currentDocument,\r\n        this.currentSection.sectionNo + 1,\r\n        this.currentSection[EditUploadSectionCommand.PROP_FILE_NAME],\r\n        this.locator.viewerId\r\n      );\r\n    }\r\n    this.locator.updated = true;\r\n  }\r\n\r\n  fail(event: HttpErrorResponse) {\r\n    super.fail(event);\r\n    // ★Stitch V1.3対応 isStoppedの情報をStateUtilServiceから取得\r\n    const isStopped: boolean = this.stateUtil.getCurrentState(CoreSelector.getApplicationStop) || false;\r\n\r\n    if (isStopped) {\r\n      // OKボタンなしの場合\r\n      this.resumeAppEdit();\r\n    }\r\n  }\r\n\r\n  protected settingProgressLabel() {\r\n    this.progressNameLabel = this.wording.get('info.progress.sectionname');\r\n    if (this.locator.editUpdateMode === EditConfirmDialogComponent.EDIT_UPDATE) {\r\n      this.progressMessageLabel = this.wording.get('info.progress.updatesection');\r\n    } else {\r\n      this.progressMessageLabel = this.wording.get('info.progress.addingsection');\r\n    }\r\n  }\r\n\r\n  protected setSelectedSection() {\r\n    // ★Stitch V1.3対応\r\n    const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionView.');\r\n    }\r\n    this.thumbnailList = sectionView.thumbnailList;\r\n\r\n    // ★Stitch V1.3対応\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    this.insertIndex = this.autoEditEvent.sectionNo - 1;\r\n\r\n    this.continueProgress = false;\r\n  }\r\n\r\n  protected get eventType(): string {\r\n    if (this.locator.editUpdateMode === EditConfirmDialogComponent.EDIT_UPDATE) {\r\n      return Sys0EventType.REPLACE_SECTION;\r\n    } else {\r\n      return Sys0EventType.INSERT_SECTION;\r\n    }\r\n  }\r\n\r\n  protected refreshList(newSection: SectionVO) {\r\n    if (this.locator.editUpdateMode === EditConfirmDialogComponent.EDIT_UPDATE) {\r\n      this.replaceSection(newSection, this.insertIndex);\r\n    } else {\r\n      // ★Stitch V1.3対応\r\n      if (this.locator.sectionList == null) {\r\n        throw new ApplicationError('Failed to retrieve this.locator.sectionList.');\r\n      }\r\n      this.locator.sectionList.splice(this.insertIndex + 1, 0, newSection);\r\n    }\r\n    this.lastIndex = this.insertIndex;\r\n    this.insertIndex++;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected showNavigateMessage() {\r\n    let msg: string | null = null;\r\n\r\n    if (this.locator.editUpdateMode === EditConfirmDialogComponent.EDIT_UPDATE) {\r\n      msg = this.wording.get('info.messagearea.updatesection');\r\n    } else {\r\n      msg = this.wording.get('info.messagearea.insertothersection');\r\n    }\r\n\r\n    this.store.dispatch(new SharedAction.SetNavigateMessage(msg));\r\n  }\r\n\r\n  protected postFailProcess() {\r\n    super.postProcess(); // 元の動作をする(endEditを呼び出さない)\r\n\r\n    this.resumeAppEdit();\r\n  }\r\n\r\n  protected resetModel() {\r\n    // ★Stitch V1.3対応\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    this.locator.removeApp(this.autoEditEvent.sectionNo.toString());\r\n    super.resetModel();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected postProcess() {\r\n    super.postProcess();\r\n\r\n    this.endAppEdit();\r\n  }\r\n\r\n  protected getUpdateAuthMessageKey(): string {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.');\r\n    }\r\n    if (this.locator.currentDocument.name == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.currentDocument.name.');\r\n    }\r\n    return this.wording.get('warn.application.updatedocauth', this.locator.currentDocument.name);\r\n  }\r\n\r\n  /**\r\n   * アプリを再起動する\r\n   */\r\n  private resumeAppEdit() {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.viewerId == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.viewerId.');\r\n    }\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    if (this.autoEditEvent.fileName == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.fileName.');\r\n    }\r\n\r\n    // アプリを再起動する\r\n    this.externalJsCallback.resumeEdit(\r\n      this.locator.makeEditAppFileName(\r\n        this.locator.viewerId,\r\n        this.autoEditEvent.docId,\r\n        this.autoEditEvent.sectionNo.toString(),\r\n        this.autoEditEvent.fileName\r\n      ),\r\n      1\r\n    );\r\n  }\r\n\r\n  /**\r\n   * アプリ編集終了処理を行う。\r\n   */\r\n  private endAppEdit() {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.viewerId == null) {\r\n      throw new ApplicationError('Failed to retrieve this.locator.viewerId.');\r\n    }\r\n    if (this.autoEditEvent == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.');\r\n    }\r\n    if (this.autoEditEvent.fileName == null) {\r\n      throw new ApplicationError('Failed to retrieve this.autoEditEvent.fileName.');\r\n    }\r\n\r\n    // 編集終了\r\n    this.externalJsCallback.endEdit(\r\n      this.locator.makeEditAppFileName(\r\n        this.locator.viewerId,\r\n        this.autoEditEvent.docId,\r\n        this.autoEditEvent.sectionNo.toString(),\r\n        this.autoEditEvent.fileName\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { BaseExportSectionCommand } from '../../core/commands/document/base-export-section-command';\r\nimport { CloseEvent } from '../../core/models/close-event';\r\nimport { Sys0ErrorInfo } from '../../core/models/sys0-error-info';\r\nimport { Sys0ErrorType } from '../../core/models/sys0-error-type';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { Sys0Exception } from '../../core/vo/sys0-exception';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\nimport { AbstractSectionDeletedUpdateCommand } from './abstract-section-deleted-update-command';\r\nimport { ISupportSectionDeletedUpdate } from './i-support-section-deleted-update';\r\n\r\n/**\r\n *\r\n * ダウンロードIDを元にダウンロードを行ないます。\r\n *\r\n */\r\nexport class ExportSectionCommand extends BaseExportSectionCommand {\r\n  // ★Stitch V1.3対応 ViewerModelを定義\r\n  /**\r\n   * @private\r\n   * モデルロケーター\r\n   */\r\n  protected locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  private sectionDeletedUpdate: ISupportSectionDeletedUpdate | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getErrorInfo(exception: Sys0Exception): Sys0ErrorInfo | null {\r\n    const errorInfo: Sys0ErrorInfo | null = super.getErrorInfo(exception);\r\n    const key: string | null = exception.key;\r\n\r\n    // ダウンロードIDが存在しない場合（既に中止処理がされている場合）\r\n    if (key === Sys0ErrorType.INVALID_DOWNLOAD_ID) {\r\n      return null;\r\n    }\r\n    // ★Stitch V1.3対応 errorInfoのnullよけ\r\n    if (errorInfo) {\r\n      // セクション数が0の場合\r\n      if (key === Sys0ErrorType.DOWNLOAD_DOC_SECTION_NOT_EXIST) {\r\n        this.doPostFailPropcess = false;\r\n        if (this.isDownloadSection) {\r\n          errorInfo.message = this.wording.get('warn.downloadsection.sectionnoexist');\r\n          errorInfo.func = this.errorAlertOkHandler;\r\n        } else {\r\n          errorInfo.message = this.wording.get('warn.download.sectionnonexist');\r\n          errorInfo.func = this.errorAlertOkHandler;\r\n        }\r\n      } else if (key === Sys0ErrorType.SECTION_DELETE) {\r\n        errorInfo.func = this.errorAlertOkHandler;\r\n      }\r\n    }\r\n\r\n    return errorInfo;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getSectionNotExist(): string {\r\n    if (this.isDownloadSection) {\r\n      return 'warn.downloadsection.sectionnoexist';\r\n    } else {\r\n      return 'warn.download.sectionnonexist';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected postFailProcess() {\r\n    // 何もしない\r\n  }\r\n\r\n  /**\r\n   * ダウンロード対象のセクションでエラーが起きた場合に画面の更新を行います。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n  private errorAlertOkHandler(event: CloseEvent) {\r\n    if (this.sectionDeletedUpdate == null) {\r\n      this.sectionDeletedUpdate = new AbstractSectionDeletedUpdateCommand();\r\n    }\r\n    const section: SectionVO = new SectionVO();\r\n    section.sectionNo = this.sectionNo;\r\n    // ★Stitch V1.3対応 this.sectionDeletedUpdateのnullよけ\r\n    if (this.sectionDeletedUpdate) {\r\n      this.sectionDeletedUpdate.deleteSection(section);\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { BaseGetDocumentDetailCommand } from '../../core/commands/base-get-document-detail-command';\r\nimport { ExternalJsCallback } from '../../core/external-js-callback';\r\nimport { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { DocumentVO } from '../../core/vo/document-vo';\r\nimport { Sys0ThumbnailListComponent } from '../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { PdfViewBaseComponent } from '../../shared/components/pdf-view-base/pdf-view-base.component';\r\nimport { MainViewComponent } from '../containers/main-view/main-view.component';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ThumbnailViewComponent } from '../containers/thumbnail/thumbnail-view.component';\r\nimport { ViewerComponent } from '../containers/viewer/viewer.component';\r\nimport { ViewerEnableModel } from '../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\nimport { InitContextMenuCommand } from './init-context-menu-command';\r\n\r\n/**\r\n * 文書情報(セクション数)を取得します。\r\n *\r\n */\r\nexport class GetDocumentDetailCommand extends BaseGetDocumentDetailCommand {\r\n  // ★Stitch V1.3対応 ExternalJsCallbackを定義\r\n  private externalJsCallback: ExternalJsCallback;\r\n\r\n  constructor() {\r\n    super();\r\n    this.externalJsCallback = this.injector.get(ExternalJsCallback);\r\n  }\r\n\r\n  protected get sectionList(): any[] | null {\r\n    return this.locator.sectionList;\r\n  }\r\n  // ★Stitch V1.3対応 ArrayCollection　→　any[]\r\n  protected set sectionList(list: any[] | null) {\r\n    this.locator.sectionList = list;\r\n  }\r\n\r\n  protected setModelLocator() {\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  protected get currentMode(): number {\r\n    const thumbnailView: ThumbnailViewComponent | undefined = this.viewManager.get(ViewerViewTypes.ThumbnailView) as\r\n      | ThumbnailViewComponent\r\n      | undefined;\r\n    if (thumbnailView == null) {\r\n      throw new ApplicationError('Unexpected null value for thumbnailView.');\r\n    }\r\n    return thumbnailView.getSelectedTabIndex();\r\n  }\r\n\r\n  protected getThumbnailList(): Sys0ThumbnailListComponent {\r\n    const sectionView: SectionViewComponent | undefined = this.viewManager.get(ViewerViewTypes.SectionView) as\r\n      | SectionViewComponent\r\n      | undefined;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Unexpected null value for sectionView.');\r\n    }\r\n\r\n    return sectionView.thumbnailList;\r\n  }\r\n\r\n  protected getSectionListCallback(result: any): void {\r\n    super.getSectionListCallback(result);\r\n\r\n    if (result == null) {\r\n      // ★Stitch V1.3対応\r\n      const sectionView: SectionViewComponent | undefined = this.viewManager.get(ViewerViewTypes.SectionView) as\r\n        | SectionViewComponent\r\n        | undefined;\r\n      if (sectionView == null) {\r\n        throw new ApplicationError('Unexpected null value for sectionView.');\r\n      }\r\n      // セクション数を反映させる\r\n      sectionView.executeBindings();\r\n    }\r\n  }\r\n\r\n  protected getPdfView(): PdfViewBaseComponent {\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const mainView = this.viewManager.get(ViewerViewTypes.MainView) as MainViewComponent | undefined;\r\n    if (mainView == null) {\r\n      throw new ApplicationError('Unexpected null value for mainView.');\r\n    }\r\n    return mainView.pdfView;\r\n  }\r\n\r\n  protected postGetDocumentDetail() {\r\n    let title: string | null = null;\r\n    const currentDocument: DocumentVO | null = this.locator.currentDocument;\r\n    // ★Stitch V1.3対応\r\n    if (currentDocument == null) {\r\n      throw new ApplicationError('Unexpected null value for currentDocument.');\r\n    }\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.version) {\r\n      title = '(' + this.wording.get('lbl.viewer.version') + this.locator.version.name + ')' + currentDocument.name;\r\n    } else {\r\n      title = currentDocument.name;\r\n    }\r\n\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const mainView = this.viewManager.get(ViewerViewTypes.MainView) as MainViewComponent | undefined;\r\n    if (mainView == null) {\r\n      throw new ApplicationError('Unexpected null value for mainView.');\r\n    }\r\n    if (title == null) {\r\n      throw new ApplicationError('Unexpected null value for title.');\r\n    }\r\n\r\n    mainView.messageArea.documentName = title;\r\n    // ★Stitch V1.3対応 externalJsCallbackを利用\r\n    this.externalJsCallback.setTitle(title);\r\n  }\r\n\r\n  protected initalizeSectionView() {\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n\r\n    // ★Stitch V1.3対応 sectionView.currentContextMenu == nullだけでは必ずfalseになってしまう為に\r\n    // sectionView.currentContextMenu.modelがnullであるかどうかで判断するように変更した。\r\n    if (sectionView.currentContextMenu.model == null) {\r\n      // 最初だけやる\r\n      // 右クリックメニューを作成する。\r\n      const initContextMenu: InitContextMenuCommand = new InitContextMenuCommand();\r\n      let listMenu: string;\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        listMenu = InitContextMenuCommand.EDITABLE_MENU;\r\n      } else {\r\n        listMenu = InitContextMenuCommand.READ_MENU;\r\n      }\r\n      initContextMenu.initContextMenuView(sectionView, sectionView.thumbnailList, listMenu);\r\n    }\r\n\r\n    if (this.locator.sectionList != null) {\r\n      this.locator.sectionList = [];\r\n    }\r\n\r\n    // メニューの初期状態\r\n    this.setEnableModel();\r\n\r\n    super.initalizeSectionView();\r\n  }\r\n\r\n  /**\r\n   * メニューの制御をします。\r\n   */\r\n  protected setEnableModel() {\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    if (viewer == null) {\r\n      throw new ApplicationError('Unexpected null value for viewer.');\r\n    }\r\n    const enableModel: ViewerEnableModel = viewer.enableModel;\r\n\r\n    // 右クリックメニュー用にセクションリストビューを設定します。\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Unexpected null value for sectionView.');\r\n    }\r\n    enableModel.contextView = sectionView;\r\n\r\n    enableModel.property = true;\r\n    enableModel.download = true;\r\n    enableModel.update = true;\r\n    enableModel.inform = true;\r\n    enableModel.versionManagement = true;\r\n    enableModel.copyUrl = true;\r\n    enableModel.copyMobileUrl = true;\r\n    enableModel.reCreateSubData = true;\r\n\r\n    viewer.refreshMenuEnable();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { AbstractSys0Command } from '../../core/commands/abstract-sys0-command';\r\nimport { Sys0CommonUtil } from '../../core/utils/sys0-common-util';\r\nimport { MenuClickCommand } from '../../shared/commands/menu-click-command';\r\nimport { ListBase } from '../../shared/components/list-base';\r\nimport { Sys0ContextMenuViewComponent } from '../../shared/components/sys0-context-menu-view/sys0-context-menu-view.component';\r\nimport { InteractiveObject } from '../../shared/interactive-object';\r\nimport { ViewerBaseComponent } from '../containers/viewer-base/viewer-base.component';\r\nimport { ViewerComponent } from '../containers/viewer/viewer.component';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\n\r\nimport { SharedCommand } from './../../shared/store/shared.actions';\r\nimport { ListContextMenuClickCommand } from './list-context-menu-click-command';\r\n\r\n/**\r\n * 右メニュー初期化処理を行なうコマンドです。\r\n *\r\n */\r\nexport class InitContextMenuCommand extends AbstractSys0Command {\r\n  /**\r\n   * 参照用\r\n   */\r\n  static readonly READ_MENU: string = 'readMenu';\r\n\r\n  /**\r\n   * 更新用\r\n   */\r\n  static readonly EDITABLE_MENU: string = 'editableMenu';\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 右クリックメニューを作成します。\r\n   *\r\n   * @param contextView 右メニューの定義を保持するビューを指定します。\r\n   * @param list 右クリックメニューを表示するコンポーネントです。\r\n   * @param currentMenuData 右クリックメニューの定義名です。\r\n   *\r\n   */\r\n  initContextMenuView(contextView: Sys0ContextMenuViewComponent, list: InteractiveObject, currentMenuData: string) {\r\n    // 文書一覧用のメニューをセット\r\n    contextView.listMenuData = contextView[currentMenuData];\r\n\r\n    // メニュー情報取得\r\n    const listMenuData: any[] | null = contextView.listMenuData;\r\n\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const viewerBase = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent;\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent;\r\n\r\n    // 右クリックメニュー作成\r\n    Sys0CommonUtil.setContextMenu(\r\n      list,\r\n      listMenuData,\r\n      // ★Stitch V1.3対応 getCommand対応\r\n      (this.commandProvider.getCommand(viewerBase, SharedCommand.SharedActionTypes.MenuClick) as MenuClickCommand).clickContextMenu,\r\n      (this.commandProvider.getCommand(viewer, SharedCommand.SharedActionTypes.ContextMenuClick) as ListContextMenuClickCommand).clickMenu\r\n    );\r\n    // 現在のメニューをロケーターに保持\r\n    contextView.currentContextMenu = list.contextMenu;\r\n\r\n    // ★Stitch V1.3対応\r\n    if (contextView.listMenuData == null) {\r\n      throw new ApplicationError('contextView.listMenuData is null');\r\n    }\r\n\r\n    // 使用可否の初期化\r\n    Sys0CommonUtil.refreshContextMenuEnable(contextView.currentContextMenu, contextView.listMenuData, viewer.enableModel);\r\n  }\r\n\r\n  protected doCommand() { }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { BaseListContextMenuClickCommand } from '../../core/commands/base-list-context-menu-click-command';\r\nimport { Sys0DataUtil } from '../../core/utils/sys0-data-util';\r\nimport { ListBase } from '../../shared/components/list-base';\r\nimport { ContextMenuEvent } from '../../shared/event/context-menu-event';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerComponent } from '../containers/viewer/viewer.component';\r\nimport { ViewerEnableModel } from '../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\n\r\n/**\r\n * 右クリックメニューを表示するときの処理。\r\n *\r\n */\r\nexport class ListContextMenuClickCommand extends BaseListContextMenuClickCommand {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n  /**\r\n   * @private\r\n   *\r\n   */\r\n  protected doCommand() {\r\n    // メニューを閉じます\r\n    // ★Stitch V1.3対応 MainComponentを取得する\r\n    const view = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (view == null) {\r\n      throw new ApplicationError('Failed to retrieve Main.');\r\n    }\r\n    view.onSys0ApplicationComplete();\r\n\r\n    const menuEvent: ContextMenuEvent = this.event as ContextMenuEvent;\r\n\r\n    // ★Stitch V1.3対応\r\n    const sectionView: SectionViewComponent | undefined = this.viewManager.get(ViewerViewTypes.SectionView) as\r\n      | SectionViewComponent\r\n      | undefined;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Unexpected null value for sectionView.');\r\n    }\r\n\r\n    // ★Stitch V1.3対応\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    // nullでないことを保証した上で動作する\r\n    if (viewer == null) {\r\n      throw new ApplicationError('Failed to retrieve viewer.');\r\n    }\r\n    const enableModel: ViewerEnableModel = viewer.enableModel as ViewerEnableModel;\r\n    enableModel.contextView = sectionView;\r\n\r\n    Sys0DataUtil.copyProp(enableModel, sectionView.enableModel, ['contextView']);\r\n    const listBase: ListBase | null = null;\r\n    const reSelect = false;\r\n\r\n    // ★Stitch V1.3対応 以下の処理は不要と判断する\r\n    // const item: ThumbnailItemRendererComponent | null = this.thumnailList.indexToItemRenderer(this.selectionIndex);\r\n    // let itemRenderer: IListItemRenderer | null = null;\r\n    // if (isListBase(menuEvent.contextMenuOwner)) {\r\n    //   listBase = menuEvent.contextMenuOwner as ListBase;\r\n\r\n    //   itemRenderer = getItemRenderer(menuEvent.mouseTarget);\r\n\r\n    //   if (isSys0ThumbnailList(itemRenderer == null && listBase)) {\r\n    //     itemRenderer = getThumbnailItemRenderer(listBase as Sys0ThumbnailList, menuEvent.mouseTarget);\r\n    //   }\r\n\r\n    //   let object: Sys0BaseVO = itemRenderer ? (itemRenderer.data as Sys0BaseVO) : null;\r\n    //   let selectedItems: any[] = listBase.selectedItems;\r\n    // }\r\n    // if (listBase instanceof IHideHighlight) {\r\n    // (listBase as IHideHighlight).hideHighlight();\r\n    // }\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { ExternalJsCallback } from '../../../core/external-js-callback';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { LoginInfo } from '../../../core/models/login-info';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { ServerInfoType } from '../../../core/server-info-type';\r\nimport { UrlService } from '../../../core/services/url.service';\r\nimport { getLoginInfo } from '../../../core/store/core.selectors';\r\nimport { Sys0CommonUtil } from '../../../core/utils/sys0-common-util';\r\nimport { Sys0StringUtil } from '../../../core/utils/sys0-string-util';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { FileReference, FileReferenceEventName } from '../../../shared/models/file-reference';\r\nimport { FileReferenceList, FileReferenceListEventName } from '../../../shared/models/file-reference-list';\r\nimport { MainViewComponent } from '../../containers/main-view/main-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { BaseCreateSectionCommand } from '../base-create-section-command';\r\n\r\n/**\r\n * メニューからのセクション追加を行ないます。\r\n * ファイル選択から、アップロードの処理をします。\r\n * 実際のセクションの登録は、親クラスで実装されます。\r\n *\r\n */\r\nexport class AddSectionCommand extends BaseCreateSectionCommand {\r\n  protected fileSelecting = false;\r\n\r\n  // ★Stitch V1.3対応 ExternalJsCallbackを定義\r\n  protected externalJsCallback: ExternalJsCallback;\r\n\r\n  private isUploading = false;\r\n  // ★Stitch V1.3対応 URLサービス\r\n  private urlService: UrlService;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.externalJsCallback = this.injector.get(ExternalJsCallback);\r\n    this.urlService = this.injector.get(UrlService);\r\n  }\r\n\r\n  /**\r\n   * FileReferenceのインスタンスを初期化する。\r\n   * FileReferenceでファイル選択ダイアログを表示する。\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    super.check(param);\r\n\r\n    if (this.locator.fileReferenceList != null) {\r\n      // 破棄する\r\n      this.terminateFileReferenceList(this.locator.fileReferenceList);\r\n      this.locator.fileReferenceList = null;\r\n    }\r\n\r\n    // 新規に作成\r\n    this.locator.fileReferenceList = this.generateFileReferenceList();\r\n\r\n    if (this.fileSelecting) {\r\n      // ファイル選択中\r\n      param.cancel = true;\r\n      return;\r\n    }\r\n\r\n    // 膜を張る\r\n    this.progress.transProgress(null);\r\n\r\n    // ★Stitch V1.3対応 rootからExternalJsCallbackに変更\r\n    this.externalJsCallback.setFocusHtmlBody();\r\n    // ファイル選択ダイアログを開く\r\n    this.locator.fileReferenceList.browse();\r\n    this.fileSelecting = true;\r\n\r\n    param.isAsync = true;\r\n  }\r\n\r\n  /**\r\n   * ファイルが選択されたときの処理を行ないます。\r\n   * 選択されたファイル情報から、登録するSectionVOを生成する。\r\n   * セクションの登録を行なう(checkComplete)。\r\n   *\r\n   * @param event イベントオブジェクトです\r\n   *\r\n   */\r\n  protected selectFileHandler(event: Event) {\r\n    if (this.fileSelecting) {\r\n      // ファイル選択中だったら、膜解除\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n      this.fileSelecting = false;\r\n    }\r\n\r\n    // ★Stitch V1.3対応 this.locator.fileReferenceList のnullチェック追加\r\n    if (this.locator.fileReferenceList == null) {\r\n      throw new ApplicationError('this.locator.fileReferenceList is null.');\r\n    }\r\n\r\n    this.externalJsCallback.setFocusSwf(); // フォーカスをswfに戻す。\r\n    if (this.locator.fileReferenceList.fileList.length > 200) {\r\n      // ファイルの個数チェック\r\n      this.messageService.showErrorMessage(this.getLimitFilesMessageKey());\r\n      this.checkComplete(true);\r\n\r\n      return;\r\n    }\r\n\r\n    // セクション番号\r\n    let sectionNo: number = this.startSectionNo();\r\n\r\n    this.sectionList = [];\r\n    for (const fileRef of this.locator.fileReferenceList.fileList) {\r\n      try {\r\n        if (fileRef.size > 100 * 1024 * 1024) {\r\n          // ファイルサイズのチェック\r\n          this.messageService.showErrorMessage(this.wording.get('warn.common.maxsize', fileRef.name));\r\n          this.checkComplete(true);\r\n          return;\r\n        } else if (fileRef.size === 0) {\r\n          // ファイルサイズ0バイト時\r\n          this.messageService.showErrorMessage('warn.section.docregisterfail');\r\n          this.checkComplete(true);\r\n          return;\r\n        }\r\n      } catch (e) {\r\n        const error: Error = e as Error;\r\n        this.logger.warn('ファイル選択時にエラーが発生しました。 : ' + error.message);\r\n\r\n        this.messageService.showErrorMessage(this.getFileAuthMessage());\r\n        this.checkComplete(true);\r\n        return;\r\n      }\r\n\r\n      if (!this.checkExtention(fileRef)) {\r\n        this.checkComplete(true);\r\n        return;\r\n      }\r\n\r\n      // 作成するセクションのVOを作成・設定する\r\n      const sectionVO: SectionVO = this.createSection(fileRef.name, sectionNo);\r\n      this.sectionList.push(sectionVO);\r\n\r\n      sectionNo++;\r\n    }\r\n\r\n    // セクション数が200を超える場合\r\n    if (!this.checkSectionLimit()) {\r\n      this.messageService.showErrorMessage('warn.section.addingsectionlimit');\r\n      this.checkComplete(true);\r\n\r\n      return;\r\n    }\r\n\r\n    this.locator.createdSectionCount = 0;\r\n    this.locator.uploadSectionCount = 0;\r\n\r\n    this.asyncFileUpload();\r\n  }\r\n\r\n  protected getLimitFilesMessageKey(): string {\r\n    this.showNavigation = false;\r\n    return 'warn.section.docregisteruplimitfiles';\r\n  }\r\n\r\n  /**\r\n   * 追加する先頭のセクションNoです。\r\n   */\r\n  protected startSectionNo(): number {\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('this.locator.sectionList is null.');\r\n    }\r\n    return this.insertIndex >= 0 ? this.insertIndex + 2 : this.locator.sectionList.length + 1;\r\n  }\r\n\r\n  /**\r\n   * アップロードが完了したときの処理を行ないます。\r\n   *\r\n   * @param event イベントオブジェクトです\r\n   *\r\n   */\r\n  protected complateHandler(event: Event) {\r\n    this.logger.info('complateHandler : event = ' + event);\r\n\r\n    // ★Stitch V1.3対応 this.locator.fileReferenceList のnullチェック追加\r\n    if (this.locator.fileReferenceList == null) {\r\n      throw new ApplicationError('this.locator.fileReferenceList is null.');\r\n    }\r\n\r\n    this.locator.uploadSectionCount++;\r\n\r\n    // 全てアップロードしたら\r\n    if (this.locator.uploadSectionCount === this.locator.fileReferenceList.fileList.length) {\r\n      // 準備中を解除\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n      this.isUploading = false;\r\n\r\n      // 2件以上の場合、キャンセル可能\r\n      if (this.sectionList == null) {\r\n        throw new ApplicationError('this.sectionList is null.');\r\n      }\r\n      this.cancelable = this.sectionList.length > 1;\r\n\r\n      // 登録処理へ\r\n      this.checkComplete();\r\n    } else {\r\n      this.asyncFileUpload();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ファイル選択がキャンセルされたときの処理を行ないます。\r\n   *\r\n   * @param event イベントオブジェクトです\r\n   *\r\n   */\r\n  protected cancelHandler(event: Event) {\r\n    this.externalJsCallback.setFocusSwf(); // フォーカスをswfに戻す。\r\n    if (this.fileSelecting) {\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n      this.fileSelecting = false;\r\n    }\r\n\r\n    this.logger.info('cancelHandler');\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * I/Oエラー時の処理を行ないます。\r\n   *\r\n   * @param event イベントオブジェクトです\r\n   *\r\n   */\r\n  protected ioErrorHandler(event: any) {\r\n    this.fileRefError(event);\r\n  }\r\n\r\n  /**\r\n   * セキュリティエラー時の処理を行ないます。\r\n   *\r\n   * @param event イベントオブジェクトです。\r\n   *\r\n   */\r\n  protected securityErrorHandler(event: any) {\r\n    this.fileRefError(event);\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected getFileAuthMessage(): string {\r\n    return 'warn.section.docregisterfail';\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * FileReferenceListを生成して、イベントリスナーを割り当てます。\r\n   */\r\n  private generateFileReferenceList(): FileReferenceList {\r\n    const fileUpload = this.getFileUpload();\r\n    const fileReferenceList: FileReferenceList = new FileReferenceList(fileUpload);\r\n    fileReferenceList.addEventListener(FileReferenceListEventName.cancel, this.cancelHandler);\r\n    fileReferenceList.addEventListener(FileReferenceListEventName.select, this.selectFileHandler);\r\n    return fileReferenceList;\r\n  }\r\n\r\n  private getFileUpload() {\r\n    const mainView = this.viewManager.get(ViewerViewTypes.MainView) as MainViewComponent | undefined;\r\n    if (mainView == null) {\r\n      throw new ApplicationError('MainView is null.');\r\n    }\r\n\r\n    return mainView.fileUpload;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * FileReferenceListを破棄します。\r\n   */\r\n  private terminateFileReferenceList(fileReferenceList: FileReferenceList) {\r\n    if (fileReferenceList.fileList.length > 0) {\r\n      // ★Stitch V1.3対応 this.locator.fileReferenceList のnullチェック追加\r\n      if (this.locator.fileReferenceList == null) {\r\n        throw new ApplicationError('this.locator.fileReferenceList is null.');\r\n      }\r\n      // イベントリスナーを削除しておく\r\n      for (const fileReference of this.locator.fileReferenceList.fileList) {\r\n        if (fileReference.hasEventListener(FileReferenceEventName.complete)) {\r\n          fileReference.removeEventListener(FileReferenceEventName.complete, this.complateHandler);\r\n        }\r\n        if (fileReference.hasEventListener(FileReferenceEventName.error)) {\r\n          fileReference.removeEventListener(FileReferenceEventName.error, this.ioErrorHandler);\r\n        }\r\n        // ★Stitch V1.3対応 セキュリティエラーをエラーと区別して扱わないのでコメントアウト\r\n        // if (fileReference.hasEventListener(SecurityErrorEvent.SECURITY_ERROR)) {\r\n        //   fileReference.removeEventListener(SecurityErrorEvent.SECURITY_ERROR, this.securityErrorHandler);\r\n        // }\r\n      }\r\n    }\r\n    // イベントリスナーを破棄します。\r\n    if (fileReferenceList.hasEventListener(FileReferenceListEventName.cancel)) {\r\n      fileReferenceList.removeEventListener(FileReferenceListEventName.cancel);\r\n    }\r\n    if (fileReferenceList.hasEventListener(FileReferenceListEventName.select)) {\r\n      fileReferenceList.removeEventListener(FileReferenceListEventName.select);\r\n    }\r\n  }\r\n\r\n  private checkExtention(fileRef: FileReference): boolean {\r\n    const files: any[] = fileRef.name.split('.');\r\n    if (files.length > 1) {\r\n      // 拡張子あり\r\n      const ext: string = files[files.length - 1];\r\n\r\n      if (ext.length > 6) {\r\n        // 拡張子サイズが6を越えた\r\n        this.messageService.showErrorMessage('warn.common.extensionovrelength', Alert.OK, Sys0AlertType.TYPE_WARNING, null);\r\n        return false;\r\n      } else if (this.locator.illigaleExtentions.hasOwnProperty(ext.toLowerCase())) {\r\n        this.messageService.showErrorMessage('warn.common.extension', Alert.OK, Sys0AlertType.TYPE_WARNING, null);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    let fileName: string = Sys0CommonUtil.getFileNameWithoutExt(fileRef.name);\r\n    fileName = Sys0StringUtil.trim(fileName);\r\n    if (fileName === '') {\r\n      this.messageService.showErrorMessage('warn.common.filenameallspace', Alert.OK, Sys0AlertType.TYPE_WARNING, null);\r\n      return false;\r\n    } else if (Sys0CommonUtil.checkCharacterCode(fileName)) {\r\n      this.messageService.showErrorMessage('warn.filename.charactercode', Alert.OK, Sys0AlertType.TYPE_WARNING, null);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * ファイルアップロードを行ないます\r\n   */\r\n  private asyncFileUpload() {\r\n    // 準備中\r\n    if (this.locator.uploadSectionCount === 0) {\r\n      this.progress.addCommand(null, false, 0, '', '', this.wording.get('info.progress.preparing'), null, 0, true);\r\n    }\r\n\r\n    // ★Stitch V1.3対応 this.locator.fileReferenceList のnullチェック追加\r\n    if (this.locator.fileReferenceList == null) {\r\n      throw new ApplicationError('this.locator.fileReferenceList is null.');\r\n    }\r\n\r\n    const fileRef: FileReference = this.locator.fileReferenceList.fileList[this.locator.uploadSectionCount] as FileReference;\r\n\r\n    // イベントリスナーを設定する\r\n    fileRef.addEventListener(FileReferenceEventName.complete, this.complateHandler);\r\n    fileRef.addEventListener(FileReferenceEventName.error, this.ioErrorHandler);\r\n    // ★Stitch V1.3対応 セキュリティエラーをエラーと区別して扱わないのでコメントアウト\r\n    // fileRef.addEventListener(SecurityErrorEvent.SECURITY_ERROR, this.securityErrorHandler);\r\n\r\n    // セッションIDを引数に追加する\r\n    let uploadUrl: string | null = null;\r\n    // ★Stitch V1.3対応 URL情報、ログイン情報を取得\r\n    const baseRemoteUrl = this.urlService.getBaseRemoteUrl();\r\n    const loginInfo: LoginInfo = this.stateUtilService.getCurrentState(getLoginInfo);\r\n    if (baseRemoteUrl != null && baseRemoteUrl.indexOf('{server.name}') < 0) {\r\n      uploadUrl =\r\n        baseRemoteUrl + '/' + ServerInfoType.UPLOAD_SERVLET + '?sessionID=' + loginInfo.sessionId + '&viewId=' + this.locator.viewerId;\r\n    } else {\r\n      uploadUrl =\r\n        baseRemoteUrl + '/' + ServerInfoType.UPLOAD_SERVLET + '?sessionID=' + loginInfo.sessionId + '&viewId=' + this.locator.viewerId;\r\n    }\r\n\r\n    this.logger.info('upload url = ' + uploadUrl);\r\n\r\n    // アップロードする\r\n    // ★Stitch V1.3対応 URLRequestは不要なので削除\r\n    fileRef.upload(uploadUrl);\r\n\r\n    if (!this.isUploading) {\r\n      this.isUploading = true;\r\n    }\r\n  }\r\n\r\n  private fileRefError(event: Event) {\r\n    this.externalJsCallback.setFocusSwf(); // フォーカスをswfに戻す。\r\n    if (this.fileSelecting) {\r\n      // 膜を解除\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n      this.fileSelecting = false;\r\n    } else if (this.isUploading) {\r\n      this.isUploading = false;\r\n      this.progress.removeCommand(null);\r\n      this.messageService.showErrorMessage(this.getFileAuthMessage());\r\n    }\r\n\r\n    // ★Stitch V1.3対応 IOErrorとSecurityErrorが分かれるわけではないので一緒に扱う\r\n    // if (event instanceof IOErrorEvent) {\r\n    //   this.logger.info('ioErrorHandler :\\n' + event);\r\n    // } else if (event instanceof SecurityErrorEvent) {\r\n    //   this.logger.info('securityErrorHandler :\\n' + event);\r\n    // }\r\n    this.logger.info('error: ', event);\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { TabView } from 'primeng/tabview';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { MenuEvent } from '../../../core/event/menu-event';\r\nimport { Param } from '../../../core/models/param';\r\nimport { ThumbnailViewComponent } from '../../containers/thumbnail/thumbnail-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\n\r\n/**\r\n * メニューからのモード切替\r\n *\r\n */\r\nexport class ChangeModeCommand extends AbstractSys0Command {\r\n  private mode = 0;\r\n\r\n  // ★StitchV1.3対応 PrimeNGのTabを使う\r\n  private tabBar: TabView | null = null;\r\n\r\n  // ★Stitch V1.3対応 追加\r\n  /** ThumbnailViewコンポーネントの参照 */\r\n  private thumbnailView: ThumbnailViewComponent | undefined;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    // ★Stitch V1.3対応 ThumbnailViewコンポーネントの参照取得を追加\r\n    this.thumbnailView = this.viewManager.get(ViewerViewTypes.ThumbnailView) as ThumbnailViewComponent | undefined;\r\n    if (this.thumbnailView == null) {\r\n      throw new ApplicationError('Unexpected null value for this.thumbnailView.');\r\n    }\r\n    this.tabBar = this.thumbnailView.mainTabBar;\r\n\r\n    if (this.tabBar == null) {\r\n      throw new ApplicationError('tabBar is null.');\r\n    }\r\n\r\n    if (this.event instanceof MenuEvent) {\r\n      const menuEvent: MenuEvent = this.event;\r\n      if (menuEvent.item.name === 'changeMode') {\r\n        this.mode = 1;\r\n      } else {\r\n        this.mode = 0;\r\n      }\r\n      if (this.thumbnailView.getSelectedTabIndex() === this.mode) {\r\n        param.cancel = true;\r\n      }\r\n    } else {\r\n      if (this.thumbnailView.getSelectedTabIndex() === 1) {\r\n        this.mode = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  protected doCommand() {\r\n    // ★StitchV1.3対応 PrimeNGのTabを使う\r\n    /* const itemClickEvent: ItemClickEvent = new ItemClickEvent(ItemClickEvent.ITEM_CLICK, false, false, null, this.mode);\r\n    this.tabBar.activeIndex = this.mode;\r\n    this.tabBar.validateProperties();\r\n    this.tabBar.dispatchEvent(itemClickEvent);*/\r\n\r\n    if (this.tabBar == null) {\r\n      throw new ApplicationError('tabBar is null.');\r\n    }\r\n    this.tabBar.activeIndex = this.mode;\r\n    if (this.thumbnailView) {\r\n      this.thumbnailView.onTabChange({ index: this.mode });\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../../core/commands/abstract-sys0-rpc-command';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { Sys0EventType } from '../../../core/commands/sys0-event-type';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { CloseEvent } from '../../../core/models/close-event';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../../core/models/sys0-error-info';\r\nimport { Sys0CommonUtil } from '../../../core/utils/sys0-common-util';\r\nimport { DocumentVO } from '../../../core/vo/document-vo';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { ListEvent } from '../../../shared/event/list-event';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * セクションの削除を行ないます。\r\n * 削除はメニューから呼ばれます。\r\n *\r\n */\r\nexport class DeleteCommand extends AbstractSys0RpcCommand {\r\n  /**\r\n   * @private\r\n   * 削除アイテム（複数）\r\n   */\r\n  private deleteItems: any[] | null = null;\r\n\r\n  /**\r\n   * @private\r\n   * 削除アイテム（単数）\r\n   */\r\n  private delteItem: SectionVO | null = null;\r\n\r\n  /**\r\n   * @private\r\n   * 選択されているアイテムのインデックス\r\n   */\r\n  private selectedItemIndex = -1;\r\n\r\n  /**\r\n   * 処理数\r\n   */\r\n  private execCount = 0;\r\n\r\n  /**\r\n   * 進捗中表示でキャンセルが押されたかどうか\r\n   */\r\n  private isCanceled = false;\r\n\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * 更新処理で使用する削除されたアイテムの配列\r\n   */\r\n  private deletedSectionList: any[] | null = null;\r\n\r\n  /**\r\n   * 画面を閉じるアラートを表示するかどうか\r\n   */\r\n  private isSystemClose = false;\r\n\r\n  /**\r\n   * コンストラクタです。\r\n   */\r\n  constructor() {\r\n    super();\r\n\r\n    this.displayProgress = true;\r\n  }\r\n\r\n  /**\r\n   * 現在選択しているセクションを取得します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    this.deleteItems = sectionListView.thumbnailList.selectedItems as SectionVO[];\r\n    // ★Stitch V1.3対応 Sys0CommonUtilのソート処理に置き換え\r\n    Sys0CommonUtil.sortItem(this.deleteItems, 'sectionNo', false, true, true);\r\n\r\n    const selectedItem: SectionVO = sectionListView.thumbnailList.selectedItem as SectionVO;\r\n    this.selectedItemIndex = selectedItem.sectionNo as number;\r\n\r\n    if (this.deleteItems == null) {\r\n      param.cancel = true;\r\n      return;\r\n    } else if (this.deleteItems.length > 1) {\r\n      this.cancelable = true;\r\n    } else {\r\n      this.cancelable = false;\r\n    }\r\n\r\n    // 進捗中表示の設定\r\n    this.allCount = this.deleteItems.length;\r\n    this.addCount = 1;\r\n    this.execCount = 0;\r\n\r\n    this.progressNameLabel = this.wording.get('info.progress.sectionname');\r\n    this.progressMessageLabel = this.wording.get('info.progress.delete');\r\n    this.progressCountLabel = this.wording.get('info.progress.progressmessage');\r\n\r\n    param.isAsync = true;\r\n    this.isSystemClose = false;\r\n\r\n    // 削除確認ダイアログ\r\n    this.messageService.showErrorMessage(\r\n      'question.delete.section',\r\n      Alert.OK | Alert.CANCEL,\r\n      Sys0AlertType.TYPE_QUESTION,\r\n      this.closeHandler\r\n    );\r\n  }\r\n\r\n  /**\r\n   * セクション削除のイベントオブジェクトの生成を行ないます。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.DELETE_SECTION);\r\n  }\r\n\r\n  /**\r\n   * セクションの削除を呼び出します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応\r\n    if (this.deleteItems == null) {\r\n      throw new ApplicationError('this.deleteItems is null.');\r\n    }\r\n    this.delteItem = this.deleteItems[this.execCount];\r\n    // ★Stitch V1.3対応\r\n    if (this.delteItem == null || this.delteItem.name == null) {\r\n      throw new ApplicationError('this.delteItem is null.');\r\n    }\r\n    this.progressObjectName = this.delteItem.name;\r\n\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('this.locator.currentDocument is null.');\r\n    }\r\n    const document: DocumentVO = this.locator.currentDocument;\r\n\r\n    this.locator.updated = true;\r\n    this.http.deleteSection(document, this.delteItem.sectionNo as number);\r\n  }\r\n\r\n  /**\r\n   * 削除したセクションを画面上から消します。\r\n   * 次のSectionVOがあったら続行し、なかったら処理を終了します。\r\n   * メッセージエリアにセクションを削除した旨のメッセージを表示します。\r\n   *\r\n   * メイン選択のセクションが削除された場合、メイン選択の位置にあるセクションを選択状態にします。\r\n   * 先頭のセクションが削除された場合、削除後に先頭になったセクションを選択状態にします。\r\n   *\r\n   * PDFエリアに削除後選択状態になったセクションを表示します。\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    // 画面の更新のための配列作成\r\n    // ★Stitch V1.3対応\r\n    if (this.delteItem == null) {\r\n      throw new ApplicationError('this.delteItem is null.');\r\n    }\r\n    this.createDeleteObject(this.delteItem);\r\n\r\n    // 進捗中表示\r\n    this.addCount++;\r\n    this.execCount++;\r\n\r\n    // ★Stitch V1.3対応\r\n    if (this.deleteItems == null) {\r\n      throw new ApplicationError('this.deleteItems is null.');\r\n    }\r\n    if (this.isCanceled || this.deleteItems.length < this.addCount) {\r\n      // ★Stitch V1.3対応\r\n      if (this.deletedSectionList == null) {\r\n        throw new ApplicationError('this.deletedSectionList is null.');\r\n      }\r\n      this.deleteSection(this.deletedSectionList);\r\n\r\n      // セクションNoの振りなおし\r\n      this.locator.renumberSectionList();\r\n\r\n      this.changeMainSelectedSection();\r\n\r\n      this.isCanceled = false;\r\n\r\n      // ★Stitch V1.3対応 store.dispatchを利用\r\n      const msg: string = this.wording.get('info.delete.sectiondeleted', this.execCount);\r\n      this.store.dispatch(new SharedAction.SetNavigateMessage(msg));\r\n\r\n      this.checkComplete(true);\r\n\r\n      // メニューの更新\r\n      // ★Stitch V1.3対応 Viewer(root)対応\r\n      const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n      sectionListView.thumbnailList.onChange();\r\n    } else {\r\n      this.checkComplete(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  abort() {\r\n    this.isCanceled = true;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.isSystemClose) {\r\n      // ★Stitch V1.3対応\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo.message is null.');\r\n      }\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message);\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        this.cancelEdit();\r\n      }\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 編集モードを終了します。\r\n   */\r\n  protected cancelEdit() {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('this.locator.currentDocument is null.');\r\n    }\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    sys0ConnectObject.documentUpdateEnd(this.locator.currentDocument, null, null, null, false, null);\r\n  }\r\n\r\n  /**\r\n   * セクションの削除を行います。\r\n   * @param deleteList 削除するアイテム配列\r\n   *\r\n   */\r\n  private deleteSection(deleteList: any[]) {\r\n    let sectionList: any[] | null = this.locator.sectionList;\r\n    // ★Stitch V1.3対応\r\n    if (sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    if (sectionList.length === deleteList.length) {\r\n      sectionList = [];\r\n    } else {\r\n      for (const item of deleteList) {\r\n        Sys0CommonUtil.deleteSection(item, sectionList);\r\n        // ★Stitch V1.3対応 Collectionクラスではないためrefreshは不要\r\n        // sectionList.refresh();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 画面更新で使用するアイテムの配列を作成します。\r\n   *\r\n   * @param item 削除したアイテム\r\n   */\r\n  private createDeleteObject(item: SectionVO) {\r\n    // ★Stitch V1.3対応\r\n    if (this.deletedSectionList == null) {\r\n      throw new ApplicationError('this.deletedSectionList is null.');\r\n    }\r\n    this.deletedSectionList.push(item);\r\n  }\r\n\r\n  /**\r\n   * 削除確認ダイアログのボタン押下時の処理を行います。\r\n   * @private\r\n   */\r\n  private closeHandler(event: CloseEvent) {\r\n    if (event.detail === Alert.OK) {\r\n      this.deletedSectionList = [];\r\n\r\n      this.checkComplete(false);\r\n    } else if (event.detail === Alert.CANCEL) {\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 画面の更新に伴い、メイン選択の変更を行います。\r\n   *\r\n   */\r\n\r\n  private changeMainSelectedSection() {\r\n    // メイン選択の移動\r\n    let selectItem: SectionVO | null;\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('this.locator.sectionList is null.');\r\n    }\r\n    if (this.locator.sectionList.length < 1) {\r\n      selectItem = null;\r\n    } else if (this.selectedItemIndex > this.locator.sectionList.length) {\r\n      selectItem = this.locator.sectionList[this.locator.sectionList.length - 1] as SectionVO;\r\n    } else {\r\n      selectItem = this.locator.sectionList[this.selectedItemIndex - 1] as SectionVO;\r\n    }\r\n\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n\r\n    sectionListView.thumbnailList.selectedItem = selectItem;\r\n    sectionListView.thumbnailList.onItemClick(new ListEvent(ListEvent.ITEM_CLICK));\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { DialogInterface } from '../../../core/models/dialog-interface';\r\nimport { Param } from '../../../core/models/param';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { DivideSectionDialogComponent } from '../../containers/dialogs/divide-section-dialog/divide-section-dialog.component';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * <span style=\"color:red; font-weight:bold;\">Ite4</span>\r\n * 文書分割設定を表示します。\r\n *\r\n */\r\nexport class DivideSectionCommand extends AbstractSys0Command {\r\n  /**\r\n   * 最大文字数\r\n   */\r\n  private static readonly DOCUMENT_NAME_MAX_LENGTH: number = 120;\r\n\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * サムネイルリスト\r\n   */\r\n  private thumbnailList: any = null;\r\n\r\n  /**\r\n   * ダイアログのインスタンス\r\n   */\r\n  private dialog: DivideSectionDialogComponent | null = null;\r\n\r\n  /**\r\n   * ダイアログ\r\n   */\r\n  private componentRef: ComponentRef<DialogInterface>;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    this.thumbnailList = (this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent).thumbnailList;\r\n\r\n    if (this.thumbnailList.selectedIndices.length > 1) {\r\n      param.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文書分割設定画面を表示します。\r\n   * 選択されているセクション位置からラベルを生成する。\r\n   * 文書名を取得する。\r\n   * ダイアログを表示する。\r\n   */\r\n  protected doCommand() {\r\n    if (this.dialog == null) {\r\n      this.initDialog();\r\n    }\r\n    if (this.dialog == null) {\r\n      throw new ApplicationError('this.dialog is null.');\r\n    }\r\n\r\n    this.popup.addPopUp(this.componentRef);\r\n\r\n    // 画面表示初期化\r\n    this.dialog.callLater(this.viewDetail);\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  private viewDetail() {\r\n    if (this.dialog == null) {\r\n      throw new ApplicationError('this.dialog is null.');\r\n    }\r\n    const selectedItem: SectionVO = this.thumbnailList.selectedItem as SectionVO;\r\n\r\n    // ラベルの設定\r\n    this.dialog.beforeLabel = this.wording.get('lbl.dividesection.beforesection', selectedItem.sectionNo || 0);\r\n    this.dialog.afterLabel = this.wording.get('lbl.dividesection.aftersection', selectedItem.sectionNo || 0);\r\n    if (this.thumbnailList.selectedIndex === 0) {\r\n      // 先頭のセクションが選択されている。\r\n      this.dialog.beforeEnabled = true;\r\n      this.dialog.afterEnabled = false;\r\n      this.dialog.selectedValue = 0;\r\n    } else if (this.locator.sectionList && this.thumbnailList.selectedIndex === this.locator.sectionList.length - 1) {\r\n      // 最後のセクションが選択されている\r\n      this.dialog.beforeEnabled = false;\r\n      this.dialog.afterEnabled = true;\r\n      this.dialog.selectedValue = 1;\r\n    } else {\r\n      // その他\r\n      this.dialog.beforeEnabled = true;\r\n      this.dialog.afterEnabled = true;\r\n      this.dialog.selectedValue = 0;\r\n    }\r\n\r\n    // セクション名表示用\r\n    this.dialog.inputNewName = (selectedItem.name || '').substr(0, DivideSectionCommand.DOCUMENT_NAME_MAX_LENGTH);\r\n\r\n    // 先頭の項目にフォーカス移動\r\n    // ★StitchV1.3対応 編集不可のラベルが対象なのでコメントアウト\r\n    // Sys0CommonUtil.setFocusToFirstItem(this.dialog.panel);\r\n  }\r\n\r\n  /**\r\n   * プログレスダイアログのインスタンス作成する\r\n   */\r\n  private initDialog(): void {\r\n    const componentRef = this.popup.createComponentInstance(DivideSectionDialogComponent);\r\n    if (componentRef == null) {\r\n      this.logger.info('cannot create component instance');\r\n    } else {\r\n      this.componentRef = componentRef;\r\n      this.dialog = this.componentRef.instance as DivideSectionDialogComponent;\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../../core/commands/abstract-sys0-rpc-command';\r\nimport { ISys0Command } from '../../../core/commands/i-sys0-command';\r\nimport { MenuEvent } from '../../../core/event/menu-event';\r\nimport { Sys0ObjectOperateEvent } from '../../../core/event/sys0-object-operate-event';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0BaseEvent } from '../../../core/models/sys0-base-event';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { DocumentViewComponent } from '../../../main/containers/document-view/document-view.component';\r\nimport { MainViewTypes } from '../../../main/models/main-view-types';\r\nimport { Sys0ThumbnailListComponent } from '../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { RsnMenuItem } from '../../../shared/models/rsn-menu-item';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\nimport { ContextMenuEvent } from './../../../shared/event/context-menu-event';\r\n/**\r\n * <span style=\"color:red; font-weight:bold;\">Ite4（修正）</span>\r\n * メニューのダウンロードから呼ばれるコマンドクラスです。\r\n * ※文書とセクションのダウンロードを統合します。\r\n *\r\n *\r\n */\r\n\r\nexport class DownloadCommand extends AbstractSys0RpcCommand {\r\n  /**\r\n   * セクションのダウンロードを示す定数\r\n   * @private\r\n   */\r\n  private static readonly DOWNLOAD_TYPE_SECTION: string = 'sectionDownload';\r\n\r\n  protected downloadItem: string | null = null;\r\n\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  protected locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n  // ★Stitch V1.3対応 親クラスのメッソドを実現する。\r\n  call() {}\r\n  succeed(response: any) {}\r\n  request(param?: any): Sys0BaseEvent | null {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * ダウンロードID\r\n   */\r\n\r\n  /**\r\n   * ダウンロードする対象を取得します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    // ダウンロードする対象の情報取得\r\n    if (event instanceof MenuEvent) {\r\n      const menuEvent: MenuEvent = event as MenuEvent;\r\n      /* ★Stitch V1.3対応\r\n       * 引数について以下の通り変更\r\n       * menu：Sys0Applicationのmenu:XMLListはStateでRsnMenuItem[]として管理されるようになっているので、型変更\r\n       * */\r\n      const xml: RsnMenuItem = menuEvent.item as RsnMenuItem;\r\n      const xmlList: RsnMenuItem[] | undefined = xml.items;\r\n      if (xmlList) {\r\n        this.downloadItem = xmlList[0] as string;\r\n      }\r\n    } else if (event instanceof ContextMenuEvent) {\r\n      this.downloadItem = DownloadCommand.DOWNLOAD_TYPE_SECTION;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected doCommand() {\r\n    const document: any = this.locator.currentDocument;\r\n    let sectionNo: any = null;\r\n\r\n    let command: ISys0Command;\r\n    let downloadEvent: Sys0ObjectOperateEvent;\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n\r\n    // セクションのダウンロード\r\n    if (this.downloadItem === DownloadCommand.DOWNLOAD_TYPE_SECTION) {\r\n      // 選択セクションの取得\r\n      // ★Stitch V1.3対応 Viewer(root)を代わって使う\r\n      const documentView = this.viewManager.get(MainViewTypes.DocumentView) as DocumentViewComponent | undefined;\r\n      // ★Stitch V1.3対応 documentView非空判断\r\n      if (documentView == null) {\r\n        throw new ApplicationError('Failed to retrieve DocumentView.');\r\n      }\r\n      const thumbnailList: Sys0ThumbnailListComponent = documentView.thumbnailTileList;\r\n      const selectedSection: SectionVO = thumbnailList.selectedItem as SectionVO;\r\n\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        command = this.commandProvider.getCommand(sectionListView, Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT);\r\n\r\n        downloadEvent = new Sys0ObjectOperateEvent(Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT, selectedSection, null);\r\n        command.event = downloadEvent;\r\n        command.execCommand();\r\n\r\n        this.terminate();\r\n        return;\r\n      } else {\r\n        sectionNo = selectedSection.sectionNo;\r\n      }\r\n    }\r\n\r\n    command = this.commandProvider.getCommand(sectionListView, Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT);\r\n\r\n    downloadEvent = new Sys0ObjectOperateEvent(Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT, document, null);\r\n    downloadEvent.sectionNo = sectionNo;\r\n    downloadEvent.fromViewer = true;\r\n    if (this.locator.version) {\r\n      // ★Stitch V1.3対応 downloadEvent.info非空判断\r\n      if (this.locator.version.id == null) {\r\n        throw new ApplicationError('Failed to retrieve version.id.');\r\n      }\r\n      downloadEvent.info = this.locator.version.id;\r\n    }\r\n\r\n    command.event = downloadEvent;\r\n    command.execCommand();\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { ViewerCommand } from '../../store/viewer.actions';\r\n\r\n/**\r\n * メニュー表示・非表示時のPDFエリアの制御を行ないます。\r\n *\r\n */\r\nexport class MenuControlCommand extends AbstractSys0Command {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n  protected doCommand() {\r\n    // メニュー表示\r\n    if (this.event.type === ViewerCommand.ViewerActionTypes.MenuShow) {\r\n      // Viewer(root).pdfView.offIFrame(true);\r\n    } else if (this.event.type === ViewerCommand.ViewerActionTypes.MenuHide) {\r\n      // もし、メニュー非表示ではなく、メニュークリックの場合、offIFrameにしない\r\n      // Viewer(root).pdfView.offIFrame(false);\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { Sys0ObjectOperateEvent } from '../../../core/event/sys0-object-operate-event';\r\nimport { Param } from '../../../core/models/param';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\n\r\n/**\r\n * メニューからのセクションの移動を行ないます。\r\n *\r\n */\r\nexport class MoveCommand extends AbstractSys0Command {\r\n  /**\r\n   * 選択されているセクション\r\n   * @private\r\n   */\r\n  private selectedItem: SectionVO | null = null;\r\n\r\n  /**\r\n   * 移動先の情報\r\n   * @private\r\n   */\r\n  private moveTarget: string | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 移動するSectionVOを取得します。\r\n   * 移動先の情報を取得します。（先頭/最後/前/後）\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    // 選択セクションの取得\r\n    // ★Stitch V1.3対応 Viewer(root)対応\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    this.selectedItem = sectionListView.thumbnailList.selectedItem as SectionVO;\r\n\r\n    // 移動先の情報取得\r\n    this.moveTarget = this.commandId;\r\n\r\n    if (this.selectedItem == null || this.moveTarget == null) {\r\n      param.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * イベントオブジェクトを生成し実行します。\r\n   * @inheritDoc\r\n   */\r\n  protected doCommand() {\r\n    const moveEvent: Sys0ObjectOperateEvent = new Sys0ObjectOperateEvent(Sys0ObjectOperateEvent.MOVE_OBJECT_EVENT, this.selectedItem, null);\r\n    // ★Stitch V1.3対応\r\n    if (this.moveTarget == null) {\r\n      throw new ApplicationError('this.moveTarget is null.');\r\n    }\r\n    moveEvent.info = this.moveTarget;\r\n    // ★Stitch V1.3対応 commandの呼び出し\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    this.store.dispatch(new SharedCommand.MoveObject({ event: moveEvent }, sectionListView));\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { ISys0Command } from '../../../core/commands/i-sys0-command';\r\nimport { Sys0ObjectOperateEvent } from '../../../core/event/sys0-object-operate-event';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../core/models/param';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\n\r\nimport { DownloadCommand } from './download-command';\r\n\r\n/**\r\n * メニューからアプリケーションで開きます。\r\n *\r\n */\r\nexport class OpenApplicationCommand extends DownloadCommand {\r\n  private static readonly DOWNLOAD_TYPE_OPEN_APP: string = 'openApplication';\r\n\r\n  protected selectedSection: SectionVO | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    this.setDownloadItem();\r\n\r\n    this.selectedSection = (this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent).thumbnailList\r\n      .selectedItem as SectionVO;\r\n\r\n    if (this.selectedSection.sectionNo == null) {\r\n      throw new ApplicationError('this.selectedSection is null.');\r\n    }\r\n    if (this.locator.runnningAppSections.hasOwnProperty(this.selectedSection.sectionNo.toString())) {\r\n      const running: number = this.locator.runnningAppSections[this.selectedSection.sectionNo.toString()];\r\n\r\n      if (running === SectionVO.APP_OPEN) {\r\n        if (this.locator.currentMode === BaseModelLocator.MODE_READONRY) {\r\n          this.messageService.showErrorMessage('warn.section.alreadyopeneditmode');\r\n        } else {\r\n          this.messageService.showErrorMessage('warn.section.alreadyopen');\r\n        }\r\n        param.cancel = true;\r\n      } else if (running === SectionVO.APP_OPEN_READONLY) {\r\n        if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n          this.messageService.showErrorMessage('warn.section.alreadyopenreadonly');\r\n        } else {\r\n          this.messageService.showErrorMessage('warn.section.alreadyopen');\r\n        }\r\n        param.cancel = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  protected $check(param: Param) {\r\n    super.check(param);\r\n  }\r\n\r\n  protected setDownloadItem() {\r\n    const param = new Param();\r\n    this.$check(param);\r\n\r\n    // ★StitchV1.3対応 nullじゃなかったら\r\n    // if (this.event instanceof ContextMenuEvent) {\r\n    if (this.event != null) {\r\n      this.downloadItem = OpenApplicationCommand.DOWNLOAD_TYPE_OPEN_APP;\r\n    }\r\n  }\r\n\r\n  protected doCommand() {\r\n    let command: ISys0Command | null = null;\r\n    let downloadEvent: Sys0ObjectOperateEvent | null = null;\r\n\r\n    // セクションのダウンロード\r\n    if (this.downloadItem === OpenApplicationCommand.DOWNLOAD_TYPE_OPEN_APP) {\r\n      const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n      command = this.commandProvider.getCommand(sectionListView, SharedCommand.SharedActionTypes.OpenAppDownload);\r\n\r\n      downloadEvent = new Sys0ObjectOperateEvent(\r\n        Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT,\r\n        this.selectedSection,\r\n        this.locator.currentDocument\r\n      );\r\n      downloadEvent.fromViewer = true;\r\n      command.event = downloadEvent;\r\n      (command as ISys0Command).execCommand();\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { ISys0Command } from '../../../core/commands/i-sys0-command';\r\nimport { MenuEvent } from '../../../core/event/menu-event';\r\nimport { Sys0ObjectOperateEvent } from '../../../core/event/sys0-object-operate-event';\r\nimport { ContextMenuEvent } from '../../../shared/event/context-menu-event';\r\nimport { RsnMenuItem } from '../../../shared/models/rsn-menu-item';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\n\r\nimport { OpenApplicationCommand } from './open-application-command';\r\n\r\nexport class OpenFullTextApplicationCommand extends OpenApplicationCommand {\r\n  private static readonly DOWNLOAD_TYPE_FTS: string = 'fts';\r\n\r\n  protected downloadItem: string | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  protected setDownloadItem() {\r\n    // ダウンロードする対象の情報取得\r\n    if (this.event instanceof MenuEvent) {\r\n      const menuEvent: MenuEvent = this.event as MenuEvent;\r\n\r\n      /* ★Stitch V1.3対応\r\n       * 引数について以下の通り変更\r\n       * menu：Sys0Applicationのmenu:XMLListはStateでRsnMenuItem[]として管理されるようになっているので、型変更\r\n       * */\r\n      const xml: RsnMenuItem = menuEvent.item as RsnMenuItem;\r\n      const xmlList: RsnMenuItem[] | undefined = xml.items;\r\n      if (xmlList) {\r\n        this.downloadItem = xmlList[0] as string;\r\n      }\r\n    } else if (this.event instanceof ContextMenuEvent) {\r\n      this.downloadItem = OpenFullTextApplicationCommand.DOWNLOAD_TYPE_FTS;\r\n    }\r\n  }\r\n\r\n  protected doCommand() {\r\n    // 選択セクションの取得\r\n    // ★Stitch V1.3対応 Viewer(root)を代わって使う\r\n\r\n    let downloadEvent: Sys0ObjectOperateEvent | null = null;\r\n    // セクションのダウンロード\r\n    if (this.downloadItem === OpenFullTextApplicationCommand.DOWNLOAD_TYPE_FTS) {\r\n      const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (sectionListView == null) {\r\n        throw new ApplicationError('Failed to retrieve sectionListView.');\r\n      }\r\n      // ★Stitch V1.3対応 Shadowed nameため再命名する\r\n      const viewCommand: ISys0Command = this.commandProvider.getCommand(sectionListView, SharedCommand.SharedActionTypes.OpenFtsData);\r\n\r\n      downloadEvent = new Sys0ObjectOperateEvent(\r\n        Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT,\r\n        this.selectedSection,\r\n        this.locator.currentDocument\r\n      );\r\n      downloadEvent.fromViewer = true;\r\n      viewCommand.event = downloadEvent;\r\n      (viewCommand as ISys0Command).execCommand();\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0EventType } from '../../../core/commands/sys0-event-type';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { CloseEvent } from '../../../core/models/close-event';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\n\r\nimport { AddSectionCommand } from './add-section-command';\r\n\r\n/**\r\n * セクションの差し替えを行ないます。\r\n * ファイル選択からのセクション登録の流れとほぼ同じです。差分を実装します。\r\n *\r\n */\r\nexport class ReplaceSectionCommand extends AddSectionCommand {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 確認ダイアログを表示します。\r\n   */\r\n  check(param: Param) {\r\n    // とりあえず確認ダイアログを表示する。\r\n    this.messageService.showErrorMessage(\r\n      'question.section.replace',\r\n      Alert.OK | Alert.CANCEL,\r\n      Sys0AlertType.TYPE_QUESTION,\r\n      this.checkAlertCloseHandler\r\n    );\r\n\r\n    param.isAsync = true;\r\n  }\r\n\r\n  /**\r\n   * セクションの差し替えを呼び出す。\r\n   */\r\n  call() {\r\n    if (this.locator.createdSectionCount === 0) {\r\n      // ★Stitch V1.3対応\r\n      if (this.locator.currentDocument == null) {\r\n        throw new ApplicationError('this.locator.currentDocument is null.');\r\n      }\r\n      if (this.currentSection == null) {\r\n        throw new ApplicationError('this.currentSection is null.');\r\n      }\r\n      if (this.locator.viewerId == null) {\r\n        throw new ApplicationError('this.locator.viewerId is null.');\r\n      }\r\n\r\n      this.locator.updated = true;\r\n      this.http.replaceSection(\r\n        this.locator.currentDocument,\r\n        this.currentSection.sectionNo as number,\r\n        this.currentSection[ReplaceSectionCommand.PROP_FILE_NAME],\r\n        this.locator.viewerId\r\n      );\r\n    } else {\r\n      super.call();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected settingProgressLabel() {\r\n    // ♪進捗表示の設定\r\n    this.progressNameLabel = this.wording.get('info.progress.sectionname');\r\n    this.progressMessageLabel = this.wording.get('info.progress.replacesection');\r\n    this.progressCountLabel = this.wording.get('info.progress.progressmessage');\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected checkSectionLimit(): boolean {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('this.locator.sectionList is null.');\r\n    }\r\n    if (this.sectionList == null) {\r\n      throw new ApplicationError('this.sectionList is null.');\r\n    }\r\n    return this.locator.sectionList.length - this.thumbnailList.selectedIndices.length + this.sectionList.length <= 200;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  protected checkAlertCloseHandler(closeEvent: CloseEvent) {\r\n    if (closeEvent.detail !== Alert.OK) {\r\n      // OKボタン以外がクリックされた\r\n      // 処理をキャンセルする\r\n      this.checkComplete(true);\r\n      return;\r\n    }\r\n\r\n    // 処理をcheckから続行する。\r\n    const param: Param = new Param();\r\n    super.check(param);\r\n\r\n    if (param.cancel) {\r\n      // キャンセルの場合。\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected get eventType(): string {\r\n    return Sys0EventType.REPLACE_SECTION;\r\n  }\r\n\r\n  /**\r\n   * 追加する先頭のセクションNoです。\r\n   */\r\n  protected startSectionNo(): number {\r\n    // ★Stitch V1.3対応\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('this.locator.sectionList is null.');\r\n    }\r\n    return this.insertIndex >= 0 ? this.insertIndex + 1 : this.locator.sectionList.length + 1;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected refreshList(newSection: SectionVO) {\r\n    const sectionList: any[] | null = this.locator.sectionList;\r\n\r\n    if (this.locator.createdSectionCount === 0) {\r\n      this.replaceSection(newSection, this.insertIndex);\r\n    } else {\r\n      // ★Stitch V1.3対応\r\n      if (sectionList == null) {\r\n        throw new ApplicationError('sectionList is null.');\r\n      }\r\n      sectionList.splice(this.insertIndex, 0, newSection);\r\n    }\r\n\r\n    this.insertIndex++;\r\n  }\r\n\r\n  protected replaceSection(newSection: SectionVO, index: number) {\r\n    const sectionList: any[] | null = this.locator.sectionList;\r\n\r\n    // ★Stitch V1.3対応\r\n    if (sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    const oldSection: SectionVO = sectionList[index] as SectionVO;\r\n\r\n    if (oldSection.tag) {\r\n      // 付箋は引き継ぐ\r\n      newSection.tag = oldSection.tag;\r\n    }\r\n\r\n    sectionList.splice(index, 0, newSection);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected showNavigateMessage() {\r\n    const msg: string = this.wording.get('info.messagearea.replacesection', this.locator.createdSectionCount);\r\n\r\n    // ★Stitch V1.3対応 store.dispatchを利用\r\n    // 　メッセージ設定アクション発行\r\n    this.store.dispatch(new SharedAction.SetNavigateMessage(msg));\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getLimitFilesMessageKey(): string {\r\n    this.showNavigation = false;\r\n    return 'warn.section.replacelimitfiles';\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getFileAuthMessage(): string {\r\n    return 'warn.section.replacefail';\r\n  }\r\n}\r\n","import { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { Param } from '../../../core/models/param';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * メニューから全選択を行ないます。\r\n *\r\n */\r\nexport class SelectAllCommand extends AbstractSys0Command {\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n  // セクションのリスト\r\n  private selectItems: any[] | null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 事前確認をします。\r\n   * セクションが存在しない場合は何もしません。\r\n   */\r\n  check(param: Param) {\r\n    this.selectItems = this.locator.sectionList;\r\n    if (this.selectItems == null || this.selectItems.length === 0) {\r\n      param.cancel = true;\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 全てのリストを選択状態に変更します。\r\n   */\r\n  protected doCommand() {\r\n    const thumbnailList = (this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent).thumbnailList;\r\n    thumbnailList.selectedItem = this.selectItems;\r\n    thumbnailList.invalidateProperties();\r\n\r\n    // ★StitchV1.3対応\r\n    // thumbnailList.dispatchEvent(new ListEvent(Event.CHANGE));\r\n    thumbnailList.onChange();\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\n\r\n/**\r\n * メニューからの選択解除を行います。\r\n */\r\nexport class UnselectCommand extends AbstractSys0Command {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 全てのリストを選択状態に変更します。\r\n   */\r\n  protected doCommand() {\r\n    const thumbnailList = (this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent).thumbnailList;\r\n    thumbnailList.selectedItem = [];\r\n    thumbnailList.invalidateProperties();\r\n\r\n    // ★StitchV1.3対応\r\n    // thumbnailList.dispatchEvent(new ListEvent(Event.CHANGE));\r\n    thumbnailList.onChange();\r\n  }\r\n}\r\n","import { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../core/models/param';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\nimport { ViewerComponent } from '../../containers/viewer/viewer.component';\r\nimport { ViewerEnableModel } from '../../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { GetDocumentDetailCommand } from '../get-document-detail-command';\r\n\r\nimport { PdfViewComponent } from '../../containers/pdf/pdf-view.component';\r\n\r\n/**\r\n * メニューからの更新を行います。\r\n */\r\nexport class UpdateCommand extends GetDocumentDetailCommand {\r\n  /**\r\n   * コールバック呼び出し用。\r\n   */\r\n  private callback: Function | null = null;\r\n\r\n  /**\r\n   * ビジーカーソルの制御をするかどうかのフラグ\r\n   */\r\n  private showBusyCursor = true;\r\n\r\n  constructor() {\r\n    super();\r\n    this.displayTransparent = false; // 膜を自動で張らない\r\n    this.sectionChecking = false;\r\n  }\r\n\r\n  /**\r\n   * 同期呼び出し用のメソッドです。更新が終わったら、コールバックが呼ばれます。\r\n   *\r\n   * @param callback コールバック用のFunctionです。\r\n   *\r\n   */\r\n  refreshSection(callback: Function) {\r\n    this.callback = callback;\r\n    (this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent).iframe.source = null;\r\n\r\n    this.execCommand();\r\n  }\r\n\r\n  check(param: Param) {\r\n    this.showBusyCursor = this.callback == null;\r\n\r\n    if (this.showBusyCursor) {\r\n      this.progress.setTransProgressBusyCursor(null);\r\n    }\r\n    super.check(param);\r\n  }\r\n\r\n  succeed(event: any) {\r\n    super.succeed(event);\r\n\r\n    this.clearNavigation();\r\n  }\r\n\r\n  fail(event) {\r\n    if (this.showBusyCursor) {\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n    }\r\n\r\n    super.fail(event);\r\n\r\n    this.clearNavigation();\r\n\r\n    if (this.callback != null) {\r\n      this.callback(false);\r\n      this.callback = null;\r\n    }\r\n  }\r\n\r\n  protected begin(): boolean {\r\n    const returnValue: boolean = super.begin();\r\n    if (returnValue && this.callback != null) {\r\n      // 念の為\r\n      this.callback(false);\r\n      this.callback = null;\r\n    }\r\n\r\n    return returnValue;\r\n  }\r\n\r\n  protected showSysCloseDialog(msgKey: string, ...args): any {\r\n    if (this.showBusyCursor) {\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n    }\r\n    return super.showSysCloseDialog(msgKey, args);\r\n  }\r\n\r\n  protected setEnableModel() {\r\n    const enableModel = (this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent).enableModel as ViewerEnableModel;\r\n    enableModel.add = this.locator.currentMode === BaseModelLocator.MODE_EDITABLE;\r\n\r\n    super.setEnableModel();\r\n  }\r\n\r\n  protected checkComplete(cancel: boolean = false) {\r\n    super.checkComplete(cancel);\r\n\r\n    if (cancel && this.callback != null) {\r\n      this.callback(false);\r\n      this.callback = null;\r\n    }\r\n  }\r\n\r\n  protected getSectionListCallback(result: any) {\r\n    super.getSectionListCallback(result);\r\n\r\n    if (this.showBusyCursor) {\r\n      this.progress.removeTransProgressBusyCursor(null);\r\n    }\r\n\r\n    if (this.callback != null) {\r\n      this.callback(true);\r\n      this.callback = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * メッセージエリアをクリアします。\r\n   */\r\n  protected clearNavigation() {\r\n    // 　メッセージ設定アクション発行\r\n    this.store.dispatch(new SharedAction.SetNavigateMessage(''));\r\n  }\r\n}\r\n","import { MenuEvent } from '../../../core/event/menu-event';\r\nimport { Param } from '../../../core/models/param';\r\nimport { UrlService } from '../../../core/services/url.service';\r\nimport { ObjectBaseVO } from '../../../core/vo/object-base-vo';\r\nimport { ShowCreateURLCommand } from '../../../shared/commands/menu/show-create-url-command';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * URLコピー画面を行なうコマンドです。\r\n *\r\n */\r\nexport class ViewerShowCreateURLCommand extends ShowCreateURLCommand {\r\n  private static readonly VER_ID_PARAM: string = 'VerID';\r\n  // ★Stitch V1.3対応\r\n  private urlService: UrlService;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n    this.urlService = this.injector.get(UrlService);\r\n  }\r\n\r\n  /**\r\n   * 選択されている文書を取得します。\r\n   *\r\n   * @param param\r\n   */\r\n  check(param: Param) {\r\n    // 選択されている文書又はフォルダーを取得する。\r\n    this.selectItem = this.locator.currentDocument as ObjectBaseVO;\r\n\r\n    // 取得できなかった場合は何もしない\r\n    if (!this.selectItem) {\r\n      this.logger.error('URLコピー対象が指定されていません。');\r\n      param.cancel = true;\r\n    }\r\n    this.verId = this.urlService.getUrlParam(ViewerShowCreateURLCommand.VER_ID_PARAM);\r\n\r\n    const menuEvent: MenuEvent = this.event as MenuEvent;\r\n    if (menuEvent) {\r\n      this.menuItem = menuEvent.item.name;\r\n    }\r\n  }\r\n}\r\n","import { Param } from '../../../core/models/param';\r\nimport { DocumentVO } from '../../../core/vo/document-vo';\r\nimport { ShowDocumentSubDataDialogCommand } from '../../../shared/commands/menu/show-document-sub-data-dialog-command';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\n\r\nexport class ViewerShowDocumentSubDataDialogCommand extends ShowDocumentSubDataDialogCommand {\r\n  // ★Stitch V1.3対応\r\n  // 継承元もlocatorの変数を定義しており、TypeScriptではprivateでも重複して定義することができない。\r\n  // 継承元のlocatorの変数を利用するように変更するため、このクラス内のlocatorの定義を削除する。\r\n  // private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * 選択している文書を取得します。\r\n   *\r\n   * @param param\r\n   */\r\n  check(param: Param) {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    const selectItem: DocumentVO = this.locator.currentDocument;\r\n    this.selectItems = new Array(selectItem);\r\n    this.isViewer = true;\r\n  }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { SystemCloseDialogComponent } from '../../../core/containers/dialogs/system-close-dialog/system-close-dialog.component';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { BaseModelLocatorService } from '../../../core/services/base-model-locator.service';\r\nimport { StatusVO } from '../../../core/vo/status-vo';\r\nimport { BaseShowInformDialogCommand } from '../../../shared/commands/menu/base-show-inform-dialog-command';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ViewerComponent } from '../../containers/viewer/viewer.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\n\r\nimport { ViewerModelLocatorService } from './../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * メニューからの通知ダイアログの表示を行ないます。\r\n *\r\n */\r\nexport class ViewerShowInformDialogCommand extends BaseShowInformDialogCommand {\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  private viewerLocator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    this.locator = BaseModelLocatorService.getInstance();\r\n\r\n    // 旧版の場合、バージョンIDを取得\r\n    if (this.locator.version != null) {\r\n      this.versionId = this.locator.version.id;\r\n    }\r\n\r\n    super.check(param);\r\n\r\n    param.isAsync = true;\r\n  }\r\n\r\n  /**\r\n   * ビューアのdocumentVoを取得します。\r\n   */\r\n  protected getSelectedItem() {\r\n    // ★Stitch V1.3対応 selectedSection非空判断\r\n    if (this.viewerLocator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    this.documentVo = this.viewerLocator.currentDocument.clone();\r\n    this.fromViewer = true;\r\n  }\r\n\r\n  /**\r\n   * 文書が削除されていた、アクセス権なし、ごみ箱に移動されていた場合、メッセージを表示します。\r\n   *\r\n   * @param status\r\n   * @return\r\n   *\r\n   */\r\n  protected showErrorMessage(status: StatusVO): boolean {\r\n    // 削除されていた or アクセス権なし\r\n    if (status.erase || status.disable) {\r\n      this.showSysCloseDialog('warn.pdf.docnonexist');\r\n      this.cancelEdit();\r\n      return true;\r\n    } else if (status.remove) {\r\n      this.showSysCloseDialog('warn.pdf.docintrash');\r\n      this.cancelEdit();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * ビューアからの通知ダイアログOK、キャンセル時の処理です。\r\n   */\r\n  protected informDocument(event: Event) {\r\n    // ★Stitch V1.3対応  commandMap.execEvent  を置換して移植\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    // ★Stitch V1.3対応 viewerのundefined判断\r\n    if (viewer == null) {\r\n      throw new ApplicationError('viewer is null.');\r\n    }\r\n    this.commandProvider.execCommand(viewer, SharedCommand.SharedActionTypes.InformDialogOkCancel, event);\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して、ロックを解除します。\r\n   */\r\n  protected cancelEdit() {\r\n    // 更新モードの場合、ロックを解除\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      // 編集を破棄する。\r\n      const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n      // ★Stitch V1.3対応 viewerのundefined判断\r\n      const locator = ViewerModelLocatorService.getInstance();\r\n      if (locator.currentDocument == null) {\r\n        throw new ApplicationError('currentDocument is null.');\r\n      }\r\n      sys0ConnectObject.documentUpdateEnd(locator.currentDocument, null, null, null, false, null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * システム終了時のダイアログを表示する。\r\n   */\r\n  // ★Stitch V1.3対応 IFlexDisplayObject →　ComponentRef<SystemCloseDialogComponent> | null\r\n  // protected showSysCloseDialog(msgKey: string, ...args): IFlexDisplayObject {\r\n  protected showSysCloseDialog(msgKey: string, ...args: any[]): ComponentRef<SystemCloseDialogComponent> | null {\r\n    return this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, msgKey, ...args);\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../core/commands/sys0-connect-object';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorInfo } from '../../../core/models/sys0-error-info';\r\nimport { BaseShowPdfCommand } from '../../../shared/commands/base-show-pdf-command';\r\nimport { PdfViewBaseComponent } from '../../../shared/components/pdf-view-base/pdf-view-base.component';\r\nimport { PdfViewComponent } from '../../containers/pdf/pdf-view.component';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { AbstractSectionDeletedUpdateCommand } from '../abstract-section-deleted-update-command';\r\nimport { ISupportSectionDeletedUpdate } from '../i-support-section-deleted-update';\r\n\r\n/**\r\n * PDF表示時の処理を行ないます。\r\n *\r\n */\r\nexport class ShowPdfCommand extends BaseShowPdfCommand {\r\n  /**\r\n   *\r\n   */\r\n  private sectionDeletedUpdate: ISupportSectionDeletedUpdate | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected setModelLocator() {\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected get viewerId(): string {\r\n    return (this.locator as ViewerModelLocator).viewerId || '';\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected postShowPdf() {\r\n    // ★Stitch V1.3対応\r\n    const sectionView: SectionViewComponent | undefined = this.viewManager.get(ViewerViewTypes.SectionView) as\r\n      | SectionViewComponent\r\n      | undefined;\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Unexpected null value for sectionView.');\r\n    }\r\n    sectionView.thumbnailList.setFocus();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getPdfView(): PdfViewBaseComponent {\r\n    const pdfView: PdfViewComponent | undefined = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent | undefined;\r\n    if (pdfView == null) {\r\n      throw new ApplicationError('Unexpected null value for pdfView.');\r\n    }\r\n\r\n    return pdfView;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected postSystemClose(errorInfo: Sys0ErrorInfo) {\r\n    // システム終了\r\n    this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_ERROR, errorInfo.message || '');\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      // 編集モードの場合\r\n      // 編集を破棄する。\r\n      this.cancelEdit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected deleteSection() {\r\n    // セクションが削除されていた場合の処理をする。\r\n    if (this.sectionDeletedUpdate == null) {\r\n      this.sectionDeletedUpdate = new AbstractSectionDeletedUpdateCommand();\r\n    }\r\n\r\n    // ★Stitch V1.3対応 null対応\r\n    if (this.showPdfEvent.sectionVO) {\r\n      this.sectionDeletedUpdate.deleteSection(this.showPdfEvent.sectionVO);\r\n      super.deleteSection();\r\n    } else {\r\n      this.logger.info('this.showPdfEvent.sectionVO is null');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getTrashMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docintrash';\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getDeleteMessageKey(): string {\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      this.editable = true;\r\n      return '';\r\n    } else if (this.isSectionError) {\r\n      return 'warn.section.nonexist';\r\n    } else {\r\n      this.isSystemClose = true;\r\n      return 'warn.pdf.docnonexist';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getReadAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docreadauth';\r\n  }\r\n\r\n  protected getVersionDelete(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.versionnotexist';\r\n  }\r\n\r\n  /**\r\n   * 編集を破棄して終わる。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('this.locator.currentDocument is null ');\r\n    }\r\n    sys0ConnectObject.documentUpdateEnd(this.locator.currentDocument, null, null, null, false, null);\r\n  }\r\n}\r\n","import { BaseStartExportSectionCommand } from '../../core/commands/document/base-start-export-section-command';\r\nimport { Sys0ErrorInfo } from '../../core/models/sys0-error-info';\r\nimport { Sys0ErrorType } from '../../core/models/sys0-error-type';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { Sys0Exception } from '../../core/vo/sys0-exception';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\nimport { AbstractSectionDeletedUpdateCommand } from './abstract-section-deleted-update-command';\r\nimport { ExportSectionCommand } from './export-section-command';\r\nimport { ISupportSectionDeletedUpdate } from './i-support-section-deleted-update';\r\n\r\n/**\r\n * <span style=\"color:red; font-weight:bold;\">Ite4</span>\r\n * 文書・セクションの実データのダウンロードを開始します。\r\n *\r\n */\r\nexport class StartExportSectionCommand extends BaseStartExportSectionCommand {\r\n  // ★Stitch V1.3対応 exportを定義する\r\n  export: ExportSectionCommand;\r\n  /**\r\n   * @private\r\n   * モデルロケーター\r\n   */\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  private sectionDeletedUpdate: ISupportSectionDeletedUpdate | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 正常終了時の処理です。\r\n   * 戻ってきたダウンロードIDを元にExportSectionCommandを実行します。\r\n   */\r\n  succeed(event: any) {\r\n    // error\r\n    if (event.result == null) {\r\n      return;\r\n    }\r\n    const downloadId: string = event.result as string;\r\n    this.export = new ExportSectionCommand();\r\n    this.export.exportSection(downloadId, this.isDownloadSection, this.downloadDoc, this.sectionNo, this.abortFlg, this.fromViewer);\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getErrorInfo(exception: Sys0Exception): Sys0ErrorInfo {\r\n    const errorInfo: Sys0ErrorInfo | null = super.getErrorInfo(exception);\r\n    const key: string | null = exception.key;\r\n    // ★Stitch V1.3対応 errorInfo非空判断\r\n    if (errorInfo == null) {\r\n      return new Sys0ErrorInfo();\r\n    }\r\n\r\n    // セクションが削除されていた場合\r\n    if (key === Sys0ErrorType.SECTION_DELETE) {\r\n      this.doPostFailPropcess = false;\r\n\r\n      errorInfo.message = this.wording.get('warn.downloadsection.sectionnoexist');\r\n      errorInfo.func = this.errorAlertOkHandler;\r\n    }\r\n    return errorInfo;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected postFailProcess() {\r\n    // 何もしない\r\n  }\r\n\r\n  /**\r\n   * ダウンロード対象のセクションでエラーが起きた場合に画面の更新を行います。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n  private errorAlertOkHandler(event: CloseEvent) {\r\n    if (this.sectionDeletedUpdate == null) {\r\n      this.sectionDeletedUpdate = new AbstractSectionDeletedUpdateCommand();\r\n    }\r\n    const section: SectionVO = new SectionVO();\r\n    section.sectionNo = this.sectionNo;\r\n    this.sectionDeletedUpdate.deleteSection(section);\r\n  }\r\n}\r\n","import { ApplicationError } from '../../core/application-error';\r\nimport { DocumentType } from '../../core/commands/document-type';\r\nimport { ISupportCommandMap } from '../../core/commands/i-support-command-map';\r\nimport { Sys0Object } from '../../core/commands/sys0-object';\r\nimport { ItemClickEvent } from '../../core/event/item-click-event';\r\nimport { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { Param } from '../../core/models/param';\r\nimport { UrlService } from '../../core/services/url.service';\r\nimport { Sys0StringUtil } from '../../core/utils/sys0-string-util';\r\nimport { CabinetVO } from '../../core/vo/cabinet-vo';\r\nimport { DocumentVO } from '../../core/vo/document-vo';\r\nimport { PrivateSetting } from '../../core/vo/private-setting';\r\nimport { SectionVO } from '../../core/vo/section-vo';\r\nimport { VersionVO } from '../../core/vo/version-vo';\r\nimport { AbstractSys0ApplicationCompleteCommand } from '../../shared/commands/abstract-sys0-application-complete-command';\r\nimport * as SharedCommand from '../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ThumbnailViewComponent } from '../containers/thumbnail/thumbnail-view.component';\r\nimport { ViewerBaseComponent } from '../containers/viewer-base/viewer-base.component';\r\nimport { ViewerComponent } from '../containers/viewer/viewer.component';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\nimport { ViewerEnableModel } from '../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\nimport { ViewerCommand } from '../store/viewer.actions';\r\n\r\n/**\r\n * Sys0アプリケーションの初期化終了時の処理を行ないます。\r\n * 旧版の参照に対応。\r\n * 更新モードなしで表示。版情報を取得してタイトルに表示する。\r\n *\r\n */\r\nexport class Sys0ApplicationCompleteCommand extends AbstractSys0ApplicationCompleteCommand {\r\n  private static readonly EDIT_SECTION: string = 'editSection';\r\n  private static readonly VIEWER_VIEW_ID: string = '1';\r\n\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n  private docId: string | null = null;\r\n  private verId: string | null = null;\r\n\r\n  // ★Stitch V1.3対応\r\n  private urlService: UrlService;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.urlService = this.injector.get(UrlService);\r\n  }\r\n\r\n  /**\r\n   * Sys0BaseApplicationのlocatorプロパティの設定を行ないます。\r\n   * URLパラメータより文書IDが取得されているかのチェックを行います。\r\n   * 文書IDが設定されていない場合は、エラーとします。\r\n   * タブラベルをリソースから設定します。\r\n   * 旧版表示の場合は、更新タブを非表示に設定します。\r\n   * 旧版表示の場合は、版情報を取得します。\r\n   *\r\n   *\r\n   */\r\n  check(param: Param) {\r\n    this.logger.info('Sys0ApplicationCompleteCommand#check start');\r\n\r\n    const viewerBase = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (viewerBase == null) {\r\n      throw new ApplicationError('Failed to retrieve viewerBase.');\r\n    }\r\n    // メニューエリアを表示する\r\n    viewerBase.menuBar.visible = true;\r\n\r\n    // ★Stitch V1.3 不要のため削除\r\n    // モデルロケーターを設定\r\n    // Sys0BaseApplication(root).locator = locator;\r\n\r\n    if (this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.DOC_ID) == null) {\r\n      // ★Stitch V1.3対応\r\n      // デバッグモードの処理は不要のため削除\r\n      // if (root.isDebug) {\r\n      //   Sys0InputName.show('文書ID入力', 512, false, null, root, this.inputNameCallback);\r\n      //   param.isAsync = true;\r\n      //   return;\r\n      // } else {\r\n      //   this.logger.error(Sys0ApplicationCompleteCommand.DOC_ID + 'が指定されていません。');\r\n      //   const message = this.wording.get('error.common.systeminvalid');\r\n      //   this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, message);\r\n      //   param.cancel = true;\r\n      // }\r\n    } else {\r\n      // 膜を張る\r\n      this.progress.transProgress();\r\n\r\n      this.docId = this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.DOC_ID);\r\n\r\n      this.verId = this.getVerId();\r\n      if (this.verId == null) {\r\n        this.initTabLabel();\r\n      }\r\n\r\n      // パラメータ取得\r\n      const urlParam = this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.EDIT_SECTION);\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (urlParam) {\r\n        this.locator.editSection = parseInt(urlParam, 10);\r\n      }\r\n    }\r\n  }\r\n\r\n  call() {\r\n    this.progress.removeCommand(null);\r\n\r\n    super.call();\r\n  }\r\n\r\n  /**\r\n   * キャビネット情報の取得をします。\r\n   * 文書情報を保持する、DocumentVOを生成し、モデルロケーターに設定します。\r\n   * 文書タイプリストを取得します。\r\n   * デフォルトのタブを設定します。(Ite4からはプロファイル対応もする。)\r\n   * アクセス時間、アクセス回数を更新します。\r\n   * 文書情報を取得します(名前、セクション数、バージョン)。\r\n   */\r\n  succeed(event: any) {\r\n    // 膜を張る\r\n    this.progress.transProgress();\r\n\r\n    super.succeed(event);\r\n\r\n    if (event == null) {\r\n      return;\r\n    }\r\n\r\n    this.viewDetail();\r\n    this.getProfileSetting(() => {});\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * プロファイル情報を、モデルロケーターに設定します。\r\n   */\r\n  protected setProfileSetting(profile: PrivateSetting) {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (profile.showPdf == null || profile.displayDocumentInfo == null) {\r\n      throw new ApplicationError('Failed to setProfileSetting.');\r\n    }\r\n    this.locator.showPdf = profile.showPdf;\r\n    this.locator.defaultDisplayDocumentInfo = profile.displayDocumentInfo;\r\n  }\r\n\r\n  protected setEnableModel() {\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (viewer == null) {\r\n      throw new ApplicationError('Failed to retrieve viewer.');\r\n    }\r\n    const enableModel: ViewerEnableModel = viewer.enableModel as ViewerEnableModel;\r\n\r\n    if (this.locator.version != null) {\r\n      enableModel.changeMode = false;\r\n      enableModel.apply = false;\r\n      enableModel.approve = false;\r\n      enableModel.passback = false;\r\n      enableModel.withdraw = false;\r\n    } else {\r\n      enableModel.apply = true;\r\n      enableModel.approve = true;\r\n      enableModel.passback = true;\r\n      enableModel.withdraw = true;\r\n    }\r\n    enableModel.renameSection = false;\r\n    enableModel.openApplication = false;\r\n\r\n    viewer.refreshMenuEnable();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected endEditError(autoEditParam: any) {\r\n    const sectionNo: number = autoEditParam.sectionNo;\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    const sectionVO: SectionVO = this.locator.sectionList[sectionNo - 1] as SectionVO;\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionVO.sectionNo == null) {\r\n      throw new ApplicationError('sectionVO.sectionNo is null.');\r\n    }\r\n    this.locator.removeApp(sectionVO.sectionNo.toString());\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    sectionListView.thumbnailList.onChange();\r\n\r\n    super.endEditError(autoEditParam); // endEditを呼んでいる。\r\n  }\r\n\r\n  private getVerId(): string | null {\r\n    let id: string | null = this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.VER_ID);\r\n    if (id != null) {\r\n      id = Sys0StringUtil.trim(id);\r\n      if (id.length === 0) {\r\n        id = null;\r\n      }\r\n    }\r\n\r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * 画面を描画します。\r\n   */\r\n  private viewDetail() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.cabinet == null) {\r\n      throw new ApplicationError('cabinet is null.');\r\n    }\r\n    const cabinet: CabinetVO = this.locator.cabinet;\r\n    const vo: DocumentVO = new DocumentVO();\r\n    vo.cabId = cabinet.cabId;\r\n    vo.id = this.docId;\r\n    vo.version = null; // 版をクリア\r\n\r\n    this.locator.currentDocument = vo;\r\n\r\n    // ★Stitch V1.3対応\r\n    // Alertのラベルの初期化はAlertDialogComponentで解決するため削除\r\n\r\n    // 文書用のVO作成後の処理です。\r\n    this.postCreateDocument();\r\n    this.progress.removeCommand(null);\r\n  }\r\n\r\n  /**\r\n   * 文書用のVO作成後の処理です。\r\n   */\r\n  private postCreateDocument() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.cabinet == null) {\r\n      throw new ApplicationError('cabinet is null.');\r\n    }\r\n    const cabinet: CabinetVO = this.locator.cabinet;\r\n    let sys0Object: Sys0Object | null = null;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    const vo: DocumentVO = this.locator.currentDocument;\r\n\r\n    this.externalJsCallback.editErrorFunction = this.editErrorCallback;\r\n    this.externalJsCallback.editDownloadEndFunction = this.editDownloadEndCallback;\r\n\r\n    // 文書タイプリストを取得する\r\n    const documentType: DocumentType = new DocumentType();\r\n    documentType.getDocumentTypeList(cabinet, this.getDocumentTypeCallback);\r\n\r\n    this.locator.viewerId = this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.VIEWER_ID);\r\n    if (!this.locator.viewerId) {\r\n      // ★Stitch V1.3対応 urlから取得できない場合 常に\"1\"を設定\r\n      this.locator.viewerId = Sys0ApplicationCompleteCommand.VIEWER_VIEW_ID;\r\n    }\r\n\r\n    // 版ビューアーの場合、版情報を取得します。\r\n    if (this.verId != null) {\r\n      this.logger.info('VerID = ' + this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.VER_ID));\r\n\r\n      const versionVo: VersionVO = new VersionVO();\r\n\r\n      this.locator.version = versionVo;\r\n\r\n      versionVo.cabId = cabinet.cabId;\r\n      versionVo.docId = vo.id;\r\n      versionVo.id = this.urlService.getUrlParam(Sys0ApplicationCompleteCommand.VER_ID);\r\n\r\n      this.initTabLabel();\r\n    }\r\n\r\n    // アクセス回数カウントアップ\r\n    sys0Object = new Sys0Object();\r\n    sys0Object.declareAccessDocument(vo);\r\n\r\n    if (this.locator.editSection) {\r\n      const thumbnailView = this.viewManager.get(ViewerViewTypes.ThumbnailView) as ThumbnailViewComponent;\r\n\r\n      // 編集モードで起動\r\n      // 更新タブに設定する。\r\n      thumbnailView.mainTabBar.activeIndex = BaseModelLocator.MODE_EDITABLE;\r\n      // ★Stitch V1.3対応 primeNGのtabを利用する\r\n      thumbnailView.onTabChange({ index: BaseModelLocator.MODE_EDITABLE });\r\n    } else {\r\n      // 読み取りタブに設定する。\r\n      const thumbnailView = this.viewManager.get(ViewerViewTypes.ThumbnailView) as ThumbnailViewComponent;\r\n      const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n      thumbnailView.mainTabBar.activeIndex = BaseModelLocator.MODE_READONRY;\r\n      // ★Stitch V1.3対応 dispatch対応\r\n      sectionListView.thumbnailList.onChange();\r\n      // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(Event.CHANGE));\r\n\r\n      // 文書情報を取得する\r\n      // 版情報を取得する\r\n      // ★Stitch V1.3対応\r\n      // ISys0View→ISupportCommandMap\r\n      // undefinedチェック\r\n      const parent = this.parent as ISupportCommandMap | undefined;\r\n      if (parent === undefined) {\r\n        throw new ApplicationError('Unexpected undefined value for parent.');\r\n      }\r\n      // ★Stitch V1.3対応 execCommand対応\r\n      this.commandProvider.execCommand(parent, ViewerCommand.ViewerActionTypes.GetDocumentDetail, this.event);\r\n      // ISys0View(parent).commandMap.execEvent(Sys0ViewerCommandType.COMMAND_TYPE_GET_DOCUMENT_DETAIL, this.event);\r\n\r\n      this.setEnableModel();\r\n    }\r\n  }\r\n  private initTabLabel() {\r\n    const thumbnailView: ThumbnailViewComponent | undefined = this.viewManager.get(ViewerViewTypes.ThumbnailView) as\r\n      | ThumbnailViewComponent\r\n      | undefined;\r\n    if (thumbnailView == null) {\r\n      throw new ApplicationError('Unexpected null value for thumbnailView.');\r\n    }\r\n\r\n    const tabLabel: string[] = thumbnailView.tabLabel;\r\n\r\n    let tabNum = 2;\r\n    if (this.locator.version != null) {\r\n      tabNum--;\r\n    }\r\n\r\n    // ★Stitch V1.3対応 tabLabelはobjectではなく、string[] に変更したため、それに合わせて設定方法を変更\r\n    for (let i = 0; i < tabNum; i++) {\r\n      if (i === 0) {\r\n        // 読み取り\r\n        tabLabel.push(this.wording.get('lbl.viewer.read'));\r\n      } else if (i === 1) {\r\n        // 更新\r\n        tabLabel.push(this.wording.get('lbl.viewer.update'));\r\n      }\r\n    }\r\n  }\r\n\r\n  private getDocumentTypeCallback(result: any) {\r\n    if (result instanceof Array) {\r\n      const documentTypeList: any[] = result as any[];\r\n      // 文書タイプを取得する。\r\n      // ★Stitch V1.3対応\r\n      this.store.dispatch(new SharedCommand.SetDocumentType(documentTypeList));\r\n    }\r\n  }\r\n}\r\n","import { TabView } from 'primeng/tabview';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../../core/commands/abstract-sys0-rpc-command';\r\nimport { ISys0Command } from '../../../core/commands/i-sys0-command';\r\nimport { Sys0EventType } from '../../../core/commands/sys0-event-type';\r\nimport { Sys0Object } from '../../../core/commands/sys0-object';\r\nimport { ItemClickEvent } from '../../../core/event/item-click-event';\r\nimport { Sys0ObjectOperateEvent } from '../../../core/event/sys0-object-operate-event';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../core/models/alert';\r\nimport { CloseEvent } from '../../../core/models/close-event';\r\nimport { CursorType } from '../../../core/models/cursor-css';\r\nimport { Param } from '../../../core/models/param';\r\nimport { PropNameType } from '../../../core/models/prop-name-type';\r\nimport { Sys0AlertType } from '../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../../core/models/sys0-error-info';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { ICancelProgress } from '../../../core/services/i-cancel-progress';\r\nimport { ProgressManager } from '../../../core/services/progress-manager.service';\r\nimport { Sys0CommonUtil } from '../../../core/utils/sys0-common-util';\r\nimport { DocumentVO, isDocumentVO } from '../../../core/vo/document-vo';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { WorkflowVO } from '../../../core/vo/workflow-vo';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ApprovedEditCommmentDialogOkCancelCommand } from '../../../shared/commands/dialog/approved-edit-commment-dialog-ok-cancel-command';\r\nimport { Sys0CommitType } from '../../../shared/commands/sys0-commit-type';\r\nimport { BaseDialogViewComponent } from '../../../shared/components/base-dialog-view/base-dialog-view.component';\r\nimport { Sys0ThumbnailListComponent } from '../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ApprovedEditCommentDialogComponent } from '../../../shared/components/dialog/approved-edit-comment-dialog/approved-edit-comment-dialog.component';\r\nimport { MenuBoxBaseComponent } from '../../../shared/components/menu-box-base/menu-box-base.component';\r\nimport { ConfirmUpdateItem } from '../../../shared/models/confirm-update-item';\r\nimport { SetNavigateMessage, SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ConfirmUpdate } from '../../containers/dialogs/confirm-update';\r\nimport { ConfirmUpdateDialogComponent } from '../../containers/dialogs/confirm-update-dialog/confirm-update-dialog.component';\r\nimport { PdfViewComponent } from '../../containers/pdf/pdf-view.component';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ThumbnailViewComponent } from '../../containers/thumbnail/thumbnail-view.component';\r\nimport { ViewerBaseComponent } from '../../containers/viewer-base/viewer-base.component';\r\nimport { ViewerComponent } from '../../containers/viewer/viewer.component';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerEnableModel } from '../../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { InitContextMenuCommand } from '../init-context-menu-command';\r\nimport { UpdateCommand } from '../menu/update-command';\r\n\r\n/**\r\n * タブをクリックしたときの動作を実装します。\r\n *\r\n */\r\nexport class ChangeModeCommand extends AbstractSys0RpcCommand implements ICancelProgress {\r\n  private static readonly GB: number = 1024 * 1024 * 1024;\r\n\r\n  /**\r\n   * モデルロケーターです。\r\n   */\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * プログレスマネージャーのインスタンスです。\r\n   */\r\n  private progressManager: ProgressManager;\r\n\r\n  /**\r\n   * タブバーのインスタンスです。\r\n   */\r\n  private tabBar: TabView | null = null;\r\n\r\n  /**\r\n   * 現在処理中のモード\r\n   */\r\n  private currentMode = -1;\r\n\r\n  /**\r\n   * セクション一覧ビューです。\r\n   */\r\n  private thumbnailView: ThumbnailViewComponent | null = null;\r\n\r\n  /**\r\n   * 確認にダイアログです。\r\n   */\r\n  private confirmDialog: ConfirmUpdateDialogComponent | null = null;\r\n\r\n  /**\r\n   * 更新確認のモデルです。\r\n   */\r\n  private confirmItem: ConfirmUpdateItem | null = null;\r\n\r\n  /**\r\n   * 保存するか破棄するかを表します。\r\n   */\r\n  private isUpdate = false;\r\n\r\n  /**\r\n   * 版ID\r\n   */\r\n  private versionId: any = null;\r\n\r\n  /**\r\n   * 版番号\r\n   */\r\n  private versionNo: string | null = null;\r\n\r\n  /**\r\n   * 版上げ時のコメント\r\n   */\r\n  private versionComment: string | null = null;\r\n\r\n  /**\r\n   * システムエラーを表示するかどうか。\r\n   */\r\n  private systemCloseError = false;\r\n\r\n  /**\r\n   *\r\n   */\r\n  private updateCommand: UpdateCommand;\r\n  /**\r\n   * @private\r\n   * 承認後編集コメントダイアログ\r\n   */\r\n  private approvedEditCommentDialog: ApprovedEditCommentDialogComponent | null = null;\r\n\r\n  private controller: ControllerService;\r\n\r\n  /**\r\n   * 編集ご修正コメント修正あり。\r\n   */\r\n  private isCommentEdit = false;\r\n\r\n  constructor() {\r\n    super();\r\n    this.displayTransparent = false;\r\n    this.controller = this.injector.get(ControllerService);\r\n  }\r\n\r\n  /**\r\n   * ロック前の事前処理を行ないます。\r\n   * サムネイルリストを編集状態にします。\r\n   * メニューの状態をリフレッシュします。\r\n   *\r\n   */\r\n  check(param: Param) {\r\n    this.thumbnailView = this.parent as ThumbnailViewComponent;\r\n\r\n    let itemClickEvent: ItemClickEvent | null = null;\r\n    if (this.event instanceof MouseEvent) {\r\n      itemClickEvent = new ItemClickEvent(MenuBoxBaseComponent.EXIT_CLICK);\r\n      // 閉じるボタンからの場合\r\n      itemClickEvent.index = 0;\r\n      this.thumbnailView = this.viewManager.get(ViewerViewTypes.ThumbnailView) as ThumbnailViewComponent;\r\n      this.tabBar = this.thumbnailView.mainTabBar;\r\n      this.tabBar.activeIndex = 0;\r\n    } else {\r\n      itemClickEvent = this.event as ItemClickEvent;\r\n      this.tabBar = itemClickEvent.target as TabView;\r\n    }\r\n\r\n    this.logger.info(\r\n      'check() >> 切り替わったタブの状態 = ' + itemClickEvent.index.toString() + ' 現在のモード = ' + this.locator.currentMode.toString()\r\n    );\r\n\r\n    if (itemClickEvent.index === BaseModelLocator.MODE_READONRY) {\r\n      this.isCommentEdit = false; // 初期化\r\n\r\n      const pdfView = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (pdfView == null) {\r\n        throw new ApplicationError('Failed to retrieve pdfView.');\r\n      }\r\n      pdfView.offIFrame(true);\r\n      this.confirmItem = new ConfirmUpdateItem();\r\n\r\n      if (!this.locator.updated) {\r\n        if (this.locator.runningApp) {\r\n          this.progressManager.removeCommand(null);\r\n          const msg = this.wording.get('question.application.runningapp');\r\n          this.messageService.showErrorMessage(msg, Alert.YES | Alert.NO, Sys0AlertType.TYPE_QUESTION, this.checkSectionCloseHandler);\r\n          param.isAsync = true;\r\n        } else {\r\n          this.isUpdate = false;\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.locator.currentDocument == null) {\r\n        throw new ApplicationError('Failed to check. currentDocument is null.');\r\n      }\r\n      this.confirmItem.currentVersion = this.locator.currentDocument.version;\r\n\r\n      // Validatorチェック\r\n      const results: any[] = this.thumbnailView.sectionView.thumbnailList.checkValidator();\r\n\r\n      if (results.length) {\r\n        // エラーがあった。\r\n        const msg = this.wording.get('warn.common.inputtext');\r\n        this.messageService.showErrorMessage(msg);\r\n        this.tabBar.activeIndex = BaseModelLocator.MODE_EDITABLE;\r\n\r\n        this.changeView(BaseModelLocator.MODE_EDITABLE);\r\n        param.cancel = true;\r\n        return;\r\n      } else if (this.locator.runningApp) {\r\n        this.progressManager.removeCommand(null);\r\n        const msg = this.wording.get('question.application.editsection');\r\n        this.messageService.showErrorMessage(msg, Alert.YES | Alert.NO, Sys0AlertType.TYPE_QUESTION, this.checkSectionCloseHandler);\r\n        param.isAsync = true;\r\n        return;\r\n      }\r\n\r\n      // 膜を解除\r\n      this.progressManager.removeCommand(null);\r\n      const confirmUpdate = new ConfirmUpdate(this.wording, this.controller, this.stateUtilService, this.popup);\r\n      this.confirmDialog = confirmUpdate.createDialog(this.confirmItem, this.confirmCloseHander) as ConfirmUpdateDialogComponent;\r\n    } else if (itemClickEvent.index === BaseModelLocator.MODE_EDITABLE) {\r\n      document.body.style.cursor = CursorType.WAIT;\r\n      if (this.checkDocumentSize()) {\r\n        // ★Stitch V1.3対応\r\n        // nullでないことを保証した上で動作する\r\n        if (this.locator.currentDocument == null) {\r\n          throw new ApplicationError('Failed to check. currentDocument is null.');\r\n        }\r\n        const sys0Object: Sys0Object = new Sys0Object();\r\n        sys0Object.getDocumentDetail(this.locator.currentDocument, [PropNameType.PROP_WORKFLOW_STATUS], this.getWorkflowStatusCallback);\r\n      }\r\n    }\r\n    param.isAsync = true;\r\n  }\r\n\r\n  /**\r\n   * 文書の編集開始/終了のイベントオブジェクトを生成します。\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    let eventType: string | null = null;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.tabBar == null) {\r\n      throw new ApplicationError('tabBar is null.');\r\n    }\r\n\r\n    // ★Stitch V1.3対応 tabの選択値取得\r\n    if (this.thumbnailView && this.thumbnailView.getSelectedTabIndex() !== this.currentMode) {\r\n      this.currentMode = this.thumbnailView.getSelectedTabIndex();\r\n    } else {\r\n      this.logger.info(\r\n        'request() >> selectedIndex = ' +\r\n        (this.thumbnailView && this.thumbnailView.getSelectedTabIndex()) +\r\n        ' currentMode = ' +\r\n        this.currentMode.toString()\r\n      );\r\n    }\r\n\r\n    if (this.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      eventType = Sys0EventType.DOCUMENT_UPDATE_START;\r\n    } else {\r\n      eventType = Sys0EventType.DOCUMENT_UPDATE_END;\r\n    }\r\n    this.logger.info('request >> currentMode = ' + this.currentMode.toString() + ' eventType = ' + eventType);\r\n\r\n    // フラグ類を初期化する\r\n    this.systemCloseError = false;\r\n\r\n    return new Sys0BaseEvent(eventType);\r\n  }\r\n\r\n  /**\r\n   * 更新タブに切り替えた場合は、文書の編集開始を行ないます。\r\n   * 参照タブに切り替えた場合は、文書の編集をコミット/ロールバックを行ないます。\r\n   * 版上げに対応します。(<span style=\"color:red; font-weight:bold;\">Ite4</span>)\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to call. currentDocument is null.');\r\n    }\r\n    this.logger.info('call >> currentMode = ' + this.currentMode.toString());\r\n    if (this.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      this.http.documentUpdateStart(this.locator.currentDocument);\r\n    } else {\r\n      if (this.isCommentEdit) {\r\n        // ★Stitch V1.3対応\r\n        // nullでないことを保証した上で動作する\r\n        if (this.approvedEditCommentDialog == null) {\r\n          throw new ApplicationError('Failed to call. approvedEditCommentDialog is null.');\r\n        }\r\n        this.http.updateDocumentAfterApprove(\r\n          this.locator.currentDocument,\r\n          this.versionId,\r\n          this.versionNo,\r\n          this.versionComment,\r\n          this.approvedEditCommentDialog.textComment.nativeElement.value\r\n        );\r\n      } else {\r\n        this.http.documentUpdateEnd(this.locator.currentDocument, this.versionId, this.versionNo, this.versionComment, this.isUpdate);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  // ★Stitch V1.3対応\r\n  // 引数のeventは使われていないため削除\r\n  succeed() {\r\n    const initContextMenu: InitContextMenuCommand = new InitContextMenuCommand();\r\n    let listMenu: string;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.thumbnailView == null) {\r\n      throw new ApplicationError('Failed to succeed. thumbnailView is null.');\r\n    }\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.tabBar == null) {\r\n      throw new ApplicationError('tabBar is null.');\r\n    }\r\n    if (this.thumbnailView.getSelectedTabIndex() === BaseModelLocator.MODE_EDITABLE) {\r\n      this.locator.currentMode = BaseModelLocator.MODE_EDITABLE;\r\n      listMenu = InitContextMenuCommand.EDITABLE_MENU;\r\n      initContextMenu.initContextMenuView(this.thumbnailView.sectionView, this.thumbnailView.sectionView.thumbnailList, listMenu);\r\n      const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (viewer == null) {\r\n        throw new ApplicationError('Failed to retrieve viewer.');\r\n      }\r\n      viewer.refreshMenuEnable();\r\n\r\n      if (this.thumbnailView.sectionView.iframe.source == null) {\r\n        // iframeのソースが設定されていない。\r\n        // IFrameのソースURLを設定する\r\n        this.thumbnailView.sectionView.iframe.source = this.locator.getJspUrl();\r\n      }\r\n      // ★Stitch V1.3対応 Viewer(root).navigateMessage対応\r\n      this.store.dispatch(new SetNavigateMessage(''));\r\n      // Viewer(root).navigateMessage = '';\r\n\r\n      if (this.locator.editSection) {\r\n        // 自動アプリ編集モード\r\n        this.openApplication();\r\n      }\r\n\r\n      // 膜を解除して終了\r\n      // 膜を解除\r\n      this.progressManager.removeCommand(null);\r\n      document.body.style.cursor = CursorType.AUTO;\r\n      const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (sectionListView == null) {\r\n        throw new ApplicationError('Failed to retrieve sectionList View.');\r\n      }\r\n      // ★Stitch V1.3 dispatch対応\r\n      sectionListView.thumbnailList.onChange();\r\n      // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(Event.CHANGE));\r\n      this.terminate();\r\n    } else {\r\n      this.locator.currentMode = BaseModelLocator.MODE_READONRY;\r\n\r\n      // 右クリックメニューの再作成\r\n      listMenu = InitContextMenuCommand.READ_MENU;\r\n      initContextMenu.initContextMenuView(this.thumbnailView.sectionView, this.thumbnailView.sectionView.thumbnailList, listMenu);\r\n      const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (viewer == null) {\r\n        throw new ApplicationError('Failed to retrieve viewer.');\r\n      }\r\n      viewer.refreshMenuEnable();\r\n\r\n      if (this.updateCommand == null) {\r\n        const base = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n        // ★Stitch V1.3対応\r\n        // nullでないことを保証した上で動作する\r\n        if (base == null) {\r\n          throw new ApplicationError('Failed to retrieve viewerBase View.');\r\n        }\r\n        this.updateCommand = this.commandProvider.getCommand(base, SharedCommand.SharedActionTypes.Update) as UpdateCommand;\r\n      }\r\n      this.updateCommand.refreshSection(this.updateComplateRefreshCallback);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * ダミー\r\n   */\r\n  cancel() {}\r\n\r\n  protected begin(): boolean {\r\n    const busy: boolean = super.begin();\r\n    this.progressManager = this.progress;\r\n\r\n    if (busy) {\r\n      const itemClickEvent: ItemClickEvent = this.event as ItemClickEvent;\r\n\r\n      this.logger.info(\r\n        'begin() >> 切り替わったタブの状態 = ' + itemClickEvent.index.toString() + ' 現在のモード = ' + this.locator.currentMode.toString()\r\n      );\r\n\r\n      if (itemClickEvent.index === this.locator.currentMode) {\r\n        this.tabBar = itemClickEvent.target as TabView;\r\n        this.tabBar.activeIndex =\r\n          itemClickEvent.index === BaseModelLocator.MODE_READONRY ? BaseModelLocator.MODE_EDITABLE : BaseModelLocator.MODE_READONRY;\r\n      }\r\n    } else {\r\n      // 膜を張る\r\n      this.progressManager.transProgress(null);\r\n    }\r\n    return busy;\r\n  }\r\n\r\n  /**\r\n   * 読み取りモードへ戻った後のセクション更新。\r\n   */\r\n  protected updateComplateRefreshCallback(success: boolean) {\r\n    if (success) {\r\n      // メッセージエリアにメッセージ表示。\r\n      if (this.isUpdate) {\r\n        // ★Stitch V1.3対応 Viewer(root).navigateMessage対応\r\n        const message = this.wording.get('info.messagearea.updatedocument');\r\n        this.store.dispatch(new SetNavigateMessage(message));\r\n        // Viewer(root).navigateMessage = root.getMessage('info.messagearea.updatedocument');\r\n      } else if (this.locator.updated) {\r\n        // ★Stitch V1.3対応 Viewer(root).navigateMessage対応\r\n        const message = this.wording.get('info.messagearea.sectionupdatecancel');\r\n        this.store.dispatch(new SetNavigateMessage(message));\r\n        // Viewer(root).navigateMessage = root.getMessage('info.messagearea.sectionupdatecancel');\r\n      }\r\n\r\n      this.locator.updated = false;\r\n      this.locator.documentPropInfo = null;\r\n    }\r\n\r\n    this.changeView(BaseModelLocator.MODE_READONRY);\r\n    if (this.isUpdate) {\r\n      this.progressManager.removeCommand(null);\r\n    } else {\r\n      this.progressManager.removeTransProgressBusyCursor(null);\r\n    }\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    // ★Stitch V1.3対応 dispatch対応\r\n    sectionListView.thumbnailList.onChange();\r\n    // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(Event.CHANGE));\r\n\r\n    if (this.isBusy) {\r\n      this.terminate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    this.progressManager.removeTransProgressBusyCursor(null);\r\n    if (this.systemCloseError) {\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('Failed to showFailAlert. errorInfo.message is null.');\r\n      }\r\n      // ボタンなしのエラーダイアログ\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message);\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  protected getAllAuthMessageKey(): string {\r\n    this.systemCloseError = true;\r\n    return 'warn.section.docnotaccess';\r\n  }\r\n\r\n  protected getDeleteMessageKey(): string {\r\n    this.systemCloseError = true;\r\n    return 'warn.section.docnotaccess';\r\n  }\r\n\r\n  protected getTrashMessageKey(): string {\r\n    this.systemCloseError = true;\r\n    return 'warn.section.docnotaccess';\r\n  }\r\n\r\n  protected getUpdateAuthMessageKey(): string {\r\n    return 'warn.section.docupdateauth';\r\n  }\r\n\r\n  /**\r\n   * ロックされている。\r\n   */\r\n  protected getLockMessageKey(): string {\r\n    return 'warn.common.lockdoc';\r\n  }\r\n\r\n  protected getPreviouslySavedMessageKey(): string {\r\n    return 'warn.section.previouslysave';\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected getSeQuenceInvalidKey(): string {\r\n    return 'warn.section.canceleddocedit';\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected postFailProcess() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.tabBar == null) {\r\n      throw new ApplicationError('Failed to post FailProcess. tabBar is null.');\r\n    }\r\n    if (this.tabBar.activeIndex === BaseModelLocator.MODE_EDITABLE) {\r\n      this.tabBar.activeIndex = BaseModelLocator.MODE_READONRY;\r\n      this.changeView(BaseModelLocator.MODE_READONRY);\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.thumbnailView == null) {\r\n        throw new ApplicationError('Failed to postFailProcess. thumbnailView is null.');\r\n      }\r\n      const thumbnailList: Sys0ThumbnailListComponent = this.thumbnailView.sectionView.thumbnailList;\r\n      // ★Stitch V1.3 dispatch対応\r\n      thumbnailList.onChange();\r\n      // thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE)); // 再制御\r\n    } else if (this.tabBar.activeIndex === BaseModelLocator.MODE_READONRY) {\r\n      // 正常系へ。\r\n      this.isUpdate = false; // 破棄した事にする。\r\n      this.succeed();\r\n      return;\r\n    }\r\n\r\n    // ★Stitch V1.3対応\r\n    // ワークフロー機能は提供しない\r\n    // const sys0Object: Sys0Object = new Sys0Object();\r\n    // // ★Stitch V1.3対応\r\n    // // nullでないことを保証した上で動作する\r\n    // if (this.locator.currentDocument == null) {\r\n    //   throw new ApplicationError('Failed to postFailProcess. currentDocument is null.');\r\n    // }\r\n    // sys0Object.getWorkFlow(this.locator.currentDocument, [], this.getWorkFlowCallBack);\r\n  }\r\n\r\n  private changeView(mode: number) {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.thumbnailView == null) {\r\n      throw new ApplicationError('Failed to changeView. thumbnailView is null.');\r\n    }\r\n    if (mode === BaseModelLocator.MODE_READONRY) {\r\n      this.thumbnailView.sectionView.currentState = SectionViewComponent.STATE_READONRY;\r\n    } else if (mode === BaseModelLocator.MODE_EDITABLE) {\r\n      this.thumbnailView.sectionView.currentState = SectionViewComponent.STATE_EDITABLE;\r\n    }\r\n\r\n    this.setEnableModel(mode);\r\n  }\r\n\r\n  private setEnableModel(mode: number) {\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (viewer == null) {\r\n      throw new ApplicationError('Failed to retrieve Viewer View.');\r\n    }\r\n    const enableModel: ViewerEnableModel = viewer.enableModel as ViewerEnableModel;\r\n\r\n    enableModel.add = mode === BaseModelLocator.MODE_EDITABLE && !this.locator.runningApp;\r\n    if (mode === BaseModelLocator.MODE_READONRY) {\r\n      enableModel.changeMode = true;\r\n      enableModel.updateComplete = false;\r\n    } else if (mode === BaseModelLocator.MODE_EDITABLE) {\r\n      enableModel.changeMode = false;\r\n      enableModel.updateComplete = true;\r\n    }\r\n  }\r\n\r\n  private refreshEditableMode() {\r\n    const viewerBase = this.viewManager.get(ViewerViewTypes.ViewerBase) as ViewerBaseComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (viewerBase == null) {\r\n      throw new ApplicationError('Failed to retrieve viewerBase View.');\r\n    }\r\n    // セクション一覧の更新\r\n    this.updateCommand = this.commandProvider.getCommand(viewerBase, SharedCommand.SharedActionTypes.Update) as UpdateCommand;\r\n    // this.updateCommand = viewerBase.commandMap.getCommand(Sys0CommandType.COMMAND_TYPE_UPDATE) as UpdateCommand;\r\n    this.changeView(BaseModelLocator.MODE_EDITABLE);\r\n    this.updateCommand.refreshSection(this.refreshSectionCallback);\r\n  }\r\n\r\n  /**\r\n   * 更新モード変更時の、セクション一覧リフレッシュ。\r\n   */\r\n  private refreshSectionCallback(success: boolean) {\r\n    if (!success) {\r\n      // 成功時のみチェック\r\n      // 膜を解除\r\n      this.progressManager.removeCommand(null);\r\n      document.body.style.cursor = CursorType.AUTO;\r\n\r\n      this.returnReadOnlyMode();\r\n    }\r\n\r\n    this.checkComplete(!success);\r\n  }\r\n\r\n  private checkDocumentSize(): boolean {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('Failed to checkDocumentSize. currentDocument is null.');\r\n    }\r\n    const docSize: number = this.locator.currentDocument.size as number;\r\n\r\n    const oversize: number = 1.9 * ChangeModeCommand.GB;\r\n    if (docSize > oversize) {\r\n      this.progressManager.removeCommand(null);\r\n      document.body.style.cursor = CursorType.AUTO;\r\n      const message = this.wording.get('question.updatedocument.overdocsize');\r\n      this.messageService.showErrorMessage(message, Alert.YES | Alert.NO, Sys0AlertType.TYPE_QUESTION, this.sizeCheckAlertCloseHandler);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private sizeCheckAlertCloseHandler(event: CloseEvent) {\r\n    const success: boolean = event.detail === Alert.NO;\r\n\r\n    if (success) {\r\n      const sys0Object: Sys0Object = new Sys0Object();\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.locator.currentDocument == null) {\r\n        throw new ApplicationError('Failed to sizeCheckAlertCloseHandler. currentDocument is null.');\r\n      }\r\n      sys0Object.getDocumentDetail(\r\n        this.locator.currentDocument,\r\n        new Array([PropNameType.PROP_WORKFLOW_STATUS]),\r\n        this.getWorkflowStatusCallback\r\n      );\r\n    } else {\r\n      this.returnReadOnlyMode();\r\n\r\n      this.checkComplete(!success);\r\n    }\r\n  }\r\n\r\n  private getWorkflowStatusCallback(result: any) {\r\n    if (isDocumentVO(result)) {\r\n      const docVo: DocumentVO = result as DocumentVO;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.locator.currentDocument == null) {\r\n        throw new ApplicationError('Failed to getWorkflowStatusCallback. currentDocument is null.');\r\n      }\r\n      this.locator.currentDocument.workFlowStatus = docVo.workFlowStatus; // 現在値を設定\r\n      if (docVo.workFlowStatus === WorkflowVO.WFSTATUS_APPROVED) {\r\n        this.progressManager.removeCommand(null);\r\n        document.body.style.cursor = CursorType.AUTO;\r\n        const message = this.wording.get('question.updatedocument.approvecancel');\r\n        this.messageService.showErrorMessage(\r\n          message,\r\n          Alert.YES | Alert.NO,\r\n          Sys0AlertType.TYPE_QUESTION,\r\n          this.workflowStatusCheckCloseHandler\r\n        );\r\n      } else {\r\n        document.body.style.cursor = CursorType.WAIT;\r\n        this.refreshEditableMode();\r\n      }\r\n    } else {\r\n      this.returnReadOnlyMode();\r\n\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  private workflowStatusCheckCloseHandler(event: CloseEvent) {\r\n    if (event.detail === Alert.YES) {\r\n      document.body.style.cursor = CursorType.WAIT;\r\n      this.refreshEditableMode();\r\n    } else {\r\n      this.returnReadOnlyMode();\r\n\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  private checkSectionCloseHandler(event: CloseEvent) {\r\n    if (event.detail === Alert.YES) {\r\n      // \t\t\t\tlocator.removeAllApp();\r\n\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.confirmItem == null) {\r\n        throw new ApplicationError('this.confirmItem is null.');\r\n      }\r\n\r\n      if (this.locator.updated) {\r\n        const confirmUpdate = new ConfirmUpdate(this.wording, this.controller, this.stateUtilService, this.popup);\r\n        this.confirmDialog = confirmUpdate.createDialog(this.confirmItem, this.confirmCloseHander) as ConfirmUpdateDialogComponent;\r\n      } else {\r\n        this.isUpdate = false;\r\n        this.checkComplete();\r\n      }\r\n    } else {\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.tabBar == null) {\r\n        throw new ApplicationError('Failed to checkSectionCloseHandler. tabBar is null.');\r\n      }\r\n      this.tabBar.activeIndex = BaseModelLocator.MODE_EDITABLE;\r\n\r\n      this.changeView(BaseModelLocator.MODE_EDITABLE);\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n\r\n  private returnReadOnlyMode() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.tabBar == null) {\r\n      throw new ApplicationError('Failed to returnReadOnlyMode. tabBar is null.');\r\n    }\r\n    // 読み取りタブに戻る\r\n    this.tabBar.activeIndex = BaseModelLocator.MODE_READONRY;\r\n    this.changeView(BaseModelLocator.MODE_READONRY);\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.thumbnailView == null) {\r\n      throw new ApplicationError('Failed to returnReadOnlyMode. thumbnailView is null.');\r\n    }\r\n    const thumbnailList: Sys0ThumbnailListComponent = this.thumbnailView.sectionView.thumbnailList;\r\n    thumbnailList.selectedIndex = 0;\r\n    // ★Stitch V1.3対応 dispatch対応\r\n    thumbnailList.onItemClick();\r\n    thumbnailList.onChange();\r\n    // thumbnailList.dispatchEvent(new ListEvent(ListEvent.ITEM_CLICK));\r\n    // thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n  }\r\n\r\n  /**\r\n   * 更新確認ダイアログでボタンが押された場合の処理です。\r\n   *\r\n   * @param event イベントオブジェクトです。\r\n   *\r\n   */\r\n  private confirmCloseHander(event: Event) {\r\n    let doTerminate = false;\r\n\r\n    if (event.type === BaseDialogViewComponent.CLICK_OK_EVENT) {\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.confirmDialog == null) {\r\n        throw new ApplicationError('confirmDialog is null.');\r\n      }\r\n      const confirmItem: ConfirmUpdateItem = this.confirmDialog.confirm.item;\r\n\r\n      if (confirmItem.updateAction === ConfirmUpdateItem.UPDATE_OVERWRITE) {\r\n        this.versionId = Sys0CommitType.COMMIT_VERSION_KEEP;\r\n        this.isUpdate = true;\r\n      } else if (confirmItem.updateAction === ConfirmUpdateItem.UPDATE_VERSIONUP) {\r\n        if (!this.confirmDialog.confirm.checkVersion()) {\r\n          return;\r\n        }\r\n\r\n        // 文字コードチェック\r\n        if (Sys0CommonUtil.checkCharacterCode(confirmItem.comment)) {\r\n          const message = this.wording.get('warn.updatecomment.charactercode');\r\n          this.messageService.showErrorMessage(message, Alert.OK, Sys0AlertType.TYPE_WARNING, null);\r\n          return;\r\n        }\r\n\r\n        if (confirmItem.level === ConfirmUpdateItem.VERUP_MAJOR) {\r\n          this.versionId = Sys0CommitType.COMMIT_VERSION_UP_MAJOR;\r\n        } else {\r\n          this.versionId = Sys0CommitType.COMMIT_VERSION_UP_MINOR;\r\n        }\r\n\r\n        this.versionComment = confirmItem.comment;\r\n\r\n        this.isUpdate = true;\r\n      } else if (confirmItem.updateAction === ConfirmUpdateItem.UPDATE_CANCEL) {\r\n        this.isUpdate = false;\r\n      }\r\n\r\n      if (this.isUpdate) {\r\n        // ★Stitch V1.3対応\r\n        // nullでないことを保証した上で動作する\r\n        if (this.locator.currentDocument == null) {\r\n          throw new ApplicationError('Failed to confirmCloseHander. currentDocument is null.');\r\n        }\r\n        if (this.locator.currentDocument.workFlowStatus === WorkflowVO.WFSTATUS_APPROVED) {\r\n          // 承認済み文書の場合\r\n          // 承認後修正の場合はコメント入力をする。\r\n          const comment = '';\r\n          this.approvedEditCommentDialog = ApprovedEditCommentDialogComponent.show(\r\n            this.locator.currentDocument,\r\n            comment,\r\n            this.approvedEditCommentOkCancelHandler\r\n          );\r\n          return;\r\n        }\r\n\r\n        // 進捗中ダイアログを表示する。\r\n        this.progressManager.addCommand(null, false, 0, '', '', this.wording.get('info.progress.updatedocument'), null, 0, true);\r\n      } else {\r\n        // ビジーカーソル付の膜を張る\r\n        this.progressManager.setTransProgressBusyCursor(null);\r\n      }\r\n      this.checkComplete();\r\n    } else {\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.tabBar == null) {\r\n        throw new ApplicationError('Failed to confirmCloseHander. tabBar is null.');\r\n      }\r\n      this.tabBar.activeIndex = BaseModelLocator.MODE_EDITABLE;\r\n\r\n      this.changeView(BaseModelLocator.MODE_EDITABLE);\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (this.thumbnailView == null) {\r\n        throw new ApplicationError('Failed to confirmCloseHander. thumbnailView is null.');\r\n      }\r\n      // メニュー制御用\r\n      const thumbnailList: Sys0ThumbnailListComponent = this.thumbnailView.sectionView.thumbnailList;\r\n      // ★Stitch V1.3対応 dispatch対応\r\n      thumbnailList.onChange();\r\n      // thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n\r\n      doTerminate = true;\r\n    }\r\n\r\n    const confirmUpdate = new ConfirmUpdate(this.wording, this.controller, this.stateUtilService, this.popup);\r\n    confirmUpdate.closeDialog(this.confirmDialog);\r\n\r\n    if (doTerminate) {\r\n      // ダイアログが閉じられてからterminateする。\r\n      this.terminate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 承認後編集コメントダイアログからのコールバック\r\n   *\r\n   */\r\n  private approvedEditCommentOkCancelHandler(event: Event) {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.confirmDialog == null) {\r\n      throw new ApplicationError('Failed to approvedEditCommentOkCancelHandler. confirmDialog is null.');\r\n    }\r\n    // 実際の処理はコマンドクラスに引き継ぐ\r\n    // ★Stitch V1.3対応\r\n    // commandProvider対応\r\n    const command: ApprovedEditCommmentDialogOkCancelCommand = this.commandProvider.getCommand(\r\n      this.confirmDialog,\r\n      SharedCommand.SharedActionTypes.ApprovedEditCommentOkCancel\r\n    ) as ApprovedEditCommmentDialogOkCancelCommand;\r\n    // const command: ApprovedEditCommmentDialogOkCancelCommand = this.confirmDialog.commandMap.getCommand(\r\n    //   Sys0CommandType.COMMAND_TYPE_APPROVED_EDIT_COMMENT_OK_CANCEL\r\n    // ) as ApprovedEditCommmentDialogOkCancelCommand;\r\n\r\n    command.callback = this.approvedEditCommentCallback; // 続きの処理用\r\n    command.event = event;\r\n    command.dialog = this.approvedEditCommentDialog;\r\n    command.execCommand();\r\n  }\r\n  /**\r\n   *\r\n   * @param result\r\n   *\r\n   */\r\n  private approvedEditCommentCallback(result: boolean) {\r\n    this.isCommentEdit = result;\r\n    if (result) {\r\n      // OK時\r\n      // 進捗中ダイアログを表示する。\r\n      this.progressManager.addCommand(null, false, 0, '', '', this.wording.get('info.progress.updatedocument'), null, 0, true);\r\n      this.checkComplete();\r\n\r\n      ConfirmUpdate.hide();\r\n    } else {\r\n      // キャンセル時\r\n    }\r\n  }\r\n\r\n  /**\r\n   * アプリケーション自動起動用\r\n   */\r\n  private openApplication() {\r\n    const sectionNo: number = this.locator.editSection as number;\r\n    this.locator.editSection = null;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('Failed to openApplication. sectionList is null.');\r\n    }\r\n    // セクション番号が0か大きすぎる場合はなにもしない。\r\n    if (sectionNo === 0 || this.locator.sectionList.length < sectionNo) {\r\n      return;\r\n    }\r\n\r\n    // セクションを取得\r\n    const section: SectionVO = this.locator.sectionList[sectionNo - 1] as SectionVO;\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.thumbnailView == null) {\r\n      throw new ApplicationError('Failed to openApplication. thumbnailView is null.');\r\n    }\r\n    // セクションを選択状態にする。\r\n    const thumbnailList: Sys0ThumbnailListComponent = this.thumbnailView.sectionView.thumbnailList;\r\n    thumbnailList.selectedItem = section;\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n\r\n    // アプリケーション起動のコマンドを取得\r\n    // ★Stitch V1.3対応\r\n    // commandProvider対応\r\n    const command: ISys0Command = this.commandProvider.getCommand(sectionListView, SharedCommand.SharedActionTypes.OpenAppDownload);\r\n    // const command: ISys0Command = Viewer(root).sectionListView.commandMap.getCommand(Sys0CommandType.COMMAND_TYPE_OPEN_APP_DOWNLOAD);\r\n\r\n    // イベントを作成\r\n    const downloadEvent: Sys0ObjectOperateEvent = new Sys0ObjectOperateEvent(\r\n      Sys0ObjectOperateEvent.DOWNLOAD_OBJECT_EVENT,\r\n      section,\r\n      this.locator.currentDocument\r\n    );\r\n    downloadEvent.fromViewer = true;\r\n    command.event = downloadEvent;\r\n\r\n    // アプリケーション起動を実施\r\n    command.execCommand();\r\n  }\r\n\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // /**\r\n  //  * 対象ファイルのワークフロー状態を取得します。\r\n  //  */\r\n  // private getWorkFlowCallBack(object: any) {\r\n  //   // おまじない\r\n  //   this.locator.useWorkFlowButton = false;\r\n  //   if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n  //     this.locator.useWorkFlowButton = false;\r\n  //   } else {\r\n  //     if (isWorkflowVO(object)) {\r\n  //       const workflow: WorkflowVO = object as WorkflowVO;\r\n  //       if (workflow.waitingApprover) {\r\n  //         const loginInfo: LoginInfo = this.stateUtilService.getCurrentState(getLoginInfo);\r\n  //         if (loginInfo.userId === workflow.waitingApprover.id) {\r\n  //           this.locator.useWorkFlowButton = true;\r\n  //         }\r\n  //       } else {\r\n  //         this.locator.useWorkFlowButton = false;\r\n  //       }\r\n  //     } else {\r\n  //       const fault: Sys0Exception = object as Sys0Exception;\r\n  //       const exception: Sys0Exception = fault as Sys0Exception;\r\n  //\r\n  //       if (exception.key !== Sys0ErrorType.DOCUMENT_UPDATE_AUTH) {\r\n  //         this.isBusy = true;\r\n  //\r\n  //         // ★Stitch V1.3対応 HttpErrorResponseにhttpErrorを利用する\r\n  //         this.fail(exception.httpError);\r\n  //       }\r\n  //\r\n  //       this.locator.useWorkFlowButton = false;\r\n  //     }\r\n  //   }\r\n  // }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { BaseAddTagCommand } from '../../../../core/commands/base-add-tag-command';\r\nimport { Sys0EventType } from '../../../../core/commands/sys0-event-type';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0BaseEvent } from '../../../../core/models/sys0-base-event';\r\nimport { DocumentVO } from '../../../../core/vo/document-vo';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { TagVO } from '../../../../core/vo/tag-vo';\r\nimport { DocumentViewComponent } from '../../../../main/containers/document-view/document-view.component';\r\nimport { MainViewTypes } from '../../../../main/models/main-view-types';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ThumbnailItemRendererComponent } from '../../../../shared/components/controls/list-classes/thumbnail-item-renderer/thumbnail-item-renderer.component';\r\nimport { Sys0ThumbnailListComponent } from '../../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { ListBase } from '../../../../shared/components/list-base';\r\nimport { ListEvent } from '../../../../shared/event/list-event';\r\nimport { ViewerModelLocator } from '../../../locator/viewer-model-locator';\r\n\r\nimport { ViewerModelLocatorService } from './../../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * 付箋を付ける\r\n *\r\n */\r\nexport class AddTagCommand extends BaseAddTagCommand {\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n  private selectedSection: SectionVO | null = null;\r\n  /** 取得するサムネイル一覧 **/\r\n  // ★Stitch V1.3対応 thumbnailList 定義を追加\r\n  private thumbnailList: ListBase;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    // ★Stitch V1.3対応 Main(root)追加\r\n    const docView = this.viewManager.get(MainViewTypes.DocumentView) as DocumentViewComponent;\r\n    this.thumbnailList = docView.thumbnailTileList;\r\n    // 選択セクションの取得\r\n    // ★Stitch V1.3対応　sectionListViewは不要です\r\n    this.selectedSection = this.thumbnailList.selectedItem as SectionVO;\r\n\r\n    super.check(param);\r\n  }\r\n\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.EDIT_TAG);\r\n  }\r\n\r\n  protected getDocumentVO(): DocumentVO {\r\n    // ★Stitch V1.3対応 currentDocument非空判断\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    return this.locator.currentDocument;\r\n  }\r\n\r\n  protected getSectionNo(): any {\r\n    // ★Stitch V1.3対応 selectedSection非空判断\r\n    if (this.selectedSection == null) {\r\n      throw new ApplicationError('selectedSection is null.');\r\n    }\r\n    return this.selectedSection.sectionNo;\r\n  }\r\n\r\n  protected getRecentDocument(document: DocumentVO) {\r\n    // 文書情報の再取得はしない。\r\n    this.nextProcess();\r\n  }\r\n\r\n  // ★Stitch V1.3対応 responderは不要です\r\n  protected callDelegate(documentVo: DocumentVO, newTag: TagVO) {\r\n    this.locator.updated = true;\r\n    // ★Stitch V1.3対応 実装方法はhttp.editTagに変更\r\n    this.http.editTag(documentVo, newTag);\r\n  }\r\n\r\n  protected refreshThumbnail(tag: TagVO) {\r\n    this.showMessageArea();\r\n\r\n    tag.selected = true;\r\n    // ★Stitch V1.3対応 selectedSection非空判断\r\n    if (this.selectedSection == null) {\r\n      throw new ApplicationError('selectedSection is null.');\r\n    }\r\n    this.selectedSection.tag = tag;\r\n\r\n    // ★Stitch V1.3対応 Viewer(root)を代わって使う\r\n    const documentView = this.viewManager.get(MainViewTypes.DocumentView) as DocumentViewComponent | undefined;\r\n    // ★Stitch V1.3対応 documentView非空判断\r\n    if (documentView == null) {\r\n      throw new ApplicationError('Failed to retrieve DocumentView.');\r\n    }\r\n    const thumbnailList: Sys0ThumbnailListComponent = documentView.thumbnailTileList;\r\n    // メニューの更新\r\n    // ★Stitch V1.3対応\r\n    // thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n    thumbnailList.onChange(new ListEvent(ListEvent.CHANGE));\r\n    // ★Stitch V1.3対応\r\n    // thumbnailList.dispatchEvent(new ListEvent(ListEvent.ITEM_CLICK));\r\n    thumbnailList.onItemClick(new ListEvent(ListEvent.ITEM_CLICK));\r\n\r\n    // tslint:disable-next-line:max-line-length\r\n    // ★Stitch V1.3対応\r\n    const itemRenderer: ThumbnailItemRendererComponent = thumbnailList.itemToItemRenderer(\r\n      this.currentDocument\r\n    ) as ThumbnailItemRendererComponent;\r\n    if (itemRenderer) {\r\n      itemRenderer.data = this.selectedSection;\r\n      itemRenderer.invalidateProperties();\r\n      // ★Stitch V1.3対応 checkValidator()に修正する\r\n      itemRenderer.checkValidator();\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../../core/commands/abstract-sys0-command';\r\nimport { MouseEvent } from '../../../../core/event/mouse-event';\r\nimport { Param } from '../../../../core/models/param';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ThumbnailItemRendererComponent } from '../../../../shared/components/controls/list-classes/thumbnail-item-renderer/thumbnail-item-renderer.component';\r\nimport { Sys0ThumbnailListComponent } from '../../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { ListEvent } from '../../../../shared/event/list-event';\r\nimport { SectionViewComponent } from '../../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\n\r\n/**\r\n *\r\n */\r\nexport class ClickSelectSectionCommand extends AbstractSys0Command {\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  private thumnailList: Sys0ThumbnailListComponent | null = null;\r\n\r\n  private selectionIndex: number;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    const mouseEvent: MouseEvent = this.event as MouseEvent;\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    this.thumnailList = sectionListView.thumbnailList;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.thumnailList == null) {\r\n      throw new ApplicationError('thumnailList is null.');\r\n    }\r\n    if (this.thumnailList.selectedIndex < 0) {\r\n      param.cancel = true;\r\n    } else {\r\n      const selectData: string = mouseEvent.currentTarget.data;\r\n\r\n      const currentSelectIndex: number = this.thumnailList.selectedIndex;\r\n\r\n      if (selectData === 'selectPrevious') {\r\n        if (currentSelectIndex - 1 < 0) {\r\n          param.cancel = true;\r\n        } else {\r\n          this.selectionIndex = currentSelectIndex - 1;\r\n        }\r\n      } else if (selectData === 'selectNext') {\r\n        // ★Stitch V1.3対応\r\n        // nullでないことを保証した上で動作する\r\n        if (this.locator == null || this.locator.sectionList == null) {\r\n          throw new ApplicationError('locator or sectionList is null.');\r\n        }\r\n        if (currentSelectIndex + 1 >= this.locator.sectionList.length) {\r\n          param.cancel = true;\r\n        } else {\r\n          this.selectionIndex = currentSelectIndex + 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  protected doCommand() {\r\n    // 透明な膜を貼る。\r\n    this.progress.setTransProgressBusyCursor(null);\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    const list: any[] = this.locator.sectionList;\r\n\r\n    const section: any = list[this.selectionIndex];\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.thumnailList == null) {\r\n      throw new ApplicationError('thumnailList is null.');\r\n    }\r\n    this.thumnailList.selectedItem = section;\r\n    this.thumnailList.scrollToItem();\r\n\r\n    if (this.selectionIndex !== this.thumnailList.selectedIndex) {\r\n      this.logger.info('selectionIndex = ' + this.selectionIndex + ' : thumnailList.selectedIndex = ' + this.thumnailList.selectedIndex);\r\n    }\r\n\r\n    const item: ThumbnailItemRendererComponent | null = this.thumnailList.indexToItemRenderer(this.selectionIndex);\r\n\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    const listEvent: ListEvent = new ListEvent(ListEvent.ITEM_CLICK);\r\n    listEvent.itemRenderer = item;\r\n    this.thumnailList.onItemClick(listEvent);\r\n\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    const changeEvent: ListEvent = new ListEvent(ListEvent.CHANGE);\r\n    this.thumnailList.onChange(changeEvent);\r\n\r\n    // 膜を解除する。\r\n    this.progress.removeTransProgressBusyCursor(null);\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { BaseDeleteTagCommand } from '../../../../core/commands/base-delete-tag-command';\r\nimport { Sys0EventType } from '../../../../core/commands/sys0-event-type';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0BaseEvent } from '../../../../core/models/sys0-base-event';\r\nimport { DocumentVO } from '../../../../core/vo/document-vo';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { TagVO } from '../../../../core/vo/tag-vo';\r\nimport { DocumentViewComponent } from '../../../../main/containers/document-view/document-view.component';\r\nimport { MainViewTypes } from '../../../../main/models/main-view-types';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ThumbnailItemRendererComponent } from '../../../../shared/components/controls/list-classes/thumbnail-item-renderer/thumbnail-item-renderer.component';\r\nimport { Sys0ThumbnailListComponent } from '../../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { ListBase } from '../../../../shared/components/list-base';\r\nimport { ListEvent } from '../../../../shared/event/list-event';\r\nimport { ViewerModelLocator } from '../../../locator/viewer-model-locator';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\n\r\n/**\r\n * 付箋を削除する\r\n *\r\n */\r\nexport class DeleteTagCommand extends BaseDeleteTagCommand {\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n  private selectedSection: SectionVO | null = null;\r\n  // ★Stitch V1.3対応 thumbnailList 定義を追加\r\n  private thumbnailList: ListBase;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    // 選択セクションの取得\r\n    // ★Stitch V1.3対応　sectionListViewは不要です\r\n    this.selectedSection = this.thumbnailList.selectedItem as SectionVO;\r\n\r\n    super.check(param);\r\n  }\r\n\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.CLEAR_TAG);\r\n  }\r\n\r\n  protected getDocumentVO(): DocumentVO {\r\n    // ★Stitch V1.3対応 currentDocument非空判断\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    return this.locator.currentDocument;\r\n  }\r\n\r\n  protected getSectionNo(): any {\r\n    // ★Stitch V1.3対応 selectedSection非空判断\r\n    if (this.selectedSection == null) {\r\n      throw new ApplicationError('selectedSection is null.');\r\n    }\r\n    return this.selectedSection.sectionNo;\r\n  }\r\n\r\n  protected getTagVO(): TagVO {\r\n    // ★Stitch V1.3対応 selectedSection非空判断\r\n    if (this.selectedSection == null) {\r\n      throw new ApplicationError('selectedSection is null.');\r\n    }\r\n    // ★Stitch V1.3対応 selectedSection.tag非空判断\r\n    if (this.selectedSection.tag == null) {\r\n      throw new ApplicationError('selectedSection.tag is null.');\r\n    }\r\n    return this.selectedSection.tag;\r\n  }\r\n\r\n  protected getRecentDocument(document: DocumentVO) {\r\n    // 文書情報の再取得はしない。\r\n    this.nextProcess();\r\n  }\r\n\r\n  // ★Stitch V1.3対応 responderは不要です\r\n  protected callDelegate(documentVo: DocumentVO, sectionNo: any) {\r\n    this.locator.updated = true;\r\n\r\n    // ★Stitch V1.3対応 実装方法はhttp.editTagに変更\r\n    this.http.clearTag(documentVo, sectionNo);\r\n  }\r\n\r\n  protected refreshThumbnail() {\r\n    this.showMessageArea();\r\n\r\n    // ★Stitch V1.3対応 selectedSection.tag非空判断\r\n    if (this.selectedSection == null) {\r\n      throw new ApplicationError('selectedSection.tag is null.');\r\n    }\r\n    this.selectedSection.tag = null;\r\n\r\n    // ★Stitch V1.3対応 Viewer(root)を代わって使う\r\n    const documentView = this.viewManager.get(MainViewTypes.DocumentView) as DocumentViewComponent | undefined;\r\n    // ★Stitch V1.3対応 documentView非空判断\r\n    if (documentView == null) {\r\n      throw new ApplicationError('Failed to retrieve DocumentView.');\r\n    }\r\n    const thumbnailList: Sys0ThumbnailListComponent = documentView.thumbnailTileList;\r\n\r\n    // メニューの更新\r\n    // ★Stitch V1.3対応\r\n    // thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n    thumbnailList.onChange(new ListEvent(ListEvent.CHANGE));\r\n    // ★Stitch V1.3対応\r\n    // thumbnailList.dispatchEvent(new ListEvent(ListEvent.ITEM_CLICK));\r\n    thumbnailList.onItemClick(new ListEvent(ListEvent.ITEM_CLICK));\r\n\r\n    const itemRenderer: ThumbnailItemRendererComponent = thumbnailList.itemToItemRenderer(\r\n      this.currentDocument\r\n    ) as ThumbnailItemRendererComponent;\r\n    if (itemRenderer) {\r\n      itemRenderer.data = this.selectedSection;\r\n      itemRenderer.invalidateProperties();\r\n      // ★Stitch V1.3対応 checkValidator()に修正する\r\n      itemRenderer.checkValidator();\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { ViewerModelLocator } from '../../../locator/viewer-model-locator';\r\n\r\nimport { Sys0EventType } from '../../../../core/commands/sys0-event-type';\r\nimport { Sys0ObjectOperateEvent } from '../../../../core/event/sys0-object-operate-event';\r\nimport { Alert } from '../../../../core/models/alert';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../../core/models/sys0-base-event';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\nimport { ExportSectionCommand } from '../../export-section-command';\r\n\r\n/**\r\n * セクションの実データのダウンロードを開始します。\r\n *\r\n */\r\nexport class EditModeExportSectionCommand extends ExportSectionCommand {\r\n  /**\r\n   * ダウンロードするセクションVO\r\n   */\r\n  protected downloadSection: SectionVO | null = null;\r\n\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  protected locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * ダウンロードするセクションの番号\r\n   */\r\n  protected sectionId: string | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    const downloadEvent: Sys0ObjectOperateEvent = this.event as Sys0ObjectOperateEvent;\r\n    this.downloadSection = downloadEvent.targetObject as SectionVO;\r\n\r\n    if (this.downloadSection == null) {\r\n      param.cancel = true;\r\n    }\r\n\r\n    this.isDownloadSection = true;\r\n\r\n    // ★Stitch V1.3対応\r\n    // 継承元の変数名がdispProgressからdisplayProgressに変更されていたため、あわせて変更する\r\n    this.displayProgress = true;\r\n    this.progressMessageLabel = this.wording.get('info.progress.preparing');\r\n    this.cancelable = false;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.GET_WORKING_SECTION_DETAIL);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null || this.locator.viewerId == null) {\r\n      throw new ApplicationError('Failed to call. downloadSection or viewerId is null.');\r\n    }\r\n    this.http.getWorkingSectionDetail(this.downloadSection, this.locator.viewerId, SectionVO.RENDITION_TYPE_PRIMARY);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    const test: any = event as Object;\r\n\r\n    if (event.result == null) {\r\n      // error\r\n      this.terminate();\r\n      return;\r\n    }\r\n\r\n    this.sectionId = event.result as string;\r\n    this.downloadId = this.sectionId;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null || this.downloadSection.name == null) {\r\n      throw new ApplicationError('Failed to succeed. downloadSection or name is null.');\r\n    }\r\n    this.fileName = this.downloadSection.name + this.downloadSection.icon;\r\n    this.messageService.showErrorMessage('info.download.savefile', Alert.OK, Sys0AlertType.TYPE_INFO, this.showDownloadReference);\r\n  }\r\n}\r\n","import { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\n\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\n\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\n\r\nimport { AbstractGetSectionThumbnailCommand } from '../../../../core/commands/abstract-get-section-thumbnail-command';\r\nimport { Sys0BaseVO } from '../../../../core/vo/sys0-base-vo';\r\n\r\n/**\r\n * サムネイル表示用のコマンドクラスです。\r\n *\r\n */\r\nexport class GetSectionThumbnailCommand extends AbstractGetSectionThumbnailCommand {\r\n  private locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * ★Stitch V1.3対応\r\n   * 戻り値を RemotingMessage からvoidに変更。\r\n   * RemotingMessage を受け取る getWorkingSectionThumbnail がvoidに変更されているため\r\n   */\r\n  protected callDelegate() {\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      // 更新モードの場合\r\n      this.http.getWorkingSectionThumbnail(this.currentDocument, this.sectionNo);\r\n    } else {\r\n      let versionId: string | null = null;\r\n      if (this.locator.version) {\r\n        versionId = this.locator.version.id;\r\n      }\r\n\r\n      this.http.getSectionThumbnail(this.currentDocument, this.sectionNo, versionId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  protected getResultSection(event: any): SectionVO {\r\n    const section: SectionVO = event as SectionVO;\r\n    if (section) {\r\n      // 親文書を入れる\r\n      section['parentDocument'] = this.locator.currentDocument;\r\n    }\r\n\r\n    return section;\r\n  }\r\n\r\n  protected getFeedbackObject(pendingMap: any, data: Sys0BaseVO): Sys0BaseVO {\r\n    if (pendingMap.hasOwnProperty(GetSectionThumbnailCommand.PENDING_MAP_PROP_TARGET)) {\r\n      const orgSection: SectionVO = pendingMap[GetSectionThumbnailCommand.PENDING_MAP_PROP_TARGET] as SectionVO;\r\n      const feedback: SectionVO = data as SectionVO;\r\n\r\n      if (orgSection != null) {\r\n        orgSection.thumbnailData = feedback.thumbnailData;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { IFrameEvent } from '../../../../shared/event/i-frame-event';\r\n\r\nimport { BaseCreateSectionCommand } from '../../base-create-section-command';\r\n\r\n/**\r\n * セクションの追加を行ないます。\r\n *\r\n * ファイルアップロード終了後に呼び出されます。\r\n * 進捗中ダイアログの制御のみ、実装される予定です。\r\n */\r\nexport class InsertSectionCommand extends BaseCreateSectionCommand {\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    super.check(param);\r\n\r\n    // 文書登録中か？\r\n    if (this.locator.createdSectionCount < 0) {\r\n      param.cancel = true;\r\n    } else {\r\n      const iframeEvent: IFrameEvent = this.event as IFrameEvent;\r\n\r\n      this.sectionList = [];\r\n      // セクション番号\r\n      // ★Stitch V1.3対応 パラメータnullチェック\r\n      if (this.locator.sectionList == null) {\r\n        throw new ApplicationError('sectionList is null.');\r\n      }\r\n      let sectionNo: number = this.insertIndex >= 0 ? this.insertIndex + 2 : this.locator.sectionList.length + 1;\r\n\r\n      if (iframeEvent.fileNameList == null) {\r\n        throw new ApplicationError('iframeEvent.fileNameList is null.');\r\n      }\r\n      for (const fileName of iframeEvent.fileNameList) {\r\n        const sectionVO: SectionVO = this.createSection(fileName, sectionNo);\r\n        this.sectionList.push(sectionVO);\r\n\r\n        sectionNo++;\r\n      }\r\n\r\n      // セクション数が200を超える場合\r\n      if (!this.checkSectionLimit()) {\r\n        const message = this.wording.get('warn.section.addingsectionlimit');\r\n        this.messageService.showErrorMessage(message);\r\n        param.cancel = true;\r\n\r\n        return;\r\n      }\r\n\r\n      // 2件以上の場合、キャンセル可能\r\n      this.cancelable = this.sectionList.length > 1;\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { Sys0ConnectObject } from '../../../../core/commands/sys0-connect-object';\r\nimport { Sys0EventType } from '../../../../core/commands/sys0-event-type';\r\nimport { MouseEvent } from '../../../../core/event/mouse-event';\r\nimport { Sys0ObjectOperateEvent } from '../../../../core/event/sys0-object-operate-event';\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../../../core/models/sys0-error-info';\r\nimport { ProgressManager } from '../../../../core/services/progress-manager.service';\r\nimport { Sys0CommonUtil } from '../../../../core/utils/sys0-common-util';\r\nimport { DocumentVO } from '../../../../core/vo/document-vo';\r\nimport { isSectionVO, SectionVO } from '../../../../core/vo/section-vo';\r\nimport { Sys0ThumbnailListComponent } from '../../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { SetNavigateMessage } from '../../../../shared/store/shared.actions';\r\nimport { ViewerViewTypes } from '../../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\nimport { BaseMoveSectionCommand } from '../../base-move-section-command';\r\n\r\nimport { SectionViewComponent } from './../../../containers/section/section-view.component';\r\n\r\n/**\r\n * セクションの移動を行ないます。\r\n *\r\n *\r\n */\r\nexport class MoveSectionCommand extends BaseMoveSectionCommand {\r\n  /**\r\n   * 移動ボタン「前へ」の定数\r\n   */\r\n  private static readonly MOVE_FOWARD: string = 'moveForward';\r\n\r\n  /**\r\n   * 移動ボタン「後ろへ」の定数\r\n   */\r\n  private static readonly MOVE_BACKWARD: string = 'moveBackward';\r\n\r\n  /**\r\n   * 移動ボタン「先頭へ」の定数\r\n   */\r\n  private static readonly MOVE_FRONT: string = 'moveTop';\r\n\r\n  /**\r\n   * 移動ボタン「最後へ」の定数\r\n   */\r\n  private static readonly MOVE_BOTTOM: string = 'moveBottom';\r\n\r\n  /**\r\n   * ロケーター\r\n   * @private\r\n   */\r\n  protected locator = ViewerModelLocatorService.getInstance();\r\n  /**\r\n   * 移動セクション（1つのみ）\r\n   * @private\r\n   */\r\n  protected moveSection: SectionVO | null = null;\r\n\r\n  /**\r\n   * セクションの文書\r\n   * @private\r\n   */\r\n  protected currentDocument: DocumentVO | null = null;\r\n\r\n  /**\r\n   * 移動先のインデックス\r\n   * @private\r\n   */\r\n  protected assignIndex = 0;\r\n\r\n  /**\r\n   * ビューアーを閉じるエラーを表示するか\r\n   * @private\r\n   */\r\n  protected isSystemClose = false;\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  private moveString: string | null = null;\r\n\r\n  /*\r\n   * セクションサムネイルエリア\r\n   */\r\n  private _sectionListView: SectionViewComponent | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * セクションサムネイルエリア\r\n   */\r\n  protected get sectionListView(): SectionViewComponent {\r\n    if (this._sectionListView == null) {\r\n      const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (sectionView == null) {\r\n        throw new ApplicationError('Failed to retrieve sectionView.');\r\n      }\r\n\r\n      this._sectionListView = sectionView;\r\n    }\r\n    return this._sectionListView;\r\n  }\r\n\r\n  /**\r\n   * 移動するSectionVOと移動先の情報を取得します。\r\n   * 進捗ダイアログメッセージの初期化を行ないます。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    if (this.event instanceof Sys0ObjectOperateEvent) {\r\n      const moveEvent: Sys0ObjectOperateEvent = this.event as Sys0ObjectOperateEvent;\r\n\r\n      this.moveString = moveEvent.info as string;\r\n      this.moveSection = moveEvent.targetObject as SectionVO;\r\n    } else {\r\n      const mouseEvent: MouseEvent = this.event as MouseEvent;\r\n\r\n      if (mouseEvent.currentTarget != null) {\r\n        this.moveString = mouseEvent.currentTarget.data;\r\n      }\r\n      this.moveSection = this.sectionListView.thumbnailList.selectedItem as SectionVO;\r\n    }\r\n\r\n    if (this.moveString == null || this.moveSection == null) {\r\n      param.cancel = true;\r\n      return;\r\n    }\r\n\r\n    // 移動セクションをソートして移動可能かをチェック\r\n    // moveSections.sortOn(\"sectionNo\", Array.NUMERIC);\r\n\r\n    // 後ろへの移動の場合、ソート順の変更\r\n    /*if (moveString == MOVE_BACKWARD) {\r\n\t\t\t\tmoveSections.sortOn(\"sectionNo\", Array.NUMERIC|Array.DESCENDING);\r\n\t\t\t}*/\r\n\r\n    this.isSystemClose = false;\r\n\r\n    this.currentDocument = this.locator.currentDocument;\r\n    this.assignIndex = this.getAssignIndex(this.moveString, Number(this.moveSection.sectionNo));\r\n  }\r\n\r\n  /**\r\n   * イベントオブジェクトの生成を行ないます。\r\n   *\r\n   * @inheritDoc\r\n   *\r\n   *  ★Stitch V1.3対応\r\n   *  引数のparamは使われていないため削除\r\n   */\r\n  request(): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.MOVE_SECTION_EVENT);\r\n  }\r\n\r\n  /**\r\n   * セクションの移動を呼び出します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    this.locator.updated = true;\r\n\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    if (this.moveSection == null || this.moveSection.sectionNo == null) {\r\n      throw new ApplicationError('moveSection.sectionNo is null.');\r\n    }\r\n\r\n    this.http.moveSection(this.currentDocument, this.moveSection.sectionNo, this.assignIndex);\r\n  }\r\n\r\n  /**\r\n   * 画面の更新を行います。\r\n   * 次のSectionVOがあったら続行し、なかったら処理を終了します。\r\n   * メッセージエリアにセクションを移動した旨のメッセージを表示させます。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    // 膜を貼る\r\n    this.progress.setTransProgressBusyCursor(null);\r\n    // 画面の更新処理\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.moveSection == null) {\r\n      throw new ApplicationError('moveSection is null.');\r\n    }\r\n    this.updateSectionView(this.moveSection);\r\n\r\n    const message = this.wording.get('info.move.sectionmoved');\r\n    this.store.dispatch(new SetNavigateMessage(message));\r\n    // 膜を解除\r\n    this.progress.removeTransProgressBusyCursor(null);\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.isSystemClose) {\r\n      // ★Stitch V1.3対応 パラメータnullチェック\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo.message is null.');\r\n      }\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message);\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        this.cancelEdit();\r\n      }\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 編集モードを終了します。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    sys0ConnectObject.documentUpdateEnd(this.locator.currentDocument, null, '', '', false, () => {});\r\n  }\r\n\r\n  /**\r\n   * assignIndexを取得します。\r\n   *\r\n   * @param str 移動方向を表す文字列\r\n   * @param sectionNo 移動するセクションのセクションNo\r\n   * @return assignIndex 移動先のインデックス\r\n   *\r\n   */\r\n  private getAssignIndex(str: string, sectionNo: number): number {\r\n    let index = -1;\r\n\r\n    switch (str) {\r\n      case MoveSectionCommand.MOVE_FOWARD:\r\n        index = sectionNo - 1;\r\n        break;\r\n\r\n      case MoveSectionCommand.MOVE_BACKWARD:\r\n        index = sectionNo + 1;\r\n        break;\r\n\r\n      case MoveSectionCommand.MOVE_FRONT:\r\n        index = 1;\r\n        break;\r\n\r\n      case MoveSectionCommand.MOVE_BOTTOM:\r\n        index = 0;\r\n        break;\r\n    }\r\n\r\n    return index;\r\n  }\r\n\r\n  /**\r\n   * 画面を更新します。\r\n   *\r\n   * @param section 移動したセクション\r\n   *\r\n   */\r\n  private updateSectionView(section: SectionVO) {\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('locator.sectionList is null.');\r\n    }\r\n    const list: any[] = this.locator.sectionList;\r\n\r\n    // ★Stitch V1.3対応 refreshはmxコンポーネントメソッドで、Angularで相当する処理は必要ないと判断し削除しました。\r\n    // disableAutoUpdateもmxコンポーネントのリストの更新処理であり、Angularでは不要なため、削除しました。\r\n    // list.refresh();\r\n    // list.disableAutoUpdate();\r\n\r\n    /*\r\n     ★Stitch V1.3対応  順番を入れ替えるために、削除してから改めて差し込むという方法をとると、サムネイルリストが再描画されないため\r\n     削除→追加による移動ではなく、  上書きによる移動に変更する\r\n    */\r\n\r\n    // 削除\r\n    Sys0CommonUtil.deleteSection(section, list);\r\n\r\n    /*\r\n     ★Stitch V1.3対応　サムネイル表示アイテム全てにdetectChange() を強制させる\r\n     virtuarlScrollは行の追加、削除の変更検知を配列のlengthでチェックしているため、 削除した後に続けて追加すると\r\n     結果的に行数に変化が無いため、変更検知対象外となってしまう\r\n     そのため、削除後に一旦変更検知処理を実行させて回避することとする\r\n     */\r\n    this.sectionListView.thumbnailList.detectChanges();\r\n\r\n    // 追加\r\n    let index: number;\r\n    if (this.moveString === MoveSectionCommand.MOVE_FRONT) {\r\n      index = 0;\r\n    } else if (this.moveString === MoveSectionCommand.MOVE_BOTTOM) {\r\n      index = list.length;\r\n    } else {\r\n      index = this.assignIndex - 1;\r\n    }\r\n    list.splice(index, 0, section);\r\n\r\n    // ★Stitch V1.3対応 enableAutoUpdateはmxコンポーネントのリストの更新処理であり、Angularでは不要なため削除しました。\r\n    // list.enableAutoUpdate();\r\n\r\n    const thumbnailList: Sys0ThumbnailListComponent = this.sectionListView.thumbnailList;\r\n\r\n    // 画面の更新\r\n    // セクションNo振りなおし\r\n    this.locator.renumberSectionList();\r\n    this.sectionListView.validateNow();\r\n\r\n    // 選択アイテムにsectionを指定します\r\n    // ★Stitch V1.3対応 Array.getItemAt → [] に変換\r\n    const selectedItem: any = list[index];\r\n    thumbnailList.selectedItem = selectedItem;\r\n\r\n    this.logger.info('selectedIndex = ' + thumbnailList.selectedIndex);\r\n\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    //    thumbnailList.dispatchEvent(new ListEvent(ListEvent.ITEM_CLICK));\r\n    //    thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n    thumbnailList.onItemClick();\r\n    thumbnailList.onChange();\r\n  }\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\n\r\nimport { ApplicationError } from '../../../../core/application-error';\r\nimport { BaseOpenAppExportSectionCommand } from '../../../../core/commands/document/base-open-app-export-section-command';\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../../core/models/alert';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../../core/models/sys0-alert-type';\r\nimport { Sys0ErrorInfo } from '../../../../core/models/sys0-error-info';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { ViewerModelLocator } from '../../../../viewer/locator/viewer-model-locator';\r\nimport { SectionViewComponent } from '../../../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\nimport { AbstractSectionDeletedUpdateCommand } from '../../abstract-section-deleted-update-command';\r\nimport { ISupportSectionDeletedUpdate } from '../../i-support-section-deleted-update';\r\n/**\r\n * ダウンロード後にアプリケーションを起動する。\r\n *\r\n */\r\nexport class OpenAppExportSectionCommand extends BaseOpenAppExportSectionCommand {\r\n  /**\r\n   * @private\r\n   */\r\n  private sectionDeletedUpdate: ISupportSectionDeletedUpdate | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  check(param: Param) {\r\n    super.check(param);\r\n\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_READONRY) {\r\n      param.isAsync = true;\r\n      this.messageService.showErrorMessage('info.section.openreadonly', Alert.OK, Sys0AlertType.TYPE_INFO, this.alertOkHandler);\r\n    } else {\r\n      if (!this.initDownload()) {\r\n        param.cancel = true;\r\n      }\r\n    }\r\n\r\n    if (this.locator.version) {\r\n      this.versionId = this.locator.version.id;\r\n    } else {\r\n      this.versionId = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    let versionId: string | null = null;\r\n    // 版IDを指定する。\r\n    if (this.locator.version) {\r\n      versionId = this.locator.version.id;\r\n    }\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null) {\r\n      throw new ApplicationError('downloadSection is null.');\r\n    }\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      this.http.getWorkingSectionDetail(this.downloadSection, this.viewId, SectionVO.RENDITION_TYPE_PRIMARY);\r\n    } else {\r\n      this.http.getSectionDetail(this.downloadSection, this.viewId, SectionVO.RENDITION_TYPE_PRIMARY, versionId);\r\n    }\r\n  }\r\n\r\n  fail(event: HttpErrorResponse) {\r\n    super.$fail(event);\r\n  }\r\n\r\n  /**\r\n   * ViewerModelLocatorをセット\r\n   */\r\n  protected setModelLocator() {\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  /**\r\n   * viewerIdのゲッター\r\n   */\r\n  protected get viewId(): string {\r\n    const viewerId = (this.locator as ViewerModelLocator).viewerId;\r\n    if (viewerId == null) {\r\n      throw new ApplicationError('viewerId is null.');\r\n    }\r\n    return viewerId;\r\n  }\r\n\r\n  protected startAppEdit() {\r\n    // フラグ設定\r\n    this.openMode = this.locator.currentMode;\r\n\r\n    super.startAppEdit();\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null || this.downloadSection.sectionNo == null) {\r\n      throw new ApplicationError('Failed to startAppEdit. downloadSection or sectionNo is null.');\r\n    }\r\n    (this.locator as ViewerModelLocator).runnningAppSections[this.downloadSection.sectionNo.toString()] = this.downloadSection.runningApp;\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    sectionListView.thumbnailList.onChange();\r\n    // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n  }\r\n\r\n  /**\r\n   * ダウンロード対象のセクションでエラーが起きた場合に画面の更新を行います。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n\r\n  protected errorAlertOkHandler() {\r\n    if (this.sectionDeletedUpdate == null) {\r\n      this.sectionDeletedUpdate = new AbstractSectionDeletedUpdateCommand();\r\n    }\r\n    const section: SectionVO = new SectionVO();\r\n    section.sectionNo = this.sectionNo;\r\n\r\n    this.sectionDeletedUpdate.deleteSection(section);\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.doPostFailPropcess) {\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo.message is null.');\r\n      }\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message);\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文書が削除されていた場合エラーメッセージを表示して処理を中止します。\r\n   */\r\n  protected getDeleteMessageKey(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.docnoexist';\r\n  }\r\n\r\n  /**\r\n   * アクセス権がなくなっていた場合エラーメッセージを表示して処理を中止します。\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.docnoexist';\r\n  }\r\n\r\n  /**\r\n   * 文書がごみ箱にある場合エラーメッセージを表示して処理を中止します。\r\n   */\r\n  protected getTrashMessageKey(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.docintrash';\r\n  }\r\n\r\n  protected getVersionDelete(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.versiondeleted';\r\n  }\r\n\r\n  protected getSeQuenceInvalidKey(): string {\r\n    return 'warn.section.canceleddocedit';\r\n  }\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\n\r\nimport { ApplicationError } from '../../../../core/application-error';\r\nimport { BaseOpenAppExportSectionCommand } from '../../../../core/commands/document/base-open-app-export-section-command';\r\nimport { Sys0EventType } from '../../../../core/commands/sys0-event-type';\r\nimport { ExternalJsCallback } from '../../../../core/external-js-callback';\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\nimport { Alert } from '../../../../core/models/alert';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../../../core/models/sys0-error-info';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { SectionViewComponent } from '../../../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\nimport { AbstractSectionDeletedUpdateCommand } from '../../abstract-section-deleted-update-command';\r\nimport { ISupportSectionDeletedUpdate } from '../../i-support-section-deleted-update';\r\n\r\nexport class OpenFtsExportSection extends BaseOpenAppExportSectionCommand {\r\n  /**\r\n   * @private\r\n   */\r\n  private sectionDeletedUpdate: ISupportSectionDeletedUpdate | null = null;\r\n\r\n  // ★Stitch V1.3対応\r\n  private externalJsCallback: ExternalJsCallback = this.injector.get(ExternalJsCallback);\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    this.setModelLocator();\r\n\r\n    // ★Stitch V1.3対応\r\n    // 継承元の変数名がdispProgressからdisplayProgressに変更されていたため、あわせて変更する\r\n    this.displayProgress = true;\r\n    this.cancelable = false;\r\n    this.progressMessageLabel = this.wording.get('info.progress.fulltext');\r\n\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_READONRY) {\r\n      param.isAsync = true;\r\n      this.messageService.showErrorMessage('info.fts.readonly', Alert.OK, Sys0AlertType.TYPE_INFO, this.alertOkHandler);\r\n    } else {\r\n      if (!this.initDownload()) {\r\n        param.cancel = true;\r\n      }\r\n    }\r\n\r\n    if (this.locator.version) {\r\n      this.versionId = this.locator.version.id;\r\n    } else {\r\n      this.versionId = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.GET_SECTION_DETAIL_EVENT);\r\n  }\r\n\r\n  /**\r\n   * リモートサービスを呼び出します。\r\n   */\r\n  call() {\r\n    let versionId: string | null = null;\r\n    if (this.locator.version) {\r\n      versionId = this.locator.version.id;\r\n    }\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null) {\r\n      throw new ApplicationError('downloadSection is null.');\r\n    }\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      this.http.getWorkingSectionDetail(this.downloadSection, this.viewId, SectionVO.RENDITION_TYPE_FTS);\r\n    } else {\r\n      this.http.getSectionDetail(this.downloadSection, this.viewId, SectionVO.RENDITION_TYPE_FTS, versionId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    this.progress.addCommand(null, false, 0, '', '', this.wording.get('info.progress.openfts'), null, 0, true);\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null || this.downloadSection.sectionNo == null) {\r\n      throw new ApplicationError('downloadSection or downloadSection.sectionid is null.');\r\n    }\r\n    this.sectionId = this.downloadSection.sectionNo.toString();\r\n    this.downloadId = event.result as string;\r\n\r\n    if (this.downloadId != null) {\r\n      if (this.downloadId !== '0') {\r\n        this.openMode = this.locator.currentMode;\r\n      } else {\r\n        // 全文データが0バイト\r\n        this.openMode = 2;\r\n      }\r\n    } else {\r\n      // 全文データがない\r\n      this.openMode = 2;\r\n    }\r\n\r\n    this.startAppEdit();\r\n    this.terminate();\r\n  }\r\n\r\n  fail(event: HttpErrorResponse) {\r\n    super.$fail(event);\r\n  }\r\n\r\n  protected setModelLocator() {\r\n    this.locator = ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  protected get viewId(): string {\r\n    const viewerId = (this.locator as ViewerModelLocator).viewerId;\r\n    if (viewerId == null) {\r\n      throw new ApplicationError('Failed to get viewId. viewerId is null.');\r\n    }\r\n    return viewerId;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   */\r\n  protected startAppEdit() {\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null) {\r\n      throw new ApplicationError('downloadSection is null.');\r\n    }\r\n    // ダウンロードしたファイルをアプリケーションで起動する。\r\n    this.fileName = this.wording.get('lbl.openfts.ftsdata') + this.downloadSection.name + '.txt';\r\n\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_READONRY) {\r\n      this.fileName = this.wording.get('lbl.openapplication.readonly') + this.fileName;\r\n      this.downloadSection.runningApp = SectionVO.APP_OPEN_READONLY;\r\n    } else {\r\n      this.downloadSection.runningApp = SectionVO.APP_OPEN;\r\n    }\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection.id == null || this.sectionId == null) {\r\n      throw new ApplicationError('downloadSection.id or sectionId is null.');\r\n    }\r\n    const filePath: string = this.locator.makeEditAppFileName(this.viewId, this.downloadSection.id, this.sectionId, this.fileName, '1');\r\n    this.logger.info('全文データをアプリケーションを起動します。: ' + filePath);\r\n\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (this.downloadSection == null || this.downloadSection.sectionNo == null) {\r\n      throw new ApplicationError('Failed to startAppEdit. downloadSection or sectionNo is null.');\r\n    }\r\n    // フラグ設定\r\n    (this.locator as ViewerModelLocator).runnningAppSections[this.downloadSection.sectionNo.toString()] = this.downloadSection.runningApp;\r\n\r\n    this.externalJsCallback.startEditFTS(\r\n      this.getDownloadUrl(),\r\n      this.locator.makeEditAppFileName(this.viewId, this.downloadSection.id, this.sectionId, this.fileName, '1'),\r\n      this.openMode\r\n    );\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    // ★Stitch V1.3対応 dispatchEvent対応\r\n    sectionListView.thumbnailList.onChange();\r\n    // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n  }\r\n\r\n  /**\r\n   * ダウンロード対象のセクションでエラーが起きた場合に画面の更新を行います。\r\n   *\r\n   *\r\n   */\r\n\r\n  protected errorAlertOkHandler() {\r\n    if (this.sectionDeletedUpdate == null) {\r\n      this.sectionDeletedUpdate = new AbstractSectionDeletedUpdateCommand();\r\n    }\r\n    const section: SectionVO = new SectionVO();\r\n    section.sectionNo = this.sectionNo;\r\n\r\n    this.sectionDeletedUpdate.deleteSection(section);\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.doPostFailPropcess) {\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo.message is null.');\r\n      }\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message);\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文書が削除されていた場合エラーメッセージを表示して処理を中止します。\r\n   */\r\n  protected getDeleteMessageKey(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.docnoexist';\r\n  }\r\n\r\n  /**\r\n   * アクセス権がなくなっていた場合エラーメッセージを表示して処理を中止します。\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.docnoexist';\r\n  }\r\n\r\n  /**\r\n   * 文書がごみ箱にある場合エラーメッセージを表示して処理を中止します。\r\n   */\r\n  protected getTrashMessageKey(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.docintrash';\r\n  }\r\n\r\n  protected getVersionDelete(): string {\r\n    this.doPostFailPropcess = true;\r\n    return 'warn.downloadsection.versiondeleted';\r\n  }\r\n\r\n  protected getSeQuenceInvalidKey(): string {\r\n    return 'warn.section.canceleddocedit';\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getSectionNotExist(): string {\r\n    if (this.fromViewer) {\r\n      return 'warn.downloadsection.sectionnoexist';\r\n    } else {\r\n      return 'warn.download.sectionnonexist';\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { AbstractSys0RpcCommand } from '../../../../core/commands/abstract-sys0-rpc-command';\r\nimport { Sys0ConnectObject } from '../../../../core/commands/sys0-connect-object';\r\nimport { Sys0EventType } from '../../../../core/commands/sys0-event-type';\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { Sys0AlertType } from '../../../../core/models/sys0-alert-type';\r\nimport { Sys0BaseEvent } from '../../../../core/models/sys0-base-event';\r\nimport { Sys0ErrorInfo } from '../../../../core/models/sys0-error-info';\r\nimport { DocumentVO } from '../../../../core/vo/document-vo';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { Sys0ThumbnailListComponent } from '../../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { SetNavigateMessage } from '../../../../shared/store/shared.actions';\r\nimport { SectionViewComponent } from '../../../containers/section/section-view.component';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\n\r\nimport { InputNameDialogComponent } from './../../../../main/containers/dialogs/input-name-dialog/input-name-dialog.component';\r\nimport { ViewerViewTypes } from './../../../models/viewer-view-types';\r\n\r\n/**\r\n * セクション名の変更を行ないます。\r\n *\r\n * テキスト入力からフォーカスが外れた時に呼び出されます。\r\n *\r\n *\r\n */\r\nexport class RenameSectionCommand extends AbstractSys0RpcCommand {\r\n  /**\r\n   * 対象のセクション\r\n   * @private\r\n   */\r\n  private section: SectionVO | null = null;\r\n\r\n  /**\r\n   * セクション名\r\n   * @private\r\n   */\r\n  private newName: string | null = null;\r\n\r\n  /**\r\n   * 画面を閉じるエラーにするかどうか\r\n   * @private\r\n   */\r\n  private isSystemClose = false;\r\n\r\n  /**\r\n   * モデルロケーター\r\n   * @private\r\n   */\r\n  private locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 入力されたセクション名、名前を変更するSectionVOを取得します。\r\n   *\r\n   * 入力されたセクション名と、SectionVOの名前が一致した場合、処理を中止します。\r\n   * 入力されたセクション名に、禁則文字が入力された場合、空白文字列のみの場合はエラーメッセ時を表示し\r\n   * 処理を中止します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    // 読み取りモードの場合処理中止\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_READONRY) {\r\n      param.cancel = true;\r\n      return;\r\n    }\r\n\r\n    // 選択アイテム取得\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionView.');\r\n    }\r\n\r\n    const thumbnail: Sys0ThumbnailListComponent = sectionListView.thumbnailList;\r\n    this.section = thumbnail.selectedItem as SectionVO;\r\n\r\n    if (this.section == null) {\r\n      param.cancel = true;\r\n      return;\r\n    }\r\n\r\n    param.isAsync = true;\r\n    this.isSystemClose = false;\r\n\r\n    // ●TODO: [task XXXX] Phase4 Sys0InputNameを実装する\r\n    // Sys0InputName.show(\r\n    //   this.wording.get('lbl.inputname.renamesection'),\r\n    //   255,\r\n    //   true,\r\n    //   this.section.name,\r\n    //   root,\r\n    //   this.closeInputNameHandler,\r\n    //   true,\r\n    //   this.wording.get('warn.inputname.prohibitsectionname'),\r\n    //   this.wording.get('warn.inputname.requiredfield')\r\n    // );\r\n  }\r\n\r\n  /**\r\n   * セクション名変更のイベントオブジェクトの生成を行ないます。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  request(param: Param): Sys0BaseEvent {\r\n    return new Sys0BaseEvent(Sys0EventType.RENAME_SECTION_EVENT);\r\n  }\r\n\r\n  /**\r\n   * セクションの名前変更を呼び出します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  call() {\r\n    // ★Stitch V1.3対応 locatorをインスタンス変数から参照\r\n    const parentDoc: DocumentVO | null = this.locator.currentDocument;\r\n    // var parentDoc:DocumentVO = ViewerModelLocator.getInstance().currentDocument;\r\n\r\n    this.locator.updated = true;\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (parentDoc == null) {\r\n      throw new ApplicationError('section or newName is null.');\r\n    }\r\n    if (this.section == null || parentDoc == null || this.newName == null) {\r\n      throw new ApplicationError('Failed to call(). section or newName or parendDoc is null.');\r\n    }\r\n    this.http.renameSection(parentDoc, this.section.sectionNo as number, this.newName);\r\n  }\r\n\r\n  /**\r\n   * 変更されたセクション名を画面に反映します。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    let no = 0;\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    if (this.section == null) {\r\n      throw new ApplicationError('section is null.');\r\n    }\r\n\r\n    for (const sectionVO of this.locator.sectionList) {\r\n      if (sectionVO.sectionNo === this.section.sectionNo) {\r\n        sectionVO.name = this.newName;\r\n      }\r\n      no++;\r\n    }\r\n    const message = this.wording.get('info.messagearea.rename');\r\n    this.store.dispatch(new SetNavigateMessage(message));\r\n\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected showFailAlert(errorInfo: Sys0ErrorInfo) {\r\n    if (this.isSystemClose) {\r\n      // ★Stitch V1.3対応 パラメータnullチェック\r\n      if (errorInfo.message == null) {\r\n        throw new ApplicationError('errorInfo.message is null.');\r\n      }\r\n      this.messageService.showSystemCloseDialog(Sys0AlertType.TYPE_SYSTEM_ERROR, errorInfo.message);\r\n      if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        this.cancelEdit();\r\n      }\r\n    } else {\r\n      super.showFailAlert(errorInfo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getAllAuthMessageKey(): string {\r\n    this.isSystemClose = true;\r\n    return 'warn.pdf.docnonexist';\r\n  }\r\n\r\n  /**\r\n   * 編集モードを終了します。\r\n   */\r\n  protected cancelEdit() {\r\n    const sys0ConnectObject: Sys0ConnectObject = new Sys0ConnectObject();\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.locator.currentDocument == null) {\r\n      throw new ApplicationError('currentDocument is null.');\r\n    }\r\n    sys0ConnectObject.documentUpdateEnd(this.locator.currentDocument, null, '', '', false, () => {});\r\n  }\r\n\r\n  /**\r\n   * 名前入力ダイアログが閉じられた際のイベントハンドラーです。\r\n   *\r\n   * @param event\r\n   *\r\n   */\r\n  private closeInputNameHandler(event: Event) {\r\n    const dialog: InputNameDialogComponent = this.event.currentTarget as InputNameDialogComponent;\r\n\r\n    this.popup.removePopUp(dialog);\r\n    if (event.type === InputNameDialogComponent.INPUTNAME_OK_EVENT) {\r\n      this.newName = dialog.inputName;\r\n\r\n      this.checkComplete(false);\r\n    } else {\r\n      this.checkComplete(true);\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { AbstractChangeListCommand } from '../../../../shared/commands/abstract-change-list-command';\r\nimport { ListBase } from '../../../../shared/components/list-base';\r\nimport { PdfViewComponent } from '../../../containers/pdf/pdf-view.component';\r\nimport { SectionViewComponent } from '../../../containers/section/section-view.component';\r\nimport { ViewerComponent } from '../../../containers/viewer/viewer.component';\r\nimport { ViewerEnableModel } from '../../../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../../services/viewer-model-locator.service';\r\nimport { SetViewerEnableModel } from '../../../store/viewer.actions';\r\n\r\nimport { IFrameComponent } from './../../../../shared/components/i-frame/i-frame.component';\r\n\r\n/**\r\n * セクションのCHANGEイベント時の処理です。\r\n *\r\n */\r\nexport class SectionChangeCommand extends AbstractChangeListCommand {\r\n  private locator = ViewerModelLocatorService.getInstance();\r\n\r\n  private isEditable = false;\r\n\r\n  private isVersionView = false;\r\n\r\n  private runningApp = false;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * メニュー制御と、ビューアー表示を行ないます。\r\n   */\r\n  protected doCommand() {\r\n    // ★Stitch V1.3対応\r\n    // enableModelをstateUtilServiceから取得する\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (viewer == null) {\r\n      throw new ApplicationError('Failed to retrieve Viewer View.');\r\n    }\r\n    this.enableModel = viewer.enableModel;\r\n\r\n    this.isEditable = this.locator.currentMode === BaseModelLocator.MODE_EDITABLE;\r\n    this.isVersionView = this.locator.version != null;\r\n\r\n    this.runningApp = this.locator.runningApp;\r\n\r\n    super.doCommand();\r\n    this.terminate();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected getList(): ListBase {\r\n    const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionView.');\r\n    }\r\n    return sectionView.thumbnailList;\r\n  }\r\n\r\n  /**\r\n   * 一覧にデータがある場合のメニュー制御\r\n   */\r\n  protected setEnableHasListData(hasListData: boolean) {\r\n    const viewerEnableModel: ViewerEnableModel = this.enableModel as ViewerEnableModel;\r\n    // おまじない。CHANGEイベント対応の為\r\n    viewerEnableModel.del = false;\r\n    if (!hasListData) {\r\n      this.getPdfView().offIFrame(true);\r\n    }\r\n\r\n    // ★Stitch V1.3対応\r\n    // NgRxのReducerでViewerEnableModelに書き込む\r\n    this.store.dispatch(new SetViewerEnableModel(viewerEnableModel));\r\n  }\r\n\r\n  /**\r\n   * 単一選択のメニュー制御\r\n   */\r\n  protected setEnableSelectedOneItem(isSelectedOneItem: boolean) {\r\n    const viewerEnableModel: ViewerEnableModel = this.enableModel as ViewerEnableModel;\r\n\r\n    // viewerEnableModel.showPDF = isSelectedOneItem;\r\n    viewerEnableModel.replace = this.isEditable ? isSelectedOneItem && !this.runningApp : false;\r\n\r\n    viewerEnableModel.download = !this.isEditable;\r\n    viewerEnableModel.sectionDownload = isSelectedOneItem;\r\n    viewerEnableModel.move = this.isEditable ? isSelectedOneItem : false;\r\n\r\n    viewerEnableModel.del = this.isEditable && !this.runningApp && isSelectedOneItem;\r\n    viewerEnableModel.divide =\r\n      this.isEditable && !this.runningApp && isSelectedOneItem && this.locator.sectionList != null && this.locator.sectionList.length > 1;\r\n    viewerEnableModel.renameSection = this.isEditable && !this.runningApp && isSelectedOneItem;\r\n\r\n    viewerEnableModel.moveTop = this.enableMoveForward();\r\n    viewerEnableModel.moveForward = this.enableMoveForward();\r\n    viewerEnableModel.moveBackward = this.enableMoveBackward();\r\n    viewerEnableModel.moveBottom = this.enableMoveBackward();\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    // ドラッグドロップ可能か\r\n    sectionListView.thumbnailList.dropEnabled = this.isEditable ? isSelectedOneItem && !this.runningApp : false;\r\n    // セクション移動ボタン制御\r\n    if (this.isEditable && isSelectedOneItem) {\r\n      sectionListView.moveForwardButtonDisabled = this.enableMoveForward();\r\n      sectionListView.moveNextButtonDisabled = this.enableMoveBackward();\r\n\r\n      const hasTag: boolean = this.hasTag();\r\n      viewerEnableModel.addTag = !this.runningApp && !hasTag;\r\n      viewerEnableModel.editTag = !this.runningApp && hasTag;\r\n      viewerEnableModel.deleteTag = !this.runningApp && hasTag;\r\n    } else {\r\n      sectionListView.moveForwardButtonDisabled = false;\r\n      sectionListView.moveNextButtonDisabled = false;\r\n      viewerEnableModel.moveTop = false;\r\n      viewerEnableModel.moveForward = false;\r\n      viewerEnableModel.moveBackward = false;\r\n      viewerEnableModel.moveBottom = false;\r\n      viewerEnableModel.addTag = false;\r\n      viewerEnableModel.editTag = false;\r\n      viewerEnableModel.deleteTag = false;\r\n    }\r\n\r\n    // ★Stitch V1.3対応\r\n    // NgRxのReducerでViewerEnableModelに書き込む\r\n    this.store.dispatch(new SetViewerEnableModel(viewerEnableModel));\r\n\r\n    // ●TODO: [task 1098]\r\n    // Sys0ThumbnailListの中身(TileBaseの実態)が定まったら対応する\r\n    // コンパイルを通すため、一時的に型を ListBaseに変更。\r\n    // const thumbnailList: Sys0ThumbnailList = this.getList() as Sys0ThumbnailList;\r\n    const thumbnailList = this.getList();\r\n\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.locator.sectionList != null) {\r\n      sectionListView.selectNextButtonDisabled = isSelectedOneItem && thumbnailList.selectedIndex + 1 < this.locator.sectionList.length;\r\n    }\r\n    sectionListView.selectPrevButtonDisabled = isSelectedOneItem && thumbnailList.selectedIndex > 0;\r\n\r\n    if (!isSelectedOneItem) {\r\n      this.getPdfView().offIFrame(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 複数選択のメニュー制御\r\n   */\r\n  protected setEnableSelectedItem(isSelectedItem: boolean) {\r\n    const viewerEnableModel: ViewerEnableModel = this.enableModel as ViewerEnableModel;\r\n\r\n    viewerEnableModel.del = this.isEditable ? isSelectedItem && !this.runningApp : false;\r\n    viewerEnableModel.openApplication = isSelectedItem;\r\n    viewerEnableModel.openFtsData = isSelectedItem;\r\n    viewerEnableModel.print = !this.isEditable && isSelectedItem;\r\n    viewerEnableModel.printAll = !this.isEditable;\r\n\r\n    // ★Stitch V1.3対応\r\n    // NgRxのReducerでViewerEnableModelに書き込む\r\n    this.store.dispatch(new SetViewerEnableModel(viewerEnableModel));\r\n  }\r\n\r\n  /**\r\n   * 選択状態に関係ないメニュー制御\r\n   */\r\n  protected setOther() {\r\n    const viewerEnableModel: ViewerEnableModel = this.enableModel as ViewerEnableModel;\r\n\r\n    viewerEnableModel.add = this.isEditable && !this.runningApp;\r\n    viewerEnableModel.update = !this.isEditable;\r\n    viewerEnableModel.property = true;\r\n    viewerEnableModel.reCreateSubData = !this.isEditable && this.locator.version == null;\r\n\r\n    viewerEnableModel.inform = true;\r\n    viewerEnableModel.copyUrl = true;\r\n    viewerEnableModel.manual = true;\r\n    viewerEnableModel.download = !this.isEditable;\r\n\r\n    // ★Stitch V1.3対応\r\n    // NgRxのReducerでViewerEnableModelに書き込む\r\n    this.store.dispatch(new SetViewerEnableModel(viewerEnableModel));\r\n\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    /**\r\n     * D&Dエリアの制御\r\n     */\r\n    const iframe: IFrameComponent = sectionListView.iframe;\r\n    const oldUrl: string | null = iframe.source;\r\n    const newUrl: string = this.locator.getJspUrl();\r\n    if (oldUrl !== newUrl) {\r\n      iframe.source = newUrl;\r\n    }\r\n  }\r\n\r\n  private getPdfView(): PdfViewComponent {\r\n    const pdfView = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (pdfView == null) {\r\n      throw new ApplicationError('Failed to retrieve pdfView.');\r\n    }\r\n    return pdfView;\r\n  }\r\n\r\n  /**\r\n   * セクション前への移動が可能か\r\n   */\r\n  private enableMoveForward(): boolean {\r\n    const selectedItem: SectionVO = this.getList().selectedItem as SectionVO;\r\n\r\n    if (selectedItem == null) {\r\n      return false;\r\n    } else if (this.runningApp) {\r\n      return false;\r\n      // ★Stitch V1.3対応\r\n      // sectionNoはObjectからnumber型に変更されているため、チェック対象の1も文字列から数値に変更\r\n    } else if (selectedItem.sectionNo === 1) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * セクション後ろへの移動が可能か\r\n   */\r\n  private enableMoveBackward(): boolean {\r\n    const selectedItem: SectionVO = this.getList().selectedItem as SectionVO;\r\n\r\n    if (selectedItem == null) {\r\n      return false;\r\n    } else if (this.runningApp) {\r\n      return false;\r\n    }\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.locator.sectionList == null) {\r\n      throw new ApplicationError('sectionList is null.');\r\n    }\r\n    const listLength: number = this.locator.sectionList.length;\r\n    // ★Stitch V1.3対応\r\n    // listLengthを文字列に変換をしていたが、型チェックをすると必ずfalseになるため、toString()を削除\r\n    if (selectedItem.sectionNo === listLength) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  private hasTag(): boolean {\r\n    const selectedItem: SectionVO = this.getList().selectedItem as SectionVO;\r\n\r\n    if (selectedItem == null) {\r\n      return false;\r\n    }\r\n\r\n    return selectedItem.tag != null;\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { Param } from '../../../../core/models/param';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\n\r\nimport { DragEvent } from '../../../../shared/event/drag-event';\r\n\r\nimport { MoveSectionCommand } from './move-section-command';\r\n\r\n/**\r\n * セクションのD&Dでの移動を行ないます。\r\n */\r\nexport class SectionDragDropCommand extends MoveSectionCommand {\r\n  /**\r\n   * ドラッグしたセクションの情報とドラッグ先の情報を取得します。\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    const dragEvent: DragEvent = this.event as DragEvent;\r\n    // ●TODO: [task 1098] サムネイル一覧\r\n    // listObjの中身(TileBaseの実態)が定まったら対応する\r\n    // TileBaseはListBaseを継承したmxコンポーネント。\r\n    // const listObj: TileBase = this.event.currentTarget as TileBase;\r\n\r\n    // if (dragEvent == null || listObj == null) {\r\n    //   param.cancel = true;\r\n    //   return;\r\n    // }\r\n\r\n    // // Dragしているアイテムの取得\r\n    // if (dragEvent.dragSource.hasFormat('items')) {\r\n    //   const moveSections: any[] = dragEvent.dragSource.dataForFormat('items') as any[];\r\n    //   this.moveSection = moveSections[0] as SectionVO;\r\n    // } else {\r\n    //   param.cancel = true;\r\n    //   return;\r\n    // }\r\n\r\n    // // 移動先の取得\r\n    // const dropIndex: number = listObj.calculateDropIndex(dragEvent);\r\n\r\n    // const data: any[] = listObj.dataProvider as any[];\r\n    // let itemRenderer: IListItemRenderer;\r\n    // if (data && data.length === dropIndex) {\r\n    //   itemRenderer = null;\r\n    // } else {\r\n    //   itemRenderer = listObj.indexToItemRenderer(dropIndex);\r\n    // }\r\n\r\n    // // 最後に追加する場合\r\n    // let targetObj: SectionVO | null;\r\n    // if (itemRenderer == null) {\r\n    //   targetObj = null;\r\n    // } else {\r\n    //   targetObj = itemRenderer.data as SectionVO;\r\n    // }\r\n\r\n    // this.currentDocument = this.locator.currentDocument;\r\n\r\n    // if (targetObj == null) {\r\n    //   param.cancel = true;\r\n    //   return;\r\n    // }\r\n\r\n    // this.assignIndex = this.getMoveSectionNo(targetObj, this.moveSection.sectionNo as number);\r\n\r\n    // if (!this.checkMoveEnable(this.moveSection.sectionNo as number, this.assignIndex)) {\r\n    //   param.cancel = true;\r\n    // } else {\r\n    //   this.doCommand();\r\n    // }\r\n\r\n    param.isAsync = true;\r\n  }\r\n\r\n  /**\r\n   * 画面の更新を行います。\r\n   * 次のSectionVOがあったら続行し、なかったら処理を終了します。\r\n   * メッセージエリアにセクションを移動した旨のメッセージを表示させます。\r\n   *\r\n   * @inheritDoc\r\n   */\r\n  succeed(event: any) {\r\n    super.succeed(event);\r\n  }\r\n\r\n  /**\r\n   * 移動先のセクションNoを取得します。\r\n   *\r\n   * @param targetObj 移動先のアイテム\r\n   * @param moveNo 移動するアイテムのセクション番号\r\n   * @return 移動先のセクション番号\r\n   *\r\n   */\r\n  private getMoveSectionNo(targetObj: SectionVO, moveNo: number): number {\r\n    let targetIndex: number;\r\n    let targetNo: number;\r\n\r\n    if (targetObj == null) {\r\n      // ★Stitch V1.3対応 パラメータnullチェック\r\n      if (this.locator.sectionList == null) {\r\n        throw new ApplicationError('locator.sectionList is null.');\r\n      }\r\n      targetIndex = this.locator.sectionList.length - 1;\r\n      return targetIndex;\r\n    } else {\r\n      targetNo = targetObj.sectionNo as number;\r\n    }\r\n\r\n    if (moveNo < targetNo) {\r\n      targetIndex = targetNo - 1;\r\n    } else {\r\n      targetIndex = targetNo;\r\n    }\r\n\r\n    return targetIndex;\r\n  }\r\n\r\n  /**\r\n   *  移動先が現在と同じ場所であるかどうかをチェックします。\r\n   * true:移動可、false:移動不可（移動先が現在の場所と同じ）\r\n   *\r\n   * @param sectionNo 移動するセクション番号\r\n   * @param index 移動先の番号\r\n   * @return trueの場合は同じ、falseの場合は異なる\r\n   *\r\n   */\r\n  private checkMoveEnable(sectionNo: number, index: number): boolean {\r\n    if (sectionNo === index) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../../core/application-error';\r\nimport { AbstractSys0Command } from '../../../../core/commands/abstract-sys0-command';\r\nimport { ShowPdfEvent } from '../../../../core/event/show-pdf-event';\r\nimport { BaseModelLocator } from '../../../../core/locator/base-model-locator';\r\nimport { Param } from '../../../../core/models/param';\r\nimport * as CoreAction from '../../../../core/store/core.actions';\r\nimport * as CoreSelector from '../../../../core/store/core.selectors';\r\nimport { StoreUtil } from '../../../../core/utils/store-util';\r\nimport { SectionVO } from '../../../../core/vo/section-vo';\r\nimport { Sys0ThumbnailListComponent } from '../../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { ListBase } from '../../../../shared/components/list-base';\r\nimport { ListEvent } from '../../../../shared/event/list-event';\r\nimport { Sys0ListEventReason } from '../../../../shared/event/sys0-list-event-reason';\r\nimport { SharedCommand } from '../../../../shared/store/shared.actions';\r\nimport { PdfViewComponent } from '../../../../viewer/containers/pdf/pdf-view.component';\r\nimport { SectionViewComponent } from '../../../../viewer/containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../../../viewer/models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../../../viewer/services/viewer-model-locator.service';\r\n\r\n/**\r\n * セクションのアイテムクリックイベントの処理を行ないます。\r\n *\r\n */\r\nexport class SectionItemClickCommand extends AbstractSys0Command {\r\n  private locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * itemClickのイベントオブジェクトです。\r\n   */\r\n  private listEvent: ListEvent | null = null;\r\n\r\n  /**\r\n   * 選択されたセクションです。\r\n   */\r\n  private sectionVO: SectionVO | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  check(param: Param) {\r\n    this.logger.info('itemClick Start!!');\r\n\r\n    let focusInTextInput = false;\r\n\r\n    this.listEvent = this.event as ListEvent;\r\n\r\n    if (this.event.currentTarget instanceof Sys0ThumbnailListComponent) {\r\n      const thumbList: Sys0ThumbnailListComponent = this.event.currentTarget as Sys0ThumbnailListComponent;\r\n\r\n      focusInTextInput = thumbList.focusToTextInput;\r\n    }\r\n\r\n    this.sectionVO = null; // 初期化\r\n    if (focusInTextInput) {\r\n      this.logger.info('focusInTextInput != null ');\r\n      param.cancel = true;\r\n    } else {\r\n      // ★Stitch V1.3対応\r\n      // 複数コンポートネントの型が入るため、any型に指定\r\n      const itemRenderer: any = this.listEvent.itemRenderer;\r\n\r\n      if (this.listEvent.reason === Sys0ListEventReason.ITEM_RIGHT_CLICK) {\r\n        if (itemRenderer) {\r\n          this.sectionVO = itemRenderer.data as SectionVO;\r\n        }\r\n      }\r\n\r\n      const sectionView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (sectionView == null) {\r\n        throw new ApplicationError('Failed to retrieve sectionView.');\r\n      }\r\n      if (this.sectionVO == null) {\r\n        const list: ListBase = sectionView.thumbnailList;\r\n        this.sectionVO = list.selectedItem as SectionVO;\r\n      }\r\n    }\r\n\r\n    this.locator.rightClick = this.listEvent.reason === Sys0ListEventReason.ITEM_RIGHT_CLICK;\r\n\r\n    if (this.sectionVO == null) {\r\n      const pdfView = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent | undefined;\r\n      // ★Stitch V1.3対応\r\n      // nullでないことを保証した上で動作する\r\n      if (pdfView == null) {\r\n        throw new ApplicationError('Failed to retrieve pdfView.');\r\n      }\r\n\r\n      pdfView.iframe.source = null;\r\n      pdfView.offIFrame(true);\r\n      pdfView.message = '';\r\n\r\n      param.cancel = true;\r\n    }\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    // セクション数を反映させる\r\n    sectionListView.executeBindings();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  protected doCommand() {\r\n    const pdfView = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent;\r\n    // ★Stitch V1.3対応 パラメータnullチェック\r\n    if (this.listEvent == null) {\r\n      throw new ApplicationError('listEvent is null.');\r\n    }\r\n    // ビューアー表示\r\n    if (\r\n      (this.locator.showPdf === BaseModelLocator.PDF_SHOW && this.listEvent.reason !== Sys0ListEventReason.ITEM_RIGHT_CLICK) ||\r\n      this.sectionVO == null\r\n    ) {\r\n      // 初回は表示しない\r\n\r\n      this.logger.info('doCommand() >> pdf表示へイベント発行');\r\n\r\n      // ★Stitch V1.3対応 パラメータnullチェック\r\n      if (this.sectionVO == null) {\r\n        throw new ApplicationError('sectionVO is null.');\r\n      }\r\n      const showPdfEvent: ShowPdfEvent = new ShowPdfEvent(this.sectionVO);\r\n\r\n      // ★Stitch V1.3対応 dispatchEvent対応　非同期型（アプリ独自定義Event）\r\n      // pdfView.dispatchEvent(showPdfEvent);\r\n      const action = StoreUtil.makeAction(SharedCommand.ShowPdf, pdfView, showPdfEvent);\r\n      this.store.dispatch(action);\r\n    } else {\r\n      const saveMode: number = this.locator.showPdf;\r\n\r\n      const isPreLoading = this.stateUtilService.getCurrentState(CoreSelector.getApplicationInitializationPreLoading);\r\n      if (isPreLoading) {\r\n        // 進捗中を消す\r\n        // PreLoaderを削除\r\n        this.store.dispatch(new CoreAction.HideInitializationPreLoader());\r\n      }\r\n      if (this.sectionVO.enablePDF) {\r\n        this.logger.info('PDFを自動表示しない。 showPdf = ' + saveMode.toString() + ' reason = ' + this.listEvent.reason);\r\n        // 一時的に表示しないモードへ\r\n        this.locator.showPdf = BaseModelLocator.PDF_HIDE;\r\n        if (this.listEvent.reason === Sys0ListEventReason.ITEM_RIGHT_CLICK) {\r\n          pdfView.iframe.source = null;\r\n        }\r\n        pdfView.offIFrame(false);\r\n        this.locator.showPdf = saveMode;\r\n      } else {\r\n        this.logger.info('enablePDF=false なので、PDFを表示しない。');\r\n        pdfView.iframe.source = null;\r\n        pdfView.offIFrame(true);\r\n        pdfView.message = this.wording.get('warn.pdf.datanonexist');\r\n      }\r\n    }\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { ApplicationError } from '../../../core/application-error';\r\n\r\nimport { AbstractSys0Command } from '../../../core/commands/abstract-sys0-command';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { SectionViewComponent } from '../../containers/section/section-view.component';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { ViewerCommand } from '../../store/viewer.actions';\r\n\r\n/**\r\n * ファイルアップロード開始/終了時の処理を行ないます。\r\n *\r\n */\r\nexport class UploadCommand extends AbstractSys0Command {\r\n  private locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * D&Dスタート時の処理を行ないます。\r\n   * アップロードできる状態かどうかをチェックします。\r\n   * アップロードできない状況の場合は、0を返します。\r\n   *\r\n   * アップロード可能な場合には、進捗中ダイアログを表示します。\r\n   *\r\n   * @param sessionID セッションIDです。\r\n   * @param fileCount D&amp;Dされたファイルの数です。\r\n   * @return 1: D&D OK 0: D&D 不可\r\n   *\r\n   */\r\n  uploadStart(sessionID: string, fileCount: number): number {\r\n    // 更新モードじゃない場合(はD&Dできないはずだが・・・)\r\n    if (this.locator.currentMode !== BaseModelLocator.MODE_EDITABLE) {\r\n      return 0;\r\n    }\r\n\r\n    // 準備中プログレスを表示する\r\n    this.progress.addCommand(null, false, 0, '', '', this.wording.get('info.progress.preparing'), null, 0, true);\r\n\r\n    // ModelLocatorの初期化\r\n\r\n    // アップロード中\r\n    this.locator.uploading = true;\r\n    // アップロード済みファイルの数\r\n    this.locator.createdSectionCount = 0;\r\n    // D&Dされたファイルの数\r\n    this.locator.uploadSectionCount = fileCount;\r\n\r\n    // DnD OK\r\n    return 1;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * セクションの登録用に、VOを生成します。\r\n   * セクション登録用のCommandクラスを取得して、処理を委譲します。\r\n   * (メニューからのセクション登録と同じ処理をする為)\r\n   */\r\n  protected doCommand() {\r\n    // プログレスを解除する\r\n    this.progress.removeCommand(null);\r\n\r\n    // 処理を委譲する\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent | undefined;\r\n    // ★Stitch V1.3対応\r\n    // nullでないことを保証した上で動作する\r\n    if (sectionListView == null) {\r\n      throw new ApplicationError('Failed to retrieve sectionListView.');\r\n    }\r\n    const command = this.commandProvider.getCommand(sectionListView, ViewerCommand.ViewerActionTypes.InsertSection);\r\n    command.execCommand();\r\n\r\n    this.terminate();\r\n  }\r\n}\r\n","import { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { ImageEditCommand } from '../../shared/commands/image-edit-command';\r\n\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\nexport class ViewerImageEditCommand extends ImageEditCommand {\r\n  protected get locator(): BaseModelLocator {\r\n    return ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  protected cancel() {\r\n    const viewerlocator: ViewerModelLocator = this.locator as ViewerModelLocator;\r\n\r\n    viewerlocator.removeApp(this.autoEditEvent.sectionNo.toString());\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n\r\n    // ★Stitch V1.3 dispatch対応\r\n    sectionListView.thumbnailList.onChange();\r\n    // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n  }\r\n}\r\n","import { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { UnknownFileExtCommand } from '../../shared/commands/unknown-file-ext-command';\r\n\r\nimport { SectionViewComponent } from '../containers/section/section-view.component';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../services/viewer-model-locator.service';\r\n\r\n/**\r\n * 関連付けされていないファイルを開こうとした。\r\n *\r\n */\r\nexport class ViewerUnknownFileExtCommand extends UnknownFileExtCommand {\r\n  protected get locator(): BaseModelLocator {\r\n    return ViewerModelLocatorService.getInstance();\r\n  }\r\n\r\n  protected cancel() {\r\n    const viewerlocator: ViewerModelLocator = this.locator as ViewerModelLocator;\r\n\r\n    viewerlocator.removeApp(this.autoEditEvent.sectionNo.toString());\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    // ★Stitch V1.3 dispatch対応\r\n    sectionListView.thumbnailList.onChange();\r\n    // Viewer(root).sectionListView.thumbnailList.dispatchEvent(new ListEvent(ListEvent.CHANGE));\r\n  }\r\n}\r\n","import { ActionToCommand } from '../../../../core/services/action-to-command';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ApprovedEditCommmentDialogOkCancelCommand } from '../../../../shared/commands/dialog/approved-edit-commment-dialog-ok-cancel-command';\r\nimport { SharedCommand } from '../../../../shared/store/shared.actions';\r\nimport { ConfirmUpdateChangeActionCommand } from '../../../commands/dialog/confirm-update-change-action-command';\r\n\r\nexport const confirmUpdateCommandMap: ActionToCommand[] = [\r\n  {action: SharedCommand.SharedActionTypes.ChangeAction, command: ConfirmUpdateChangeActionCommand},\r\n  // 承認後編集コメント登録\r\n  {action: SharedCommand.SharedActionTypes.ApprovedEditCommentOkCancel, command: ApprovedEditCommmentDialogOkCancelCommand}\r\n];\r\n","module.exports = \"<app-base-dialog-view\\r\\n  [self]=\\\"this\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [title]=\\\"dialogTitle\\\"\\r\\n  (clickOk)=\\\"onClickOk($event)\\\"\\r\\n  (clickCancel)=\\\"onClickCancel($event)\\\"\\r\\n  [defaultButton]=\\\"buttonOk\\\"\\r\\n>\\r\\n  <app-confirm-update-view\\r\\n    #confirm\\r\\n    [currentState]=\\\"confirmUpdateState\\\"\\r\\n    [commentTextHeight]=\\\"80\\\"\\r\\n    (changeAction)=\\\"changeAction($event)\\\"\\r\\n    class=\\\"popupPanelContent\\\"\\r\\n  >\\r\\n  </app-confirm-update-view>\\r\\n\\r\\n  <!-- ボタン -->\\r\\n  <div class=\\\"ui-dialog-footer\\\">\\r\\n    <p-footer class=\\\"button-area\\\">\\r\\n      <!-- OKボタン -->\\r\\n      <button type=\\\"button\\\" #buttonOk pButton class=\\\"button-ok\\\" [label]=\\\"buttonOkLabel\\\"\\r\\n              (click)=\\\"clickOkButton($event)\\\"></button>\\r\\n      <!-- cancel ボタン-->\\r\\n      <button type=\\\"button\\\" #buttonClose pButton class=\\\"button-cancel\\\" [label]=\\\"buttonCloseLabel\\\"\\r\\n              (click)=\\\"clickCancelButton($event)\\\"></button>\\r\\n    </p-footer>\\r\\n  </div>\\r\\n</app-base-dialog-view>\\r\\n\"","module.exports = \"@charset \\\"UTF-8\\\";\\n/* パネルコンテンツ */\\n.popupPanelContent {\\n  padding: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvZGlhbG9ncy9jb25maXJtLXVwZGF0ZS1kaWFsb2cvY29uZmlybS11cGRhdGUtZGlhbG9nLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC92aWV3ZXIvY29udGFpbmVycy9kaWFsb2dzL2NvbmZpcm0tdXBkYXRlLWRpYWxvZy9DOlxcVXNlcnNcXGcxMDAxNjg1MVxcRG9jdW1lbnRzXFxhbmd1bGFyLXdvcmtzcGFjZVxcc21hLW5hdmlcXGFuZ3VsYXJcXHJzbi9zcmNcXGFwcFxcdmlld2VyXFxjb250YWluZXJzXFxkaWFsb2dzXFxjb25maXJtLXVwZGF0ZS1kaWFsb2dcXGNvbmZpcm0tdXBkYXRlLWRpYWxvZy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUNBaEIsYUFBQTtBQUNBO0VBQ0UsYUFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvZGlhbG9ncy9jb25maXJtLXVwZGF0ZS1kaWFsb2cvY29uZmlybS11cGRhdGUtZGlhbG9nLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGNoYXJzZXQgXCJVVEYtOFwiO1xuLyog44OR44ON44Or44Kz44Oz44OG44Oz44OEICovXG4ucG9wdXBQYW5lbENvbnRlbnQge1xuICBwYWRkaW5nOiAxMHB4OyB9XG4iLCIvKiDjg5Hjg43jg6vjgrPjg7Pjg4bjg7Pjg4QgKi9cclxuLnBvcHVwUGFuZWxDb250ZW50IHtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { ISupportCommandMap } from '../../../../core/commands/i-support-command-map';\r\nimport { ConfirmUpdateEvent } from '../../../../core/event/confirm-update-event';\r\nimport { DialogInterface } from '../../../../core/models/dialog-interface';\r\nimport { ActionToCommand } from '../../../../core/services/action-to-command';\r\nimport { ControllerService } from '../../../../core/services/controller.service';\r\nimport { StateUtilService } from '../../../../core/services/state-util.service';\r\nimport { WordingService } from '../../../../core/services/wording.service';\r\nimport { RsnEventManager } from '../../../../core/utils/rsn-event-manager';\r\nimport { BaseDialogViewComponent } from '../../../../shared/components/base-dialog-view/base-dialog-view.component';\r\nimport { ConfirmUpdateViewComponent } from '../../../../shared/components/confirm-update-view/confirm-update-view.component';\r\nimport { SharedCommand } from '../../../../shared/store/shared.actions';\r\n\r\n@Component({\r\n  selector: 'app-confirm-update-dialog',\r\n  templateUrl: './confirm-update-dialog.component.html',\r\n  styleUrls: ['./confirm-update-dialog.component.scss']\r\n})\r\nexport class ConfirmUpdateDialogComponent extends BaseDialogViewComponent implements OnInit, ISupportCommandMap, DialogInterface {\r\n  static isShowDialog: any;\r\n  @ViewChild(BaseDialogViewComponent) baseDialogView: BaseDialogViewComponent;\r\n\r\n  rsnManager = new RsnEventManager();\r\n\r\n  /**\r\n   * OKボタン\r\n   */\r\n  buttonOkLabel = this.wording.get('lbl.common.ok');\r\n\r\n  /**\r\n   * キャンセルボタン\r\n   */\r\n  buttonCloseLabel = this.wording.get('lbl.common.cancel');\r\n\r\n  @ViewChild('confirm') confirm: ConfirmUpdateViewComponent;\r\n  // コマンドマップ\r\n  commandMapDef: ActionToCommand[] = [];\r\n  dialogTitle = this.wording.get('lbl.updateconfirm.title');\r\n  confirmUpdateState: string = ConfirmUpdateViewComponent.STATE_VERSION_UP;\r\n\r\n  constructor(\r\n    protected wording: WordingService,\r\n    protected controllerService: ControllerService,\r\n    protected stateUtilService: StateUtilService) {\r\n    super(controllerService, stateUtilService);\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  /**\r\n   * ★Stitch V1.3対応 addEventListerner\r\n   */\r\n  addEventListener(key: string, func: Function) {\r\n    this.rsnEventManager.addEventListener(key, func);\r\n  }\r\n\r\n  onClickOk(event) {\r\n    this.rsnEventManager.execute(BaseDialogViewComponent.CLICK_OK_EVENT, event);\r\n  }\r\n\r\n  onClickCancel(event) {\r\n    this.rsnEventManager.execute(BaseDialogViewComponent.CLICK_CANCEL_EVENT, event);\r\n  }\r\n\r\n  changeAction($event: ConfirmUpdateEvent) {\r\n    this.controllerService.execCommand(this, SharedCommand.SharedActionTypes.ChangeAction, $event);\r\n  }\r\n}\r\n","/**\r\n * 更新方法の確認画面です。\r\n *\r\n */\r\nimport { ComponentRef } from '@angular/core';\r\n\r\nimport { DialogInterface } from '../../../core/models/dialog-interface';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { PopupService } from '../../../core/services/popup.service';\r\nimport { StateUtilService } from '../../../core/services/state-util.service';\r\nimport { WordingService } from '../../../core/services/wording.service';\r\nimport { Sys0CommonUtil } from '../../../core/utils/sys0-common-util';\r\nimport { BaseDialogViewComponent } from '../../../shared/components/base-dialog-view/base-dialog-view.component';\r\n\r\nimport { ConfirmUpdateDialogComponent } from './confirm-update-dialog/confirm-update-dialog.component';\r\n\r\nexport class ConfirmUpdate {\r\n  _isShowDialog = false;\r\n  dialog: ComponentRef<ConfirmUpdateDialogComponent> | null;\r\n\r\n  static show(item: any, closeHandler: Function, parent: any | null = null): any {\r\n  }\r\n\r\n  /**\r\n   * ダイアログを閉じます。\r\n   */\r\n  static hide() {\r\n  }\r\n\r\n  constructor(\r\n    protected  wording: WordingService,\r\n    protected controllerService: ControllerService,\r\n    protected stateUtilService: StateUtilService,\r\n    protected popup: PopupService<DialogInterface>\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * ダイアログを表示します。\r\n   *\r\n   * @param item 表示するアイテム\r\n   * @param closeHandler 閉じられるときのイベントハンドラーを指定します。\r\n   * @param parent ダイアログの親をしていします。\r\n   * @return 表示されたダイアログです。\r\n   *\r\n   */\r\n  public createDialog(item: any, closeHandler: Function, parent: any | null = null): any {\r\n    this.dialog = this.popup.createComponentInstance(ConfirmUpdateDialogComponent) as ComponentRef<ConfirmUpdateDialogComponent>;\r\n\r\n    this._isShowDialog = true;\r\n    this.popup.addPopUp(this.dialog);\r\n\r\n    this.dialog.instance.confirm.item = item;\r\n    if (closeHandler != null) {\r\n      // tslint:disable-next-line:max-line-length\r\n      this.dialog.instance.addEventListener(BaseDialogViewComponent.CLICK_OK_EVENT, closeHandler);\r\n      this.dialog.instance.addEventListener(BaseDialogViewComponent.CLICK_CANCEL_EVENT, closeHandler);\r\n    }\r\n    // ★Stitch V1.3対応 popup.centerPopUpは存在しないので処理削除\r\n    // Sys0Application.application.popupManager.centerPopUp(this.dialog);\r\n\r\n    // ★Stitch V1.3対応 コメントアウト\r\n    // フォーカスをSWFに戻す\r\n    // Sys0Application.application.setFocusSwf();\r\n\r\n    Sys0CommonUtil.setFocusToFirstItem(this.dialog.instance);\r\n\r\n    return this.dialog.instance;\r\n  }\r\n\r\n  public closeDialog(dialog) {\r\n    if (dialog) {\r\n      this._isShowDialog = false;\r\n      this.popup.removePopUp(dialog);\r\n      this.dialog = null;\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","import { ActionToCommand } from '../../../../core/services/action-to-command';\r\nimport { SharedCommand } from '../../../../shared/store/shared.actions';\r\nimport { DivideSectionDialogCreationCompleteCommand } from '../../../commands/dialog/divide-section-dialog-creation-complete-command';\r\nimport { DivideSectionOkCancelCommand } from '../../../commands/dialog/divide-section-ok-cancel-command';\r\n\r\nexport const divideSectionDialogCommandMap: ActionToCommand[] = [\r\n  // OK/キャンセル ボタンクリック\r\n  { action: SharedCommand.SharedActionTypes.ClickOkCancel, command: DivideSectionOkCancelCommand },\r\n\r\n  // creationComplete\r\n  { action: SharedCommand.SharedActionTypes.CreationComplete, command: DivideSectionDialogCreationCompleteCommand }\r\n];\r\n","module.exports = \"<app-base-dialog-view\\r\\n  [self]=\\\"this\\\"\\r\\n  [width]=\\\"450\\\"\\r\\n  [title]=\\\"title\\\"\\r\\n  (clickOk)=\\\"onClickOk($event)\\\"\\r\\n  (clickCancel)=\\\"onClickCancel($event)\\\"\\r\\n  [defaultButton]=\\\"okButton\\\"\\r\\n>\\r\\n  <div class=\\\"current-version\\\">{{ currentVersionLabel }}</div>\\r\\n  <app-sys0-form class=\\\"form-bind\\\" [validatorCreationEnabled]=\\\"formBindValidatorEnabled\\\" #formBind>\\r\\n    <app-sys0-form-item\\r\\n      [label]=\\\"newDocName\\\"\\r\\n      [labelWidth]=\\\"105\\\"\\r\\n      [validationType]=\\\"prohibition\\\"\\r\\n      [validatorError]=\\\"docnameprohibit\\\"\\r\\n      [requiredError]=\\\"documentnamerequired\\\"\\r\\n      required=\\\"true\\\"\\r\\n    >\\r\\n      <input type=\\\"text\\\" pInputText [(ngModel)]=\\\"inputNewName\\\" id=\\\"newName\\\" maxlength=\\\"120\\\" class=\\\"new-name\\\" />\\r\\n    </app-sys0-form-item>\\r\\n    <app-sys0-form-item [label]=\\\"newDocContent\\\" [labelWidth]=\\\"105\\\">\\r\\n      <p-radioButton name=\\\"divide\\\" value=\\\"0\\\" [label]=\\\"beforeLabel\\\" [disabled]=\\\"!beforeEnabled\\\" [(ngModel)]=\\\"selectedValue\\\"></p-radioButton>\\r\\n      <br />\\r\\n      <p-radioButton name=\\\"divide\\\" value=\\\"1\\\" [label]=\\\"afterLabel\\\" [disabled]=\\\"!afterEnabled\\\" [(ngModel)]=\\\"selectedValue\\\"></p-radioButton>\\r\\n    </app-sys0-form-item>\\r\\n  </app-sys0-form>\\r\\n  <!-- ボタン -->\\r\\n  <div class=\\\"ui-dialog-footer\\\">\\r\\n    <p-footer #buttonArea>\\r\\n      <button #okButton type=\\\"button\\\" pButton class=\\\"ok-button\\\" [label]=\\\"okLabel\\\" (click)=\\\"clickOkButton($event)\\\"></button>\\r\\n      <button type=\\\"button\\\" pButton class=\\\"cancel-button\\\" [label]=\\\"cancelLabel\\\" (click)=\\\"clickCancelButton($event)\\\"></button>\\r\\n    </p-footer>\\r\\n  </div>\\r\\n</app-base-dialog-view>\\r\\n\"","module.exports = \".current-version {\\n  height: 48px;\\n  padding-top: 8px;\\n  padding-bottom: 8px;\\n  text-align: center;\\n  border-style: solid;\\n  border-color: #cccccc;\\n  margin-bottom: 10px;\\n  font-weight: bold;\\n  border-width: 1px; }\\n\\n.new-name {\\n  width: 100%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvZGlhbG9ncy9kaXZpZGUtc2VjdGlvbi1kaWFsb2cvQzpcXFVzZXJzXFxnMTAwMTY4NTFcXERvY3VtZW50c1xcYW5ndWxhci13b3Jrc3BhY2VcXHNtYS1uYXZpXFxhbmd1bGFyXFxyc24vc3JjXFxhcHBcXHZpZXdlclxcY29udGFpbmVyc1xcZGlhbG9nc1xcZGl2aWRlLXNlY3Rpb24tZGlhbG9nXFxkaXZpZGUtc2VjdGlvbi1kaWFsb2cuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLHFCQUFxQjtFQUNyQixtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLGlCQUFpQixFQUFBOztBQUVuQjtFQUNFLFdBQVcsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3ZpZXdlci9jb250YWluZXJzL2RpYWxvZ3MvZGl2aWRlLXNlY3Rpb24tZGlhbG9nL2RpdmlkZS1zZWN0aW9uLWRpYWxvZy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jdXJyZW50LXZlcnNpb24ge1xyXG4gIGhlaWdodDogNDhweDtcclxuICBwYWRkaW5nLXRvcDogOHB4O1xyXG4gIHBhZGRpbmctYm90dG9tOiA4cHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgYm9yZGVyLWNvbG9yOiAjY2NjY2NjO1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbn1cclxuLm5ldy1uYW1lIHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG4iXX0= */\"","import { AfterViewChecked, AfterViewInit, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ControllerService } from '../../../../core/services/controller.service';\r\nimport { StateUtilService } from '../../../../core/services/state-util.service';\r\nimport { WordingService } from '../../../../core/services/wording.service';\r\nimport { BaseDialogViewComponent } from '../../../../shared/components/base-dialog-view/base-dialog-view.component';\r\nimport { Sys0FormComponent } from '../../../../shared/containers/sys0-form/sys0-form.component';\r\nimport { SharedCommand } from '../../../../shared/store/shared.actions';\r\nimport { SharedState } from '../../../../shared/store/shared.state';\r\nimport { Sys0ValidationType } from '../../../../shared/validators/sys0-validation-type';\r\n/**\r\n * セクション分割ダイアログ\r\n */\r\n@Component({\r\n  selector: 'app-divide-section-dialog',\r\n  templateUrl: './divide-section-dialog.component.html',\r\n  styleUrls: ['./divide-section-dialog.component.scss']\r\n})\r\nexport class DivideSectionDialogComponent extends BaseDialogViewComponent implements OnInit, AfterViewInit, AfterViewChecked {\r\n  /**\r\n   * ラベル群\r\n   */\r\n  currentVersionLabel: string;\r\n  newDocName: string;\r\n  newDocContent: string;\r\n  prohibition: string;\r\n  docnameprohibit: string;\r\n  documentnamerequired: string;\r\n  okLabel: string;\r\n  cancelLabel: string;\r\n\r\n  /**\r\n   * 項目\r\n   */\r\n  inputNewName: string;\r\n  selectedValue = 0;\r\n  formBindValidatorEnabled = true;\r\n\r\n  /**\r\n   * ラジオボタン情報\r\n   * ダイアログを起動させる側から設定する\r\n   */\r\n  beforeLabel = '';\r\n  afterLabel = '';\r\n  beforeEnabled = true;\r\n  afterEnabled = true;\r\n\r\n  @ViewChild(BaseDialogViewComponent) baseDialogView: BaseDialogViewComponent;\r\n\r\n  @ViewChild(Sys0FormComponent) formBind: Sys0FormComponent;\r\n\r\n  constructor(\r\n    protected controllerService: ControllerService,\r\n    protected stateUtilService: StateUtilService,\r\n    protected wording: WordingService,\r\n    private store: Store<SharedState>\r\n  ) {\r\n    super(controllerService, stateUtilService);\r\n    this.title = this.wording.get('lbl.dividesection.title');\r\n\r\n    const currentVersionLabel = this.wording.get('lbl.dividesection.navigate');\r\n    this.currentVersionLabel = currentVersionLabel;\r\n\r\n    this.newDocName = this.wording.get('lbl.dividesection.newdocname');\r\n    this.newDocContent = this.wording.get('lbl.dividesection.newdoccontent');\r\n    this.prohibition = Sys0ValidationType.ERROR_PROHIBITION;\r\n    this.docnameprohibit = this.wording.get('warn.tooltip.docnameprohibit');\r\n    this.documentnamerequired = this.wording.get('warn.tooltip.documentnamerequired');\r\n    this.okLabel = this.wording.get('lbl.common.ok');\r\n    this.cancelLabel = this.wording.get('lbl.common.cancel');\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    const payload = { event };\r\n    this.store.dispatch(new SharedCommand.CreationComplete(payload, this));\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    // ★Stitch V1.3対応 callLaterの実行\r\n    this.callLaterManager.execute();\r\n  }\r\n\r\n  onClickOk(event) {\r\n    const payload = { event };\r\n    this.store.dispatch(new SharedCommand.ClickOkCancel(payload, this));\r\n  }\r\n  onClickCancel(event) {\r\n    const payload = { event };\r\n    this.store.dispatch(new SharedCommand.ClickOkCancel(payload, this));\r\n  }\r\n}\r\n","import { ActionToCommand } from '../../../../core/services/action-to-command';\r\nimport { MainCommand } from '../../../../main/store/main.actions';\r\nimport { EditConfirmOkCancelCommand } from '../../../commands/dialog/edit-confirm-ok-cancel-command';\r\nimport { ViewerCommand } from '../../../store/viewer.actions';\r\n\r\nexport const editConfirmDialogCommandMap: ActionToCommand[] = [\r\n  // OK、キャンセルボタン\r\n  { action: ViewerCommand.ViewerActionTypes.ClickOkCancel, command: EditConfirmOkCancelCommand }\r\n];\r\n","module.exports = \"<!-- 編集確認ダイアログ -->\\r\\n<app-base-dialog-view\\r\\n  [self]=\\\"this\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"150\\\"\\r\\n  [title]=\\\"title\\\"\\r\\n  (clickOk)=\\\"onClickOkCancel($event)\\\"\\r\\n  (clickCancel)=\\\"onClickOkCancel($event)\\\"\\r\\n>\\r\\n  <div class=\\\"editCurrentVersion\\\">\\r\\n    <label class=\\\"edit-current-version-Label\\\" [innerHTML]=\\\"editCurrentVersionLabel\\\"></label>\\r\\n  </div>\\r\\n  <div class=\\\"editConfirmRadioButton\\\">\\r\\n    <p-radioButton\\r\\n      name=\\\"editConfirm\\\"\\r\\n      [value]=\\\"editupdate\\\"\\r\\n      [label]=\\\"updateoverwrite\\\"\\r\\n      class=\\\"editConfirmOverwrite\\\"\\r\\n      [(ngModel)]=\\\"editConfirmSel\\\"\\r\\n      (onClick)=\\\"changeValue(editupdate)\\\"\\r\\n    >\\r\\n    </p-radioButton>\\r\\n    <br />\\r\\n    <p-radioButton\\r\\n      [hidden]=\\\"!editVisible\\\"\\r\\n      name=\\\"editConfirm\\\"\\r\\n      [value]=\\\"editinsert\\\"\\r\\n      [label]=\\\"insertsection\\\"\\r\\n      class=\\\"editInsertsection\\\"\\r\\n      (onClick)=\\\"changeValue(editinsert)\\\"\\r\\n      [(ngModel)]=\\\"editConfirmSel\\\"\\r\\n    >\\r\\n    </p-radioButton>\\r\\n    <br />\\r\\n    <p-radioButton\\r\\n      name=\\\"editConfirm\\\"\\r\\n      [value]=\\\"editcancel\\\"\\r\\n      [label]=\\\"cancelupdate\\\"\\r\\n      class=\\\"editConfirmCancel\\\"\\r\\n      (onClick)=\\\"changeValue(editcancel)\\\"\\r\\n      [(ngModel)]=\\\"editConfirmSel\\\"\\r\\n    >\\r\\n    </p-radioButton>\\r\\n  </div>\\r\\n\\r\\n  <!-- ボタン -->\\r\\n  <div class=\\\"ui-dialog-footer\\\">\\r\\n    <p-footer class=\\\"button-area\\\">\\r\\n      <!-- OKボタン -->\\r\\n      <button\\r\\n        type=\\\"button\\\"\\r\\n        #buttonOk\\r\\n        pButton\\r\\n        class=\\\"button-ok button-style\\\"\\r\\n        [label]=\\\"buttonOkLabel\\\"\\r\\n        (click)=\\\"clickOkButton($event)\\\"\\r\\n      ></button>\\r\\n    </p-footer>\\r\\n  </div>\\r\\n</app-base-dialog-view>\\r\\n\"","module.exports = \".button-style {\\n  margin: 8px 10px 15px 30px;\\n  float: right;\\n  width: 70px; }\\n\\n.button-area {\\n  width: 100%;\\n  height: 48px; }\\n\\n.editCurrentVersion {\\n  border-style: solid;\\n  border-width: 1px;\\n  border-color: #cccccc;\\n  font-weight: bold;\\n  text-align: center;\\n  line-height: 20px;\\n  height: 40px; }\\n\\n.edit-current-version-Label {\\n  margin-top: 5px;\\n  margin-bottom: 5px; }\\n\\n.editConfirmRadioButton {\\n  padding-top: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvZGlhbG9ncy9lZGl0LWNvbmZpcm0tZGlhbG9nL0M6XFxVc2Vyc1xcZzEwMDE2ODUxXFxEb2N1bWVudHNcXGFuZ3VsYXItd29ya3NwYWNlXFxzbWEtbmF2aVxcYW5ndWxhclxccnNuL3NyY1xcYXBwXFx2aWV3ZXJcXGNvbnRhaW5lcnNcXGRpYWxvZ3NcXGVkaXQtY29uZmlybS1kaWFsb2dcXGVkaXQtY29uZmlybS1kaWFsb2cuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBMEI7RUFDMUIsWUFBWTtFQUNaLFdBQVcsRUFBQTs7QUFHYjtFQUNFLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBR2Q7RUFDRSxtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLHFCQUFxQjtFQUNyQixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtFQUNqQixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxlQUFlO0VBQ2Ysa0JBQWtCLEVBQUE7O0FBR3BCO0VBQ0UsaUJBQWlCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC92aWV3ZXIvY29udGFpbmVycy9kaWFsb2dzL2VkaXQtY29uZmlybS1kaWFsb2cvZWRpdC1jb25maXJtLWRpYWxvZy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5idXR0b24tc3R5bGUge1xyXG4gIG1hcmdpbjogOHB4IDEwcHggMTVweCAzMHB4O1xyXG4gIGZsb2F0OiByaWdodDtcclxuICB3aWR0aDogNzBweDtcclxufVxyXG5cclxuLmJ1dHRvbi1hcmVhIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDQ4cHg7XHJcbn1cclxuXHJcbi5lZGl0Q3VycmVudFZlcnNpb24ge1xyXG4gIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgYm9yZGVyLWNvbG9yOiAjY2NjY2NjO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBsaW5lLWhlaWdodDogMjBweDtcclxuICBoZWlnaHQ6IDQwcHg7XHJcbn1cclxuXHJcbi5lZGl0LWN1cnJlbnQtdmVyc2lvbi1MYWJlbCB7XHJcbiAgbWFyZ2luLXRvcDogNXB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDVweDtcclxufVxyXG5cclxuLmVkaXRDb25maXJtUmFkaW9CdXR0b24ge1xyXG4gIHBhZGRpbmctdG9wOiAxMHB4O1xyXG59XHJcbiJdfQ== */\"","import { AfterViewInit, ChangeDetectorRef, Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ISupportCommandMap } from '../../../../core/commands/i-support-command-map';\r\nimport { DialogInterface } from '../../../../core/models/dialog-interface';\r\nimport { ControllerService } from '../../../../core/services/controller.service';\r\nimport { StateUtilService } from '../../../../core/services/state-util.service';\r\nimport { WordingService } from '../../../../core/services/wording.service';\r\n\r\nimport { Sys0StringUtil } from '../../../../core/utils/sys0-string-util';\r\nimport { BaseDialogViewComponent } from '../../../../shared/components/base-dialog-view/base-dialog-view.component';\r\nimport { ConfirmUpdateItem } from '../../../../shared/models/confirm-update-item';\r\nimport { ViewerCommand } from '../../../store/viewer.actions';\r\nimport { ViewerState } from '../../../store/viewer.state';\r\n\r\n@Component({\r\n  selector: 'app-edit-confirm-dialog',\r\n  templateUrl: './edit-confirm-dialog.component.html',\r\n  styleUrls: ['./edit-confirm-dialog.component.scss']\r\n})\r\nexport class EditConfirmDialogComponent extends BaseDialogViewComponent\r\n  implements OnInit, AfterViewInit, ISupportCommandMap, DialogInterface {\r\n  static EDIT_UPDATE = 0;\r\n  static EDIT_INSERT = 1;\r\n  static EDIT_CANCEL = 2;\r\n  static STATE_FTS = 'fts';\r\n\r\n  @ViewChild(BaseDialogViewComponent) baseDialogView: BaseDialogViewComponent;\r\n  @ViewChild('buttonOk') buttonOk: ElementRef;\r\n  @ViewChild('buttonCancel') buttonCancel: ElementRef;\r\n  @ViewChild('editConfirmArea') pasteTypeArea: EditConfirmDialogComponent;\r\n\r\n  filename: string;\r\n  docId: string;\r\n  sectionNo: number;\r\n  currentState: any;\r\n  insert: any;\r\n  sectionName = '';\r\n  updateAction: number = ConfirmUpdateItem.UPDATE_OVERWRITE;\r\n\r\n  editupdate = EditConfirmDialogComponent.EDIT_UPDATE;\r\n  editinsert = EditConfirmDialogComponent.EDIT_INSERT;\r\n  editcancel = EditConfirmDialogComponent.EDIT_CANCEL;\r\n  // default\r\n  editConfirmSel = 0;\r\n  /**\r\n   * カレントVersion\r\n   */\r\n  editCurrentVersionLabel = this.wording.get('lbl.appeditconfirm.message').replace('\\n', '<br/>');\r\n\r\n  /**\r\n   * ダイアログのタイトル\r\n   */\r\n  title;\r\n  /**\r\n   * 全文検索場合別セクションとして追加する表示されない\r\n   */\r\n  editVisible = true;\r\n\r\n  /**\r\n   * 編集方のラベル\r\n   */\r\n  updateoverwrite = this.wording.get('lbl.appeditconfirm.updateoverwrite');\r\n\r\n  /**\r\n   * 編集方のラベル\r\n   */\r\n  insertsection = this.wording.get('lbl.appeditconfirm.insertsection');\r\n  /**\r\n   * 編集方のラベル\r\n   */\r\n  cancelupdate = this.wording.get('lbl.appeditconfirm.cancelupdate');\r\n\r\n  /**\r\n   * OKボタン\r\n   */\r\n  buttonOkLabel = this.wording.get('lbl.common.ok');\r\n\r\n  /**\r\n   * コンストラクタ\r\n   * @param wording 用語解決サービス\r\n   * @param store State定義\r\n   * @param controllerService コマンド生成サービス\r\n   * @param stateUtilService 状態管理サービス\r\n   * @param cd\r\n   */\r\n  constructor(\r\n    private wording: WordingService,\r\n    // private viewManager: ViewManagerService,\r\n    private store: Store<ViewerState>,\r\n    protected controllerService: ControllerService,\r\n    protected stateUtilService: StateUtilService,\r\n    private cd: ChangeDetectorRef\r\n  ) {\r\n    super(controllerService, stateUtilService);\r\n  }\r\n\r\n  confirm(confirm: any): any {\r\n    throw new Error('Method not implemented.');\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    // this.viewManager.set(ViewerViewTypes.editConfirmView, this);\r\n    // this.controllerService.addCommandMap(this);\r\n  }\r\n\r\n  showDialog() {\r\n    this.display = true;\r\n  }\r\n\r\n  onClickOkCancel($event: any) {\r\n    const payload = { event };\r\n    this.store.dispatch(new ViewerCommand.ClickOkCancelButton(payload, this));\r\n  }\r\n\r\n  notifyChange() {\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.title = this.wording.get('lbl.appeditconfirm.title') + ' - ' + Sys0StringUtil.truncateToLength(this.sectionName, 24);\r\n  }\r\n\r\n  changeValue(value) {\r\n    this.editConfirmSel = value;\r\n    this.cd.detectChanges();\r\n  }\r\n}\r\n","module.exports = \"<p>\\r\\n  full-text-dialog works!\\r\\n</p>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdlci9jb250YWluZXJzL2RpYWxvZ3MvZnVsbC10ZXh0LWRpYWxvZy9mdWxsLXRleHQtZGlhbG9nLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-full-text-dialog',\r\n  templateUrl: './full-text-dialog.component.html',\r\n  styleUrls: ['./full-text-dialog.component.scss']\r\n})\r\nexport class FullTextDialogComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"<p>\\r\\n  viewer-circulate-dialog works!\\r\\n</p>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdlci9jb250YWluZXJzL2RpYWxvZ3Mvdmlld2VyLWNpcmN1bGF0ZS1kaWFsb2cvdmlld2VyLWNpcmN1bGF0ZS1kaWFsb2cuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-viewer-circulate-dialog',\r\n  templateUrl: './viewer-circulate-dialog.component.html',\r\n  styleUrls: ['./viewer-circulate-dialog.component.scss']\r\n})\r\nexport class ViewerCirculateDialogComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { ActionToCommand } from './../../../core/services/action-to-command';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { StartExportSectionCommand } from '../../commands/start-export-section-command';\r\nimport { PrintCommand } from '../../../main/commands/menu/print-command';\r\n\r\nexport const mainViewCommandMap: ActionToCommand[] = [\r\n  { action: SharedCommand.SharedActionTypes.DownloadObject, command: StartExportSectionCommand },\r\n\r\n  { action: SharedCommand.SharedActionTypes.Print, command: PrintCommand }\r\n];\r\n","module.exports = \"<!-- メインエリアのビュー -->\\r\\n<div class=\\\"mainView\\\">\\r\\n  <!-- MessageAreaView -->\\r\\n  <app-message-area-view #messageArea></app-message-area-view>\\r\\n  <input #fileUpload type=\\\"file\\\" [hidden]=\\\"true\\\" multiple />\\r\\n\\r\\n  <!-- サムネイル一覧とPDFビューアを表示する -->\\r\\n  <div class=\\\"mainPanelDivide\\\">\\r\\n    <as-split unit=\\\"pixel\\\">\\r\\n      <as-split-area size=\\\"208\\\" minSize=\\\"208\\\">\\r\\n        <!-- ThumbnailView -->\\r\\n        <app-thumbnail-view #thumbnailView></app-thumbnail-view>\\r\\n      </as-split-area>\\r\\n      <as-split-area size=\\\"*\\\">\\r\\n        <!-- PdfView -->\\r\\n        <!-- ★Stitch V1.3対応 UIComponentのfocusEnabled属性(タブキー操作)をtabIndexに負の数を設定して対応 -->\\r\\n        <app-pdf-view #pdfView tabIndex=\\\"-1\\\"></app-pdf-view>\\r\\n      </as-split-area>\\r\\n    </as-split>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".mainView {\\n  width: 100%;\\n  height: 100%;\\n  min-width: 352px;\\n  display: flex;\\n  flex-direction: column; }\\n  .mainView app-message-area-view {\\n    width: 100%;\\n    height: 72px;\\n    min-width: 620px; }\\n  .mainView .mainPanelDivide {\\n    width: 100%;\\n    min-width: 280px;\\n    flex-grow: 1; }\\n  app-thumbnail-view {\\n  width: 206px;\\n  height: 100%; }\\n  app-pdf-view {\\n  width: 100%;\\n  height: 100%;\\n  min-width: 620px; }\\n  :host ::ng-deep .as-split-gutter {\\n  background-color: white !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvbWFpbi12aWV3L0M6XFxVc2Vyc1xcZzEwMDE2ODUxXFxEb2N1bWVudHNcXGFuZ3VsYXItd29ya3NwYWNlXFxzbWEtbmF2aVxcYW5ndWxhclxccnNuL3NyY1xcYXBwXFx2aWV3ZXJcXGNvbnRhaW5lcnNcXG1haW4tdmlld1xcbWFpbi12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixnQkFBZ0I7RUFHaEIsYUFBYTtFQUNiLHNCQUFzQixFQUFBO0VBUHhCO0lBVUksV0FBVztJQUNYLFlBYnNCO0lBY3RCLGdCQUFnQixFQUFBO0VBWnBCO0lBa0JJLFdBQVc7SUFFWCxnQkFBZ0I7SUFHaEIsWUFBWSxFQUFBO0VBSWhCO0VBQ0UsWUFBWTtFQUNaLFlBQVksRUFBQTtFQUdkO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixnQkFBZ0IsRUFBQTtFQUdsQjtFQUlJLGtDQUFrQyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvbWFpbi12aWV3L21haW4tdmlldy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiRtZXNzYWdlLWFyZWEtaGVpZ2h0OiA3MnB4O1xyXG5cclxuLm1haW5WaWV3IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgbWluLXdpZHRoOiAzNTJweDtcclxuXHJcbiAgLy8g57im5Lim44G5XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cclxuICBhcHAtbWVzc2FnZS1hcmVhLXZpZXcge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6ICRtZXNzYWdlLWFyZWEtaGVpZ2h0O1xyXG4gICAgbWluLXdpZHRoOiA2MjBweDtcclxuXHJcbiAgICAvLyDjg6Hjg4Pjgrvjg7zjgrjjgqjjg6rjgqLjga/lm7rlrprpq5jjgZVcclxuICB9XHJcblxyXG4gIC5tYWluUGFuZWxEaXZpZGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICAvLyBoZWlnaHQ6IDEwMCU7XHJcbiAgICBtaW4td2lkdGg6IDI4MHB4O1xyXG5cclxuICAgIC8vIOODkeODjeODq+mDqOWIhuOBr+aui+OCiuOBrumrmOOBleWFqOmDqFxyXG4gICAgZmxleC1ncm93OiAxO1xyXG4gIH1cclxufVxyXG5cclxuYXBwLXRodW1ibmFpbC12aWV3IHtcclxuICB3aWR0aDogMjA2cHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG5hcHAtcGRmLXZpZXcge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBtaW4td2lkdGg6IDYyMHB4O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAge1xyXG4gIC5hcy1zcGxpdC1ndXR0ZXIge1xyXG4gICAgLy8gYXMtc3BsaXTjgYzjgqjjg6zjg6Hjg7Pjg4joh6rouqvjga5zdHlsZeOBqOOBl+OBpuiJsuOCkuioreWumuOBl+OBpuOBl+OBvuOBhuOBn+OCgVxyXG4gICAgLy8gIWltcG9ydGFudOOBp+S4iuabuOOBjeOBmeOCi+W/heimgeOBjOOBguOCi+OAglxyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDtcclxuICB9XHJcbn1cclxuIl19 */\"","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ISupportCommandMap } from '../../../core/commands/i-support-command-map';\r\nimport { BaseEvent } from '../../../core/event/base-event';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { ViewManagerService } from '../../../core/services/view-manager.service';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerState } from '../../store/viewer.state';\r\nimport { MessageAreaViewComponent } from '../message-area-view/message-area-view.component';\r\nimport { PdfViewComponent } from '../pdf/pdf-view.component';\r\nimport { ThumbnailViewComponent } from '../thumbnail/thumbnail-view.component';\r\n\r\n@Component({\r\n  selector: 'app-main-view',\r\n  templateUrl: './main-view.component.html',\r\n  styleUrls: ['./main-view.component.scss']\r\n})\r\nexport class MainViewComponent implements OnInit, ISupportCommandMap {\r\n  // コマンドマップ\r\n  commandMapDef = [];\r\n\r\n  @ViewChild('messageArea') messageArea: MessageAreaViewComponent;\r\n\r\n  @ViewChild('thumbnailView') thumbnailView: ThumbnailViewComponent;\r\n\r\n  @ViewChild('pdfView') pdfView: PdfViewComponent;\r\n\r\n  @ViewChild('fileUpload') fileUpload: ElementRef<HTMLInputElement>;\r\n\r\n  constructor(private store: Store<ViewerState>, private controller: ControllerService, private viewManager: ViewManagerService) {}\r\n\r\n  ngOnInit() {\r\n    this.viewManager.set(ViewerViewTypes.MainView, this);\r\n    this.controller.addCommandMap(this);\r\n  }\r\n\r\n  // ★Stitch V1.3対応 移植元からイベントを追加\r\n  /**\r\n   * ダウンロードイベント処理\r\n   *\r\n   * @param event イベント\r\n   */\r\n  onDownloadObject(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.DownloadObject(event, this));\r\n  }\r\n}\r\n","module.exports = \"<!-- ビューア画面 メッセージエリア -->\\r\\n<div class=\\\"messageAreaView\\\">\\r\\n  <!-- 文書名 -->\\r\\n  <p class=\\\"documentName\\\">{{ documentName }}</p>\\r\\n  <!-- messageArea -->\\r\\n  <app-message-area #messageArea></app-message-area>\\r\\n</div>\\r\\n\"","module.exports = \".messageAreaView {\\n  display: flex;\\n  align-items: center;\\n  height: 100%; }\\n\\napp-message-area {\\n  width: 330px;\\n  height: 100%;\\n  display: flex;\\n  align-items: center; }\\n\\n.documentName {\\n  width: 300px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvbWVzc2FnZS1hcmVhLXZpZXcvQzpcXFVzZXJzXFxnMTAwMTY4NTFcXERvY3VtZW50c1xcYW5ndWxhci13b3Jrc3BhY2VcXHNtYS1uYXZpXFxhbmd1bGFyXFxyc24vc3JjXFxhcHBcXHZpZXdlclxcY29udGFpbmVyc1xcbWVzc2FnZS1hcmVhLXZpZXdcXG1lc3NhZ2UtYXJlYS12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxZQUFZO0VBQ1osWUFBWTtFQUNaLGFBQWE7RUFDYixtQkFBbUIsRUFBQTs7QUFHckI7RUFDRSxZQUFZO0VBR1osZ0JBQWdCO0VBQ2hCLHVCQUF1QjtFQUN2QixtQkFBbUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3ZpZXdlci9jb250YWluZXJzL21lc3NhZ2UtYXJlYS12aWV3L21lc3NhZ2UtYXJlYS12aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lc3NhZ2VBcmVhVmlldyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuYXBwLW1lc3NhZ2UtYXJlYSB7XHJcbiAgd2lkdGg6IDMzMHB4O1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5kb2N1bWVudE5hbWUge1xyXG4gIHdpZHRoOiAzMDBweDtcclxuICAvLyDimIVTdGl0Y2ggVjEuM+WvvuW/nFxyXG4gIC8vIEZsZXjniYggTGFiZWzjga50cnVuY2F0ZVRvRml05bGe5oCnKOihqOekuuaWh+Wtl+OBruecgeeVpeihqOekuinjgpJvdmVyZmxvd+OAgXRleHQtb3ZlcmZsb3fjgIF3aGl0ZS1zcGFjZeOBp+WvvuW/nFxyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxufVxyXG4iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { MessageAreaComponent } from '../../../shared/components/message-area/message-area.component';\r\n\r\n/**\r\n * ビューア画面 ナビゲーションメッセージ表示エリア\r\n */\r\n@Component({\r\n  selector: 'app-message-area-view',\r\n  templateUrl: './message-area-view.component.html',\r\n  styleUrls: ['./message-area-view.component.scss']\r\n})\r\nexport class MessageAreaViewComponent implements OnInit {\r\n  /**\r\n   * メッセージエリア\r\n   */\r\n  @ViewChild('messageArea') messageArea: MessageAreaComponent;\r\n\r\n  /**\r\n   * 文書名\r\n   */\r\n  documentName = '';\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n}\r\n","import { ActionToCommand } from '../../../core/services/action-to-command';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ShowPdfCommand } from '../../commands/pdf/show-pdf-command';\r\n\r\nexport const pdfViewCommandMap: ActionToCommand[] = [\r\n  // PDF表示\r\n  { action: SharedCommand.SharedActionTypes.ShowPdf, command: ShowPdfCommand }\r\n];\r\n","import { Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ISupportCommandMap } from '../../../core/commands/i-support-command-map';\r\nimport { ShowPdfEvent } from '../../../core/event/show-pdf-event';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { Logger } from '../../../core/services/logger.service';\r\nimport { ViewManagerService } from '../../../core/services/view-manager.service';\r\nimport { WordingService } from '../../../core/services/wording.service';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { SharedState } from '../../../shared/store/shared.state';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { SectionViewComponent } from '../section/section-view.component';\r\n\r\nimport { PdfViewBaseComponent } from './../../../shared/components/pdf-view-base/pdf-view-base.component';\r\nimport { ConfirmUpdateDialogComponent } from './../dialogs/confirm-update-dialog/confirm-update-dialog.component';\r\nimport { ViewerComponent } from './../viewer/viewer.component';\r\n\r\n/**\r\n * PDF表示エリアのコンポーネント\r\n *\r\n * ★Stitch V1.3 対応\r\n * 以下メソッドは未使用のため削除\r\n * isShowPopup\r\n */\r\n@Component({\r\n  selector: 'app-pdf-view',\r\n  templateUrl: '../../../shared/components/pdf-view-base/pdf-view-base.component.html',\r\n  styleUrls: ['../../../shared/components/pdf-view-base/pdf-view-base.component.scss']\r\n})\r\nexport class PdfViewComponent extends PdfViewBaseComponent implements OnInit, OnDestroy, ISupportCommandMap {\r\n  commandMapDef = [];\r\n  parentDocument: any;\r\n\r\n  /**\r\n   * モデルロケーター\r\n   */\r\n  private locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * コンストラクタ\r\n   * @param viewManager View管理サービス\r\n   * @param logger\r\n   * @param wording\r\n   * @param store\r\n   * @param controller Command生成・実行サービス\r\n   */\r\n  constructor(\r\n    protected viewManager: ViewManagerService,\r\n    protected logger: Logger,\r\n    protected wording: WordingService,\r\n    protected store: Store<SharedState>,\r\n    private controller: ControllerService\r\n  ) {\r\n    super(viewManager, logger, wording, store);\r\n  }\r\n\r\n  /**\r\n   * ライフサイクルフック：初期化\r\n   */\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.viewManager.set(ViewerViewTypes.PdfView, this);\r\n    this.controller.addCommandMap(this);\r\n  }\r\n\r\n  /**\r\n   * ライフサイクルフック：破棄前\r\n   */\r\n  ngOnDestroy() {\r\n    this.controller.deleteCommandMap(this);\r\n  }\r\n\r\n  /**\r\n   * PDF表示イベントハンドラー\r\n   * @param event イベント\r\n   */\r\n  showPdfHandler(event: ShowPdfEvent): void {\r\n    const payload = { event };\r\n    this.store.dispatch(new SharedCommand.ShowPdf(payload));\r\n  }\r\n\r\n  protected get isShowPopup(): boolean {\r\n    const viewerView = this.viewManager.get(ViewerViewTypes.Root) as ViewerComponent;\r\n    return ConfirmUpdateDialogComponent.isShowDialog || viewerView.isShowPopup;\r\n  }\r\n\r\n  protected getSectionVO(): SectionVO {\r\n    const sectionListView = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    return sectionListView.thumbnailList.selectedItem as SectionVO;\r\n  }\r\n\r\n  protected get isShowPdf(): number {\r\n    return this.locator.showPdf;\r\n  }\r\n\r\n  protected get rightClick(): boolean {\r\n    return this.locator.rightClick;\r\n  }\r\n}\r\n","import { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ClickSelectSectionCommand } from '../../commands/thumbnail/section/click-select-section-command';\r\nimport { EditModeExportSectionCommand } from '../../commands/thumbnail/section/edit-mode-export-section-command';\r\nimport { GetSectionThumbnailCommand } from '../../commands/thumbnail/section/get-section-thumbnail-command';\r\nimport { InsertSectionCommand } from '../../commands/thumbnail/section/insert-section-command';\r\nimport { MoveSectionCommand } from '../../commands/thumbnail/section/move-section-command';\r\nimport { OpenAppExportSectionCommand } from '../../commands/thumbnail/section/open-app-export-section-command';\r\nimport { OpenFtsExportSection } from '../../commands/thumbnail/section/open-fts-export-section';\r\nimport { RenameSectionCommand } from '../../commands/thumbnail/section/rename-section-command';\r\nimport { SectionChangeCommand } from '../../commands/thumbnail/section/section-change-command';\r\nimport { SectionDragDropCommand } from '../../commands/thumbnail/section/section-drag-drop-command';\r\nimport { SectionItemClickCommand } from '../../commands/thumbnail/section/section-item-click-command';\r\nimport { UploadCommand } from '../../commands/thumbnail/upload-command';\r\nimport { ViewerCommand } from '../../store/viewer.actions';\r\n\r\nimport { ActionToCommand } from './../../../core/services/action-to-command';\r\n\r\nexport const sectionViewCommandMap: ActionToCommand[] = [\r\n  // Changeイベント\r\n  { action: SharedCommand.SharedActionTypes.Change, command: SectionChangeCommand },\r\n  { action: SharedCommand.SharedActionTypes.GetSectionThumbnail, command: GetSectionThumbnailCommand },\r\n\r\n  // itemClick\r\n  { action: SharedCommand.SharedActionTypes.ItemClick, command: SectionItemClickCommand },\r\n\r\n  // DragDrop\r\n  { action: SharedCommand.SharedActionTypes.DragDrop, command: SectionDragDropCommand },\r\n\r\n  // 名前変更\r\n  { action: ViewerCommand.ViewerActionTypes.TextInputFocusOut, command: RenameSectionCommand },\r\n\r\n  // セクション移動\r\n  { action: SharedCommand.SharedActionTypes.MoveObject, command: MoveSectionCommand },\r\n\r\n  // セクション追加\r\n  { action: ViewerCommand.ViewerActionTypes.InsertSection, command: InsertSectionCommand },\r\n\r\n  // 審査/承認\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // { action: SharedCommand.SharedActionTypes.Approve, command: ViewerShowCirculateDialogCommand },\r\n\r\n  // 差し戻し\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // { action: SharedCommand.SharedActionTypes.PassBack, command: ViewerShowCirculateDialogCommand },\r\n\r\n  // アップロード\r\n  { action: SharedCommand.SharedActionTypes.UploadEnd, command: UploadCommand },\r\n\r\n  // 編集モード中のセクションダウンロード\r\n  { action: SharedCommand.SharedActionTypes.DownloadObject, command: EditModeExportSectionCommand },\r\n  { action: SharedCommand.SharedActionTypes.OpenApplication, command: OpenAppExportSectionCommand },\r\n  // アプリケーションでセクションを表示\r\n  { action: SharedCommand.SharedActionTypes.OpenAppDownload, command: OpenAppExportSectionCommand },\r\n\r\n  // 全文データをアプリで開く\r\n  { action: SharedCommand.SharedActionTypes.OpenFtsData, command: OpenFtsExportSection },\r\n\r\n  // セクション選択ボタン\r\n  { action: ViewerCommand.ViewerActionTypes.ClickSelectButton, command: ClickSelectSectionCommand }\r\n];\r\n","module.exports = \"<app-drag-drop-view [self]=\\\"this\\\">\\r\\n  <span class=\\\"container\\\">\\r\\n    <div class=\\\"section-header\\\">\\r\\n      <div class=\\\"select-button-area\\\">\\r\\n        <button pButton class=\\\"select-prev-button\\\" [disabled]=\\\"!selectPrevButtonDisabled\\\" (click)=\\\"onSelectPrevClick($event)\\\"></button>\\r\\n        <span class=\\\"section-count-label\\\">{{ sectionNo }} / {{ locator.sectionCount }}</span>\\r\\n        <button pButton class=\\\"select-next-button\\\" [disabled]=\\\"!selectNextButtonDisabled\\\" (click)=\\\"onSelectNextClick($event)\\\"></button>\\r\\n      </div>\\r\\n      <div class=\\\"separator\\\" [hidden]=\\\"!moveButtonVisible\\\"><div class=\\\"vRule\\\"></div></div>\\r\\n      <div class=\\\"move-button-area\\\" [hidden]=\\\"!moveButtonVisible\\\">\\r\\n        <button pButton class=\\\"move-forward-button\\\" [disabled]=\\\"!moveForwardButtonDisabled\\\" (click)=\\\"onMoveForwardClick($event)\\\"></button>\\r\\n        <span class=\\\"move-button-padding\\\"></span>\\r\\n        <button pButton class=\\\"move-next-button\\\" [disabled]=\\\"!moveNextButtonDisabled\\\" (click)=\\\"onMoveNextClick($event)\\\"></button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <hr />\\r\\n    <div class=\\\"thumbnail-area\\\">\\r\\n      <app-sys0-thumbnail-list\\r\\n        #thumbnailList\\r\\n        [contextMenu]=\\\"currentContextMenu\\\"\\r\\n        [columnWidth]=\\\"190\\\"\\r\\n        [rowHeight]=\\\"180\\\"\\r\\n        [dragEnabled]=\\\"true\\\"\\r\\n        [dropEnabled]=\\\"true\\\"\\r\\n        [doubleClickEnabled]=\\\"true\\\"\\r\\n        [allowMultipleSelection]=\\\"true\\\"\\r\\n        [showMainSelect]=\\\"true\\\"\\r\\n        [dataProvider]=\\\"locator.sectionList\\\"\\r\\n        [getThumbnailFunction]=\\\"getThumbnailFunction\\\"\\r\\n        [tabEnabled]=\\\"false\\\"\\r\\n        (dragDrop)=\\\"onDragDrop($event)\\\"\\r\\n        (change)=\\\"onChange($event)\\\"\\r\\n        (itemClick)=\\\"onItemClick($event)\\\"\\r\\n      >\\r\\n        <!--  ★Stitch V1.3対応 Flex版ではcssの指定(そもそもcssの中身が不明)も行っているが、ThumbnailItemRenderの実装方式が不明なためいったん指定なしとする -->\\r\\n        <!--\\r\\n      ★Stitch V1.3対応 Flex版ではmxml上でclickSectionTag()をoverrideしているが、Angularは別の方式で実現\\r\\n      clickSectionTagメソッドをInputとして渡して、ThumbnailItemRendererComponent側のclickSectionTag()メソッド実行時に\\r\\n      Inputで渡されたメソッドを実行するように変更\\r\\n      item.iconはNull場合を判定する\\r\\n    -->\\r\\n        <ng-template let-item=\\\"item\\\">\\r\\n          <app-thumbnail-item-renderer\\r\\n            *ngIf=\\\"item.icon != null\\\"\\r\\n            [data]=\\\"item\\\"\\r\\n            [tabEnabled]=\\\"false\\\"\\r\\n            [prohibitionError]=\\\"prohibitionErrorString\\\"\\r\\n            [requiredError]=\\\"requiredErrorString\\\"\\r\\n            [enableTagDoubleClick]=\\\"true\\\"\\r\\n            [enableTagClick]=\\\"true\\\"\\r\\n            [clickSectionTagFunction]=\\\"clickSectionTag\\\"\\r\\n            (tagDoubleClick)=\\\"tagDoubleClickHandler($event)\\\"\\r\\n            (mouseEnter)=\\\"onMouseEnter($event)\\\"\\r\\n            (doubleClick)=\\\"onDoubleClick($event)\\\"\\r\\n            (drawStart)=\\\"onDrawStart($event)\\\"\\r\\n          ></app-thumbnail-item-renderer>\\r\\n        </ng-template>\\r\\n      </app-sys0-thumbnail-list>\\r\\n    </div>\\r\\n    <!-- ★Stitch V1.3対応　承認機能は実装しないためコメントアウト -->\\r\\n    <!--\\r\\n<div class=\\\"approve-area\\\">\\r\\n\\t<mx:VBox id=\\\"approveArea\\\" width=\\\"100%\\\" height=\\\"90\\\" verticalScrollPolicy=\\\"off\\\" verticalGap=\\\"0\\\"\\r\\n\\t\\tincludeInLayout=\\\"{locator.useWorkFlowButton}\\\" visible=\\\"{locator.useWorkFlowButton}\\\">\\r\\n\\r\\n\\t\\t<mx:Box height=\\\"5\\\" width=\\\"100%\\\" styleName=\\\"approvePanelDivide\\\"/>\\r\\n\\r\\n\\t\\t<mx:Panel width=\\\"100%\\\" height=\\\"90\\\" title=\\\"{resourceManager.getString(Sys0Application.SYS0_RESOURCES,'lbl.approvepanel.title')}\\\"\\r\\n\\t\\t\\t styleName=\\\"approvePanel\\\" verticalGap=\\\"0\\\">\\r\\n\\t\\t\\t<mx:VBox width=\\\"100%\\\" height=\\\"100%\\\" styleName=\\\"approvePanelContentsArea\\\"\\r\\n\\t\\t\\t\\thorizontalAlign=\\\"center\\\" verticalGap=\\\"0\\\">\\r\\n\\t\\t\\t\\t<mx:HBox width=\\\"100%\\\" height=\\\"100%\\\" styleName=\\\"approvePanelContentsArea\\\"\\r\\n\\t\\t\\t\\tpaddingBottom=\\\"0\\\" paddingTop=\\\"0\\\" horizontalAlign=\\\"center\\\">\\r\\n\\t\\t\\t\\t\\t<mx:RadioButton label=\\\"{resourceManager.getString(Sys0Application.SYS0_RESOURCES,'lbl.approvepanel.approve')}\\\" height=\\\"15\\\" selected=\\\"true\\\" id=\\\"approve\\\"/>\\r\\n\\t\\t\\t\\t\\t<mx:RadioButton label=\\\"{resourceManager.getString(Sys0Application.SYS0_RESOURCES,'lbl.approvepanel.passback')}\\\" height=\\\"15\\\" id=\\\"passback\\\"/>\\r\\n\\t\\t\\t\\t</mx:HBox>\\r\\n\\t\\t\\t\\t<mx:HBox width=\\\"100%\\\" height=\\\"100%\\\" styleName=\\\"approvePanelContentsArea\\\"\\r\\n\\t\\t\\t\\tpaddingBottom=\\\"10\\\" paddingTop=\\\"0\\\" horizontalAlign=\\\"right\\\">\\r\\n\\t\\t\\t\\t\\t<mx:Button label=\\\"{resourceManager.getString(Sys0Application.SYS0_RESOURCES,'lbl.approvepanel.action')}\\\" width=\\\"80\\\" styleName=\\\"okButton\\\" click=\\\"clickButton(event);\\\" />\\r\\n\\t\\t\\t\\t</mx:HBox>\\r\\n\\t\\t\\t</mx:VBox>\\r\\n\\t\\t</mx:Panel>\\r\\n\\t</mx:VBox>\\r\\n</div>\\r\\n-->\\r\\n    <div [hidden]=\\\"!iFrameVisible\\\">\\r\\n      <app-drag-drop-view>\\r\\n        <app-drag-area-button></app-drag-area-button>\\r\\n        <app-i-frame\\r\\n          id=\\\"iFrame\\\"\\r\\n          width=\\\"100%\\\"\\r\\n          height=\\\"70px\\\"\\r\\n          visible=\\\"false\\\"\\r\\n          [uploadStartFunction]=\\\"getUploadStartFunction\\\"\\r\\n          (uploadEnd)=\\\"onUploadEnd($event)\\\"\\r\\n        >\\r\\n        </app-i-frame>\\r\\n      </app-drag-drop-view>\\r\\n    </div>\\r\\n  </span>\\r\\n</app-drag-drop-view>\\r\\n\"","module.exports = \".base-btn, :host ::ng-deep .section-header .select-button-area .select-prev-button, :host ::ng-deep .section-header .select-button-area .select-next-button, :host ::ng-deep .section-header .move-button-area .move-forward-button, :host ::ng-deep .section-header .move-button-area .move-next-button {\\n  background-repeat: no-repeat;\\n  background-color: transparent;\\n  width: 16px;\\n  height: 16px;\\n  color: transparent;\\n  border: 0 none;\\n  outline: 0 none;\\n  padding: 0 none;\\n  margin: auto; }\\n\\n.container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%; }\\n\\n.container .thumbnail-area {\\n    height: 340px;\\n    flex-grow: 1;\\n    width: 100%; }\\n\\n:host ::ng-deep .section-header {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between; }\\n\\n:host ::ng-deep .section-header .select-button-area {\\n    display: flex;\\n    align-items: center; }\\n\\n:host ::ng-deep .section-header .select-button-area .section-count-label {\\n      padding-left: 2px;\\n      padding-right: 2px; }\\n\\n:host ::ng-deep .section-header .select-button-area .select-prev-button {\\n      background-image: url(\\\"/assets/arrow-left_n.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-prev-button:hover {\\n      background-image: url(\\\"/assets/arrow-left_o.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-prev-button:active {\\n      background-image: url(\\\"/assets/arrow-left_p.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-prev-button:disabled {\\n      background-image: url(\\\"/assets/arrow-left_d.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-next-button {\\n      background-image: url(\\\"/assets/arrow-right_n.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-next-button:hover {\\n      background-image: url(\\\"/assets/arrow-right_o.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-next-button:active {\\n      background-image: url(\\\"/assets/arrow-right_p.png\\\"); }\\n\\n:host ::ng-deep .section-header .select-button-area .select-next-button:disabled {\\n      background-image: url(\\\"/assets/arrow-right_d.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-button-padding {\\n    padding-left: 15px;\\n    padding-right: 0px; }\\n\\n:host ::ng-deep .section-header .move-button-area .move-forward-button {\\n    width: 28px;\\n    height: 20px;\\n    background-image: url(\\\"/assets/movesection_L_n.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-forward-button:hover {\\n    background-image: url(\\\"/assets/movesection_L_o.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-forward-button:active {\\n    background-image: url(\\\"/assets/movesection_L_p.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-forward-button:disabled {\\n    background-image: url(\\\"/assets/movesection_L_d.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-next-button {\\n    width: 28px;\\n    height: 20px;\\n    background-image: url(\\\"/assets/movesection_R_n.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-next-button:hover {\\n    background-image: url(\\\"/assets/movesection_R_o.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-next-button:active {\\n    background-image: url(\\\"/assets/movesection_R_p.png\\\"); }\\n\\n:host ::ng-deep .section-header .move-button-area .move-next-button:disabled {\\n    background-image: url(\\\"/assets/movesection_R_d.png\\\"); }\\n\\n.vRule {\\n  border-right: 1px solid #c4cccc;\\n  height: 18px;\\n  width: 1px;\\n  box-shadow: 1px 0px #eeeeee; }\\n\\n.dragDropBtn {\\n  width: 100%;\\n  height: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvc2VjdGlvbi9DOlxcVXNlcnNcXGcxMDAxNjg1MVxcRG9jdW1lbnRzXFxhbmd1bGFyLXdvcmtzcGFjZVxcc21hLW5hdmlcXGFuZ3VsYXJcXHJzbi9zcmNcXGFwcFxcdmlld2VyXFxjb250YWluZXJzXFxzZWN0aW9uXFxzZWN0aW9uLXZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxlQUFlO0VBQ2YsZUFBZTtFQUNmLFlBQVksRUFBQTs7QUFHZDtFQUVFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsWUFBWSxFQUFBOztBQUpkO0lBV0ksYUFBYTtJQUViLFlBQVk7SUFDWixXQUFXLEVBQUE7O0FBSWY7RUFFRSxhQUFhO0VBQ2IsbUJBQW1CO0VBRW5CLDhCQUE4QixFQUFBOztBQUxoQztJQVNJLGFBQWE7SUFFYixtQkFBbUIsRUFBQTs7QUFYdkI7TUFlTSxpQkFBaUI7TUFDakIsa0JBQWtCLEVBQUE7O0FBaEJ4QjtNQXNCTSxpREFBaUQsRUFBQTs7QUF0QnZEO01BeUJNLGlEQUFpRCxFQUFBOztBQXpCdkQ7TUE0Qk0saURBQWlELEVBQUE7O0FBNUJ2RDtNQStCTSxpREFBaUQsRUFBQTs7QUEvQnZEO01BcUNNLGtEQUFrRCxFQUFBOztBQXJDeEQ7TUF3Q00sa0RBQWtELEVBQUE7O0FBeEN4RDtNQTJDTSxrREFBa0QsRUFBQTs7QUEzQ3hEO01BOENNLGtEQUFrRCxFQUFBOztBQTlDeEQ7SUFzRE0sa0JBQWtCO0lBQ2xCLGtCQUFrQixFQUFBOztBQXZEeEI7SUE2RE0sV0FBVztJQUNYLFlBQVk7SUFDWixvREFBb0QsRUFBQTs7QUEvRDFEO0lBa0VNLG9EQUFvRCxFQUFBOztBQWxFMUQ7SUFxRU0sb0RBQW9ELEVBQUE7O0FBckUxRDtJQXdFTSxvREFBb0QsRUFBQTs7QUF4RTFEO0lBOEVNLFdBQVc7SUFDWCxZQUFZO0lBQ1osb0RBQW9ELEVBQUE7O0FBaEYxRDtJQW1GTSxvREFBb0QsRUFBQTs7QUFuRjFEO0lBc0ZNLG9EQUFvRCxFQUFBOztBQXRGMUQ7SUF5Rk0sb0RBQW9ELEVBQUE7O0FBTTFEO0VBQ0UsK0JBQStCO0VBQy9CLFlBQVk7RUFDWixVQUFVO0VBQ1YsMkJBQTJCLEVBQUE7O0FBSTdCO0VBQ0UsV0FBVztFQUNYLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL3ZpZXdlci9jb250YWluZXJzL3NlY3Rpb24vc2VjdGlvbi12aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g44Oc44K/44Oz44Gu57aZ5om/44K544K/44Kk44OrXHJcbi5iYXNlLWJ0biB7XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICB3aWR0aDogMTZweDtcclxuICBoZWlnaHQ6IDE2cHg7XHJcbiAgY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gIGJvcmRlcjogMCBub25lO1xyXG4gIG91dGxpbmU6IDAgbm9uZTtcclxuICBwYWRkaW5nOiAwIG5vbmU7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59XHJcblxyXG4uY29udGFpbmVyIHtcclxuICAvLyDnuKbmj4PjgYhcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG5cclxuICAvLyDjgrvjgq/jgrfjg6fjg7Pjg5jjg4Pjg4Djg7zjga/pq5jjgZXlm7rlrppcclxuXHJcbiAgLy8g44K144Og44ON44Kk44Or44Ko44Oq44KiXHJcbiAgLnRodW1ibmFpbC1hcmVhIHtcclxuICAgIC8vIOacgOWwj+mrmOOBleOCkuaMh+WumlxyXG4gICAgaGVpZ2h0OiAzNDBweDtcclxuICAgIC8vIOS9meOBo+OBn+mrmOOBleWFqOmDqFxyXG4gICAgZmxleC1ncm93OiAxO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG59XHJcbi8vIOOCu+OCr+OCt+ODp+ODs+ODmOODg+ODgOODvOOCqOODquOColxyXG46aG9zdCA6Om5nLWRlZXAgLnNlY3Rpb24taGVhZGVyIHtcclxuICAvLyDmqKrmj4PjgYhcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgLy8g5pyA5Yid44Go5pyA5b6M44Gu5a2Q6KaB57Sg44KS5Lih56uv44Gr6YWN572u44GX44CB5q6L44KK44Gu6KaB57Sg44Gv5Z2H562J44Gr6ZaT6ZqU44KS44GC44GR44Gm6YWN572uXHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG5cclxuICAvLyDjgrvjgq/jgrfjg6fjg7Ppgbjmip7jgqjjg6rjgqJcclxuICAuc2VsZWN0LWJ1dHRvbi1hcmVhIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAvLyDnuKbkuK3lpK7mj4PjgYhcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gICAgLy8g44K744Kv44K344On44Oz44Kr44Km44Oz44OI44Op44OZ44OrXHJcbiAgICAuc2VjdGlvbi1jb3VudC1sYWJlbCB7XHJcbiAgICAgIHBhZGRpbmctbGVmdDogMnB4O1xyXG4gICAgICBwYWRkaW5nLXJpZ2h0OiAycHg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g44OQ44OD44Kv44Oc44K/44OzKOKGkClcclxuICAgIC5zZWxlY3QtcHJldi1idXR0b24ge1xyXG4gICAgICBAZXh0ZW5kIC5iYXNlLWJ0bjtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL2Fycm93LWxlZnRfbi5wbmcnKTtcclxuICAgIH1cclxuICAgIC5zZWxlY3QtcHJldi1idXR0b246aG92ZXIge1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy9hc3NldHMvYXJyb3ctbGVmdF9vLnBuZycpO1xyXG4gICAgfVxyXG4gICAgLnNlbGVjdC1wcmV2LWJ1dHRvbjphY3RpdmUge1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy9hc3NldHMvYXJyb3ctbGVmdF9wLnBuZycpO1xyXG4gICAgfVxyXG4gICAgLnNlbGVjdC1wcmV2LWJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9hcnJvdy1sZWZ0X2QucG5nJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g44ON44Kv44K544OI44Oc44K/44OzKOKGkilcclxuICAgIC5zZWxlY3QtbmV4dC1idXR0b24ge1xyXG4gICAgICBAZXh0ZW5kIC5iYXNlLWJ0bjtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL2Fycm93LXJpZ2h0X24ucG5nJyk7XHJcbiAgICB9XHJcbiAgICAuc2VsZWN0LW5leHQtYnV0dG9uOmhvdmVyIHtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL2Fycm93LXJpZ2h0X28ucG5nJyk7XHJcbiAgICB9XHJcbiAgICAuc2VsZWN0LW5leHQtYnV0dG9uOmFjdGl2ZSB7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9hcnJvdy1yaWdodF9wLnBuZycpO1xyXG4gICAgfVxyXG4gICAgLnNlbGVjdC1uZXh0LWJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9hcnJvdy1yaWdodF9kLnBuZycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g44K744Kv44K344On44Oz56e75YuV44Ko44Oq44KiXHJcbiAgLm1vdmUtYnV0dG9uLWFyZWEge1xyXG4gICAgLy8g44Oc44K/44Oz44Go44Oc44K/44Oz44Gu6ZaT6ZqUXHJcbiAgICAubW92ZS1idXR0b24tcGFkZGluZyB7XHJcbiAgICAgIHBhZGRpbmctbGVmdDogMTVweDtcclxuICAgICAgcGFkZGluZy1yaWdodDogMHB4O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWJjeenu+WLleODnOOCv+ODs1xyXG4gICAgLm1vdmUtZm9yd2FyZC1idXR0b24ge1xyXG4gICAgICBAZXh0ZW5kIC5iYXNlLWJ0bjtcclxuICAgICAgd2lkdGg6IDI4cHg7XHJcbiAgICAgIGhlaWdodDogMjBweDtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL21vdmVzZWN0aW9uX0xfbi5wbmcnKTtcclxuICAgIH1cclxuICAgIC5tb3ZlLWZvcndhcmQtYnV0dG9uOmhvdmVyIHtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL21vdmVzZWN0aW9uX0xfby5wbmcnKTtcclxuICAgIH1cclxuICAgIC5tb3ZlLWZvcndhcmQtYnV0dG9uOmFjdGl2ZSB7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9tb3Zlc2VjdGlvbl9MX3AucG5nJyk7XHJcbiAgICB9XHJcbiAgICAubW92ZS1mb3J3YXJkLWJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9tb3Zlc2VjdGlvbl9MX2QucG5nJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qyh56e75YuV44Oc44K/44OzXHJcbiAgICAubW92ZS1uZXh0LWJ1dHRvbiB7XHJcbiAgICAgIEBleHRlbmQgLmJhc2UtYnRuO1xyXG4gICAgICB3aWR0aDogMjhweDtcclxuICAgICAgaGVpZ2h0OiAyMHB4O1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy9hc3NldHMvbW92ZXNlY3Rpb25fUl9uLnBuZycpO1xyXG4gICAgfVxyXG4gICAgLm1vdmUtbmV4dC1idXR0b246aG92ZXIge1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy9hc3NldHMvbW92ZXNlY3Rpb25fUl9vLnBuZycpO1xyXG4gICAgfVxyXG4gICAgLm1vdmUtbmV4dC1idXR0b246YWN0aXZlIHtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL21vdmVzZWN0aW9uX1JfcC5wbmcnKTtcclxuICAgIH1cclxuICAgIC5tb3ZlLW5leHQtYnV0dG9uOmRpc2FibGVkIHtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL21vdmVzZWN0aW9uX1JfZC5wbmcnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOe4puOCu+ODkeODrOODvOOCv1xyXG4udlJ1bGUge1xyXG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNjNGNjY2M7XHJcbiAgaGVpZ2h0OiAxOHB4O1xyXG4gIHdpZHRoOiAxcHg7XHJcbiAgYm94LXNoYWRvdzogMXB4IDBweCAjZWVlZWVlO1xyXG59XHJcblxyXG4vLyDjg4njg6njg4PjgrDvvIbjg4njg63jg4Pjg5fjg5zjgr/jg7NcclxuLmRyYWdEcm9wQnRuIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwcHg7XHJcbn1cclxuIl19 */\"","import { AfterContentInit, AfterViewChecked, Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ApplicationError } from '../../../core/application-error';\r\nimport { ISupportCommandMap } from '../../../core/commands/i-support-command-map';\r\nimport { BaseEvent } from '../../../core/event/base-event';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { ActionToCommand } from '../../../core/services/action-to-command';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { Logger } from '../../../core/services/logger.service';\r\nimport { StateUtilService } from '../../../core/services/state-util.service';\r\nimport { ViewManagerService } from '../../../core/services/view-manager.service';\r\nimport { WordingService } from '../../../core/services/wording.service';\r\nimport { CallLaterManager } from '../../../core/utils/call-later-manager';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { Sys0ThumbnailListComponent } from '../../../shared/components/controls/sys0-thumbnail-list/sys0-thumbnail-list.component';\r\nimport { DragDropViewComponent } from '../../../shared/components/drag-drop-view/drag-drop-view.component';\r\nimport { IFrameComponent } from '../../../shared/components/i-frame/i-frame.component';\r\nimport { ListEvent } from '../../../shared/event/list-event';\r\nimport { RsnMenuItem } from '../../../shared/models/rsn-menu-item';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { GetSectionThumbnailCommand } from '../../commands/thumbnail/section/get-section-thumbnail-command';\r\nimport { UploadCommand } from '../../commands/thumbnail/upload-command';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { ViewerCommand } from '../../store/viewer.actions';\r\nimport { ViewerState } from '../../store/viewer.state';\r\nimport { ViewerBaseComponent } from '../viewer-base/viewer-base.component';\r\n\r\nimport { getEditableMenu, getReadMenuData } from './section-view.contextdata';\r\n\r\n/**\r\n * セクションサムネイルエリア\r\n */\r\n@Component({\r\n  selector: 'app-section-view',\r\n  templateUrl: './section-view.component.html',\r\n  styleUrls: ['./section-view.component.scss']\r\n})\r\nexport class SectionViewComponent extends DragDropViewComponent\r\n  implements OnInit, ISupportCommandMap, AfterContentInit, OnDestroy, AfterViewChecked {\r\n  static readonly STATE_READONRY = 'readonly';\r\n\r\n  static readonly STATE_EDITABLE = 'editable';\r\n\r\n  /**\r\n   * コマンドマップ\r\n   */\r\n  commandMapDef: ActionToCommand[] = [];\r\n\r\n  /**\r\n   * templateからlocatorにアクセスするための変数\r\n   */\r\n  locator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * Sys0ThumbnailListにバインドするファンクション\r\n   */\r\n  getThumbnailFunction: Function;\r\n\r\n  /**\r\n   * ThumbnailItemRendererの prohibitionError にバインドする文字列\r\n   */\r\n  prohibitionErrorString: string;\r\n\r\n  /**\r\n   * ThumbnailItemRendererの requiredError にバインドする文字列\r\n   */\r\n  requiredErrorString: string;\r\n\r\n  /**\r\n   * サムネイル一覧の参照\r\n   */\r\n  @ViewChild(Sys0ThumbnailListComponent) thumbnailList: Sys0ThumbnailListComponent;\r\n\r\n  /**\r\n   * iframeへの参照\r\n   */\r\n  @ViewChild(IFrameComponent) iframe: IFrameComponent;\r\n\r\n  /**\r\n   * 先祖クラスインスタンスへの参照オーバーライド\r\n   */\r\n  @ViewChild(DragDropViewComponent) dragDropView: DragDropViewComponent;\r\n\r\n  /**\r\n   * セクションViewの読み取りモード用右クリックメニューデータです\r\n   */\r\n  readMenu: RsnMenuItem[] = [];\r\n\r\n  /**\r\n   * セクションViewの更新モード用右クリックメニューデータです\r\n   */\r\n  editableMenu: RsnMenuItem[] = [];\r\n\r\n  /**\r\n   * コンポーネント継承時、コマンドフレームワークのdispatchを行う際のthisインスタンスを受け取る\r\n   */\r\n  @Input() self: DragDropViewComponent;\r\n\r\n  @Input() selectPrevButtonDisabled = true;\r\n  @Input() selectNextButtonDisabled = true;\r\n  @Input() moveForwardButtonDisabled = false;\r\n  @Input() moveNextButtonDisabled = false;\r\n\r\n  /**\r\n   * コンテキストメニューのバインド変数\r\n   */\r\n  listMenuData: RsnMenuItem[] | null = null;\r\n\r\n  // 各タグの表示制御\r\n  /** 移動ボタン表示制御 */\r\n  moveButtonVisible = false;\r\n  /** iFrameエリア表示制御 */\r\n  iFrameVisible = false;\r\n\r\n  private _currentState: string;\r\n\r\n  private _sectionNo = 0;\r\n\r\n  set sectionNo(value: number) {\r\n    // ★Stitch V1.3対応  ExpressionChangedAfterItHasBeenCheckedError 回避対応\r\n    setTimeout(() => {\r\n      this._sectionNo = value;\r\n    });\r\n  }\r\n\r\n  get sectionNo(): number {\r\n    return this._sectionNo;\r\n  }\r\n\r\n  /**\r\n   * ★Stitch V1.3対応 callLater管理クラス\r\n   */\r\n  private callLaterManager = new CallLaterManager();\r\n\r\n  get currentState(): string {\r\n    return this._currentState;\r\n  }\r\n\r\n  set currentState(key: string) {\r\n    if (key === SectionViewComponent.STATE_READONRY) {\r\n      this.moveButtonVisible = false;\r\n      this.iFrameVisible = false;\r\n    } else if (key === SectionViewComponent.STATE_EDITABLE) {\r\n      this.moveButtonVisible = true;\r\n      this.iFrameVisible = true;\r\n    }\r\n    this._currentState = key;\r\n  }\r\n\r\n  constructor(\r\n    private logger: Logger,\r\n    private store: Store<ViewerState>,\r\n    private viewManagerService: ViewManagerService,\r\n    private controllerService: ControllerService,\r\n    private wordingService: WordingService,\r\n    protected stateUtilService: StateUtilService,\r\n    protected viewManager: ViewManagerService\r\n  ) {\r\n    super(stateUtilService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    // ★Stitch V1.3対応  親クラスのさらに親クラスへの参照を再設定しなおす\r\n    this.sys0ContextMenuView = this.dragDropView.sys0ContextMenuView;\r\n\r\n    // コンテキストメニューデータの初期値セット\r\n    this.readMenu = getReadMenuData(this.wordingService);\r\n    this.editableMenu = getEditableMenu(this.wordingService);\r\n    // ★Stitch V1.3対応 テンプレートに設定する文字列を取得\r\n    this.prohibitionErrorString = this.wordingService.get('warn.tooltip.prohibitsectionname');\r\n    this.requiredErrorString = this.wordingService.get('warn.tooltip.sectionnamenull');\r\n    // ★Stitch V1.3対応 viewの登録\r\n    this.viewManagerService.set(ViewerViewTypes.SectionView, this);\r\n    // // ★Stitch V1.3対応 コマンドマップの登録\r\n    this.controllerService.addCommandMap(this);\r\n\r\n    const command = this.controllerService.getCommand(\r\n      this,\r\n      SharedCommand.SharedActionTypes.GetSectionThumbnail\r\n    ) as GetSectionThumbnailCommand;\r\n    this.getThumbnailFunction = command.getSectionThumbnail.bind(command);\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    super.ngAfterContentInit();\r\n    const viewer = this.viewManager.get(ViewerViewTypes.Root);\r\n    this.store.dispatch(new SharedCommand.Sys0ApplicationComplete(event, viewer));\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    // ★Stitch V1.3対応 callLaterの実行\r\n    this.callLaterManager.execute();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  /**\r\n   * ★Stitch V1.3対応 callLaterの実装\r\n   */\r\n  callLater(callback: Function) {\r\n    this.callLaterManager.callLater(callback);\r\n  }\r\n\r\n  // ★Stitch V1.3対応\r\n  /**\r\n   * uploadStart関数を取得する\r\n   */\r\n  getUploadStartFunction(): Function {\r\n    const command = this.controllerService.getCommand(this, SharedCommand.SharedActionTypes.UploadEnd);\r\n    if (!(command instanceof UploadCommand)) {\r\n      throw new ApplicationError('Failed to retrieve UploadCommand.');\r\n    }\r\n\r\n    return command.uploadStart.bind(command);\r\n  }\r\n\r\n  // ★Stitch V1.3対応\r\n  /**\r\n   * Upload終了時のイベントハンドラ\r\n   * @param event イベント\r\n   */\r\n  onUploadEnd(event) {\r\n    this.store.dispatch(new SharedCommand.UploadEnd({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * サムネイルのドラッグドロップイベント\r\n   * @param event イベント\r\n   */\r\n  onDragDrop(event) {\r\n    this.store.dispatch(new SharedCommand.DragDrop({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * サムネイルのチェンジイベント\r\n   * @param event イベント\r\n   */\r\n  onChange(event) {\r\n    this.store.dispatch(new SharedCommand.Change({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * サムネイルのアイテムクリックイベント\r\n   * @param event イベント\r\n   */\r\n  onItemClick(event: BaseEvent) {\r\n    let payloadEvent: BaseEvent;\r\n    if (event instanceof BaseEvent) {\r\n      payloadEvent = event;\r\n      payloadEvent.currentTarget = this.thumbnailList;\r\n    } else {\r\n      payloadEvent = new ListEvent(ListEvent.ITEM_CLICK);\r\n      payloadEvent.currentTarget = this.thumbnailList;\r\n    }\r\n    this.store.dispatch(new SharedCommand.ItemClick({ event: payloadEvent }, this));\r\n  }\r\n\r\n  /**\r\n   * サムネイルリストの付箋部分ダブルクリック時処理\r\n   * @param event\r\n   */\r\n  tagDoubleClickHandler(event) {\r\n    if (this.locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n      // // ★Stitch V1.3対応 commandMap.execEvent の移植\r\n      const viewerBase: ViewerBaseComponent | undefined = this.viewManagerService.get(ViewerViewTypes.ViewerBase) as\r\n        | ViewerBaseComponent\r\n        | undefined;\r\n      if (viewerBase == null) {\r\n        throw new ApplicationError('Unexpected null value for viewerBase.');\r\n      }\r\n      this.controllerService.execCommand(viewerBase, SharedCommand.SharedActionTypes.EditTag, event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * サムネイルリストのアイテムにマウスオーバした際のイベント\r\n   * @param event\r\n   */\r\n  onMouseEnter(event) {\r\n    // サムネイルリストのマウスオーバ処理をコール\r\n    this.thumbnailList.mouseOverHandler(event);\r\n  }\r\n\r\n  /**\r\n   * サムネイルリストのアイテムにダブルクリックした際のイベント\r\n   * @param event\r\n   */\r\n  onDoubleClick(event) {\r\n    // サムネイルリストのマウスダブルクリック処理をコール\r\n    this.thumbnailList.mouseDoubleClickHandler(event);\r\n  }\r\n\r\n  /**\r\n   * サムネイルリストのアイテムの描画開始のイベント\r\n   * @param event\r\n   */\r\n  onDrawStart(event) {\r\n    // サムネイルリストのサムネイル画像描画処理をコール\r\n    this.thumbnailList.drawThumbnail(event);\r\n  }\r\n\r\n  /**\r\n   * ThumbnailItemRendererのclickSectionTag() メソッド実行時に呼び出すファンクションです\r\n   * @param sectionNo\r\n   */\r\n  clickSectionTag(sectionNo: any): void {\r\n    // セクション数を反映させる\r\n    // Viewer(Sys0Application.application).sectionListView.sectionCntLabel.executeBindings();\r\n    // ★Stitch V1.3対応 .sectionListView は自分自身を指しており、セクション数の更新を行いたいのでそれ用のメソッドを自作し、実行\r\n    this.setSectionNo();\r\n  }\r\n\r\n  /**\r\n   * セクション前選択ボタンクリックイベント\r\n   * @param event\r\n   */\r\n  onSelectPrevClick(event) {\r\n    // ★Stitch V1.3対応 commandで使用する値をセット\r\n    event.currentTarget.data = 'selectPrevious';\r\n    this.store.dispatch(new ViewerCommand.ClickSelectButton({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * セクション次選択ボタンクリックイベント\r\n   * @param event\r\n   */\r\n  onSelectNextClick(event) {\r\n    // ★Stitch V1.3対応 commandで使用する値をセット\r\n    event.currentTarget.data = 'selectNext';\r\n    this.store.dispatch(new ViewerCommand.ClickSelectButton({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * セクション前移動ボタンクリックイベント\r\n   * @param event\r\n   */\r\n  onMoveForwardClick(event) {\r\n    // ★Stitch V1.3対応 commandで使用する値をセット\r\n    event.currentTarget.data = 'moveForward';\r\n    this.store.dispatch(new SharedCommand.MoveObject({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * セクション次移動ボタンクリックイベント\r\n   * @param event\r\n   */\r\n  onMoveNextClick(event) {\r\n    // ★Stitch V1.3対応 commandで使用する値をセット\r\n    event.currentTarget.data = 'moveBackward';\r\n    this.store.dispatch(new SharedCommand.MoveObject({ event: event }, this));\r\n  }\r\n\r\n  /**\r\n   * 必要に応じて、このオブジェクトのプロパティとレイアウトを検証および更新し、それを再描画します。\r\n   */\r\n  validateNow(): void {\r\n    // ★Stitch V1.3対応 当メソッドをコールすることで結果的に描画が更新されているのでセクション数の更新を行う事とする\r\n    this.executeBindings();\r\n  }\r\n\r\n  /**\r\n   * セクション数のバインド情報を更新します\r\n   */\r\n  executeBindings() {\r\n    this.setSectionNo();\r\n  }\r\n\r\n  // ★Stitch V1.3対応  sectionCntLabel.executeBindings() の代わり, ロジックは get sectionNo() を移植\r\n  /**\r\n   * 選択中セクションNoの表示を更新する\r\n   */\r\n  private setSectionNo() {\r\n    const sectionVo: SectionVO = this.thumbnailList.selectedItem as SectionVO;\r\n    if (sectionVo == null) {\r\n      this.logger.info('get sectionNo() 選択が解除されています。');\r\n    }\r\n\r\n    // ★Stitch V1.3対応 null対応\r\n    this.sectionNo = sectionVo == null ? 0 : sectionVo.sectionNo || 0;\r\n  }\r\n}\r\n","import { WordingService } from '../../../core/services/wording.service';\r\nimport { RsnMenuItem } from '../../../shared/models/rsn-menu-item';\r\n\r\n/**\r\n * 読み取りモード用のコンテキストメニューのデータを返します\r\n * @param wording ワーディングサービス\r\n */\r\nexport function getReadMenuData(wording: WordingService): RsnMenuItem[] {\r\n  // ★Stitch V1.3対応 SectionView.mxml の　<mx:ArrayCollection id=\"readMenu\"> を元に作成\r\n  // separatorBefore=\"true\" については、設定しているデータの前にseparatorを挿入する\r\n  return [\r\n    { name: 'openApplication', label: wording.get('lbl.menu.openapp') },\r\n    { name: 'openFtsData', label: wording.get('lbl.menu.openftsdata') },\r\n    { separator: true },\r\n    { name: 'print', label: wording.get('lbl.menu.print') },\r\n    { name: 'sectionDownload', label: wording.get('lbl.menu.download') }\r\n  ];\r\n}\r\n\r\n/**\r\n * 更新モード用のコンテキストメニューのデータを返します\r\n * @param wording ワーディングサービス\r\n */\r\nexport function getEditableMenu(wording: WordingService): RsnMenuItem[] {\r\n  // ★Stitch V1.3対応 SectionView.mxml の　<mx:ArrayCollection id=\"editableMenu\"> を元に作成\r\n  // separatorBefore=\"true\" については、設定しているデータの前にseparatorを挿入する\r\n  return [\r\n    { name: 'openApplication', label: wording.get('lbl.menu.openapp') },\r\n    { name: 'openFtsData', label: wording.get('lbl.menu.openftsdata') },\r\n    { name: 'addTag', label: wording.get('lbl.menu.addtag') },\r\n    { name: 'deleteTag', label: wording.get('lbl.menu.deletetag') },\r\n    { name: 'editTag', label: wording.get('lbl.menu.edittag') },\r\n    { name: 'replace', label: wording.get('lbl.menu.sectionreplace') },\r\n    { name: 'add', label: wording.get('lbl.menu.add') },\r\n    { name: 'del', label: wording.get('lbl.menu.del') },\r\n    { name: 'renameSection', label: wording.get('lbl.menu.rename') },\r\n    { separator: true },\r\n    { name: 'moveTop', label: wording.get('lbl.menu.top') },\r\n    { name: 'moveForward', label: wording.get('lbl.menu.forward') },\r\n    { name: 'moveBackward', label: wording.get('lbl.menu.backword') },\r\n    { name: 'moveBottom', label: wording.get('lbl.menu.bottom') },\r\n    { separator: true },\r\n    { name: 'divide', label: wording.get('lbl.menu.rightmenudivide') },\r\n    { separator: true },\r\n    { name: 'sectionDownload', label: wording.get('lbl.menu.download') }\r\n  ];\r\n}\r\n","import { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ChangeModeCommand } from '../../commands/thumbnail/change-mode-command';\r\n\r\nimport { ActionToCommand } from './../../../core/services/action-to-command';\r\n\r\nexport const thumbnailViewCommandMap: ActionToCommand[] = [\r\n  { action: SharedCommand.SharedActionTypes.ItemClick, command: ChangeModeCommand }\r\n];\r\n","module.exports = \"<div class=\\\"container\\\">\\r\\n  <p-tabView (onChange)=\\\"onTabChange($event)\\\">\\r\\n    <!-- タブの切り替えのみ実装 -->\\r\\n    <p-tabPanel [header]=\\\"label\\\" *ngFor=\\\"let label of tabLabel; let i = index\\\" [selected]=\\\"i == 0\\\"> </p-tabPanel>\\r\\n  </p-tabView>\\r\\n  <!-- タブの外側にセクションviewを配置 -->\\r\\n  <app-section-view></app-section-view>\\r\\n</div>\\r\\n\"","module.exports = \".container {\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column; }\\n  .container app-section-view {\\n    flex-grow: 1; }\\n  :host ::ng-deep .container .ui-tabview-panels {\\n  display: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvdGh1bWJuYWlsL0M6XFxVc2Vyc1xcZzEwMDE2ODUxXFxEb2N1bWVudHNcXGFuZ3VsYXItd29ya3NwYWNlXFxzbWEtbmF2aVxcYW5ndWxhclxccnNuL3NyY1xcYXBwXFx2aWV3ZXJcXGNvbnRhaW5lcnNcXHRodW1ibmFpbFxcdGh1bWJuYWlsLXZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0VBRVosYUFBYTtFQUNiLHNCQUFzQixFQUFBO0VBSnhCO0lBVUksWUFBWSxFQUFBO0VBSWhCO0VBSUksYUFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvdGh1bWJuYWlsL3RodW1ibmFpbC12aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIC8vIOe4puS4puOBuVxyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuXHJcbiAgLy8g44K/44OW44Gv5Zu65a6a6auY44GV44Gn6KGo56S6XHJcblxyXG4gIGFwcC1zZWN0aW9uLXZpZXcge1xyXG4gICAgLy8g44K744Kv44K344On44Oz6YOo5YiG44Gv5q6L44KK44Gu6auY44GV5YWo6YOoXHJcbiAgICBmbGV4LWdyb3c6IDE7XHJcbiAgfVxyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAgLmNvbnRhaW5lciB7XHJcbiAgLy8g44K/44OW6YOo5YiG44Gg44GR6KGo56S644GX44Gm5Lit6Lqr44Gu44Kz44Oz44OG44Oz44OE6YOo5YiG44Gv5LiN6KaB44Gu44Gf44KB6Zqg44GZXHJcbiAgLy8gOmhvc3QgOjpuZy1kZWVwIC51aS10YWJ2aWV3LXBhbmVscyB7XHJcbiAgLnVpLXRhYnZpZXctcGFuZWxzIHtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgfVxyXG59XHJcbiJdfQ== */\"","import { Component, OnInit, ViewChild, ViewChildren } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { TabPanel, TabView } from 'primeng/tabview';\r\n\r\nimport { ItemClickEvent } from '../../../core/event/item-click-event';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { StateUtilService } from '../../../core/services/state-util.service';\r\nimport { ViewManagerService } from '../../../core/services/view-manager.service';\r\nimport { Sys0ViewComponent } from '../../../shared/components/sys0-view/sys0-view.component';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerState } from '../../store/viewer.state';\r\nimport { SectionViewComponent } from '../section/section-view.component';\r\n\r\n/**\r\n * サムネイル一覧ビュー\r\n */\r\n@Component({\r\n  selector: 'app-thumbnail-view',\r\n  templateUrl: './thumbnail-view.component.html',\r\n  styleUrls: ['./thumbnail-view.component.scss']\r\n})\r\nexport class ThumbnailViewComponent extends Sys0ViewComponent implements OnInit {\r\n  /**\r\n   * タブのヘッダー部データソース\r\n   */\r\n  tabLabel: string[] = [];\r\n\r\n  /**\r\n   * セクションviewへの参照\r\n   */\r\n  @ViewChild(SectionViewComponent) sectionView: SectionViewComponent;\r\n\r\n  /**\r\n   * タブへの参照\r\n   */\r\n  @ViewChild(TabView) mainTabBar: TabView;\r\n\r\n  /** テンプレートに配置したTab全てへのアクセス */\r\n  @ViewChildren(TabPanel) tabPanels: TabPanel[];\r\n\r\n  constructor(\r\n    protected stateUtilService: StateUtilService,\r\n    private controllerService: ControllerService,\r\n    private viewManagerService: ViewManagerService,\r\n    private store: Store<ViewerState>\r\n  ) {\r\n    super(stateUtilService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    // viewサービスへの登録\r\n    this.viewManagerService.set(ViewerViewTypes.ThumbnailView, this);\r\n    // コマンドマップのセット\r\n    this.commandMapDef = [];\r\n    this.controllerService.addCommandMap(this);\r\n  }\r\n\r\n  /**\r\n   * タブの変更イベント\r\n   * @param event\r\n   */\r\n  onTabChange(event) {\r\n    const itemClickEvent: ItemClickEvent = new ItemClickEvent(ItemClickEvent.ITEM_CLICK);\r\n    itemClickEvent.target = this.mainTabBar;\r\n    itemClickEvent.index = event.index;\r\n    const payload = { event: itemClickEvent };\r\n    this.store.dispatch(new SharedCommand.ItemClick(payload, this));\r\n  }\r\n\r\n  /**\r\n   * 選択されているTabのIndexを返します\r\n   * @returns 選択TabIndex\r\n   */\r\n  getSelectedTabIndex() {\r\n    let selectedIndex = -1;\r\n\r\n    this.tabPanels.forEach((tabPanel, index) => {\r\n      if (tabPanel.selected) {\r\n        selectedIndex = index;\r\n      }\r\n    });\r\n\r\n    return selectedIndex;\r\n  }\r\n}\r\n","import { ActionToCommand } from '../../../core/services/action-to-command';\r\nimport { EditTagCommand } from '../../../main/commands/document/edit-tag-command';\r\nimport { CreationCompleteBaseCommand } from '../../../shared/commands/creation-complete-base-command';\r\nimport { MenuClickCommand } from '../../../shared/commands/menu-click-command';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { HelpClickCommand } from '../../commands/core/help-click-command';\r\nimport { ViewerDocumentInformationChangeMenuCommand } from '../../commands/dialog/viewer-document-information-change-menu-command';\r\nimport { ViewerDocumentInformationChangeTabNavigator } from '../../commands/dialog/viewer-document-information-change-tab-navigator';\r\nimport { ViewerDocumentInformationGetUserNumberCommand } from '../../commands/dialog/viewer-document-information-getUser-number-command';\r\nimport { ViewerDocumentInformationOkCancelCommand } from '../../commands/dialog/viewer-document-information-ok-cancel-command';\r\nimport { ViewerInformDialogOkCancelCommand } from '../../commands/dialog/viewer-inform-dialog-ok-cancel-command';\r\nimport { ViewerShowDocumentInformationCommand } from '../../commands/dialog/viewer-show-document-information-command';\r\nimport { AddSectionCommand } from '../../commands/menu/add-section-command';\r\n\r\nimport { ChangeModeCommand } from '../../commands/menu/change-mode-command';\r\nimport { DeleteCommand } from '../../commands/menu/delete-command';\r\nimport { DivideSectionCommand } from '../../commands/menu/divide-section-command';\r\nimport { DownloadCommand } from '../../commands/menu/download-command';\r\nimport { MenuControlCommand } from '../../commands/menu/menu-control-command';\r\nimport { MoveCommand } from '../../commands/menu/move-command';\r\nimport { OpenFullTextApplicationCommand } from '../../commands/menu/open-full-text-application-command';\r\nimport { ReplaceSectionCommand } from '../../commands/menu/replace-section-command';\r\nimport { SelectAllCommand } from '../../commands/menu/select-all-command';\r\nimport { UnselectCommand } from '../../commands/menu/unselect-command';\r\nimport { UpdateCommand } from '../../commands/menu/update-command';\r\nimport { ViewerShowCreateURLCommand } from '../../commands/menu/viewer-show-create-url-command';\r\nimport { ViewerShowDocumentSubDataDialogCommand } from '../../commands/menu/viewer-show-document-sub-data-dialog-command';\r\nimport { ViewerShowInformDialogCommand } from '../../commands/menu/viewer-show-inform-dialog-command';\r\nimport { ChangeModeCommand as ThumbChangeModeCommand} from '../../commands/thumbnail/change-mode-command';\r\nimport { AddTagCommand } from '../../commands/thumbnail/section/add-tag-command';\r\nimport { DeleteTagCommand } from '../../commands/thumbnail/section/delete-tag-command';\r\nimport { RenameSectionCommand } from '../../commands/thumbnail/section/rename-section-command';\r\nimport { ViewerCommand } from '../../store/viewer.actions';\r\n\r\nimport { OpenApplicationCommand } from '../../commands/menu/open-application-command';\r\n\r\nexport const viewerBaseCommandMap: ActionToCommand[] = [\r\n  // メニュークリック\r\n  { action: SharedCommand.SharedActionTypes.MenuClick, command: MenuClickCommand },\r\n\r\n  // CreationComplete\r\n  { action: SharedCommand.SharedActionTypes.CreationComplete, command: CreationCompleteBaseCommand },\r\n\r\n  // メニュー(開く)\r\n  { action: ViewerCommand.ViewerActionTypes.MenuShow, command: MenuControlCommand },\r\n\r\n  // メニュー(閉じる)\r\n  { action: ViewerCommand.ViewerActionTypes.MenuHide, command: MenuControlCommand },\r\n\r\n  // ファイル-更新モードへ切り替え\r\n  { action: SharedCommand.SharedActionTypes.ChangeMode, command: ChangeModeCommand },\r\n\r\n  // 読み取りモード切替\r\n  { action: SharedCommand.SharedActionTypes.UpdateComplete, command: ChangeModeCommand },\r\n\r\n  // ファイル-プロパティ\r\n  { action: SharedCommand.SharedActionTypes.Property, command: ViewerShowDocumentInformationCommand },\r\n\r\n  // 文書情報Ok、Cancel\r\n  { action: SharedCommand.SharedActionTypes.DocumentInformationClick, command: ViewerDocumentInformationOkCancelCommand },\r\n\r\n  // 文書情報タブ切り替え\r\n  { action: SharedCommand.SharedActionTypes.DocumentInformationChangeTab, command: ViewerDocumentInformationChangeTabNavigator },\r\n\r\n  // 文書情報採番\r\n  { action: SharedCommand.SharedActionTypes.GetUserNumber, command: ViewerDocumentInformationGetUserNumberCommand },\r\n\r\n  // 文書プロパティメニュー切り替え\r\n  { action: SharedCommand.SharedActionTypes.ChangeMenu, command: ViewerDocumentInformationChangeMenuCommand },\r\n\r\n  // 文書-通知\r\n  { action: SharedCommand.SharedActionTypes.Inform, command: ViewerShowInformDialogCommand },\r\n\r\n  // 通知ダイアログのOK、Cancelボタンクリック\r\n  { action: SharedCommand.SharedActionTypes.InformDialogOkCancel, command: ViewerInformDialogOkCancelCommand },\r\n\r\n  // 編集-追加\r\n  { action: SharedCommand.SharedActionTypes.Add, command: AddSectionCommand },\r\n\r\n  // 編集-差し替え\r\n  { action: SharedCommand.SharedActionTypes.Replace, command: ReplaceSectionCommand },\r\n\r\n  // 編集-削除\r\n  { action: SharedCommand.SharedActionTypes.Delete, command: DeleteCommand },\r\n\r\n  // セクション-名前の変更\r\n  { action: ViewerCommand.ViewerActionTypes.RenameSection, command: RenameSectionCommand },\r\n\r\n  // 移動-先頭へ移動\r\n  { action: ViewerCommand.ViewerActionTypes.MoveTop, command: MoveCommand },\r\n\r\n  // 次へ\r\n  { action: ViewerCommand.ViewerActionTypes.MoveForward, command: MoveCommand },\r\n\r\n  // 前へ\r\n  { action: ViewerCommand.ViewerActionTypes.MoveBackward, command: MoveCommand },\r\n\r\n  // 移動-最後へ移動\r\n  { action: ViewerCommand.ViewerActionTypes.MoveBottom, command: MoveCommand },\r\n\r\n  // 文書-ダウンロード\r\n  { action: SharedCommand.SharedActionTypes.Download, command: DownloadCommand },\r\n\r\n  // セクション-ダウンロード\r\n  { action: SharedCommand.SharedActionTypes.SectionDownload, command: DownloadCommand },\r\n\r\n  // 全て選択\r\n  { action: SharedCommand.SharedActionTypes.SelectAll, command: SelectAllCommand },\r\n\r\n  // 選択解除\r\n  { action: SharedCommand.SharedActionTypes.Unselect, command: UnselectCommand },\r\n\r\n  // 表示-最新の情報に更新\r\n  { action: SharedCommand.SharedActionTypes.Update, command: UpdateCommand },\r\n\r\n  // 申請\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // { action: SharedCommand.SharedActionTypes.Apply, command: ViewerShowCirculateDialogCommand },\r\n\r\n  // 審査/承認\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // { action: SharedCommand.SharedActionTypes.Approve, command: ViewerShowCirculateDialogCommand },\r\n\r\n  // 差し戻し\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // { action: SharedCommand.SharedActionTypes.PassBack, command: ViewerShowCirculateDialogCommand },\r\n\r\n  // 取り下げ\r\n  // ★Stitch V1.3対応\r\n  // ワークフロー機能は提供しない\r\n  // { action: SharedCommand.SharedActionTypes.Withdraw, command: ViewerShowCirculateDialogCommand },\r\n\r\n  // ツール-URLのコピー\r\n  { action: SharedCommand.SharedActionTypes.CopyUrl, command: ViewerShowCreateURLCommand },\r\n\r\n  // ツール-モバイルURLのコピー\r\n  { action: SharedCommand.SharedActionTypes.CopyMobileUrl, command: ViewerShowCreateURLCommand },\r\n\r\n  // 文書-分割\r\n  { action: SharedCommand.SharedActionTypes.Divide, command: DivideSectionCommand },\r\n\r\n  // 全文検索データを開く(Full Text Search Data)\r\n  { action: SharedCommand.SharedActionTypes.OpenFtsData, command: OpenFullTextApplicationCommand },\r\n\r\n  // ツール-サブデータの作成\r\n  { action: SharedCommand.SharedActionTypes.ReCreateSubData, command: ViewerShowDocumentSubDataDialogCommand },\r\n\r\n  // マニュアル表示\r\n  { action: SharedCommand.SharedActionTypes.HelpClick, command: HelpClickCommand },\r\n\r\n  // ビューアーモード変更(サムネイルエリアのタブ切り替え)\r\n  { action: SharedCommand.SharedActionTypes.ItemClick, command: ThumbChangeModeCommand },\r\n\r\n  // 付箋をつける\r\n  { action: SharedCommand.SharedActionTypes.AddTag, command: AddTagCommand },\r\n\r\n  // 付箋を編集する\r\n  { action: SharedCommand.SharedActionTypes.EditTag, command: EditTagCommand },\r\n\r\n  // 付箋を削除する\r\n  { action: SharedCommand.SharedActionTypes.DeleteTag, command: DeleteTagCommand },\r\n\r\n  // セクション-アプリケーションで開く\r\n  { action: SharedCommand.SharedActionTypes.OpenApplication, command: OpenApplicationCommand }\r\n];\r\n","module.exports = \"<app-sys0-view>\\r\\n  <!-- menu -->\\r\\n  <app-menu-box-base\\r\\n    #menuBar\\r\\n    class=\\\"app-menu-box-base\\\"\\r\\n    [menuDataProvider]=\\\"menuDataProvider\\\"\\r\\n    [userLabel]=\\\"userLabel\\\"\\r\\n    [useExitButton]=\\\"locator.currentMode\\\"\\r\\n    [exitLabel]=\\\"exitLabel\\\"\\r\\n    (menuItemClick)=\\\"menuItemClickHandler($event)\\\"\\r\\n    (exitClick)=\\\"exitButtonClickHandler($event)\\\"\\r\\n  ></app-menu-box-base>\\r\\n\\r\\n  <!-- MainView -->\\r\\n  <app-main-view #mainView></app-main-view>\\r\\n</app-sys0-view>\\r\\n\"","module.exports = \"app-sys0-view {\\n  width: 100%;\\n  height: 100%;\\n  min-height: 386px;\\n  display: flex;\\n  flex-direction: column; }\\n  app-sys0-view .app-menu-box-base {\\n    width: 100%;\\n    height: 34px; }\\n  app-sys0-view app-main-view {\\n    width: 100%;\\n    height: calc(100% - 34px);\\n    min-height: calc(100% - 386px); }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvdmlld2VyLWJhc2UvQzpcXFVzZXJzXFxnMTAwMTY4NTFcXERvY3VtZW50c1xcYW5ndWxhci13b3Jrc3BhY2VcXHNtYS1uYXZpXFxhbmd1bGFyXFxyc24vc3JjXFxhcHBcXHZpZXdlclxcY29udGFpbmVyc1xcdmlld2VyLWJhc2VcXHZpZXdlci1iYXNlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixpQkFMZ0I7RUFNaEIsYUFBYTtFQUNiLHNCQUFzQixFQUFBO0VBTHhCO0lBUUksV0FBVztJQUNYLFlBWmMsRUFBQTtFQUdsQjtJQWFJLFdBQVc7SUFDWCx5QkFBb0M7SUFDcEMsOEJBQXVDLEVBQUEiLCJmaWxlIjoic3JjL2FwcC92aWV3ZXIvY29udGFpbmVycy92aWV3ZXItYmFzZS92aWV3ZXItYmFzZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiRtZW51LWhlaWdodDogMzRweDtcclxuJG1pbi1oZWlnaHQ6IDM4NnB4O1xyXG5cclxuYXBwLXN5czAtdmlldyB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIG1pbi1oZWlnaHQ6ICRtaW4taGVpZ2h0O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuXHJcbiAgLmFwcC1tZW51LWJveC1iYXNlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAkbWVudS1oZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBhcHAtbWFpbi12aWV3IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAjeyRtZW51LWhlaWdodH0pO1xyXG4gICAgbWluLWhlaWdodDogY2FsYygxMDAlIC0gI3skbWluLWhlaWdodH0pO1xyXG4gIH1cclxufVxyXG4iXX0= */\"","import { Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ISupportCommandMap } from '../../../core/commands/i-support-command-map';\r\nimport { MenuEvent } from '../../../core/event/menu-event';\r\nimport { BaseModelLocator } from '../../../core/locator/base-model-locator';\r\nimport { ActionToCommand } from '../../../core/services/action-to-command';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { StateUtilService } from '../../../core/services/state-util.service';\r\nimport { ViewManagerService } from '../../../core/services/view-manager.service';\r\nimport { WordingService } from '../../../core/services/wording.service';\r\nimport { MenuBoxBaseComponent } from '../../../shared/components/menu-box-base/menu-box-base.component';\r\nimport { RsnMenuItem } from '../../../shared/models/rsn-menu-item';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport * as SharedSelector from '../../../shared/store/shared.selectors';\r\nimport { SharedState } from '../../../shared/store/shared.state';\r\nimport { ViewerModelLocator } from '../../locator/viewer-model-locator';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { MainViewComponent } from '../main-view/main-view.component';\r\n\r\nimport { getViewerMenuData } from './viewer-base.menudata';\r\n\r\n/**\r\n * ビューア画面のベースコンポーネント\r\n */\r\n@Component({\r\n  selector: 'app-viewer-base',\r\n  templateUrl: './viewer-base.component.html',\r\n  styleUrls: ['./viewer-base.component.scss']\r\n})\r\nexport class ViewerBaseComponent implements OnInit, ISupportCommandMap {\r\n  @ViewChild(MenuBoxBaseComponent) menuBar: MenuBoxBaseComponent;\r\n  /**\r\n   * コマンドマップ\r\n   */\r\n  commandMapDef: ActionToCommand[] = [];\r\n\r\n  /**\r\n   * メニュー項目Provider\r\n   */\r\n  menuDataProvider: RsnMenuItem[];\r\n\r\n  /**\r\n   * ログイン名ラベル\r\n   */\r\n  userLabel = '';\r\n\r\n  /**\r\n   * locatorの参照\r\n   */\r\n  locator: ViewerModelLocator = ViewerModelLocatorService.getInstance();\r\n\r\n  /**\r\n   * 閉じるボタンのラベル\r\n   */\r\n  exitLabel = '';\r\n\r\n  /**\r\n   * コンストラクタ\r\n   * @param store State定義\r\n   * @param stateUtil 状態管理サービス\r\n   * @param wording 用語解決サービス\r\n   * @param controller\r\n   * @param viewManager\r\n   */\r\n  constructor(\r\n    private store: Store<SharedState>,\r\n    private stateUtil: StateUtilService,\r\n    private wording: WordingService,\r\n    private controller: ControllerService,\r\n    private viewManager: ViewManagerService\r\n  ) {\r\n    this.viewManager.set(ViewerViewTypes.ViewerBase, this);\r\n  }\r\n\r\n  /**\r\n   * ライフサイクルフック：初期化\r\n   */\r\n  ngOnInit() {\r\n    this.controller.addCommandMap(this);\r\n    this.menuDataProvider = getViewerMenuData(this.wording);\r\n    this.userLabel = this.wording.get('lbl.common.user');\r\n    this.exitLabel = this.wording.get('lbl.viewer.close');\r\n  }\r\n\r\n  /**\r\n   * 閉じるボタンを押下した際のイベントハンドラー\r\n   * @param event イベント\r\n   */\r\n  exitButtonClickHandler(event): void {\r\n    const payload = { event };\r\n    this.store.dispatch(new SharedCommand.ChangeMode(payload, this));\r\n  }\r\n\r\n  /**\r\n   * メニューをクリックした際のイベントハンドラー\r\n   * @param event イベント\r\n   */\r\n  menuItemClickHandler(event: MenuEvent): void {\r\n    const payload = { event };\r\n    this.store.dispatch(new SharedCommand.MenuClick(payload, this));\r\n  }\r\n}\r\n","import { WordingService } from '../../../core/services/wording.service';\r\nimport { RsnMenuItem } from '../../../shared/models/rsn-menu-item';\r\n\r\n/**\r\n * メイン画面メニューの元データを返します\r\n * @param wording ワーディングサービス\r\n */\r\nexport function getViewerMenuData(wording: WordingService): RsnMenuItem[] {\r\n  // ★Stitch V1.3対応 Viewer.mxml の　<core:xmlMenu> を元に作成\r\n  return [\r\n    {\r\n      label: wording.get('lbl.menu.file'),\r\n      name: 'file',\r\n      items: [\r\n        { label: wording.get('lbl.menu.changemode'), name: 'changeMode' },\r\n        {\r\n          label: wording.get('lbl.menu.print'),\r\n          name: 'print',\r\n          data: 'root',\r\n          items: [\r\n            { label: wording.get('lbl.menu.allsection'), name: 'print', data: 'all' },\r\n            { label: wording.get('lbl.menu.selectsection'), name: 'print', data: 'select' }\r\n          ]\r\n        },\r\n        { label: wording.get('lbl.menu.property'), name: 'property' }\r\n      ]\r\n    },\r\n    {\r\n      label: wording.get('lbl.menu.view'),\r\n      name: 'view',\r\n      items: [{ label: wording.get('lbl.menu.refresh'), name: 'update' }]\r\n    },\r\n    {\r\n      label: wording.get('lbl.menu.edit'),\r\n      items: [\r\n        { label: wording.get('lbl.menu.sectionreplace'), name: 'replace' },\r\n        { label: wording.get('lbl.menu.add'), name: 'add' },\r\n        { label: wording.get('lbl.menu.del'), name: 'del' }\r\n      ]\r\n    },\r\n    {\r\n      label: wording.get('lbl.menu.move'),\r\n      name: 'move',\r\n      items: [{ label: wording.get('lbl.menu.top'), name: 'moveTop' }, { label: wording.get('lbl.menu.bottom'), name: 'moveBottom' }]\r\n    },\r\n    {\r\n      label: wording.get('lbl.menu.section'),\r\n      name: 'section',\r\n      items: [\r\n        { label: wording.get('lbl.menu.rename'), name: 'renameSection' },\r\n        { label: wording.get('lbl.menu.download'), name: 'sectionDownload' },\r\n        { label: wording.get('lbl.menu.openapp'), name: 'openApplication' }\r\n      ]\r\n    },\r\n    {\r\n      label: wording.get('lbl.menu.document'),\r\n      name: 'document',\r\n      items: [\r\n        { label: wording.get('lbl.menu.download'), name: 'download', data: 'document' },\r\n        { label: wording.get('lbl.menu.inform'), name: 'inform' },\r\n        { label: wording.get('lbl.menu.divide'), name: 'divide' }\r\n      ]\r\n    },\r\n    {\r\n      label: wording.get('lbl.menu.tool'),\r\n      name: 'tool',\r\n      items: [\r\n        { label: wording.get('lbl.menu.createsubdata'), name: 'reCreateSubData' },\r\n        { label: wording.get('lbl.menu.copyurl'), name: 'copyUrl' },\r\n        { label: wording.get('lbl.menu.copymobileurl'), name: 'copyMobileUrl' }\r\n      ]\r\n    }\r\n  ];\r\n}\r\n","import { ViewToCommandMap } from '../../core/services/i-view-command-map-mapping';\r\nimport { confirmUpdateCommandMap } from './dialogs/confirm-update-dialog/confirm-update-dialog-commandmap';\r\nimport { ConfirmUpdateDialogComponent } from './dialogs/confirm-update-dialog/confirm-update-dialog.component';\r\n\r\nimport { divideSectionDialogCommandMap } from './dialogs/divide-section-dialog/divide-section-dialog.commandmap';\r\nimport { DivideSectionDialogComponent } from './dialogs/divide-section-dialog/divide-section-dialog.component';\r\nimport { editConfirmDialogCommandMap } from './dialogs/edit-confirm-dialog/edit-confirm-dialog.commandmap';\r\nimport { EditConfirmDialogComponent } from './dialogs/edit-confirm-dialog/edit-confirm-dialog.component';\r\nimport { mainViewCommandMap } from './main-view/main-view-commandmap';\r\nimport { MainViewComponent } from './main-view/main-view.component';\r\nimport { pdfViewCommandMap } from './pdf/pdf-view.commandmap';\r\nimport { PdfViewComponent } from './pdf/pdf-view.component';\r\nimport { sectionViewCommandMap } from './section/section-view.commandmap';\r\nimport { SectionViewComponent } from './section/section-view.component';\r\nimport { thumbnailViewCommandMap } from './thumbnail/thumbnail-view.commandmap';\r\nimport { ThumbnailViewComponent } from './thumbnail/thumbnail-view.component';\r\nimport { viewerBaseCommandMap } from './viewer-base/viewer-base.commandmap';\r\nimport { ViewerBaseComponent } from './viewer-base/viewer-base.component';\r\nimport { viewerCommandMap } from './viewer/viewer.commandmap';\r\nimport { ViewerComponent } from './viewer/viewer.component';\r\n\r\n/**\r\n * ViewとCommandMapの対応定義を記述する\r\n */\r\nexport const viewerViewToCommandMapDef: ViewToCommandMap[] = [\r\n  { view: ThumbnailViewComponent, commandMap: thumbnailViewCommandMap },\r\n  { view: ViewerBaseComponent, commandMap: viewerBaseCommandMap },\r\n  { view: ViewerComponent, commandMap: viewerCommandMap },\r\n  { view: MainViewComponent, commandMap: mainViewCommandMap },\r\n  //  { view: TreeViewComponent, commandMap: treeCommandMap },\r\n  { view: PdfViewComponent, commandMap: pdfViewCommandMap },\r\n  { view: DivideSectionDialogComponent, commandMap: divideSectionDialogCommandMap },\r\n  { view: SectionViewComponent, commandMap: sectionViewCommandMap },\r\n  { view: EditConfirmDialogComponent, commandMap: editConfirmDialogCommandMap },\r\n  { view: ConfirmUpdateDialogComponent, commandMap: confirmUpdateCommandMap }\r\n];\r\n","import { ActionToCommand } from '../../../core/services/action-to-command';\r\nimport { CreationCompleteBaseCommand } from '../../../shared/commands/creation-complete-base-command';\r\nimport { ResumeEditConfirmCommand } from '../../../shared/commands/resume-edit-confirm-command';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport { AppletMessageCloseCommand } from '../../commands/applet-message-close-command';\r\nimport { EditCompleteCommand } from '../../commands/edit-complete-command';\r\nimport { EditUploadCommand } from '../../commands/edit-upload-command';\r\nimport { EditUploadFtsCommand } from '../../commands/edit-upload-fts-command';\r\nimport { EditUploadSectionCommand } from '../../commands/edit-upload-section-command';\r\nimport { GetDocumentDetailCommand } from '../../commands/get-document-detail-command';\r\nimport { ListContextMenuClickCommand } from '../../commands/list-context-menu-click-command';\r\nimport { Sys0ApplicationCompleteCommand } from '../../commands/sys0-application-complete-command';\r\nimport { ViewerImageEditCommand } from '../../commands/viewer-image-edit-command';\r\nimport { ViewerUnknownFileExtCommand } from '../../commands/viewer-unknown-file-ext-command';\r\nimport { ViewerCommand } from '../../store/viewer.actions';\r\n\r\nexport const viewerCommandMap: ActionToCommand[] = [\r\n  { action: SharedCommand.SharedActionTypes.Sys0ApplicationComplete, command: Sys0ApplicationCompleteCommand },\r\n  { action: SharedCommand.SharedActionTypes.AppletMessageClose, command: AppletMessageCloseCommand },\r\n\r\n  { action: ViewerCommand.ViewerActionTypes.GetDocumentDetail, command: GetDocumentDetailCommand },\r\n\r\n  { action: SharedCommand.SharedActionTypes.CreationComplete, command: CreationCompleteBaseCommand },\r\n\r\n  { action: SharedCommand.SharedActionTypes.ContextMenuClick, command: ListContextMenuClickCommand },\r\n\r\n  // アプリ編集が終了した\r\n  { action: SharedCommand.SharedActionTypes.EditComplete, command: EditCompleteCommand },\r\n\r\n  // 編集したファイルをアップロード\r\n  { action: SharedCommand.SharedActionTypes.EditUploadComplete, command: EditUploadCommand },\r\n  { action: ViewerCommand.ViewerActionTypes.EditUploadSection, command: EditUploadSectionCommand },\r\n  { action: ViewerCommand.ViewerActionTypes.EditUploadFts, command: EditUploadFtsCommand },\r\n\r\n  // サイズが大きくなりすぎた\r\n  { action: SharedCommand.SharedActionTypes.ResumeEdit, command: ResumeEditConfirmCommand },\r\n\r\n  // 関連付けしていないファイル\r\n  { action: SharedCommand.SharedActionTypes.UnknownFileExt, command: ViewerUnknownFileExtCommand },\r\n\r\n  { action: SharedCommand.SharedActionTypes.ImageEdit, command: ViewerImageEditCommand }\r\n];\r\n","module.exports = \"<!-- ViewerBase -->\\r\\n<app-viewer-base *ngIf=\\\"isInitializeComplete\\\"></app-viewer-base>\\r\\n\"","module.exports = \"app-viewer-base {\\n  width: 100%;\\n  height: 100%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld2VyL2NvbnRhaW5lcnMvdmlld2VyL0M6XFxVc2Vyc1xcZzEwMDE2ODUxXFxEb2N1bWVudHNcXGFuZ3VsYXItd29ya3NwYWNlXFxzbWEtbmF2aVxcYW5ndWxhclxccnNuL3NyY1xcYXBwXFx2aWV3ZXJcXGNvbnRhaW5lcnNcXHZpZXdlclxcdmlld2VyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztFQUNYLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL3ZpZXdlci9jb250YWluZXJzL3ZpZXdlci92aWV3ZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJhcHAtdmlld2VyLWJhc2Uge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG4iXX0= */\"","import { Component, ComponentFactoryResolver, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { select, Store } from '@ngrx/store';\r\n\r\nimport { ISupportCommandMap } from '../../../core/commands/i-support-command-map';\r\nimport { BaseEvent } from '../../../core/event/base-event';\r\nimport { DialogInterface } from '../../../core/models/dialog-interface';\r\nimport { ApplicationInitializationService } from '../../../core/services/application-initialization.service';\r\nimport { ControllerService } from '../../../core/services/controller.service';\r\nimport { PopupService } from '../../../core/services/popup.service';\r\nimport { StateUtilService } from '../../../core/services/state-util.service';\r\nimport { ViewManagerService } from '../../../core/services/view-manager.service';\r\nimport { WordingService } from '../../../core/services/wording.service';\r\nimport { ApplicationInitialize } from '../../../core/store/core.actions';\r\nimport * as CoreSelector from '../../../core/store/core.selectors';\r\nimport { SubscriptionManager } from '../../../core/utils/subscription-manager';\r\nimport { Sys0CommonUtil } from '../../../core/utils/sys0-common-util';\r\nimport { SectionVO } from '../../../core/vo/section-vo';\r\nimport { ProgressDialogComponent } from '../../../shared/components/progress-dialog/progress-dialog.component';\r\nimport { Sys0PopupEvent } from '../../../shared/event/sys0-popup-event';\r\nimport * as SharedAction from '../../../shared/store/shared.actions';\r\nimport { SharedCommand } from '../../../shared/store/shared.actions';\r\nimport * as SharedSelector from '../../../shared/store/shared.selectors';\r\nimport { ViewerEnableModel } from '../../models/viewer-enable-model';\r\nimport { ViewerViewTypes } from '../../models/viewer-view-types';\r\nimport { ViewerModelLocatorService } from '../../services/viewer-model-locator.service';\r\nimport { ViewerState } from '../../store/viewer.state';\r\nimport { PdfViewComponent } from '../pdf/pdf-view.component';\r\nimport { SectionViewComponent } from '../section/section-view.component';\r\n\r\n/**\r\n * ビューアです\r\n */\r\n@Component({\r\n  selector: 'app-viewer',\r\n  templateUrl: './viewer.component.html',\r\n  styleUrls: ['./viewer.component.scss']\r\n})\r\nexport class ViewerComponent implements OnInit, ISupportCommandMap {\r\n  // コマンドマップ\r\n  commandMapDef = [];\r\n\r\n  enableModel: ViewerEnableModel;\r\n\r\n  // 初期化完了フラグ\r\n  isInitializeComplete = false;\r\n\r\n  isShowPopup: boolean;\r\n\r\n  // ★Stitch V1.3対応\r\n  // pdfView、thumbnailView、sectionListView(sectionView)は、ViewerManagerで参照するため不要\r\n  // navigateMessageは、stateUtilService及びで参照するため不要\r\n  // loginNameは、ViewerManagerでViewerBaseを取得し、ViewerBase.menuBar.userNameで参照するため不要\r\n  // viewerTitleは、ViewerManagerでMainViewを取得し、MainView.messageAreaView.documentNameで参照するため不要\r\n\r\n  /**  subscriptionを溜め込む */\r\n  private subscriptionManager = new SubscriptionManager();\r\n\r\n  constructor(\r\n    componentFactoryResolver: ComponentFactoryResolver,\r\n    viewContainerRef: ViewContainerRef,\r\n    private initializer: ApplicationInitializationService,\r\n    private store: Store<ViewerState>,\r\n    private popup: PopupService<DialogInterface>,\r\n    private viewManager: ViewManagerService,\r\n    private controller: ControllerService,\r\n    private wording: WordingService,\r\n    private stateUtilService: StateUtilService\r\n  ) {\r\n    this.popup.componentFactoryResolver = componentFactoryResolver;\r\n    this.popup.viewContainerRef = viewContainerRef;\r\n    this.enableModel = new ViewerEnableModel(viewManager);\r\n\r\n    // ロケータ初期化\r\n    ViewerModelLocatorService.initialize();\r\n\r\n    // storeのdispatch() メソッドを差し替え\r\n    Sys0CommonUtil.convertStoreDispatch(this.store);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.viewManager.set(ViewerViewTypes.Root, this);\r\n    this.controller.addCommandMap(this);\r\n    // ApplicationInitializationService に Main/Viewerによって異なるプロパティを与えてから、初期化Actionをdispatchします\r\n    this.initInitializationService();\r\n    // アプリケーション初期化完了アクションのサブスクライブ\r\n    this.subscriptionManager.push(\r\n      this.store.pipe(select(CoreSelector.getApplicationInitializeComplete)).subscribe(isComplete => {\r\n        if (isComplete) {\r\n          this.isInitializeComplete = isComplete;\r\n        }\r\n      })\r\n    );\r\n\r\n    this.store.dispatch(new ApplicationInitialize());\r\n  }\r\n\r\n  onSys0ApplicationComplete(event?: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.Sys0ApplicationComplete(event, this));\r\n  }\r\n\r\n  onAppletMessageClose(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.AppletMessageClose(event, this));\r\n  }\r\n\r\n  onCreationComplete(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.CreationComplete(event, this));\r\n  }\r\n\r\n  onEditComplete(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.EditComplete(event, this));\r\n  }\r\n\r\n  onResumeEditConfirm(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.ResumeEdit(event, this));\r\n  }\r\n\r\n  onAutoEditUploadComplete(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.EditUploadComplete(event, this));\r\n  }\r\n\r\n  onUnknownFileExt(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.UnknownFileExt(event, this));\r\n  }\r\n\r\n  onImageEdit(event: BaseEvent) {\r\n    this.store.dispatch(new SharedCommand.ImageEdit(event, this));\r\n  }\r\n\r\n  refreshMenuEnable() {\r\n    // ★Stitch V1.3対応 メニューデータをstateから取得\r\n    const menuData = this.stateUtilService.getCurrentState(SharedSelector.getMenu);\r\n\r\n    if (menuData == null || this.enableModel == null) {\r\n      return;\r\n    }\r\n\r\n    Sys0CommonUtil.refreshMenuEnable(menuData, this.enableModel);\r\n  }\r\n\r\n  /**\r\n   * 最初のポップアップを開く時の処理です。\r\n   * PDFエリアのIFrameを非表示にします。\r\n   * セクションエリアのD&amp;Dエリアを非表示にします。\r\n   * 進捗中表示以外の場合は、メッセージエリアをクリアします\r\n   */\r\n  protected showPopupHandler(event: Sys0PopupEvent) {\r\n    this.isShowPopup = true; // フラグを立てる\r\n\r\n    // PDFエリアを閉じる\r\n    // ★Stitch V1.3対応 component取得\r\n    const pdfView: PdfViewComponent = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent;\r\n    pdfView.offIFrame(true);\r\n\r\n    // IFrameエリアを閉じる\r\n    // ★Stitch V1.3対応 component取得\r\n    const sectionView: SectionViewComponent = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    sectionView.visibleIFrameHtml = false;\r\n\r\n    if (!(event.targetObj instanceof ProgressDialogComponent)) {\r\n      // ★Stitch V1.3対応 navigateMessage対応\r\n      this.store.dispatch(new SharedAction.SetNavigateMessage(''));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 最後のポップアップが閉じられるときの処理です。\r\n   * セクションが選択されている場合で、PDFがある場合はPDFを表示します。\r\n   * PDFがない場合は、PDFを表示しません。\r\n   * セクションが選択されていない場合は、PDFを非表示にします。\r\n   */\r\n  protected hidePopupHandler(event: any) {\r\n    this.isShowPopup = false; // フラグをおろす\r\n\r\n    // ★Stitch V1.3対応 component取得\r\n    const sectionView: SectionViewComponent = this.viewManager.get(ViewerViewTypes.SectionView) as SectionViewComponent;\r\n    const pdfView: PdfViewComponent = this.viewManager.get(ViewerViewTypes.PdfView) as PdfViewComponent;\r\n\r\n    const selectedItem: SectionVO = sectionView.thumbnailList.selectedItem as SectionVO;\r\n    if (selectedItem) {\r\n      if (selectedItem.enablePDF) {\r\n        // PDFエリアを開く\r\n        pdfView.offIFrame(false);\r\n      } else {\r\n        pdfView.iframe.source = null;\r\n        pdfView.offIFrame(true);\r\n        pdfView.message = this.wording.get('warn.pdf.datanonexist');\r\n      }\r\n    } else {\r\n      pdfView.offIFrame(true);\r\n    }\r\n\r\n    if (sectionView.iframe.visible) {\r\n      // IFrameエリアを開く\r\n      sectionView.visibleIFrameHtml = true;\r\n    }\r\n  }\r\n\r\n  private initInitializationService() {\r\n    this.initializer.preLoaderMessageKey = 'info.progress.viewerstarting';\r\n    this.initializer.autoPreLoaderHide = false;\r\n  }\r\n}\r\n","import { environment } from '../../../environments/environment';\r\nimport { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { ClientInfo } from '../../core/models/client-info';\r\nimport { StateUtilService } from '../../core/services/state-util.service';\r\nimport * as CoreSelector from '../../core/store/core.selectors';\r\nimport { DocumentVO } from '../../core/vo/document-vo';\r\nimport { isSectionVO, SectionVO } from '../../core/vo/section-vo';\r\n\r\nimport { LoginInfo } from './../../core/models/login-info';\r\nimport { UrlService } from './../../core/services/url.service';\r\n/**\r\n * ビューアー画面のモデルロケーター\r\n */\r\nexport class ViewerModelLocator extends BaseModelLocator {\r\n  /**\r\n   * サムネイル取得中かどうかのフラグ用\r\n   */\r\n  static REQUEST_THUMBNAUL = 'requestThumbnail';\r\n\r\n  /**\r\n   * ビューアーID定数\r\n   */\r\n  private static VIEWER_ID = 'viewId';\r\n\r\n  /**\r\n   * 更新モードで編集操作を行ったかどうか。\r\n   */\r\n  updated = false;\r\n\r\n  /**\r\n   * 個人設定で、PDFを表示するにしているかどうか。\r\n   */\r\n  showPdf: number = BaseModelLocator.PDF_SHOW;\r\n\r\n  /**\r\n   * セクションを右クリックしたかどうかを表します。\r\n   */\r\n  rightClick = true;\r\n\r\n  /**\r\n   * ビューアーID\r\n   */\r\n  viewerId: string | null = null;\r\n\r\n  /**\r\n   * 文書プロパティ表示用\r\n   */\r\n  documentPropInfo: DocumentVO | null = null;\r\n\r\n  /**\r\n   * ドロップ先のアイテム\r\n   */\r\n  dropTragetObject: any = null;\r\n\r\n  /**\r\n   * アップロードされたファイルの総数\r\n   */\r\n  uploadSectionCount = -1;\r\n\r\n  /**\r\n   * アップロード中(D&D)\r\n   */\r\n  uploading = false;\r\n\r\n  /**\r\n   * 登録済みの文書数\r\n   */\r\n  createdSectionCount = -1;\r\n\r\n  /**\r\n   * セクション\r\n   */\r\n  section: SectionVO | null = null;\r\n\r\n  /**\r\n   * ビューアー起動時に編集するセクション番号\r\n   * nullの場合は、通常起動。\r\n   */\r\n  editSection: any = null;\r\n\r\n  /**\r\n   * 起動中のアプリケーション管理用\r\n   */\r\n  runnningAppSections = new Map<string, number>();\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor(protected urlService: UrlService, protected stateUtilService: StateUtilService) {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * セクションNoを再採番する。\r\n   */\r\n  renumberSectionList(): void {\r\n    let no = 1;\r\n    if (this.sectionList && this.sectionList.length > 0) {\r\n      for (let sectionVO of this.sectionList) {\r\n        // ★Stitch V1.3対応 clone()メソッドが存在しない可能性があるため、isSectionVoでメソッドを生やす\r\n        isSectionVO(sectionVO);\r\n        const replaceSection: SectionVO = sectionVO.clone() as SectionVO;\r\n        replaceSection.sectionNo = no;\r\n\r\n        if (replaceSection.tag) {\r\n          // 付箋がある場合。\r\n          replaceSection.tag.sectionNo = no; // 付箋のセクション番号を振り直す\r\n        }\r\n\r\n        if (replaceSection.hasOwnProperty(ViewerModelLocator.REQUEST_THUMBNAUL)) {\r\n          replaceSection[ViewerModelLocator.REQUEST_THUMBNAUL] = null; // 削除\r\n        }\r\n\r\n        this.sectionList[no - 1] = replaceSection; // オブジェクトごと入れ替えないとrendererが書き換わらないので。\r\n\r\n        sectionVO = null;\r\n        no++;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * D&Dをリセットする\r\n   */\r\n  resetUploadSection(): void {\r\n    if (this.createdSectionCount >= 0) {\r\n      this.createdSectionCount = -1;\r\n      this.uploadSectionCount = -1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * セクション数を取得する\r\n   */\r\n  get sectionCount(): number {\r\n    if (this.sectionList) {\r\n      return this.sectionList.length;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 起動中のアプリケーション管理用\r\n   */\r\n  get runningApp(): boolean {\r\n    let open = false;\r\n    for (const key of Array.from(this.runnningAppSections.keys())) {\r\n      if (this.runnningAppSections.get(key) === SectionVO.APP_OPEN) {\r\n        open = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return open;\r\n  }\r\n\r\n  set runningApp(value: boolean) {}\r\n\r\n  /**\r\n   * アプリ起動のフラグを消去する。\r\n   *\r\n   * @param key セクションNo\r\n   *\r\n   */\r\n  removeApp(key: string): void {\r\n    this.runnningAppSections.delete(key);\r\n  }\r\n\r\n  /**\r\n   * 全てのアプリ起動情報を消去する。\r\n   */\r\n  removeAllApp(): void {\r\n    this.runnningAppSections.clear();\r\n  }\r\n\r\n  /**\r\n   * JSPのURL取得する。\r\n   */\r\n  getJspUrl(): string {\r\n    // ★Stitch V1.3対応 Sys0Application不要な為、削除\r\n    // const app: Sys0Application = Sys0Application.application;\r\n\r\n    // remoteサーバーのURL\r\n    let remoteUrl: string | null = null;\r\n\r\n    // ★Stitch V1.3対応 clientInfo情報をstateから取得\r\n    const clientInfo: ClientInfo = this.stateUtilService.getCurrentState(CoreSelector.getClientInfo);\r\n    // ★Stitch V1.3対応 LoginInfo情報をstateから取得\r\n    const loginInfo: LoginInfo = this.stateUtilService.getCurrentState(CoreSelector.getLoginInfo);\r\n\r\n    // ★Stitch V1.3対応 urlServiceを使用。BaseURL → getBaseURL()、BaseRemoteUrl → getBaseRemoteUrl()\r\n    // リモートサーバーが指定されているか？\r\n    if (this.urlService.getBaseURL() !== this.urlService.getBaseRemoteUrl()) {\r\n      // ★Stitch V1.3対応 {server.name}の判定を削除\r\n      if (this.urlService.getBaseRemoteUrl() != null) {\r\n        remoteUrl = this.urlService.getBaseRemoteUrl();\r\n      }\r\n    }\r\n\r\n    // ★Stitch V1.3対応 urlServiceを使用。BaseURL → getBaseURL()\r\n    // ★Stitch V1.3対応 開発環境の場合はリモートサーバに向ける\r\n    // IFrameに読み込むURLを生成する。\r\n    // BaseURL\r\n    let url: string = environment.production ? this.urlService.getBaseURL() : this.urlService.getBaseRemoteUrl();\r\n\r\n    // D&D JSPへのパス\r\n    if (this.runningApp) {\r\n      // ★Stitch V1.3対応 clientInfoのVIEWER_DND_DISABLE_PATHを使用\r\n      url += clientInfo.viewerDnDDisablePath;\r\n    } else {\r\n      // ★Stitch V1.3対応 clientInfoのVIEWER_DND_PATHを使用\r\n      url += clientInfo.viewerDnDPath;\r\n    }\r\n\r\n    // remoteUrlが指定されている場合付加する\r\n    if (remoteUrl != null) {\r\n      url += 'remoteUrl=' + remoteUrl + '/';\r\n      // ★Stitch V1.3対応 loginInfoのsessionIdを使用\r\n      url += '&sessionID=' + loginInfo.sessionId;\r\n      url += '&';\r\n    }\r\n\r\n    // アプレットのサイズと背景色を指定する。\r\n    // ★Stitch V1.3対応 clientInfoのVIEWER_DND_STATUSを使用\r\n    url += clientInfo.viewerDnDStatus;\r\n    url += '&' + ViewerModelLocator.VIEWER_ID + '=' + this.viewerId;\r\n\r\n    return url;\r\n  }\r\n}\r\n","import { MenuEnableModel } from '../../core/models/menu-enable-model';\r\nimport { RsnMenuItem } from '../../shared/models/rsn-menu-item';\r\nimport { ViewerBaseComponent } from '../containers/viewer-base/viewer-base.component';\r\n\r\nimport { ApplicationError } from './../../core/application-error';\r\nimport { ViewManagerService } from './../../core/services/view-manager.service';\r\nimport { ViewerViewTypes } from './viewer-view-types';\r\n\r\n/**\r\n * ビューアーのメニュー制御用モデル\r\n *\r\n */\r\nexport class ViewerEnableModel extends MenuEnableModel {\r\n  protected _changeMode = true;\r\n\r\n  /**\r\n   * 更新モード切替\r\n   */\r\n  get changeMode(): boolean {\r\n    return this._changeMode;\r\n  }\r\n  set changeMode(value: boolean) {\r\n    this._changeMode = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('changeMode'), value);\r\n  }\r\n\r\n  protected _updateComplete = false;\r\n\r\n  /**\r\n   * 読み取りモード切替\r\n   */\r\n  get updateComplete(): boolean {\r\n    return this._updateComplete;\r\n  }\r\n  set updateComplete(value: boolean) {\r\n    this._updateComplete = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('updateComplete'), value);\r\n  }\r\n\r\n  protected _showPDF = false;\r\n\r\n  /**\r\n   * PDF表示\r\n   */\r\n  get showPDF(): boolean {\r\n    return this._showPDF;\r\n  }\r\n  set showPDF(value: boolean) {\r\n    this._showPDF = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('showPDF'), value);\r\n    this.setContextMenuEnable('showPDF', value);\r\n  }\r\n\r\n  protected _openFtsData = false;\r\n\r\n  /**\r\n   * 全文検索データ表示\r\n   */\r\n  get openFtsData(): boolean {\r\n    return this._openFtsData;\r\n  }\r\n  set openFtsData(value: boolean) {\r\n    this._openFtsData = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('openFtsData'), value);\r\n    this.setContextMenuEnable('openFtsData', value);\r\n  }\r\n\r\n  protected _replace = false;\r\n\r\n  /**\r\n   * セクション差し替え\r\n   */\r\n  get replace(): boolean {\r\n    return this._replace;\r\n  }\r\n  set replace(value: boolean) {\r\n    this._replace = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('replace'), value);\r\n    this.setContextMenuEnable('replace', value);\r\n  }\r\n\r\n  protected _add = false;\r\n\r\n  /**\r\n   * セクション追加\r\n   */\r\n  get add(): boolean {\r\n    return this._add;\r\n  }\r\n  set add(value: boolean) {\r\n    this._add = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('add'), value);\r\n    this.setContextMenuEnable('add', value);\r\n  }\r\n\r\n  protected _divide = false;\r\n  /**\r\n   * 分割\r\n   */\r\n  get divide(): boolean {\r\n    return this._divide;\r\n  }\r\n  set divide(value: boolean) {\r\n    this._divide = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('divide'), value);\r\n    this.setContextMenuEnable('divide', value);\r\n  }\r\n\r\n  protected _move = false;\r\n\r\n  /**\r\n   * 移動\r\n   */\r\n  get move(): boolean {\r\n    return this._move;\r\n  }\r\n  set move(value: boolean) {\r\n    this._move = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('move'), value);\r\n  }\r\n\r\n  protected _moveTop = false;\r\n  /**\r\n   * 先頭へ\r\n   */\r\n  get moveTop(): boolean {\r\n    return this._moveTop;\r\n  }\r\n  set moveTop(value: boolean) {\r\n    this._moveTop = value;\r\n\r\n    const name = 'moveTop';\r\n    this.setMenuEnable(this.getMenuList('moveTop'), value);\r\n    this.setContextMenuEnable(name, value);\r\n  }\r\n\r\n  protected _moveForward = false;\r\n  /**\r\n   * 前へ\r\n   */\r\n  get moveForward(): boolean {\r\n    return this._moveForward;\r\n  }\r\n  set moveForward(value: boolean) {\r\n    this._moveForward = value;\r\n\r\n    const name = 'moveForward';\r\n    this.setMenuEnable(this.getMenuList(name), value);\r\n    this.setContextMenuEnable(name, value);\r\n  }\r\n\r\n  protected _moveBackward = false;\r\n  /**\r\n   * 後ろへ\r\n   */\r\n  get moveBackward(): boolean {\r\n    return this._moveBackward;\r\n  }\r\n  set moveBackward(value: boolean) {\r\n    this._moveBackward = value;\r\n\r\n    const name = 'moveBackward';\r\n    this.setMenuEnable(this.getMenuList(name), value);\r\n    this.setContextMenuEnable(name, value);\r\n  }\r\n\r\n  protected _moveBottom = false;\r\n  /**\r\n   * 最後へ\r\n   */\r\n  get moveBottom(): boolean {\r\n    return this._moveBottom;\r\n  }\r\n  set moveBottom(value: boolean) {\r\n    this._moveBottom = value;\r\n\r\n    const name = 'moveBottom';\r\n    this.setMenuEnable(this.getMenuList('moveBottom'), value);\r\n    this.setContextMenuEnable(name, value);\r\n  }\r\n\r\n  protected _download = false;\r\n  /**\r\n   * ダウンロード\r\n   */\r\n  get download(): boolean {\r\n    return this._download;\r\n  }\r\n  set download(value: boolean) {\r\n    this._download = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('download'), value);\r\n  }\r\n\r\n  protected _sectionDownload = false;\r\n  /**\r\n   * セクションダウンロード\r\n   */\r\n  get sectionDownload(): boolean {\r\n    return this._sectionDownload;\r\n  }\r\n  set sectionDownload(value: boolean) {\r\n    this._sectionDownload = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('sectionDownload'), value);\r\n    this.setContextMenuEnable('sectionDownload', value);\r\n  }\r\n\r\n  protected _renameSection = false;\r\n  /**\r\n   * セクション名変更\r\n   */\r\n  get renameSection(): boolean {\r\n    return this._renameSection;\r\n  }\r\n  set renameSection(value: boolean) {\r\n    this._renameSection = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('renameSection'), value);\r\n    this.setContextMenuEnable('renameSection', value);\r\n  }\r\n\r\n  protected _print = false;\r\n\r\n  /**\r\n   * 印刷\r\n   */\r\n  get print(): boolean {\r\n    return this._print;\r\n  }\r\n\r\n  set print(value: boolean) {\r\n    this._print = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('select'), value);\r\n    this.setContextMenuEnable('print', value);\r\n  }\r\n\r\n  protected _printAll = true;\r\n\r\n  /**\r\n   * すべてのセクション\r\n   */\r\n  get printAll(): boolean {\r\n    return this._printAll;\r\n  }\r\n  set printAll(value: boolean) {\r\n    this._printAll = value;\r\n\r\n    this.setMenuEnable(this.getMenuList('root'), value);\r\n    this.setMenuEnable(this.getMenuList('all'), value);\r\n  }\r\n\r\n  // ★Stitch V1.3対応 変数を追加\r\n  /**\r\n   * メニューデータの参照\r\n   */\r\n  private menuData: RsnMenuItem[] | null = null;\r\n\r\n  /**\r\n   * コンストラクタです\r\n   */\r\n  constructor(private viewManagerService: ViewManagerService) {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  protected getMenuList(name: string): RsnMenuItem | null {\r\n    // ★Stitch V1.3対応  毎回viewの参照をgetするのはコストがかかるので、変数に退避\r\n    if (this.menuData == null) {\r\n      const viewerBase: ViewerBaseComponent | undefined = this.viewManagerService.get(ViewerViewTypes.ViewerBase) as\r\n        | ViewerBaseComponent\r\n        | undefined;\r\n      if (viewerBase == null) {\r\n        throw new ApplicationError('Unexpected null value for viewerBaseView.');\r\n      }\r\n      this.menuData = viewerBase.menuDataProvider;\r\n    }\r\n\r\n    // 指定されたキーのメニューデータだけ返却する\r\n    return this.findMenuItem(this.menuData, name);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { ExternalJsCallback } from '../../core/external-js-callback';\r\nimport { BaseModelLocator } from '../../core/locator/base-model-locator';\r\nimport { Logger } from '../../core/services/logger.service';\r\nimport { MessageDialogService } from '../../core/services/message-dialog.service';\r\nimport { ProgressManager } from '../../core/services/progress-manager.service';\r\nimport { StateUtilService } from '../../core/services/state-util.service';\r\nimport { WordingService } from '../../core/services/wording.service';\r\nimport * as CoreSelector from '../../core/store/core.selectors';\r\nimport { ViewerState } from '../store/viewer.state';\r\n\r\nimport { ViewerModelLocatorService } from './viewer-model-locator.service';\r\n\r\n/**\r\n * ビューアーサービス\r\n */\r\n@Injectable()\r\nexport class Sys0ViewerService extends ExternalJsCallback {\r\n  constructor(\r\n    protected wordingService: WordingService,\r\n    protected logger: Logger,\r\n    protected messageService: MessageDialogService,\r\n    protected store: Store<ViewerState>,\r\n    private stateUtil: StateUtilService,\r\n    private progressManager: ProgressManager\r\n  ) {\r\n    super(wordingService, logger, messageService, store);\r\n  }\r\n\r\n  /**\r\n   * メッセージ表示\r\n   *\r\n   * @param propertyId\r\n   * @param key メッセージキー\r\n   */\r\n  protected viewMessage(propertyId: string, key: any): void {\r\n    // プログレスバーを閉じる\r\n    this.progressManager.removeCommand(null);\r\n\r\n    super.viewMessage(propertyId, key);\r\n  }\r\n\r\n  /**\r\n   * ブラウザ×ボタン対応\r\n   *\r\n   * @returns ブラウザが閉じる前に表示するメッセージ\r\n   */\r\n  protected beforeUnload(): string | null {\r\n    const isStopped: boolean = this.stateUtil.getCurrentState(CoreSelector.getApplicationStop) || false;\r\n    if (!isStopped) {\r\n      const locator = ViewerModelLocatorService.getInstance();\r\n      if (locator.currentMode === BaseModelLocator.MODE_EDITABLE) {\r\n        if (locator.runningApp) {\r\n          return this.wordingService.get('warn.viewer.openapplication');\r\n        } else {\r\n          return this.wordingService.get('warn.viewer.editable');\r\n        }\r\n      } else if (locator.beforeUnloadShowMsgDocProp) {\r\n        return this.wordingService.get('warn.docprop.closeprop');\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { BaseMappingService } from '../../core/services/base-mapping.service';\r\nimport { ControllerService } from '../../core/services/controller.service';\r\nimport { ViewToCommandMap } from '../../core/services/i-view-command-map-mapping';\r\n\r\nimport { Logger } from '../../core/services/logger.service';\r\nimport { sharedViewToCommandMapDef } from '../../shared/containers/shared-mapping-def';\r\nimport { viewerViewToCommandMapDef } from '../containers/viewer-mapping-def';\r\n\r\n/**\r\n * ViewとCommandMapのマッピングを管理するサービス\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewerMappingService extends BaseMappingService {\r\n  /**\r\n   * ViewとCommandMapのマッピング（複数）\r\n   */\r\n  def: ViewToCommandMap[] = viewerViewToCommandMapDef.concat(sharedViewToCommandMapDef);\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor(controller: ControllerService, protected logger: Logger) {\r\n    super(controller, logger);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { BaseMenuMappingService } from '../../core/services/base-menu-mapping.service';\r\nimport { ControllerService } from '../../core/services/controller.service';\r\n\r\nimport { viewerMenuToActionMap } from './viewer-menu-to-action-map';\r\n\r\n/**\r\n * メニューキーとアクションのマッピング定義を管理するサービス\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewerMenuMappingService extends BaseMenuMappingService {\r\n  /**\r\n   * メニューキーとアクションのマッピング定義\r\n   */\r\n  menuToActionMap: Map<string, string> = viewerMenuToActionMap;\r\n\r\n  /**\r\n   * コンストラクタ\r\n   * @param controller コマンド生成サービス\r\n   */\r\n  constructor(controller: ControllerService) {\r\n    super();\r\n    controller.setMenuToActionMap(this.menuToActionMap);\r\n  }\r\n}\r\n","import { SharedCommand } from '../../shared/store/shared.actions';\r\nimport { ViewerCommand } from '../store/viewer.actions';\r\n\r\n/**\r\n * メニュー名とアクションを紐付けるマップ定義\r\n */\r\nexport const viewerMenuToActionMap: Map<string, string> = new Map<string, string>([\r\n  ['changeMode', SharedCommand.SharedActionTypes.ChangeMode],\r\n  ['print', SharedCommand.SharedActionTypes.Print],\r\n  ['property', SharedCommand.SharedActionTypes.Property],\r\n  ['update', SharedCommand.SharedActionTypes.Update],\r\n  ['replace', SharedCommand.SharedActionTypes.Replace],\r\n  ['add', SharedCommand.SharedActionTypes.Add],\r\n  ['del', SharedCommand.SharedActionTypes.Delete],\r\n  ['moveTop', ViewerCommand.ViewerActionTypes.MoveTop],\r\n  ['moveBottom', ViewerCommand.ViewerActionTypes.MoveBottom],\r\n  ['renameSection', ViewerCommand.ViewerActionTypes.RenameSection],\r\n  ['sectionDownload', SharedCommand.SharedActionTypes.SectionDownload],\r\n  ['openApplication', SharedCommand.SharedActionTypes.OpenApplication],\r\n  ['download', SharedCommand.SharedActionTypes.Download],\r\n  ['inform', SharedCommand.SharedActionTypes.Inform],\r\n  ['divide', SharedCommand.SharedActionTypes.Divide],\r\n  ['reCreateSubData', SharedCommand.SharedActionTypes.ReCreateSubData],\r\n  ['copyUrl', SharedCommand.SharedActionTypes.CopyUrl],\r\n  ['copyMobileUrl', SharedCommand.SharedActionTypes.CopyMobileUrl],\r\n  ['openFtsData', SharedCommand.SharedActionTypes.OpenFtsData]\r\n]);\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { BaseModelLocatorService } from '../../core/services/base-model-locator.service';\r\nimport { setLocatorService } from '../../core/services/locator-service-factory';\r\nimport { StateUtilService } from '../../core/services/state-util.service';\r\nimport { UrlService } from '../../core/services/url.service';\r\nimport { InjectorProvider } from '../../core/utils/injector-provider';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\n\r\n/**\r\n * ViewerModelLocatorを保持するサービス\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewerModelLocatorService extends BaseModelLocatorService {\r\n  locator: ViewerModelLocator;\r\n\r\n  /**\r\n   * staticな初期化処理\r\n   */\r\n  static initialize() {\r\n    // locator serviceを登録する\r\n    setLocatorService(ViewerModelLocatorService);\r\n  }\r\n\r\n  /**\r\n   * 唯一つのインスタンスを取得する。\r\n   */\r\n  static getInstance() {\r\n    return InjectorProvider.get().get(ViewerModelLocatorService).locator;\r\n  }\r\n\r\n  constructor(protected urlService: UrlService, protected stateUtilService: StateUtilService) {\r\n    super();\r\n    this.locator = new ViewerModelLocator(urlService, stateUtilService);\r\n  }\r\n}\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { ActionWithParentObject } from '../../core/store/action-interfaces';\r\nimport { ViewerEnableModel } from '../models/viewer-enable-model';\r\n\r\n/**\r\n * Commandで使用するActionの定義\r\n */\r\nexport namespace ViewerCommand {\r\n  /**\r\n   * viewerのActionのtype定義\r\n   */\r\n  // tslint:disable-next-line:no-shadowed-variable\r\n  export enum ViewerActionTypes {\r\n    MenuShow = '[Viewer] Action Type Menu Show',\r\n    MenuHide = '[Viewer] Action Type Menu Hide',\r\n    RenameSection = '[Viewer] Action Type Rename Section',\r\n    MoveTop = '[Viewer] Action Type Move Top',\r\n    MoveForward = '[Viewer] Action Type Move Forward',\r\n    MoveBackward = '[Viewer] Action Type Move Backward',\r\n    MoveBottom = '[Viewer] Action Type Move Bottom',\r\n    GetDocumentDetail = '[Viewer] Action Type Get Document Detail',\r\n    EditUploadSection = '[Viewer] Action Type Edit Upload Section',\r\n    EditUploadFts = '[Viewer] Action Type Edit Upload Fts',\r\n    ShowPdf = '[Viewer] Action Type Show Pdf',\r\n    TextInputFocusOut = '[Viewer] Action Type Text Input Focus Out',\r\n    InsertSection = '[Viewer] Action Type Insert Section',\r\n    ClickSelectButton = '[Viewer] Action Type Click Select Button',\r\n    ClickOkCancel = '[Viewer] Action Type Click OkCancel Button'\r\n  }\r\n\r\n  /**\r\n   * MenuShow\r\n   */\r\n  export class MenuShow implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.MenuShow;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * MenuHide\r\n   */\r\n  export class MenuHide implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.MenuHide;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * RenameSection\r\n   */\r\n  export class RenameSection implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.RenameSection;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * MoveTop\r\n   */\r\n  export class MoveTop implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.MoveTop;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * MoveForward\r\n   */\r\n  export class MoveForward implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.MoveForward;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * MoveBackward\r\n   */\r\n  export class MoveBackward implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.MoveBackward;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * MoveBottom\r\n   */\r\n  export class MoveBottom implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.MoveBottom;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * GetDocumentDetail\r\n   */\r\n  export class GetDocumentDetail implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.GetDocumentDetail;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * EditUploadSection\r\n   */\r\n  export class EditUploadSection implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.EditUploadSection;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * EditUploadFts\r\n   */\r\n  export class EditUploadFts implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.EditUploadFts;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   *PDF表示\r\n   */\r\n  export class ShowPdf implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.ShowPdf;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * TextInputFocusOut\r\n   */\r\n  export class TextInputFocusOut implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.TextInputFocusOut;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * InsertSection\r\n   */\r\n  export class InsertSection implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.InsertSection;\r\n    parentObject;\r\n    constructor(public payload?: undefined) {}\r\n  }\r\n\r\n  /**\r\n   * ClickSelectButton\r\n   */\r\n  export class ClickSelectButton implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.ClickSelectButton;\r\n    constructor(public payload: any, public parentObject: any) {}\r\n  }\r\n\r\n  /**\r\n   * ClickOkCancelButton\r\n   */\r\n  export class ClickOkCancelButton implements ActionWithParentObject {\r\n    readonly type = ViewerActionTypes.ClickOkCancel;\r\n    constructor(public payload: any, public parentObject: any) {}\r\n  }\r\n}\r\n\r\n/**\r\n * Command以外のViewerのActionのtype定義\r\n */\r\n/**\r\n * Command以外のViewerのActionのtype定義\r\n */\r\nexport enum ViewerActionTypes {\r\n  SetViewerEnableModel = '[Main] Set Viewer Enable Model',\r\n  ClickOkCancel = 'ClickOkCancel'\r\n}\r\n\r\n/**\r\n * ViewerEnableModelに書き込むAction\r\n */\r\nexport class SetViewerEnableModel implements Action {\r\n  readonly type = ViewerActionTypes.SetViewerEnableModel;\r\n  constructor(public payload: ViewerEnableModel) {}\r\n}\r\n\r\nexport type ViewerActionsUnion =\r\n  | ViewerCommand.MenuShow\r\n  | ViewerCommand.MenuHide\r\n  | ViewerCommand.RenameSection\r\n  | ViewerCommand.MoveTop\r\n  | ViewerCommand.MoveForward\r\n  | ViewerCommand.MoveBackward\r\n  | ViewerCommand.MoveBottom\r\n  | ViewerCommand.GetDocumentDetail\r\n  | ViewerCommand.EditUploadSection\r\n  | ViewerCommand.EditUploadFts\r\n  | ViewerCommand.ShowPdf\r\n  | ViewerCommand.TextInputFocusOut\r\n  | ViewerCommand.InsertSection\r\n  | ViewerCommand.ClickSelectButton\r\n  | ViewerCommand.ClickOkCancelButton\r\n  | SetViewerEnableModel;\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, Effect } from '@ngrx/effects';\r\n\r\nimport { ControllerService } from '../../core/services/controller.service';\r\n\r\nimport { ViewerCommand } from './viewer.actions';\r\n\r\n/**\r\n * viewerモジュールに定義されたActionの副作用を定義するEffectsクラス\r\n */\r\n@Injectable()\r\nexport class ViewerEffects {\r\n  @Effect({ dispatch: false })\r\n  menuShow$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.MenuShow);\r\n  @Effect({ dispatch: false })\r\n  menuHide$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.MenuHide);\r\n  @Effect({ dispatch: false })\r\n  renameSection$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.RenameSection);\r\n  @Effect({ dispatch: false })\r\n  moveTop$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.MoveTop);\r\n  @Effect({ dispatch: false })\r\n  moveForward$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.MoveForward);\r\n  @Effect({ dispatch: false })\r\n  moveBackward$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.MoveBackward);\r\n  @Effect({ dispatch: false })\r\n  moveBottom$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.MoveBottom);\r\n  @Effect({ dispatch: false })\r\n  getDocumentDetail$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.GetDocumentDetail);\r\n  @Effect({ dispatch: false })\r\n  editUploadSection$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.EditUploadSection);\r\n  @Effect({ dispatch: false })\r\n  editUploadFts$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.EditUploadFts);\r\n  @Effect({ dispatch: false })\r\n  showPdf$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.ShowPdf);\r\n  @Effect({ dispatch: false })\r\n  textInputFocusOut$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.TextInputFocusOut);\r\n  @Effect({ dispatch: false })\r\n  insertSection$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.InsertSection);\r\n  @Effect({ dispatch: false })\r\n  clickSelectButton$ = this.controller.doSideEffect(this.actions$, ViewerCommand.ViewerActionTypes.ClickSelectButton);\r\n\r\n  constructor(private actions$: Actions, private controller: ControllerService) {}\r\n}\r\n","import * as _ from 'lodash';\r\n\r\nimport { getSharedInitialState } from '../../shared/store/shared.initial-state';\r\nimport { ViewerModelLocator } from '../locator/viewer-model-locator';\r\n\r\nimport { ViewerState } from './viewer.state';\r\n\r\n/**\r\n * Storeの初期状態設定\r\n */\r\nexport function getViewerInitialState(): ViewerState {\r\n  const viewerInitialState = {\r\n    viewer: {}\r\n  };\r\n\r\n  const sharedState = getSharedInitialState();\r\n  const wholeState: ViewerState = { ...sharedState, ...viewerInitialState };\r\n  return wholeState;\r\n}\r\n","import { CoreActionsUnion } from '../../core/store/core.actions';\r\nimport { SharedActionsUnion } from '../../shared/store/shared.actions';\r\n\r\nimport { sharedReducer } from '../../shared/store/shared.reducer';\r\n\r\nimport { ViewerActionsUnion, ViewerActionTypes } from './viewer.actions';\r\nimport { ViewerState } from './viewer.state';\r\n\r\n/**\r\n * ビューアー画面のActionを処理するreducer\r\n * @param state 処理前のstate\r\n * @param action Action\r\n */\r\nexport function viewerReducer(state: ViewerState, action: ViewerActionsUnion | SharedActionsUnion | CoreActionsUnion): ViewerState {\r\n  switch (action.type) {\r\n    // ViewerEnableModelに書き込むアクション\r\n    case ViewerActionTypes.SetViewerEnableModel: {\r\n      return {\r\n        ...state,\r\n        viewer: {\r\n          ...state.viewer,\r\n          enableModel: action.payload\r\n        }\r\n      };\r\n    }\r\n    default: {\r\n      const sharedState = sharedReducer(state, action as SharedActionsUnion | CoreActionsUnion);\r\n      const newState: ViewerState = { ...state, ...sharedState };\r\n      return newState;\r\n    }\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { ViewerComponent } from './containers/viewer/viewer.component';\r\n\r\n/**\r\n * ViewerModuleのルーティング設定\r\n */\r\nconst viewerRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ViewerComponent\r\n  }\r\n];\r\n\r\n/**\r\n * ViewerModuleのルーティングモジュール\r\n */\r\n@NgModule({\r\n  imports: [CommonModule, RouterModule.forChild(viewerRoutes)],\r\n  exports: [RouterModule],\r\n  declarations: []\r\n})\r\nexport class ViewerRoutingModule {}\r\n","import { Injector, NgModule } from '@angular/core';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { StoreModule } from '@ngrx/store';\r\n\r\nimport { ExternalJsCallback } from '../core/external-js-callback';\r\nimport { StoreConst } from '../core/store/store-const';\r\nimport { InjectorProvider } from '../core/utils/injector-provider';\r\nimport { ProgressDialogComponent } from '../shared/components/progress-dialog/progress-dialog.component';\r\nimport { SharedModule } from '../shared/shared.module';\r\n\r\nimport { ConfirmUpdateDialogComponent } from './containers/dialogs/confirm-update-dialog/confirm-update-dialog.component';\r\nimport { DivideSectionDialogComponent } from './containers/dialogs/divide-section-dialog/divide-section-dialog.component';\r\nimport { EditConfirmDialogComponent } from './containers/dialogs/edit-confirm-dialog/edit-confirm-dialog.component';\r\nimport { FullTextDialogComponent } from './containers/dialogs/full-text-dialog/full-text-dialog.component';\r\nimport { ViewerCirculateDialogComponent } from './containers/dialogs/viewer-circulate-dialog/viewer-circulate-dialog.component';\r\nimport { MainViewComponent } from './containers/main-view/main-view.component';\r\nimport { MessageAreaViewComponent } from './containers/message-area-view/message-area-view.component';\r\nimport { PdfViewComponent } from './containers/pdf/pdf-view.component';\r\nimport { SectionViewComponent } from './containers/section/section-view.component';\r\nimport { ThumbnailViewComponent } from './containers/thumbnail/thumbnail-view.component';\r\nimport { ViewerBaseComponent } from './containers/viewer-base/viewer-base.component';\r\nimport { ViewerComponent } from './containers/viewer/viewer.component';\r\nimport { Sys0ViewerService } from './services/sys0-viewer.service';\r\nimport { ViewerMappingService } from './services/viewer-mapping.service';\r\nimport { ViewerMenuMappingService } from './services/viewer-menu-mapping.service';\r\nimport { ViewerEffects } from './store/viewer.effects';\r\nimport { getViewerInitialState } from './store/viewer.initial-state';\r\nimport { viewerReducer } from './store/viewer.reducer';\r\nimport { ViewerRoutingModule } from './viewer-routing.module';\r\n\r\n/**\r\n * ビューアの機能モジュール。遅延ローディングします。\r\n */\r\n@NgModule({\r\n  // SharedModuleで再エクスポートすれば、このimports:に列挙する必要はありません\r\n  imports: [\r\n    SharedModule,\r\n    ViewerRoutingModule,\r\n    StoreModule.forFeature(StoreConst.FEATURE_NAME, viewerReducer, {\r\n      initialState: getViewerInitialState\r\n    }),\r\n    EffectsModule.forFeature([ViewerEffects])\r\n  ],\r\n  declarations: [\r\n    ViewerComponent,\r\n    ViewerBaseComponent,\r\n    ThumbnailViewComponent,\r\n    SectionViewComponent,\r\n    PdfViewComponent,\r\n    ConfirmUpdateDialogComponent,\r\n    DivideSectionDialogComponent,\r\n    EditConfirmDialogComponent,\r\n    FullTextDialogComponent,\r\n    ViewerCirculateDialogComponent,\r\n    MessageAreaViewComponent,\r\n    MainViewComponent\r\n  ],\r\n  providers: [{ provide: ExternalJsCallback, useClass: Sys0ViewerService }],\r\n  entryComponents: [ProgressDialogComponent, DivideSectionDialogComponent, EditConfirmDialogComponent, ConfirmUpdateDialogComponent]\r\n})\r\nexport class ViewerModule {\r\n  constructor(injector: Injector, mapping: ViewerMappingService, menuMapping: ViewerMenuMappingService) {\r\n    InjectorProvider.set(injector);\r\n    // tslint:disable-next-line:no-unused-expression\r\n    mapping; // MappingServiceのインスタンスを生成させるためのダミー\r\n    // tslint:disable-next-line:no-unused-expression\r\n    menuMapping; // MenuMappingServiceのインスタンスを生成させるためのダミー\r\n  }\r\n}\r\n"],"sourceRoot":""}