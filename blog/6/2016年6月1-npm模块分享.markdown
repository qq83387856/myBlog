<!--
author: 小莫
date: 2016-06-01
title: npm模块分享
tags: npm
category: npm
status: publish
summary: 平时自己用的npm模块也不算少了，其实网上有很多牛人开发的npm模块都很好，希望不要被埋没了。
-->

## 一、 实用的模块

*  
 [thunder-vip](https://github.com/nswbmw/thunder-vip)  

  获取最新可用的迅雷 vip 账号。

  解决什么：  
  不用每次打开网站去找号。。

  ##### 用法：

  `$ thunder`  
  or

  ```
    var thunderVip = require('thunder-vip');

    thunderVip(function (err, accounts) {
    console.log(accounts);
    });
  ```

  截图  

  ![1](https://dn-cnode.qbox.me/FskKgd_Epv4IYYh0waATFFHoD7g9)


*  
[npm-user-downloads](https://github.com/nswbmw/npm-user-downloads)  

  查看 npm 用户某个时间段内所有模块的下载量，按从高到低排名。

  解决什么：

  起初是想看自己的那些模块下载量多，好重点维护。。

  用法：

  `$ nud hupengbest last-month --limit=20`

  截图：

  ![1](https://dn-cnode.qbox.me/FhJDMWtAwWxgkXsEMWsfIz4XZ3Jl)

## 二、koa开发模块

*  [co](https://npm.taobao.org/package/co)  
作用：异步控制  

1 栗子

```
	co(function* () {
	  var result = yield Promise.resolve(true);
	  return result;
	}).then(function (value) {
	  console.log(value);
	}, function (err) {
	  console.error(err.stack);
	});
```

2 如果你想把一个 co-generator-function 转成真实的functionu并返回一个promise 可以使用`co.wrap(fn*)`

```
	var fn = co.wrap(function* (val) {
	  return yield Promise.resolve(val);
	});
	
	fn(true).then(function (val) {
	
	});
```

3 完整的example  

```
	var co = require('co');
	
	co(function *(){
	  // yield any promise
	  var result = yield Promise.resolve(true);
	}).catch(onerror);
	
	co(function *(){
	  // resolve multiple promises in parallel
	  var a = Promise.resolve(1);
	  var b = Promise.resolve(2);
	  var c = Promise.resolve(3);
	  var res = yield [a, b, c];
	  console.log(res);
	  // => [1, 2, 3]
	}).catch(onerror);
	
	// errors can be try/catched
	co(function *(){
	  try {
	    yield Promise.reject(new Error('boom'));
	  } catch (err) {
	    console.error(err.message); // "boom"
	 }
	}).catch(onerror);
	
	function onerror(err) {
	  // log any uncaught errors
	  // co will not throw any errors you do not handle!!!
	  // HANDLE ALL YOUR ERRORS!!!
	  console.error(err.stack);
	}
```

4 api  

`co(fn*).then( val => )`  
解决一个generator然后返回一个promise

```
	co(function* () {
	  return yield Promise.resolve(true);
	}).then(function (val) {
	  console.log(val);
	}, function (err) {
	  console.error(err.stack);
	});
```

`var fn = co.wrap(fn*)`  
将一个generator转成普通的function并返回一个promise  

```
	var fn = co.wrap(function* (val) {
	  return yield Promise.resolve(val);
	});
	
	fn(true).then(function (val) {
	
	});
```

*  